var $k=Object.defineProperty;var Qk=(t,n,e)=>n in t?$k(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var Zk=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports);var pf=(t,n,e)=>Qk(t,typeof n!="symbol"?n+"":n,e);var FH=Zk((aV,FA)=>{(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();var Om={exports:{}},Yu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w1;function Jk(){if(w1)return Yu;w1=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function e(r,a,o){var s=null;if(o!==void 0&&(s=""+o),a.key!==void 0&&(s=""+a.key),"key"in a){o={};for(var l in a)l!=="key"&&(o[l]=a[l])}else o=a;return a=o.ref,{$$typeof:t,type:r,key:s,ref:a!==void 0?a:null,props:o}}return Yu.Fragment=n,Yu.jsx=e,Yu.jsxs=e,Yu}var x1;function eN(){return x1||(x1=1,Om.exports=Jk()),Om.exports}var E=eN(),Mm={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S1;function tN(){if(S1)return Ge;S1=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function v(I){return I===null||typeof I!="object"?null:(I=p&&I[p]||I["@@iterator"],typeof I=="function"?I:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function S(I,H,Q){this.props=I,this.context=H,this.refs=x,this.updater=Q||g}S.prototype.isReactComponent={},S.prototype.setState=function(I,H){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,H,"setState")},S.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function w(){}w.prototype=S.prototype;function T(I,H,Q){this.props=I,this.context=H,this.refs=x,this.updater=Q||g}var A=T.prototype=new w;A.constructor=T,y(A,S.prototype),A.isPureReactComponent=!0;var C=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function N(I,H,Q,J,re,ie){return Q=ie.ref,{$$typeof:t,type:I,key:H,ref:Q!==void 0?Q:null,props:ie}}function O(I,H){return N(I.type,H,void 0,void 0,void 0,I.props)}function D(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function M(I){var H={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(Q){return H[Q]})}var P=/\/+/g;function F(I,H){return typeof I=="object"&&I!==null&&I.key!=null?M(""+I.key):H.toString(36)}function U(){}function W(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(U,U):(I.status="pending",I.then(function(H){I.status==="pending"&&(I.status="fulfilled",I.value=H)},function(H){I.status==="pending"&&(I.status="rejected",I.reason=H)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function Y(I,H,Q,J,re){var ie=typeof I;(ie==="undefined"||ie==="boolean")&&(I=null);var pe=!1;if(I===null)pe=!0;else switch(ie){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(I.$$typeof){case t:case n:pe=!0;break;case h:return pe=I._init,Y(pe(I._payload),H,Q,J,re)}}if(pe)return re=re(I),pe=J===""?"."+F(I,0):J,C(re)?(Q="",pe!=null&&(Q=pe.replace(P,"$&/")+"/"),Y(re,H,Q,"",function(Ee){return Ee})):re!=null&&(D(re)&&(re=O(re,Q+(re.key==null||I&&I.key===re.key?"":(""+re.key).replace(P,"$&/")+"/")+pe)),H.push(re)),1;pe=0;var Se=J===""?".":J+":";if(C(I))for(var xe=0;xe<I.length;xe++)J=I[xe],ie=Se+F(J,xe),pe+=Y(J,H,Q,ie,re);else if(xe=v(I),typeof xe=="function")for(I=xe.call(I),xe=0;!(J=I.next()).done;)J=J.value,ie=Se+F(J,xe++),pe+=Y(J,H,Q,ie,re);else if(ie==="object"){if(typeof I.then=="function")return Y(W(I),H,Q,J,re);throw H=String(I),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return pe}function z(I,H,Q){if(I==null)return I;var J=[],re=0;return Y(I,J,"","",function(ie){return H.call(Q,ie,re++)}),J}function X(I){if(I._status===-1){var H=I._result;H=H(),H.then(function(Q){(I._status===0||I._status===-1)&&(I._status=1,I._result=Q)},function(Q){(I._status===0||I._status===-1)&&(I._status=2,I._result=Q)}),I._status===-1&&(I._status=0,I._result=H)}if(I._status===1)return I._result.default;throw I._result}var K=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function V(){}return Ge.Children={map:z,forEach:function(I,H,Q){z(I,function(){H.apply(this,arguments)},Q)},count:function(I){var H=0;return z(I,function(){H++}),H},toArray:function(I){return z(I,function(H){return H})||[]},only:function(I){if(!D(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Ge.Component=S,Ge.Fragment=e,Ge.Profiler=a,Ge.PureComponent=T,Ge.StrictMode=r,Ge.Suspense=c,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(I){return R.H.useMemoCache(I)}},Ge.cache=function(I){return function(){return I.apply(null,arguments)}},Ge.cloneElement=function(I,H,Q){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var J=y({},I.props),re=I.key,ie=void 0;if(H!=null)for(pe in H.ref!==void 0&&(ie=void 0),H.key!==void 0&&(re=""+H.key),H)!k.call(H,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&H.ref===void 0||(J[pe]=H[pe]);var pe=arguments.length-2;if(pe===1)J.children=Q;else if(1<pe){for(var Se=Array(pe),xe=0;xe<pe;xe++)Se[xe]=arguments[xe+2];J.children=Se}return N(I.type,re,void 0,void 0,ie,J)},Ge.createContext=function(I){return I={$$typeof:s,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:o,_context:I},I},Ge.createElement=function(I,H,Q){var J,re={},ie=null;if(H!=null)for(J in H.key!==void 0&&(ie=""+H.key),H)k.call(H,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(re[J]=H[J]);var pe=arguments.length-2;if(pe===1)re.children=Q;else if(1<pe){for(var Se=Array(pe),xe=0;xe<pe;xe++)Se[xe]=arguments[xe+2];re.children=Se}if(I&&I.defaultProps)for(J in pe=I.defaultProps,pe)re[J]===void 0&&(re[J]=pe[J]);return N(I,ie,void 0,void 0,null,re)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(I){return{$$typeof:l,render:I}},Ge.isValidElement=D,Ge.lazy=function(I){return{$$typeof:h,_payload:{_status:-1,_result:I},_init:X}},Ge.memo=function(I,H){return{$$typeof:f,type:I,compare:H===void 0?null:H}},Ge.startTransition=function(I){var H=R.T,Q={};R.T=Q;try{var J=I(),re=R.S;re!==null&&re(Q,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(V,K)}catch(ie){K(ie)}finally{R.T=H}},Ge.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ge.use=function(I){return R.H.use(I)},Ge.useActionState=function(I,H,Q){return R.H.useActionState(I,H,Q)},Ge.useCallback=function(I,H){return R.H.useCallback(I,H)},Ge.useContext=function(I){return R.H.useContext(I)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(I,H){return R.H.useDeferredValue(I,H)},Ge.useEffect=function(I,H,Q){var J=R.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(I,H)},Ge.useId=function(){return R.H.useId()},Ge.useImperativeHandle=function(I,H,Q){return R.H.useImperativeHandle(I,H,Q)},Ge.useInsertionEffect=function(I,H){return R.H.useInsertionEffect(I,H)},Ge.useLayoutEffect=function(I,H){return R.H.useLayoutEffect(I,H)},Ge.useMemo=function(I,H){return R.H.useMemo(I,H)},Ge.useOptimistic=function(I,H){return R.H.useOptimistic(I,H)},Ge.useReducer=function(I,H,Q){return R.H.useReducer(I,H,Q)},Ge.useRef=function(I){return R.H.useRef(I)},Ge.useState=function(I){return R.H.useState(I)},Ge.useSyncExternalStore=function(I,H,Q){return R.H.useSyncExternalStore(I,H,Q)},Ge.useTransition=function(){return R.H.useTransition()},Ge.version="19.1.0",Ge}var E1;function Bd(){return E1||(E1=1,Mm.exports=tN()),Mm.exports}var L=Bd(),Im={exports:{}},Ku={},Bm={exports:{}},Fm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C1;function nN(){return C1||(C1=1,function(t){function n(z,X){var K=z.length;z.push(X);e:for(;0<K;){var V=K-1>>>1,I=z[V];if(0<a(I,X))z[V]=X,z[K]=I,K=V;else break e}}function e(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var X=z[0],K=z.pop();if(K!==X){z[0]=K;e:for(var V=0,I=z.length,H=I>>>1;V<H;){var Q=2*(V+1)-1,J=z[Q],re=Q+1,ie=z[re];if(0>a(J,K))re<I&&0>a(ie,J)?(z[V]=ie,z[re]=K,V=re):(z[V]=J,z[Q]=K,V=Q);else if(re<I&&0>a(ie,K))z[V]=ie,z[re]=K,V=re;else break e}}return X}function a(z,X){var K=z.sortIndex-X.sortIndex;return K!==0?K:z.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],f=[],h=1,p=null,v=3,g=!1,y=!1,x=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function C(z){for(var X=e(f);X!==null;){if(X.callback===null)r(f);else if(X.startTime<=z)r(f),X.sortIndex=X.expirationTime,n(c,X);else break;X=e(f)}}function R(z){if(x=!1,C(z),!y)if(e(c)!==null)y=!0,k||(k=!0,F());else{var X=e(f);X!==null&&Y(R,X.startTime-z)}}var k=!1,N=-1,O=5,D=-1;function M(){return S?!0:!(t.unstable_now()-D<O)}function P(){if(S=!1,k){var z=t.unstable_now();D=z;var X=!0;try{e:{y=!1,x&&(x=!1,T(N),N=-1),g=!0;var K=v;try{t:{for(C(z),p=e(c);p!==null&&!(p.expirationTime>z&&M());){var V=p.callback;if(typeof V=="function"){p.callback=null,v=p.priorityLevel;var I=V(p.expirationTime<=z);if(z=t.unstable_now(),typeof I=="function"){p.callback=I,C(z),X=!0;break t}p===e(c)&&r(c),C(z)}else r(c);p=e(c)}if(p!==null)X=!0;else{var H=e(f);H!==null&&Y(R,H.startTime-z),X=!1}}break e}finally{p=null,v=K,g=!1}X=void 0}}finally{X?F():k=!1}}}var F;if(typeof A=="function")F=function(){A(P)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,W=U.port2;U.port1.onmessage=P,F=function(){W.postMessage(null)}}else F=function(){w(P,0)};function Y(z,X){N=w(function(){z(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(z){switch(v){case 1:case 2:case 3:var X=3;break;default:X=v}var K=v;v=X;try{return z()}finally{v=K}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(z,X){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var K=v;v=z;try{return X()}finally{v=K}},t.unstable_scheduleCallback=function(z,X,K){var V=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?V+K:V):K=V,z){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=K+I,z={id:h++,callback:X,priorityLevel:z,startTime:K,expirationTime:I,sortIndex:-1},K>V?(z.sortIndex=K,n(f,z),e(c)===null&&z===e(f)&&(x?(T(N),N=-1):x=!0,Y(R,K-V))):(z.sortIndex=I,n(c,z),y||g||(y=!0,k||(k=!0,F()))),z},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(z){var X=v;return function(){var K=v;v=X;try{return z.apply(this,arguments)}finally{v=K}}}}(Fm)),Fm}var _1;function rN(){return _1||(_1=1,Bm.exports=nN()),Bm.exports}var Pm={exports:{}},wn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R1;function aN(){if(R1)return wn;R1=1;var t=Bd();function n(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(n(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(c,f,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:c,containerInfo:f,implementation:h}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,wn.createPortal=function(c,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(n(299));return o(c,f,null,h)},wn.flushSync=function(c){var f=s.T,h=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=f,r.p=h,r.d.f()}},wn.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},wn.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},wn.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var h=f.as,p=l(h,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,g=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:g}):h==="script"&&r.d.X(c,{crossOrigin:p,integrity:v,fetchPriority:g,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},wn.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=l(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},wn.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,p=l(h,f.crossOrigin);r.d.L(c,h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},wn.preloadModule=function(c,f){if(typeof c=="string")if(f){var h=l(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},wn.requestFormReset=function(c){r.d.r(c)},wn.unstable_batchedUpdates=function(c,f){return c(f)},wn.useFormState=function(c,f,h){return s.H.useFormState(c,f,h)},wn.useFormStatus=function(){return s.H.useHostTransitionStatus()},wn.version="19.1.0",wn}var A1;function oN(){if(A1)return Pm.exports;A1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),Pm.exports=aN(),Pm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1;function iN(){if(T1)return Ku;T1=1;var t=rN(),n=Bd(),e=oN();function r(i){var u="https://react.dev/errors/"+i;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+i+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var u=i,d=i;if(i.alternate)for(;u.return;)u=u.return;else{i=u;do u=i,(u.flags&4098)!==0&&(d=u.return),i=u.return;while(i)}return u.tag===3?d:null}function s(i){if(i.tag===13){var u=i.memoizedState;if(u===null&&(i=i.alternate,i!==null&&(u=i.memoizedState)),u!==null)return u.dehydrated}return null}function l(i){if(o(i)!==i)throw Error(r(188))}function c(i){var u=i.alternate;if(!u){if(u=o(i),u===null)throw Error(r(188));return u!==i?null:i}for(var d=i,m=u;;){var b=d.return;if(b===null)break;var _=b.alternate;if(_===null){if(m=b.return,m!==null){d=m;continue}break}if(b.child===_.child){for(_=b.child;_;){if(_===d)return l(b),i;if(_===m)return l(b),u;_=_.sibling}throw Error(r(188))}if(d.return!==m.return)d=b,m=_;else{for(var B=!1,j=b.child;j;){if(j===d){B=!0,d=b,m=_;break}if(j===m){B=!0,m=b,d=_;break}j=j.sibling}if(!B){for(j=_.child;j;){if(j===d){B=!0,d=_,m=b;break}if(j===m){B=!0,m=_,d=b;break}j=j.sibling}if(!B)throw Error(r(189))}}if(d.alternate!==m)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?i:u}function f(i){var u=i.tag;if(u===5||u===26||u===27||u===6)return i;for(i=i.child;i!==null;){if(u=f(i),u!==null)return u;i=i.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),A=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function F(i){return i===null||typeof i!="object"?null:(i=P&&i[P]||i["@@iterator"],typeof i=="function"?i:null)}var U=Symbol.for("react.client.reference");function W(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===U?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case y:return"Fragment";case S:return"Profiler";case x:return"StrictMode";case R:return"Suspense";case k:return"SuspenseList";case D:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case g:return"Portal";case A:return(i.displayName||"Context")+".Provider";case T:return(i._context.displayName||"Context")+".Consumer";case C:var u=i.render;return i=i.displayName,i||(i=u.displayName||u.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case N:return u=i.displayName||null,u!==null?u:W(i.type)||"Memo";case O:u=i._payload,i=i._init;try{return W(i(u))}catch{}}return null}var Y=Array.isArray,z=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},V=[],I=-1;function H(i){return{current:i}}function Q(i){0>I||(i.current=V[I],V[I]=null,I--)}function J(i,u){I++,V[I]=i.current,i.current=u}var re=H(null),ie=H(null),pe=H(null),Se=H(null);function xe(i,u){switch(J(pe,u),J(ie,i),J(re,null),u.nodeType){case 9:case 11:i=(i=u.documentElement)&&(i=i.namespaceURI)?Yx(i):0;break;default:if(i=u.tagName,u=u.namespaceURI)u=Yx(u),i=Kx(u,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Q(re),J(re,i)}function Ee(){Q(re),Q(ie),Q(pe)}function de(i){i.memoizedState!==null&&J(Se,i);var u=re.current,d=Kx(u,i.type);u!==d&&(J(ie,i),J(re,d))}function we(i){ie.current===i&&(Q(re),Q(ie)),Se.current===i&&(Q(Se),Hu._currentValue=K)}var Ce=Object.prototype.hasOwnProperty,Ae=t.unstable_scheduleCallback,Fe=t.unstable_cancelCallback,ot=t.unstable_shouldYield,Ye=t.unstable_requestPaint,it=t.unstable_now,Zt=t.unstable_getCurrentPriorityLevel,Lt=t.unstable_ImmediatePriority,Ar=t.unstable_UserBlockingPriority,un=t.unstable_NormalPriority,fr=t.unstable_LowPriority,dr=t.unstable_IdlePriority,Wa=t.log,Tr=t.unstable_setDisableYieldValue,pa=null,jt=null;function Ht(i){if(typeof Wa=="function"&&Tr(i),jt&&typeof jt.setStrictMode=="function")try{jt.setStrictMode(pa,i)}catch{}}var ln=Math.clz32?Math.clz32:wh,yh=Math.log,bh=Math.LN2;function wh(i){return i>>>=0,i===0?32:31-(yh(i)/bh|0)|0}var Ga=256,Xa=4194304;function kr(i){var u=i&42;if(u!==0)return u;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function nc(i,u,d){var m=i.pendingLanes;if(m===0)return 0;var b=0,_=i.suspendedLanes,B=i.pingedLanes;i=i.warmLanes;var j=m&134217727;return j!==0?(m=j&~_,m!==0?b=kr(m):(B&=j,B!==0?b=kr(B):d||(d=j&~i,d!==0&&(b=kr(d))))):(j=m&~_,j!==0?b=kr(j):B!==0?b=kr(B):d||(d=m&~i,d!==0&&(b=kr(d)))),b===0?0:u!==0&&u!==b&&(u&_)===0&&(_=b&-b,d=u&-u,_>=d||_===32&&(d&4194048)!==0)?u:b}function Zs(i,u){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&u)===0}function PA(i,u){switch(i){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D0(){var i=Ga;return Ga<<=1,(Ga&4194048)===0&&(Ga=256),i}function O0(){var i=Xa;return Xa<<=1,(Xa&62914560)===0&&(Xa=4194304),i}function xh(i){for(var u=[],d=0;31>d;d++)u.push(i);return u}function Js(i,u){i.pendingLanes|=u,u!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function LA(i,u,d,m,b,_){var B=i.pendingLanes;i.pendingLanes=d,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=d,i.entangledLanes&=d,i.errorRecoveryDisabledLanes&=d,i.shellSuspendCounter=0;var j=i.entanglements,$=i.expirationTimes,oe=i.hiddenUpdates;for(d=B&~d;0<d;){var ve=31-ln(d),ye=1<<ve;j[ve]=0,$[ve]=-1;var se=oe[ve];if(se!==null)for(oe[ve]=null,ve=0;ve<se.length;ve++){var ue=se[ve];ue!==null&&(ue.lane&=-536870913)}d&=~ye}m!==0&&M0(i,m,0),_!==0&&b===0&&i.tag!==0&&(i.suspendedLanes|=_&~(B&~u))}function M0(i,u,d){i.pendingLanes|=u,i.suspendedLanes&=~u;var m=31-ln(u);i.entangledLanes|=u,i.entanglements[m]=i.entanglements[m]|1073741824|d&4194090}function I0(i,u){var d=i.entangledLanes|=u;for(i=i.entanglements;d;){var m=31-ln(d),b=1<<m;b&u|i[m]&u&&(i[m]|=u),d&=~b}}function Sh(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Eh(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function B0(){var i=X.p;return i!==0?i:(i=window.event,i===void 0?32:p1(i.type))}function jA(i,u){var d=X.p;try{return X.p=i,u()}finally{X.p=d}}var Ya=Math.random().toString(36).slice(2),yn="__reactFiber$"+Ya,Mn="__reactProps$"+Ya,ki="__reactContainer$"+Ya,Ch="__reactEvents$"+Ya,zA="__reactListeners$"+Ya,UA="__reactHandles$"+Ya,F0="__reactResources$"+Ya,eu="__reactMarker$"+Ya;function _h(i){delete i[yn],delete i[Mn],delete i[Ch],delete i[zA],delete i[UA]}function Ni(i){var u=i[yn];if(u)return u;for(var d=i.parentNode;d;){if(u=d[ki]||d[yn]){if(d=u.alternate,u.child!==null||d!==null&&d.child!==null)for(i=Jx(i);i!==null;){if(d=i[yn])return d;i=Jx(i)}return u}i=d,d=i.parentNode}return null}function Di(i){if(i=i[yn]||i[ki]){var u=i.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return i}return null}function tu(i){var u=i.tag;if(u===5||u===26||u===27||u===6)return i.stateNode;throw Error(r(33))}function Oi(i){var u=i[F0];return u||(u=i[F0]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Jt(i){i[eu]=!0}var P0=new Set,L0={};function Bo(i,u){Mi(i,u),Mi(i+"Capture",u)}function Mi(i,u){for(L0[i]=u,i=0;i<u.length;i++)P0.add(u[i])}var qA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),j0={},z0={};function HA(i){return Ce.call(z0,i)?!0:Ce.call(j0,i)?!1:qA.test(i)?z0[i]=!0:(j0[i]=!0,!1)}function rc(i,u,d){if(HA(u))if(d===null)i.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":i.removeAttribute(u);return;case"boolean":var m=u.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){i.removeAttribute(u);return}}i.setAttribute(u,""+d)}}function ac(i,u,d){if(d===null)i.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttribute(u,""+d)}}function ma(i,u,d,m){if(m===null)i.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(d);return}i.setAttributeNS(u,d,""+m)}}var Rh,U0;function Ii(i){if(Rh===void 0)try{throw Error()}catch(d){var u=d.stack.trim().match(/\n( *(at )?)/);Rh=u&&u[1]||"",U0=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rh+i+U0}var Ah=!1;function Th(i,u){if(!i||Ah)return"";Ah=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(u){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(ue){var se=ue}Reflect.construct(i,[],ye)}else{try{ye.call()}catch(ue){se=ue}i.call(ye.prototype)}}else{try{throw Error()}catch(ue){se=ue}(ye=i())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(ue){if(ue&&se&&typeof ue.stack=="string")return[ue.stack,se.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=m.DetermineComponentFrameRoot(),B=_[0],j=_[1];if(B&&j){var $=B.split(`
`),oe=j.split(`
`);for(b=m=0;m<$.length&&!$[m].includes("DetermineComponentFrameRoot");)m++;for(;b<oe.length&&!oe[b].includes("DetermineComponentFrameRoot");)b++;if(m===$.length||b===oe.length)for(m=$.length-1,b=oe.length-1;1<=m&&0<=b&&$[m]!==oe[b];)b--;for(;1<=m&&0<=b;m--,b--)if($[m]!==oe[b]){if(m!==1||b!==1)do if(m--,b--,0>b||$[m]!==oe[b]){var ve=`
`+$[m].replace(" at new "," at ");return i.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",i.displayName)),ve}while(1<=m&&0<=b);break}}}finally{Ah=!1,Error.prepareStackTrace=d}return(d=i?i.displayName||i.name:"")?Ii(d):""}function VA(i){switch(i.tag){case 26:case 27:case 5:return Ii(i.type);case 16:return Ii("Lazy");case 13:return Ii("Suspense");case 19:return Ii("SuspenseList");case 0:case 15:return Th(i.type,!1);case 11:return Th(i.type.render,!1);case 1:return Th(i.type,!0);case 31:return Ii("Activity");default:return""}}function q0(i){try{var u="";do u+=VA(i),i=i.return;while(i);return u}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function hr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function H0(i){var u=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function WA(i){var u=H0(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,u),m=""+i[u];if(!i.hasOwnProperty(u)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var b=d.get,_=d.set;return Object.defineProperty(i,u,{configurable:!0,get:function(){return b.call(this)},set:function(B){m=""+B,_.call(this,B)}}),Object.defineProperty(i,u,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(B){m=""+B},stopTracking:function(){i._valueTracker=null,delete i[u]}}}}function oc(i){i._valueTracker||(i._valueTracker=WA(i))}function V0(i){if(!i)return!1;var u=i._valueTracker;if(!u)return!0;var d=u.getValue(),m="";return i&&(m=H0(i)?i.checked?"true":"false":i.value),i=m,i!==d?(u.setValue(i),!0):!1}function ic(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var GA=/[\n"\\]/g;function pr(i){return i.replace(GA,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function kh(i,u,d,m,b,_,B,j){i.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?i.type=B:i.removeAttribute("type"),u!=null?B==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+hr(u)):i.value!==""+hr(u)&&(i.value=""+hr(u)):B!=="submit"&&B!=="reset"||i.removeAttribute("value"),u!=null?Nh(i,B,hr(u)):d!=null?Nh(i,B,hr(d)):m!=null&&i.removeAttribute("value"),b==null&&_!=null&&(i.defaultChecked=!!_),b!=null&&(i.checked=b&&typeof b!="function"&&typeof b!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?i.name=""+hr(j):i.removeAttribute("name")}function W0(i,u,d,m,b,_,B,j){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),u!=null||d!=null){if(!(_!=="submit"&&_!=="reset"||u!=null))return;d=d!=null?""+hr(d):"",u=u!=null?""+hr(u):d,j||u===i.value||(i.value=u),i.defaultValue=u}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,i.checked=j?i.checked:!!m,i.defaultChecked=!!m,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(i.name=B)}function Nh(i,u,d){u==="number"&&ic(i.ownerDocument)===i||i.defaultValue===""+d||(i.defaultValue=""+d)}function Bi(i,u,d,m){if(i=i.options,u){u={};for(var b=0;b<d.length;b++)u["$"+d[b]]=!0;for(d=0;d<i.length;d++)b=u.hasOwnProperty("$"+i[d].value),i[d].selected!==b&&(i[d].selected=b),b&&m&&(i[d].defaultSelected=!0)}else{for(d=""+hr(d),u=null,b=0;b<i.length;b++){if(i[b].value===d){i[b].selected=!0,m&&(i[b].defaultSelected=!0);return}u!==null||i[b].disabled||(u=i[b])}u!==null&&(u.selected=!0)}}function G0(i,u,d){if(u!=null&&(u=""+hr(u),u!==i.value&&(i.value=u),d==null)){i.defaultValue!==u&&(i.defaultValue=u);return}i.defaultValue=d!=null?""+hr(d):""}function X0(i,u,d,m){if(u==null){if(m!=null){if(d!=null)throw Error(r(92));if(Y(m)){if(1<m.length)throw Error(r(93));m=m[0]}d=m}d==null&&(d=""),u=d}d=hr(u),i.defaultValue=d,m=i.textContent,m===d&&m!==""&&m!==null&&(i.value=m)}function Fi(i,u){if(u){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=u;return}}i.textContent=u}var XA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Y0(i,u,d){var m=u.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="":m?i.setProperty(u,d):typeof d!="number"||d===0||XA.has(u)?u==="float"?i.cssFloat=d:i[u]=(""+d).trim():i[u]=d+"px"}function K0(i,u,d){if(u!=null&&typeof u!="object")throw Error(r(62));if(i=i.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||u!=null&&u.hasOwnProperty(m)||(m.indexOf("--")===0?i.setProperty(m,""):m==="float"?i.cssFloat="":i[m]="");for(var b in u)m=u[b],u.hasOwnProperty(b)&&d[b]!==m&&Y0(i,b,m)}else for(var _ in u)u.hasOwnProperty(_)&&Y0(i,_,u[_])}function Dh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var YA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),KA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sc(i){return KA.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Oh=null;function Mh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Pi=null,Li=null;function $0(i){var u=Di(i);if(u&&(i=u.stateNode)){var d=i[Mn]||null;e:switch(i=u.stateNode,u.type){case"input":if(kh(i,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),u=d.name,d.type==="radio"&&u!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+pr(""+u)+'"][type="radio"]'),u=0;u<d.length;u++){var m=d[u];if(m!==i&&m.form===i.form){var b=m[Mn]||null;if(!b)throw Error(r(90));kh(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(u=0;u<d.length;u++)m=d[u],m.form===i.form&&V0(m)}break e;case"textarea":G0(i,d.value,d.defaultValue);break e;case"select":u=d.value,u!=null&&Bi(i,!!d.multiple,u,!1)}}}var Ih=!1;function Q0(i,u,d){if(Ih)return i(u,d);Ih=!0;try{var m=i(u);return m}finally{if(Ih=!1,(Pi!==null||Li!==null)&&(Gc(),Pi&&(u=Pi,i=Li,Li=Pi=null,$0(u),i)))for(u=0;u<i.length;u++)$0(i[u])}}function nu(i,u){var d=i.stateNode;if(d===null)return null;var m=d[Mn]||null;if(m===null)return null;d=m[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(r(231,u,typeof d));return d}var va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bh=!1;if(va)try{var ru={};Object.defineProperty(ru,"passive",{get:function(){Bh=!0}}),window.addEventListener("test",ru,ru),window.removeEventListener("test",ru,ru)}catch{Bh=!1}var Ka=null,Fh=null,uc=null;function Z0(){if(uc)return uc;var i,u=Fh,d=u.length,m,b="value"in Ka?Ka.value:Ka.textContent,_=b.length;for(i=0;i<d&&u[i]===b[i];i++);var B=d-i;for(m=1;m<=B&&u[d-m]===b[_-m];m++);return uc=b.slice(i,1<m?1-m:void 0)}function lc(i){var u=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&u===13&&(i=13)):i=u,i===10&&(i=13),32<=i||i===13?i:0}function cc(){return!0}function J0(){return!1}function In(i){function u(d,m,b,_,B){this._reactName=d,this._targetInst=b,this.type=m,this.nativeEvent=_,this.target=B,this.currentTarget=null;for(var j in i)i.hasOwnProperty(j)&&(d=i[j],this[j]=d?d(_):_[j]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?cc:J0,this.isPropagationStopped=J0,this}return h(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=cc)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=cc)},persist:function(){},isPersistent:cc}),u}var Fo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fc=In(Fo),au=h({},Fo,{view:0,detail:0}),$A=In(au),Ph,Lh,ou,dc=h({},au,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ou&&(ou&&i.type==="mousemove"?(Ph=i.screenX-ou.screenX,Lh=i.screenY-ou.screenY):Lh=Ph=0,ou=i),Ph)},movementY:function(i){return"movementY"in i?i.movementY:Lh}}),eb=In(dc),QA=h({},dc,{dataTransfer:0}),ZA=In(QA),JA=h({},au,{relatedTarget:0}),jh=In(JA),eT=h({},Fo,{animationName:0,elapsedTime:0,pseudoElement:0}),tT=In(eT),nT=h({},Fo,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),rT=In(nT),aT=h({},Fo,{data:0}),tb=In(aT),oT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uT(i){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(i):(i=sT[i])?!!u[i]:!1}function zh(){return uT}var lT=h({},au,{key:function(i){if(i.key){var u=oT[i.key]||i.key;if(u!=="Unidentified")return u}return i.type==="keypress"?(i=lc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?iT[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zh,charCode:function(i){return i.type==="keypress"?lc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?lc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),cT=In(lT),fT=h({},dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nb=In(fT),dT=h({},au,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zh}),hT=In(dT),pT=h({},Fo,{propertyName:0,elapsedTime:0,pseudoElement:0}),mT=In(pT),vT=h({},dc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),gT=In(vT),yT=h({},Fo,{newState:0,oldState:0}),bT=In(yT),wT=[9,13,27,32],Uh=va&&"CompositionEvent"in window,iu=null;va&&"documentMode"in document&&(iu=document.documentMode);var xT=va&&"TextEvent"in window&&!iu,rb=va&&(!Uh||iu&&8<iu&&11>=iu),ab=" ",ob=!1;function ib(i,u){switch(i){case"keyup":return wT.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sb(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ji=!1;function ST(i,u){switch(i){case"compositionend":return sb(u);case"keypress":return u.which!==32?null:(ob=!0,ab);case"textInput":return i=u.data,i===ab&&ob?null:i;default:return null}}function ET(i,u){if(ji)return i==="compositionend"||!Uh&&ib(i,u)?(i=Z0(),uc=Fh=Ka=null,ji=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return rb&&u.locale!=="ko"?null:u.data;default:return null}}var CT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ub(i){var u=i&&i.nodeName&&i.nodeName.toLowerCase();return u==="input"?!!CT[i.type]:u==="textarea"}function lb(i,u,d,m){Pi?Li?Li.push(m):Li=[m]:Pi=m,u=Zc(u,"onChange"),0<u.length&&(d=new fc("onChange","change",null,d,m),i.push({event:d,listeners:u}))}var su=null,uu=null;function _T(i){Hx(i,0)}function hc(i){var u=tu(i);if(V0(u))return i}function cb(i,u){if(i==="change")return u}var fb=!1;if(va){var qh;if(va){var Hh="oninput"in document;if(!Hh){var db=document.createElement("div");db.setAttribute("oninput","return;"),Hh=typeof db.oninput=="function"}qh=Hh}else qh=!1;fb=qh&&(!document.documentMode||9<document.documentMode)}function hb(){su&&(su.detachEvent("onpropertychange",pb),uu=su=null)}function pb(i){if(i.propertyName==="value"&&hc(uu)){var u=[];lb(u,uu,i,Mh(i)),Q0(_T,u)}}function RT(i,u,d){i==="focusin"?(hb(),su=u,uu=d,su.attachEvent("onpropertychange",pb)):i==="focusout"&&hb()}function AT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return hc(uu)}function TT(i,u){if(i==="click")return hc(u)}function kT(i,u){if(i==="input"||i==="change")return hc(u)}function NT(i,u){return i===u&&(i!==0||1/i===1/u)||i!==i&&u!==u}var Xn=typeof Object.is=="function"?Object.is:NT;function lu(i,u){if(Xn(i,u))return!0;if(typeof i!="object"||i===null||typeof u!="object"||u===null)return!1;var d=Object.keys(i),m=Object.keys(u);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var b=d[m];if(!Ce.call(u,b)||!Xn(i[b],u[b]))return!1}return!0}function mb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function vb(i,u){var d=mb(i);i=0;for(var m;d;){if(d.nodeType===3){if(m=i+d.textContent.length,i<=u&&m>=u)return{node:d,offset:u-i};i=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=mb(d)}}function gb(i,u){return i&&u?i===u?!0:i&&i.nodeType===3?!1:u&&u.nodeType===3?gb(i,u.parentNode):"contains"in i?i.contains(u):i.compareDocumentPosition?!!(i.compareDocumentPosition(u)&16):!1:!1}function yb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var u=ic(i.document);u instanceof i.HTMLIFrameElement;){try{var d=typeof u.contentWindow.location.href=="string"}catch{d=!1}if(d)i=u.contentWindow;else break;u=ic(i.document)}return u}function Vh(i){var u=i&&i.nodeName&&i.nodeName.toLowerCase();return u&&(u==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||u==="textarea"||i.contentEditable==="true")}var DT=va&&"documentMode"in document&&11>=document.documentMode,zi=null,Wh=null,cu=null,Gh=!1;function bb(i,u,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Gh||zi==null||zi!==ic(m)||(m=zi,"selectionStart"in m&&Vh(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),cu&&lu(cu,m)||(cu=m,m=Zc(Wh,"onSelect"),0<m.length&&(u=new fc("onSelect","select",null,u,d),i.push({event:u,listeners:m}),u.target=zi)))}function Po(i,u){var d={};return d[i.toLowerCase()]=u.toLowerCase(),d["Webkit"+i]="webkit"+u,d["Moz"+i]="moz"+u,d}var Ui={animationend:Po("Animation","AnimationEnd"),animationiteration:Po("Animation","AnimationIteration"),animationstart:Po("Animation","AnimationStart"),transitionrun:Po("Transition","TransitionRun"),transitionstart:Po("Transition","TransitionStart"),transitioncancel:Po("Transition","TransitionCancel"),transitionend:Po("Transition","TransitionEnd")},Xh={},wb={};va&&(wb=document.createElement("div").style,"AnimationEvent"in window||(delete Ui.animationend.animation,delete Ui.animationiteration.animation,delete Ui.animationstart.animation),"TransitionEvent"in window||delete Ui.transitionend.transition);function Lo(i){if(Xh[i])return Xh[i];if(!Ui[i])return i;var u=Ui[i],d;for(d in u)if(u.hasOwnProperty(d)&&d in wb)return Xh[i]=u[d];return i}var xb=Lo("animationend"),Sb=Lo("animationiteration"),Eb=Lo("animationstart"),OT=Lo("transitionrun"),MT=Lo("transitionstart"),IT=Lo("transitioncancel"),Cb=Lo("transitionend"),_b=new Map,Yh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yh.push("scrollEnd");function Nr(i,u){_b.set(i,u),Bo(u,[i])}var Rb=new WeakMap;function mr(i,u){if(typeof i=="object"&&i!==null){var d=Rb.get(i);return d!==void 0?d:(u={value:i,source:u,stack:q0(u)},Rb.set(i,u),u)}return{value:i,source:u,stack:q0(u)}}var vr=[],qi=0,Kh=0;function pc(){for(var i=qi,u=Kh=qi=0;u<i;){var d=vr[u];vr[u++]=null;var m=vr[u];vr[u++]=null;var b=vr[u];vr[u++]=null;var _=vr[u];if(vr[u++]=null,m!==null&&b!==null){var B=m.pending;B===null?b.next=b:(b.next=B.next,B.next=b),m.pending=b}_!==0&&Ab(d,b,_)}}function mc(i,u,d,m){vr[qi++]=i,vr[qi++]=u,vr[qi++]=d,vr[qi++]=m,Kh|=m,i.lanes|=m,i=i.alternate,i!==null&&(i.lanes|=m)}function $h(i,u,d,m){return mc(i,u,d,m),vc(i)}function Hi(i,u){return mc(i,null,null,u),vc(i)}function Ab(i,u,d){i.lanes|=d;var m=i.alternate;m!==null&&(m.lanes|=d);for(var b=!1,_=i.return;_!==null;)_.childLanes|=d,m=_.alternate,m!==null&&(m.childLanes|=d),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(b=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,b&&u!==null&&(b=31-ln(d),i=_.hiddenUpdates,m=i[b],m===null?i[b]=[u]:m.push(u),u.lane=d|536870912),_):null}function vc(i){if(50<Bu)throw Bu=0,nm=null,Error(r(185));for(var u=i.return;u!==null;)i=u,u=i.return;return i.tag===3?i.stateNode:null}var Vi={};function BT(i,u,d,m){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(i,u,d,m){return new BT(i,u,d,m)}function Qh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ga(i,u){var d=i.alternate;return d===null?(d=Yn(i.tag,u,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=u,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&65011712,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,u=i.dependencies,d.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d.refCleanup=i.refCleanup,d}function Tb(i,u){i.flags&=65011714;var d=i.alternate;return d===null?(i.childLanes=0,i.lanes=u,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=d.childLanes,i.lanes=d.lanes,i.child=d.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=d.memoizedProps,i.memoizedState=d.memoizedState,i.updateQueue=d.updateQueue,i.type=d.type,u=d.dependencies,i.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),i}function gc(i,u,d,m,b,_){var B=0;if(m=i,typeof i=="function")Qh(i)&&(B=1);else if(typeof i=="string")B=Pk(i,d,re.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case D:return i=Yn(31,d,u,b),i.elementType=D,i.lanes=_,i;case y:return jo(d.children,b,_,u);case x:B=8,b|=24;break;case S:return i=Yn(12,d,u,b|2),i.elementType=S,i.lanes=_,i;case R:return i=Yn(13,d,u,b),i.elementType=R,i.lanes=_,i;case k:return i=Yn(19,d,u,b),i.elementType=k,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case w:case A:B=10;break e;case T:B=9;break e;case C:B=11;break e;case N:B=14;break e;case O:B=16,m=null;break e}B=29,d=Error(r(130,i===null?"null":typeof i,"")),m=null}return u=Yn(B,d,u,b),u.elementType=i,u.type=m,u.lanes=_,u}function jo(i,u,d,m){return i=Yn(7,i,m,u),i.lanes=d,i}function Zh(i,u,d){return i=Yn(6,i,null,u),i.lanes=d,i}function Jh(i,u,d){return u=Yn(4,i.children!==null?i.children:[],i.key,u),u.lanes=d,u.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},u}var Wi=[],Gi=0,yc=null,bc=0,gr=[],yr=0,zo=null,ya=1,ba="";function Uo(i,u){Wi[Gi++]=bc,Wi[Gi++]=yc,yc=i,bc=u}function kb(i,u,d){gr[yr++]=ya,gr[yr++]=ba,gr[yr++]=zo,zo=i;var m=ya;i=ba;var b=32-ln(m)-1;m&=~(1<<b),d+=1;var _=32-ln(u)+b;if(30<_){var B=b-b%5;_=(m&(1<<B)-1).toString(32),m>>=B,b-=B,ya=1<<32-ln(u)+b|d<<b|m,ba=_+i}else ya=1<<_|d<<b|m,ba=i}function ep(i){i.return!==null&&(Uo(i,1),kb(i,1,0))}function tp(i){for(;i===yc;)yc=Wi[--Gi],Wi[Gi]=null,bc=Wi[--Gi],Wi[Gi]=null;for(;i===zo;)zo=gr[--yr],gr[yr]=null,ba=gr[--yr],gr[yr]=null,ya=gr[--yr],gr[yr]=null}var Nn=null,Nt=null,lt=!1,qo=null,Vr=!1,np=Error(r(519));function Ho(i){var u=Error(r(418,""));throw hu(mr(u,i)),np}function Nb(i){var u=i.stateNode,d=i.type,m=i.memoizedProps;switch(u[yn]=i,u[Mn]=m,d){case"dialog":et("cancel",u),et("close",u);break;case"iframe":case"object":case"embed":et("load",u);break;case"video":case"audio":for(d=0;d<Pu.length;d++)et(Pu[d],u);break;case"source":et("error",u);break;case"img":case"image":case"link":et("error",u),et("load",u);break;case"details":et("toggle",u);break;case"input":et("invalid",u),W0(u,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),oc(u);break;case"select":et("invalid",u);break;case"textarea":et("invalid",u),X0(u,m.value,m.defaultValue,m.children),oc(u)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||u.textContent===""+d||m.suppressHydrationWarning===!0||Xx(u.textContent,d)?(m.popover!=null&&(et("beforetoggle",u),et("toggle",u)),m.onScroll!=null&&et("scroll",u),m.onScrollEnd!=null&&et("scrollend",u),m.onClick!=null&&(u.onclick=Jc),u=!0):u=!1,u||Ho(i)}function Db(i){for(Nn=i.return;Nn;)switch(Nn.tag){case 5:case 13:Vr=!1;return;case 27:case 3:Vr=!0;return;default:Nn=Nn.return}}function fu(i){if(i!==Nn)return!1;if(!lt)return Db(i),lt=!0,!1;var u=i.tag,d;if((d=u!==3&&u!==27)&&((d=u===5)&&(d=i.type,d=!(d!=="form"&&d!=="button")||ym(i.type,i.memoizedProps)),d=!d),d&&Nt&&Ho(i),Db(i),u===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,u=0;i;){if(i.nodeType===8)if(d=i.data,d==="/$"){if(u===0){Nt=Or(i.nextSibling);break e}u--}else d!=="$"&&d!=="$!"&&d!=="$?"||u++;i=i.nextSibling}Nt=null}}else u===27?(u=Nt,fo(i.type)?(i=Sm,Sm=null,Nt=i):Nt=u):Nt=Nn?Or(i.stateNode.nextSibling):null;return!0}function du(){Nt=Nn=null,lt=!1}function Ob(){var i=qo;return i!==null&&(Pn===null?Pn=i:Pn.push.apply(Pn,i),qo=null),i}function hu(i){qo===null?qo=[i]:qo.push(i)}var rp=H(null),Vo=null,wa=null;function $a(i,u,d){J(rp,u._currentValue),u._currentValue=d}function xa(i){i._currentValue=rp.current,Q(rp)}function ap(i,u,d){for(;i!==null;){var m=i.alternate;if((i.childLanes&u)!==u?(i.childLanes|=u,m!==null&&(m.childLanes|=u)):m!==null&&(m.childLanes&u)!==u&&(m.childLanes|=u),i===d)break;i=i.return}}function op(i,u,d,m){var b=i.child;for(b!==null&&(b.return=i);b!==null;){var _=b.dependencies;if(_!==null){var B=b.child;_=_.firstContext;e:for(;_!==null;){var j=_;_=b;for(var $=0;$<u.length;$++)if(j.context===u[$]){_.lanes|=d,j=_.alternate,j!==null&&(j.lanes|=d),ap(_.return,d,i),m||(B=null);break e}_=j.next}}else if(b.tag===18){if(B=b.return,B===null)throw Error(r(341));B.lanes|=d,_=B.alternate,_!==null&&(_.lanes|=d),ap(B,d,i),B=null}else B=b.child;if(B!==null)B.return=b;else for(B=b;B!==null;){if(B===i){B=null;break}if(b=B.sibling,b!==null){b.return=B.return,B=b;break}B=B.return}b=B}}function pu(i,u,d,m){i=null;for(var b=u,_=!1;b!==null;){if(!_){if((b.flags&524288)!==0)_=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var B=b.alternate;if(B===null)throw Error(r(387));if(B=B.memoizedProps,B!==null){var j=b.type;Xn(b.pendingProps.value,B.value)||(i!==null?i.push(j):i=[j])}}else if(b===Se.current){if(B=b.alternate,B===null)throw Error(r(387));B.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(i!==null?i.push(Hu):i=[Hu])}b=b.return}i!==null&&op(u,i,d,m),u.flags|=262144}function wc(i){for(i=i.firstContext;i!==null;){if(!Xn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Wo(i){Vo=i,wa=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function bn(i){return Mb(Vo,i)}function xc(i,u){return Vo===null&&Wo(i),Mb(i,u)}function Mb(i,u){var d=u._currentValue;if(u={context:u,memoizedValue:d,next:null},wa===null){if(i===null)throw Error(r(308));wa=u,i.dependencies={lanes:0,firstContext:u},i.flags|=524288}else wa=wa.next=u;return d}var FT=typeof AbortController<"u"?AbortController:function(){var i=[],u=this.signal={aborted:!1,addEventListener:function(d,m){i.push(m)}};this.abort=function(){u.aborted=!0,i.forEach(function(d){return d()})}},PT=t.unstable_scheduleCallback,LT=t.unstable_NormalPriority,Vt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ip(){return{controller:new FT,data:new Map,refCount:0}}function mu(i){i.refCount--,i.refCount===0&&PT(LT,function(){i.controller.abort()})}var vu=null,sp=0,Xi=0,Yi=null;function jT(i,u){if(vu===null){var d=vu=[];sp=0,Xi=lm(),Yi={status:"pending",value:void 0,then:function(m){d.push(m)}}}return sp++,u.then(Ib,Ib),u}function Ib(){if(--sp===0&&vu!==null){Yi!==null&&(Yi.status="fulfilled");var i=vu;vu=null,Xi=0,Yi=null;for(var u=0;u<i.length;u++)(0,i[u])()}}function zT(i,u){var d=[],m={status:"pending",value:null,reason:null,then:function(b){d.push(b)}};return i.then(function(){m.status="fulfilled",m.value=u;for(var b=0;b<d.length;b++)(0,d[b])(u)},function(b){for(m.status="rejected",m.reason=b,b=0;b<d.length;b++)(0,d[b])(void 0)}),m}var Bb=z.S;z.S=function(i,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&jT(i,u),Bb!==null&&Bb(i,u)};var Go=H(null);function up(){var i=Go.current;return i!==null?i:bt.pooledCache}function Sc(i,u){u===null?J(Go,Go.current):J(Go,u.pool)}function Fb(){var i=up();return i===null?null:{parent:Vt._currentValue,pool:i}}var gu=Error(r(460)),Pb=Error(r(474)),Ec=Error(r(542)),lp={then:function(){}};function Lb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Cc(){}function jb(i,u,d){switch(d=i[d],d===void 0?i.push(u):d!==u&&(u.then(Cc,Cc),u=d),u.status){case"fulfilled":return u.value;case"rejected":throw i=u.reason,Ub(i),i;default:if(typeof u.status=="string")u.then(Cc,Cc);else{if(i=bt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=u,i.status="pending",i.then(function(m){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=m}},function(m){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=m}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw i=u.reason,Ub(i),i}throw yu=u,gu}}var yu=null;function zb(){if(yu===null)throw Error(r(459));var i=yu;return yu=null,i}function Ub(i){if(i===gu||i===Ec)throw Error(r(483))}var Qa=!1;function cp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fp(i,u){i=i.updateQueue,u.updateQueue===i&&(u.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Za(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ja(i,u,d){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(ht&2)!==0){var b=m.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),m.pending=u,u=vc(i),Ab(i,null,d),u}return mc(i,m,u,d),vc(i)}function bu(i,u,d){if(u=u.updateQueue,u!==null&&(u=u.shared,(d&4194048)!==0)){var m=u.lanes;m&=i.pendingLanes,d|=m,u.lanes=d,I0(i,d)}}function dp(i,u){var d=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var b=null,_=null;if(d=d.firstBaseUpdate,d!==null){do{var B={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};_===null?b=_=B:_=_.next=B,d=d.next}while(d!==null);_===null?b=_=u:_=_.next=u}else b=_=u;d={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:_,shared:m.shared,callbacks:m.callbacks},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=u:i.next=u,d.lastBaseUpdate=u}var hp=!1;function wu(){if(hp){var i=Yi;if(i!==null)throw i}}function xu(i,u,d,m){hp=!1;var b=i.updateQueue;Qa=!1;var _=b.firstBaseUpdate,B=b.lastBaseUpdate,j=b.shared.pending;if(j!==null){b.shared.pending=null;var $=j,oe=$.next;$.next=null,B===null?_=oe:B.next=oe,B=$;var ve=i.alternate;ve!==null&&(ve=ve.updateQueue,j=ve.lastBaseUpdate,j!==B&&(j===null?ve.firstBaseUpdate=oe:j.next=oe,ve.lastBaseUpdate=$))}if(_!==null){var ye=b.baseState;B=0,ve=oe=$=null,j=_;do{var se=j.lane&-536870913,ue=se!==j.lane;if(ue?(rt&se)===se:(m&se)===se){se!==0&&se===Xi&&(hp=!0),ve!==null&&(ve=ve.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var ze=i,Le=j;se=u;var gt=d;switch(Le.tag){case 1:if(ze=Le.payload,typeof ze=="function"){ye=ze.call(gt,ye,se);break e}ye=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Le.payload,se=typeof ze=="function"?ze.call(gt,ye,se):ze,se==null)break e;ye=h({},ye,se);break e;case 2:Qa=!0}}se=j.callback,se!==null&&(i.flags|=64,ue&&(i.flags|=8192),ue=b.callbacks,ue===null?b.callbacks=[se]:ue.push(se))}else ue={lane:se,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ve===null?(oe=ve=ue,$=ye):ve=ve.next=ue,B|=se;if(j=j.next,j===null){if(j=b.shared.pending,j===null)break;ue=j,j=ue.next,ue.next=null,b.lastBaseUpdate=ue,b.shared.pending=null}}while(!0);ve===null&&($=ye),b.baseState=$,b.firstBaseUpdate=oe,b.lastBaseUpdate=ve,_===null&&(b.shared.lanes=0),so|=B,i.lanes=B,i.memoizedState=ye}}function qb(i,u){if(typeof i!="function")throw Error(r(191,i));i.call(u)}function Hb(i,u){var d=i.callbacks;if(d!==null)for(i.callbacks=null,i=0;i<d.length;i++)qb(d[i],u)}var Ki=H(null),_c=H(0);function Vb(i,u){i=Ta,J(_c,i),J(Ki,u),Ta=i|u.baseLanes}function pp(){J(_c,Ta),J(Ki,Ki.current)}function mp(){Ta=_c.current,Q(Ki),Q(_c)}var eo=0,Ke=null,mt=null,zt=null,Rc=!1,$i=!1,Xo=!1,Ac=0,Su=0,Qi=null,UT=0;function Mt(){throw Error(r(321))}function vp(i,u){if(u===null)return!1;for(var d=0;d<u.length&&d<i.length;d++)if(!Xn(i[d],u[d]))return!1;return!0}function gp(i,u,d,m,b,_){return eo=_,Ke=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,z.H=i===null||i.memoizedState===null?Aw:Tw,Xo=!1,_=d(m,b),Xo=!1,$i&&(_=Gb(u,d,m,b)),Wb(i),_}function Wb(i){z.H=Mc;var u=mt!==null&&mt.next!==null;if(eo=0,zt=mt=Ke=null,Rc=!1,Su=0,Qi=null,u)throw Error(r(300));i===null||en||(i=i.dependencies,i!==null&&wc(i)&&(en=!0))}function Gb(i,u,d,m){Ke=i;var b=0;do{if($i&&(Qi=null),Su=0,$i=!1,25<=b)throw Error(r(301));if(b+=1,zt=mt=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}z.H=YT,_=u(d,m)}while($i);return _}function qT(){var i=z.H,u=i.useState()[0];return u=typeof u.then=="function"?Eu(u):u,i=i.useState()[0],(mt!==null?mt.memoizedState:null)!==i&&(Ke.flags|=1024),u}function yp(){var i=Ac!==0;return Ac=0,i}function bp(i,u,d){u.updateQueue=i.updateQueue,u.flags&=-2053,i.lanes&=~d}function wp(i){if(Rc){for(i=i.memoizedState;i!==null;){var u=i.queue;u!==null&&(u.pending=null),i=i.next}Rc=!1}eo=0,zt=mt=Ke=null,$i=!1,Su=Ac=0,Qi=null}function Bn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?Ke.memoizedState=zt=i:zt=zt.next=i,zt}function Ut(){if(mt===null){var i=Ke.alternate;i=i!==null?i.memoizedState:null}else i=mt.next;var u=zt===null?Ke.memoizedState:zt.next;if(u!==null)zt=u,mt=i;else{if(i===null)throw Ke.alternate===null?Error(r(467)):Error(r(310));mt=i,i={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},zt===null?Ke.memoizedState=zt=i:zt=zt.next=i}return zt}function xp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eu(i){var u=Su;return Su+=1,Qi===null&&(Qi=[]),i=jb(Qi,i,u),u=Ke,(zt===null?u.memoizedState:zt.next)===null&&(u=u.alternate,z.H=u===null||u.memoizedState===null?Aw:Tw),i}function Tc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Eu(i);if(i.$$typeof===A)return bn(i)}throw Error(r(438,String(i)))}function Sp(i){var u=null,d=Ke.updateQueue;if(d!==null&&(u=d.memoCache),u==null){var m=Ke.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(u={data:m.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),d===null&&(d=xp(),Ke.updateQueue=d),d.memoCache=u,d=u.data[u.index],d===void 0)for(d=u.data[u.index]=Array(i),m=0;m<i;m++)d[m]=M;return u.index++,d}function Sa(i,u){return typeof u=="function"?u(i):u}function kc(i){var u=Ut();return Ep(u,mt,i)}function Ep(i,u,d){var m=i.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=d;var b=i.baseQueue,_=m.pending;if(_!==null){if(b!==null){var B=b.next;b.next=_.next,_.next=B}u.baseQueue=b=_,m.pending=null}if(_=i.baseState,b===null)i.memoizedState=_;else{u=b.next;var j=B=null,$=null,oe=u,ve=!1;do{var ye=oe.lane&-536870913;if(ye!==oe.lane?(rt&ye)===ye:(eo&ye)===ye){var se=oe.revertLane;if(se===0)$!==null&&($=$.next={lane:0,revertLane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),ye===Xi&&(ve=!0);else if((eo&se)===se){oe=oe.next,se===Xi&&(ve=!0);continue}else ye={lane:0,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},$===null?(j=$=ye,B=_):$=$.next=ye,Ke.lanes|=se,so|=se;ye=oe.action,Xo&&d(_,ye),_=oe.hasEagerState?oe.eagerState:d(_,ye)}else se={lane:ye,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},$===null?(j=$=se,B=_):$=$.next=se,Ke.lanes|=ye,so|=ye;oe=oe.next}while(oe!==null&&oe!==u);if($===null?B=_:$.next=j,!Xn(_,i.memoizedState)&&(en=!0,ve&&(d=Yi,d!==null)))throw d;i.memoizedState=_,i.baseState=B,i.baseQueue=$,m.lastRenderedState=_}return b===null&&(m.lanes=0),[i.memoizedState,m.dispatch]}function Cp(i){var u=Ut(),d=u.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=i;var m=d.dispatch,b=d.pending,_=u.memoizedState;if(b!==null){d.pending=null;var B=b=b.next;do _=i(_,B.action),B=B.next;while(B!==b);Xn(_,u.memoizedState)||(en=!0),u.memoizedState=_,u.baseQueue===null&&(u.baseState=_),d.lastRenderedState=_}return[_,m]}function Xb(i,u,d){var m=Ke,b=Ut(),_=lt;if(_){if(d===void 0)throw Error(r(407));d=d()}else d=u();var B=!Xn((mt||b).memoizedState,d);B&&(b.memoizedState=d,en=!0),b=b.queue;var j=$b.bind(null,m,b,i);if(Cu(2048,8,j,[i]),b.getSnapshot!==u||B||zt!==null&&zt.memoizedState.tag&1){if(m.flags|=2048,Zi(9,Nc(),Kb.bind(null,m,b,d,u),null),bt===null)throw Error(r(349));_||(eo&124)!==0||Yb(m,u,d)}return d}function Yb(i,u,d){i.flags|=16384,i={getSnapshot:u,value:d},u=Ke.updateQueue,u===null?(u=xp(),Ke.updateQueue=u,u.stores=[i]):(d=u.stores,d===null?u.stores=[i]:d.push(i))}function Kb(i,u,d,m){u.value=d,u.getSnapshot=m,Qb(u)&&Zb(i)}function $b(i,u,d){return d(function(){Qb(u)&&Zb(i)})}function Qb(i){var u=i.getSnapshot;i=i.value;try{var d=u();return!Xn(i,d)}catch{return!0}}function Zb(i){var u=Hi(i,2);u!==null&&Jn(u,i,2)}function _p(i){var u=Bn();if(typeof i=="function"){var d=i;if(i=d(),Xo){Ht(!0);try{d()}finally{Ht(!1)}}}return u.memoizedState=u.baseState=i,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:i},u}function Jb(i,u,d,m){return i.baseState=d,Ep(i,mt,typeof m=="function"?m:Sa)}function HT(i,u,d,m,b){if(Oc(i))throw Error(r(485));if(i=u.action,i!==null){var _={payload:b,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){_.listeners.push(B)}};z.T!==null?d(!0):_.isTransition=!1,m(_),d=u.pending,d===null?(_.next=u.pending=_,ew(u,_)):(_.next=d.next,u.pending=d.next=_)}}function ew(i,u){var d=u.action,m=u.payload,b=i.state;if(u.isTransition){var _=z.T,B={};z.T=B;try{var j=d(b,m),$=z.S;$!==null&&$(B,j),tw(i,u,j)}catch(oe){Rp(i,u,oe)}finally{z.T=_}}else try{_=d(b,m),tw(i,u,_)}catch(oe){Rp(i,u,oe)}}function tw(i,u,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){nw(i,u,m)},function(m){return Rp(i,u,m)}):nw(i,u,d)}function nw(i,u,d){u.status="fulfilled",u.value=d,rw(u),i.state=d,u=i.pending,u!==null&&(d=u.next,d===u?i.pending=null:(d=d.next,u.next=d,ew(i,d)))}function Rp(i,u,d){var m=i.pending;if(i.pending=null,m!==null){m=m.next;do u.status="rejected",u.reason=d,rw(u),u=u.next;while(u!==m)}i.action=null}function rw(i){i=i.listeners;for(var u=0;u<i.length;u++)(0,i[u])()}function aw(i,u){return u}function ow(i,u){if(lt){var d=bt.formState;if(d!==null){e:{var m=Ke;if(lt){if(Nt){t:{for(var b=Nt,_=Vr;b.nodeType!==8;){if(!_){b=null;break t}if(b=Or(b.nextSibling),b===null){b=null;break t}}_=b.data,b=_==="F!"||_==="F"?b:null}if(b){Nt=Or(b.nextSibling),m=b.data==="F!";break e}}Ho(m)}m=!1}m&&(u=d[0])}}return d=Bn(),d.memoizedState=d.baseState=u,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aw,lastRenderedState:u},d.queue=m,d=Cw.bind(null,Ke,m),m.dispatch=d,m=_p(!1),_=Dp.bind(null,Ke,!1,m.queue),m=Bn(),b={state:u,dispatch:null,action:i,pending:null},m.queue=b,d=HT.bind(null,Ke,b,_,d),b.dispatch=d,m.memoizedState=i,[u,d,!1]}function iw(i){var u=Ut();return sw(u,mt,i)}function sw(i,u,d){if(u=Ep(i,u,aw)[0],i=kc(Sa)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var m=Eu(u)}catch(B){throw B===gu?Ec:B}else m=u;u=Ut();var b=u.queue,_=b.dispatch;return d!==u.memoizedState&&(Ke.flags|=2048,Zi(9,Nc(),VT.bind(null,b,d),null)),[m,_,i]}function VT(i,u){i.action=u}function uw(i){var u=Ut(),d=mt;if(d!==null)return sw(u,d,i);Ut(),u=u.memoizedState,d=Ut();var m=d.queue.dispatch;return d.memoizedState=i,[u,m,!1]}function Zi(i,u,d,m){return i={tag:i,create:d,deps:m,inst:u,next:null},u=Ke.updateQueue,u===null&&(u=xp(),Ke.updateQueue=u),d=u.lastEffect,d===null?u.lastEffect=i.next=i:(m=d.next,d.next=i,i.next=m,u.lastEffect=i),i}function Nc(){return{destroy:void 0,resource:void 0}}function lw(){return Ut().memoizedState}function Dc(i,u,d,m){var b=Bn();m=m===void 0?null:m,Ke.flags|=i,b.memoizedState=Zi(1|u,Nc(),d,m)}function Cu(i,u,d,m){var b=Ut();m=m===void 0?null:m;var _=b.memoizedState.inst;mt!==null&&m!==null&&vp(m,mt.memoizedState.deps)?b.memoizedState=Zi(u,_,d,m):(Ke.flags|=i,b.memoizedState=Zi(1|u,_,d,m))}function cw(i,u){Dc(8390656,8,i,u)}function fw(i,u){Cu(2048,8,i,u)}function dw(i,u){return Cu(4,2,i,u)}function hw(i,u){return Cu(4,4,i,u)}function pw(i,u){if(typeof u=="function"){i=i();var d=u(i);return function(){typeof d=="function"?d():u(null)}}if(u!=null)return i=i(),u.current=i,function(){u.current=null}}function mw(i,u,d){d=d!=null?d.concat([i]):null,Cu(4,4,pw.bind(null,u,i),d)}function Ap(){}function vw(i,u){var d=Ut();u=u===void 0?null:u;var m=d.memoizedState;return u!==null&&vp(u,m[1])?m[0]:(d.memoizedState=[i,u],i)}function gw(i,u){var d=Ut();u=u===void 0?null:u;var m=d.memoizedState;if(u!==null&&vp(u,m[1]))return m[0];if(m=i(),Xo){Ht(!0);try{i()}finally{Ht(!1)}}return d.memoizedState=[m,u],m}function Tp(i,u,d){return d===void 0||(eo&1073741824)!==0?i.memoizedState=u:(i.memoizedState=d,i=wx(),Ke.lanes|=i,so|=i,d)}function yw(i,u,d,m){return Xn(d,u)?d:Ki.current!==null?(i=Tp(i,d,m),Xn(i,u)||(en=!0),i):(eo&42)===0?(en=!0,i.memoizedState=d):(i=wx(),Ke.lanes|=i,so|=i,u)}function bw(i,u,d,m,b){var _=X.p;X.p=_!==0&&8>_?_:8;var B=z.T,j={};z.T=j,Dp(i,!1,u,d);try{var $=b(),oe=z.S;if(oe!==null&&oe(j,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var ve=zT($,m);_u(i,u,ve,Zn(i))}else _u(i,u,m,Zn(i))}catch(ye){_u(i,u,{then:function(){},status:"rejected",reason:ye},Zn())}finally{X.p=_,z.T=B}}function WT(){}function kp(i,u,d,m){if(i.tag!==5)throw Error(r(476));var b=ww(i).queue;bw(i,b,u,K,d===null?WT:function(){return xw(i),d(m)})}function ww(i){var u=i.memoizedState;if(u!==null)return u;u={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:K},next:null};var d={};return u.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:d},next:null},i.memoizedState=u,i=i.alternate,i!==null&&(i.memoizedState=u),u}function xw(i){var u=ww(i).next.queue;_u(i,u,{},Zn())}function Np(){return bn(Hu)}function Sw(){return Ut().memoizedState}function Ew(){return Ut().memoizedState}function GT(i){for(var u=i.return;u!==null;){switch(u.tag){case 24:case 3:var d=Zn();i=Za(d);var m=Ja(u,i,d);m!==null&&(Jn(m,u,d),bu(m,u,d)),u={cache:ip()},i.payload=u;return}u=u.return}}function XT(i,u,d){var m=Zn();d={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},Oc(i)?_w(u,d):(d=$h(i,u,d,m),d!==null&&(Jn(d,i,m),Rw(d,u,m)))}function Cw(i,u,d){var m=Zn();_u(i,u,d,m)}function _u(i,u,d,m){var b={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(Oc(i))_w(u,b);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=u.lastRenderedReducer,_!==null))try{var B=u.lastRenderedState,j=_(B,d);if(b.hasEagerState=!0,b.eagerState=j,Xn(j,B))return mc(i,u,b,0),bt===null&&pc(),!1}catch{}finally{}if(d=$h(i,u,b,m),d!==null)return Jn(d,i,m),Rw(d,u,m),!0}return!1}function Dp(i,u,d,m){if(m={lane:2,revertLane:lm(),action:m,hasEagerState:!1,eagerState:null,next:null},Oc(i)){if(u)throw Error(r(479))}else u=$h(i,d,m,2),u!==null&&Jn(u,i,2)}function Oc(i){var u=i.alternate;return i===Ke||u!==null&&u===Ke}function _w(i,u){$i=Rc=!0;var d=i.pending;d===null?u.next=u:(u.next=d.next,d.next=u),i.pending=u}function Rw(i,u,d){if((d&4194048)!==0){var m=u.lanes;m&=i.pendingLanes,d|=m,u.lanes=d,I0(i,d)}}var Mc={readContext:bn,use:Tc,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt},Aw={readContext:bn,use:Tc,useCallback:function(i,u){return Bn().memoizedState=[i,u===void 0?null:u],i},useContext:bn,useEffect:cw,useImperativeHandle:function(i,u,d){d=d!=null?d.concat([i]):null,Dc(4194308,4,pw.bind(null,u,i),d)},useLayoutEffect:function(i,u){return Dc(4194308,4,i,u)},useInsertionEffect:function(i,u){Dc(4,2,i,u)},useMemo:function(i,u){var d=Bn();u=u===void 0?null:u;var m=i();if(Xo){Ht(!0);try{i()}finally{Ht(!1)}}return d.memoizedState=[m,u],m},useReducer:function(i,u,d){var m=Bn();if(d!==void 0){var b=d(u);if(Xo){Ht(!0);try{d(u)}finally{Ht(!1)}}}else b=u;return m.memoizedState=m.baseState=b,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:b},m.queue=i,i=i.dispatch=XT.bind(null,Ke,i),[m.memoizedState,i]},useRef:function(i){var u=Bn();return i={current:i},u.memoizedState=i},useState:function(i){i=_p(i);var u=i.queue,d=Cw.bind(null,Ke,u);return u.dispatch=d,[i.memoizedState,d]},useDebugValue:Ap,useDeferredValue:function(i,u){var d=Bn();return Tp(d,i,u)},useTransition:function(){var i=_p(!1);return i=bw.bind(null,Ke,i.queue,!0,!1),Bn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,u,d){var m=Ke,b=Bn();if(lt){if(d===void 0)throw Error(r(407));d=d()}else{if(d=u(),bt===null)throw Error(r(349));(rt&124)!==0||Yb(m,u,d)}b.memoizedState=d;var _={value:d,getSnapshot:u};return b.queue=_,cw($b.bind(null,m,_,i),[i]),m.flags|=2048,Zi(9,Nc(),Kb.bind(null,m,_,d,u),null),d},useId:function(){var i=Bn(),u=bt.identifierPrefix;if(lt){var d=ba,m=ya;d=(m&~(1<<32-ln(m)-1)).toString(32)+d,u="«"+u+"R"+d,d=Ac++,0<d&&(u+="H"+d.toString(32)),u+="»"}else d=UT++,u="«"+u+"r"+d.toString(32)+"»";return i.memoizedState=u},useHostTransitionStatus:Np,useFormState:ow,useActionState:ow,useOptimistic:function(i){var u=Bn();u.memoizedState=u.baseState=i;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=d,u=Dp.bind(null,Ke,!0,d),d.dispatch=u,[i,u]},useMemoCache:Sp,useCacheRefresh:function(){return Bn().memoizedState=GT.bind(null,Ke)}},Tw={readContext:bn,use:Tc,useCallback:vw,useContext:bn,useEffect:fw,useImperativeHandle:mw,useInsertionEffect:dw,useLayoutEffect:hw,useMemo:gw,useReducer:kc,useRef:lw,useState:function(){return kc(Sa)},useDebugValue:Ap,useDeferredValue:function(i,u){var d=Ut();return yw(d,mt.memoizedState,i,u)},useTransition:function(){var i=kc(Sa)[0],u=Ut().memoizedState;return[typeof i=="boolean"?i:Eu(i),u]},useSyncExternalStore:Xb,useId:Sw,useHostTransitionStatus:Np,useFormState:iw,useActionState:iw,useOptimistic:function(i,u){var d=Ut();return Jb(d,mt,i,u)},useMemoCache:Sp,useCacheRefresh:Ew},YT={readContext:bn,use:Tc,useCallback:vw,useContext:bn,useEffect:fw,useImperativeHandle:mw,useInsertionEffect:dw,useLayoutEffect:hw,useMemo:gw,useReducer:Cp,useRef:lw,useState:function(){return Cp(Sa)},useDebugValue:Ap,useDeferredValue:function(i,u){var d=Ut();return mt===null?Tp(d,i,u):yw(d,mt.memoizedState,i,u)},useTransition:function(){var i=Cp(Sa)[0],u=Ut().memoizedState;return[typeof i=="boolean"?i:Eu(i),u]},useSyncExternalStore:Xb,useId:Sw,useHostTransitionStatus:Np,useFormState:uw,useActionState:uw,useOptimistic:function(i,u){var d=Ut();return mt!==null?Jb(d,mt,i,u):(d.baseState=i,[i,d.queue.dispatch])},useMemoCache:Sp,useCacheRefresh:Ew},Ji=null,Ru=0;function Ic(i){var u=Ru;return Ru+=1,Ji===null&&(Ji=[]),jb(Ji,i,u)}function Au(i,u){u=u.props.ref,i.ref=u!==void 0?u:null}function Bc(i,u){throw u.$$typeof===p?Error(r(525)):(i=Object.prototype.toString.call(u),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":i)))}function kw(i){var u=i._init;return u(i._payload)}function Nw(i){function u(ne,ee){if(i){var ae=ne.deletions;ae===null?(ne.deletions=[ee],ne.flags|=16):ae.push(ee)}}function d(ne,ee){if(!i)return null;for(;ee!==null;)u(ne,ee),ee=ee.sibling;return null}function m(ne){for(var ee=new Map;ne!==null;)ne.key!==null?ee.set(ne.key,ne):ee.set(ne.index,ne),ne=ne.sibling;return ee}function b(ne,ee){return ne=ga(ne,ee),ne.index=0,ne.sibling=null,ne}function _(ne,ee,ae){return ne.index=ae,i?(ae=ne.alternate,ae!==null?(ae=ae.index,ae<ee?(ne.flags|=67108866,ee):ae):(ne.flags|=67108866,ee)):(ne.flags|=1048576,ee)}function B(ne){return i&&ne.alternate===null&&(ne.flags|=67108866),ne}function j(ne,ee,ae,ge){return ee===null||ee.tag!==6?(ee=Zh(ae,ne.mode,ge),ee.return=ne,ee):(ee=b(ee,ae),ee.return=ne,ee)}function $(ne,ee,ae,ge){var Te=ae.type;return Te===y?ve(ne,ee,ae.props.children,ge,ae.key):ee!==null&&(ee.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===O&&kw(Te)===ee.type)?(ee=b(ee,ae.props),Au(ee,ae),ee.return=ne,ee):(ee=gc(ae.type,ae.key,ae.props,null,ne.mode,ge),Au(ee,ae),ee.return=ne,ee)}function oe(ne,ee,ae,ge){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ae.containerInfo||ee.stateNode.implementation!==ae.implementation?(ee=Jh(ae,ne.mode,ge),ee.return=ne,ee):(ee=b(ee,ae.children||[]),ee.return=ne,ee)}function ve(ne,ee,ae,ge,Te){return ee===null||ee.tag!==7?(ee=jo(ae,ne.mode,ge,Te),ee.return=ne,ee):(ee=b(ee,ae),ee.return=ne,ee)}function ye(ne,ee,ae){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=Zh(""+ee,ne.mode,ae),ee.return=ne,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case v:return ae=gc(ee.type,ee.key,ee.props,null,ne.mode,ae),Au(ae,ee),ae.return=ne,ae;case g:return ee=Jh(ee,ne.mode,ae),ee.return=ne,ee;case O:var ge=ee._init;return ee=ge(ee._payload),ye(ne,ee,ae)}if(Y(ee)||F(ee))return ee=jo(ee,ne.mode,ae,null),ee.return=ne,ee;if(typeof ee.then=="function")return ye(ne,Ic(ee),ae);if(ee.$$typeof===A)return ye(ne,xc(ne,ee),ae);Bc(ne,ee)}return null}function se(ne,ee,ae,ge){var Te=ee!==null?ee.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Te!==null?null:j(ne,ee,""+ae,ge);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case v:return ae.key===Te?$(ne,ee,ae,ge):null;case g:return ae.key===Te?oe(ne,ee,ae,ge):null;case O:return Te=ae._init,ae=Te(ae._payload),se(ne,ee,ae,ge)}if(Y(ae)||F(ae))return Te!==null?null:ve(ne,ee,ae,ge,null);if(typeof ae.then=="function")return se(ne,ee,Ic(ae),ge);if(ae.$$typeof===A)return se(ne,ee,xc(ne,ae),ge);Bc(ne,ae)}return null}function ue(ne,ee,ae,ge,Te){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ne=ne.get(ae)||null,j(ee,ne,""+ge,Te);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case v:return ne=ne.get(ge.key===null?ae:ge.key)||null,$(ee,ne,ge,Te);case g:return ne=ne.get(ge.key===null?ae:ge.key)||null,oe(ee,ne,ge,Te);case O:var $e=ge._init;return ge=$e(ge._payload),ue(ne,ee,ae,ge,Te)}if(Y(ge)||F(ge))return ne=ne.get(ae)||null,ve(ee,ne,ge,Te,null);if(typeof ge.then=="function")return ue(ne,ee,ae,Ic(ge),Te);if(ge.$$typeof===A)return ue(ne,ee,ae,xc(ee,ge),Te);Bc(ee,ge)}return null}function ze(ne,ee,ae,ge){for(var Te=null,$e=null,Be=ee,je=ee=0,nn=null;Be!==null&&je<ae.length;je++){Be.index>je?(nn=Be,Be=null):nn=Be.sibling;var st=se(ne,Be,ae[je],ge);if(st===null){Be===null&&(Be=nn);break}i&&Be&&st.alternate===null&&u(ne,Be),ee=_(st,ee,je),$e===null?Te=st:$e.sibling=st,$e=st,Be=nn}if(je===ae.length)return d(ne,Be),lt&&Uo(ne,je),Te;if(Be===null){for(;je<ae.length;je++)Be=ye(ne,ae[je],ge),Be!==null&&(ee=_(Be,ee,je),$e===null?Te=Be:$e.sibling=Be,$e=Be);return lt&&Uo(ne,je),Te}for(Be=m(Be);je<ae.length;je++)nn=ue(Be,ne,je,ae[je],ge),nn!==null&&(i&&nn.alternate!==null&&Be.delete(nn.key===null?je:nn.key),ee=_(nn,ee,je),$e===null?Te=nn:$e.sibling=nn,$e=nn);return i&&Be.forEach(function(go){return u(ne,go)}),lt&&Uo(ne,je),Te}function Le(ne,ee,ae,ge){if(ae==null)throw Error(r(151));for(var Te=null,$e=null,Be=ee,je=ee=0,nn=null,st=ae.next();Be!==null&&!st.done;je++,st=ae.next()){Be.index>je?(nn=Be,Be=null):nn=Be.sibling;var go=se(ne,Be,st.value,ge);if(go===null){Be===null&&(Be=nn);break}i&&Be&&go.alternate===null&&u(ne,Be),ee=_(go,ee,je),$e===null?Te=go:$e.sibling=go,$e=go,Be=nn}if(st.done)return d(ne,Be),lt&&Uo(ne,je),Te;if(Be===null){for(;!st.done;je++,st=ae.next())st=ye(ne,st.value,ge),st!==null&&(ee=_(st,ee,je),$e===null?Te=st:$e.sibling=st,$e=st);return lt&&Uo(ne,je),Te}for(Be=m(Be);!st.done;je++,st=ae.next())st=ue(Be,ne,je,st.value,ge),st!==null&&(i&&st.alternate!==null&&Be.delete(st.key===null?je:st.key),ee=_(st,ee,je),$e===null?Te=st:$e.sibling=st,$e=st);return i&&Be.forEach(function(Kk){return u(ne,Kk)}),lt&&Uo(ne,je),Te}function gt(ne,ee,ae,ge){if(typeof ae=="object"&&ae!==null&&ae.type===y&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case v:e:{for(var Te=ae.key;ee!==null;){if(ee.key===Te){if(Te=ae.type,Te===y){if(ee.tag===7){d(ne,ee.sibling),ge=b(ee,ae.props.children),ge.return=ne,ne=ge;break e}}else if(ee.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===O&&kw(Te)===ee.type){d(ne,ee.sibling),ge=b(ee,ae.props),Au(ge,ae),ge.return=ne,ne=ge;break e}d(ne,ee);break}else u(ne,ee);ee=ee.sibling}ae.type===y?(ge=jo(ae.props.children,ne.mode,ge,ae.key),ge.return=ne,ne=ge):(ge=gc(ae.type,ae.key,ae.props,null,ne.mode,ge),Au(ge,ae),ge.return=ne,ne=ge)}return B(ne);case g:e:{for(Te=ae.key;ee!==null;){if(ee.key===Te)if(ee.tag===4&&ee.stateNode.containerInfo===ae.containerInfo&&ee.stateNode.implementation===ae.implementation){d(ne,ee.sibling),ge=b(ee,ae.children||[]),ge.return=ne,ne=ge;break e}else{d(ne,ee);break}else u(ne,ee);ee=ee.sibling}ge=Jh(ae,ne.mode,ge),ge.return=ne,ne=ge}return B(ne);case O:return Te=ae._init,ae=Te(ae._payload),gt(ne,ee,ae,ge)}if(Y(ae))return ze(ne,ee,ae,ge);if(F(ae)){if(Te=F(ae),typeof Te!="function")throw Error(r(150));return ae=Te.call(ae),Le(ne,ee,ae,ge)}if(typeof ae.then=="function")return gt(ne,ee,Ic(ae),ge);if(ae.$$typeof===A)return gt(ne,ee,xc(ne,ae),ge);Bc(ne,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,ee!==null&&ee.tag===6?(d(ne,ee.sibling),ge=b(ee,ae),ge.return=ne,ne=ge):(d(ne,ee),ge=Zh(ae,ne.mode,ge),ge.return=ne,ne=ge),B(ne)):d(ne,ee)}return function(ne,ee,ae,ge){try{Ru=0;var Te=gt(ne,ee,ae,ge);return Ji=null,Te}catch(Be){if(Be===gu||Be===Ec)throw Be;var $e=Yn(29,Be,null,ne.mode);return $e.lanes=ge,$e.return=ne,$e}finally{}}}var es=Nw(!0),Dw=Nw(!1),br=H(null),Wr=null;function to(i){var u=i.alternate;J(Wt,Wt.current&1),J(br,i),Wr===null&&(u===null||Ki.current!==null||u.memoizedState!==null)&&(Wr=i)}function Ow(i){if(i.tag===22){if(J(Wt,Wt.current),J(br,i),Wr===null){var u=i.alternate;u!==null&&u.memoizedState!==null&&(Wr=i)}}else no()}function no(){J(Wt,Wt.current),J(br,br.current)}function Ea(i){Q(br),Wr===i&&(Wr=null),Q(Wt)}var Wt=H(0);function Fc(i){for(var u=i;u!==null;){if(u.tag===13){var d=u.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||xm(d)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===i)break;for(;u.sibling===null;){if(u.return===null||u.return===i)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function Op(i,u,d,m){u=i.memoizedState,d=d(m,u),d=d==null?u:h({},u,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var Mp={enqueueSetState:function(i,u,d){i=i._reactInternals;var m=Zn(),b=Za(m);b.payload=u,d!=null&&(b.callback=d),u=Ja(i,b,m),u!==null&&(Jn(u,i,m),bu(u,i,m))},enqueueReplaceState:function(i,u,d){i=i._reactInternals;var m=Zn(),b=Za(m);b.tag=1,b.payload=u,d!=null&&(b.callback=d),u=Ja(i,b,m),u!==null&&(Jn(u,i,m),bu(u,i,m))},enqueueForceUpdate:function(i,u){i=i._reactInternals;var d=Zn(),m=Za(d);m.tag=2,u!=null&&(m.callback=u),u=Ja(i,m,d),u!==null&&(Jn(u,i,d),bu(u,i,d))}};function Mw(i,u,d,m,b,_,B){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,_,B):u.prototype&&u.prototype.isPureReactComponent?!lu(d,m)||!lu(b,_):!0}function Iw(i,u,d,m){i=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(d,m),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(d,m),u.state!==i&&Mp.enqueueReplaceState(u,u.state,null)}function Yo(i,u){var d=u;if("ref"in u){d={};for(var m in u)m!=="ref"&&(d[m]=u[m])}if(i=i.defaultProps){d===u&&(d=h({},d));for(var b in i)d[b]===void 0&&(d[b]=i[b])}return d}var Pc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Bw(i){Pc(i)}function Fw(i){console.error(i)}function Pw(i){Pc(i)}function Lc(i,u){try{var d=i.onUncaughtError;d(u.value,{componentStack:u.stack})}catch(m){setTimeout(function(){throw m})}}function Lw(i,u,d){try{var m=i.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Ip(i,u,d){return d=Za(d),d.tag=3,d.payload={element:null},d.callback=function(){Lc(i,u)},d}function jw(i){return i=Za(i),i.tag=3,i}function zw(i,u,d,m){var b=d.type.getDerivedStateFromError;if(typeof b=="function"){var _=m.value;i.payload=function(){return b(_)},i.callback=function(){Lw(u,d,m)}}var B=d.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(i.callback=function(){Lw(u,d,m),typeof b!="function"&&(uo===null?uo=new Set([this]):uo.add(this));var j=m.stack;this.componentDidCatch(m.value,{componentStack:j!==null?j:""})})}function KT(i,u,d,m,b){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(u=d.alternate,u!==null&&pu(u,d,b,!0),d=br.current,d!==null){switch(d.tag){case 13:return Wr===null?am():d.alternate===null&&Dt===0&&(Dt=3),d.flags&=-257,d.flags|=65536,d.lanes=b,m===lp?d.flags|=16384:(u=d.updateQueue,u===null?d.updateQueue=new Set([m]):u.add(m),im(i,m,b)),!1;case 22:return d.flags|=65536,m===lp?d.flags|=16384:(u=d.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=u):(d=u.retryQueue,d===null?u.retryQueue=new Set([m]):d.add(m)),im(i,m,b)),!1}throw Error(r(435,d.tag))}return im(i,m,b),am(),!1}if(lt)return u=br.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,m!==np&&(i=Error(r(422),{cause:m}),hu(mr(i,d)))):(m!==np&&(u=Error(r(423),{cause:m}),hu(mr(u,d))),i=i.current.alternate,i.flags|=65536,b&=-b,i.lanes|=b,m=mr(m,d),b=Ip(i.stateNode,m,b),dp(i,b),Dt!==4&&(Dt=2)),!1;var _=Error(r(520),{cause:m});if(_=mr(_,d),Iu===null?Iu=[_]:Iu.push(_),Dt!==4&&(Dt=2),u===null)return!0;m=mr(m,d),d=u;do{switch(d.tag){case 3:return d.flags|=65536,i=b&-b,d.lanes|=i,i=Ip(d.stateNode,m,i),dp(d,i),!1;case 1:if(u=d.type,_=d.stateNode,(d.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(uo===null||!uo.has(_))))return d.flags|=65536,b&=-b,d.lanes|=b,b=jw(b),zw(b,i,d,m),dp(d,b),!1}d=d.return}while(d!==null);return!1}var Uw=Error(r(461)),en=!1;function cn(i,u,d,m){u.child=i===null?Dw(u,null,d,m):es(u,i.child,d,m)}function qw(i,u,d,m,b){d=d.render;var _=u.ref;if("ref"in m){var B={};for(var j in m)j!=="ref"&&(B[j]=m[j])}else B=m;return Wo(u),m=gp(i,u,d,B,_,b),j=yp(),i!==null&&!en?(bp(i,u,b),Ca(i,u,b)):(lt&&j&&ep(u),u.flags|=1,cn(i,u,m,b),u.child)}function Hw(i,u,d,m,b){if(i===null){var _=d.type;return typeof _=="function"&&!Qh(_)&&_.defaultProps===void 0&&d.compare===null?(u.tag=15,u.type=_,Vw(i,u,_,m,b)):(i=gc(d.type,null,m,u,u.mode,b),i.ref=u.ref,i.return=u,u.child=i)}if(_=i.child,!qp(i,b)){var B=_.memoizedProps;if(d=d.compare,d=d!==null?d:lu,d(B,m)&&i.ref===u.ref)return Ca(i,u,b)}return u.flags|=1,i=ga(_,m),i.ref=u.ref,i.return=u,u.child=i}function Vw(i,u,d,m,b){if(i!==null){var _=i.memoizedProps;if(lu(_,m)&&i.ref===u.ref)if(en=!1,u.pendingProps=m=_,qp(i,b))(i.flags&131072)!==0&&(en=!0);else return u.lanes=i.lanes,Ca(i,u,b)}return Bp(i,u,d,m,b)}function Ww(i,u,d){var m=u.pendingProps,b=m.children,_=i!==null?i.memoizedState:null;if(m.mode==="hidden"){if((u.flags&128)!==0){if(m=_!==null?_.baseLanes|d:d,i!==null){for(b=u.child=i.child,_=0;b!==null;)_=_|b.lanes|b.childLanes,b=b.sibling;u.childLanes=_&~m}else u.childLanes=0,u.child=null;return Gw(i,u,m,d)}if((d&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},i!==null&&Sc(u,_!==null?_.cachePool:null),_!==null?Vb(u,_):pp(),Ow(u);else return u.lanes=u.childLanes=536870912,Gw(i,u,_!==null?_.baseLanes|d:d,d)}else _!==null?(Sc(u,_.cachePool),Vb(u,_),no(),u.memoizedState=null):(i!==null&&Sc(u,null),pp(),no());return cn(i,u,b,d),u.child}function Gw(i,u,d,m){var b=up();return b=b===null?null:{parent:Vt._currentValue,pool:b},u.memoizedState={baseLanes:d,cachePool:b},i!==null&&Sc(u,null),pp(),Ow(u),i!==null&&pu(i,u,m,!0),null}function jc(i,u){var d=u.ref;if(d===null)i!==null&&i.ref!==null&&(u.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(i===null||i.ref!==d)&&(u.flags|=4194816)}}function Bp(i,u,d,m,b){return Wo(u),d=gp(i,u,d,m,void 0,b),m=yp(),i!==null&&!en?(bp(i,u,b),Ca(i,u,b)):(lt&&m&&ep(u),u.flags|=1,cn(i,u,d,b),u.child)}function Xw(i,u,d,m,b,_){return Wo(u),u.updateQueue=null,d=Gb(u,m,d,b),Wb(i),m=yp(),i!==null&&!en?(bp(i,u,_),Ca(i,u,_)):(lt&&m&&ep(u),u.flags|=1,cn(i,u,d,_),u.child)}function Yw(i,u,d,m,b){if(Wo(u),u.stateNode===null){var _=Vi,B=d.contextType;typeof B=="object"&&B!==null&&(_=bn(B)),_=new d(m,_),u.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Mp,u.stateNode=_,_._reactInternals=u,_=u.stateNode,_.props=m,_.state=u.memoizedState,_.refs={},cp(u),B=d.contextType,_.context=typeof B=="object"&&B!==null?bn(B):Vi,_.state=u.memoizedState,B=d.getDerivedStateFromProps,typeof B=="function"&&(Op(u,d,B,m),_.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(B=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),B!==_.state&&Mp.enqueueReplaceState(_,_.state,null),xu(u,m,_,b),wu(),_.state=u.memoizedState),typeof _.componentDidMount=="function"&&(u.flags|=4194308),m=!0}else if(i===null){_=u.stateNode;var j=u.memoizedProps,$=Yo(d,j);_.props=$;var oe=_.context,ve=d.contextType;B=Vi,typeof ve=="object"&&ve!==null&&(B=bn(ve));var ye=d.getDerivedStateFromProps;ve=typeof ye=="function"||typeof _.getSnapshotBeforeUpdate=="function",j=u.pendingProps!==j,ve||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(j||oe!==B)&&Iw(u,_,m,B),Qa=!1;var se=u.memoizedState;_.state=se,xu(u,m,_,b),wu(),oe=u.memoizedState,j||se!==oe||Qa?(typeof ye=="function"&&(Op(u,d,ye,m),oe=u.memoizedState),($=Qa||Mw(u,d,$,m,se,oe,B))?(ve||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(u.flags|=4194308)):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=m,u.memoizedState=oe),_.props=m,_.state=oe,_.context=B,m=$):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),m=!1)}else{_=u.stateNode,fp(i,u),B=u.memoizedProps,ve=Yo(d,B),_.props=ve,ye=u.pendingProps,se=_.context,oe=d.contextType,$=Vi,typeof oe=="object"&&oe!==null&&($=bn(oe)),j=d.getDerivedStateFromProps,(oe=typeof j=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(B!==ye||se!==$)&&Iw(u,_,m,$),Qa=!1,se=u.memoizedState,_.state=se,xu(u,m,_,b),wu();var ue=u.memoizedState;B!==ye||se!==ue||Qa||i!==null&&i.dependencies!==null&&wc(i.dependencies)?(typeof j=="function"&&(Op(u,d,j,m),ue=u.memoizedState),(ve=Qa||Mw(u,d,ve,m,se,ue,$)||i!==null&&i.dependencies!==null&&wc(i.dependencies))?(oe||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(m,ue,$),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(m,ue,$)),typeof _.componentDidUpdate=="function"&&(u.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof _.componentDidUpdate!="function"||B===i.memoizedProps&&se===i.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||B===i.memoizedProps&&se===i.memoizedState||(u.flags|=1024),u.memoizedProps=m,u.memoizedState=ue),_.props=m,_.state=ue,_.context=$,m=ve):(typeof _.componentDidUpdate!="function"||B===i.memoizedProps&&se===i.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||B===i.memoizedProps&&se===i.memoizedState||(u.flags|=1024),m=!1)}return _=m,jc(i,u),m=(u.flags&128)!==0,_||m?(_=u.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:_.render(),u.flags|=1,i!==null&&m?(u.child=es(u,i.child,null,b),u.child=es(u,null,d,b)):cn(i,u,d,b),u.memoizedState=_.state,i=u.child):i=Ca(i,u,b),i}function Kw(i,u,d,m){return du(),u.flags|=256,cn(i,u,d,m),u.child}var Fp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pp(i){return{baseLanes:i,cachePool:Fb()}}function Lp(i,u,d){return i=i!==null?i.childLanes&~d:0,u&&(i|=wr),i}function $w(i,u,d){var m=u.pendingProps,b=!1,_=(u.flags&128)!==0,B;if((B=_)||(B=i!==null&&i.memoizedState===null?!1:(Wt.current&2)!==0),B&&(b=!0,u.flags&=-129),B=(u.flags&32)!==0,u.flags&=-33,i===null){if(lt){if(b?to(u):no(),lt){var j=Nt,$;if($=j){e:{for($=j,j=Vr;$.nodeType!==8;){if(!j){j=null;break e}if($=Or($.nextSibling),$===null){j=null;break e}}j=$}j!==null?(u.memoizedState={dehydrated:j,treeContext:zo!==null?{id:ya,overflow:ba}:null,retryLane:536870912,hydrationErrors:null},$=Yn(18,null,null,0),$.stateNode=j,$.return=u,u.child=$,Nn=u,Nt=null,$=!0):$=!1}$||Ho(u)}if(j=u.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return xm(j)?u.lanes=32:u.lanes=536870912,null;Ea(u)}return j=m.children,m=m.fallback,b?(no(),b=u.mode,j=zc({mode:"hidden",children:j},b),m=jo(m,b,d,null),j.return=u,m.return=u,j.sibling=m,u.child=j,b=u.child,b.memoizedState=Pp(d),b.childLanes=Lp(i,B,d),u.memoizedState=Fp,m):(to(u),jp(u,j))}if($=i.memoizedState,$!==null&&(j=$.dehydrated,j!==null)){if(_)u.flags&256?(to(u),u.flags&=-257,u=zp(i,u,d)):u.memoizedState!==null?(no(),u.child=i.child,u.flags|=128,u=null):(no(),b=m.fallback,j=u.mode,m=zc({mode:"visible",children:m.children},j),b=jo(b,j,d,null),b.flags|=2,m.return=u,b.return=u,m.sibling=b,u.child=m,es(u,i.child,null,d),m=u.child,m.memoizedState=Pp(d),m.childLanes=Lp(i,B,d),u.memoizedState=Fp,u=b);else if(to(u),xm(j)){if(B=j.nextSibling&&j.nextSibling.dataset,B)var oe=B.dgst;B=oe,m=Error(r(419)),m.stack="",m.digest=B,hu({value:m,source:null,stack:null}),u=zp(i,u,d)}else if(en||pu(i,u,d,!1),B=(d&i.childLanes)!==0,en||B){if(B=bt,B!==null&&(m=d&-d,m=(m&42)!==0?1:Sh(m),m=(m&(B.suspendedLanes|d))!==0?0:m,m!==0&&m!==$.retryLane))throw $.retryLane=m,Hi(i,m),Jn(B,i,m),Uw;j.data==="$?"||am(),u=zp(i,u,d)}else j.data==="$?"?(u.flags|=192,u.child=i.child,u=null):(i=$.treeContext,Nt=Or(j.nextSibling),Nn=u,lt=!0,qo=null,Vr=!1,i!==null&&(gr[yr++]=ya,gr[yr++]=ba,gr[yr++]=zo,ya=i.id,ba=i.overflow,zo=u),u=jp(u,m.children),u.flags|=4096);return u}return b?(no(),b=m.fallback,j=u.mode,$=i.child,oe=$.sibling,m=ga($,{mode:"hidden",children:m.children}),m.subtreeFlags=$.subtreeFlags&65011712,oe!==null?b=ga(oe,b):(b=jo(b,j,d,null),b.flags|=2),b.return=u,m.return=u,m.sibling=b,u.child=m,m=b,b=u.child,j=i.child.memoizedState,j===null?j=Pp(d):($=j.cachePool,$!==null?(oe=Vt._currentValue,$=$.parent!==oe?{parent:oe,pool:oe}:$):$=Fb(),j={baseLanes:j.baseLanes|d,cachePool:$}),b.memoizedState=j,b.childLanes=Lp(i,B,d),u.memoizedState=Fp,m):(to(u),d=i.child,i=d.sibling,d=ga(d,{mode:"visible",children:m.children}),d.return=u,d.sibling=null,i!==null&&(B=u.deletions,B===null?(u.deletions=[i],u.flags|=16):B.push(i)),u.child=d,u.memoizedState=null,d)}function jp(i,u){return u=zc({mode:"visible",children:u},i.mode),u.return=i,i.child=u}function zc(i,u){return i=Yn(22,i,null,u),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function zp(i,u,d){return es(u,i.child,null,d),i=jp(u,u.pendingProps.children),i.flags|=2,u.memoizedState=null,i}function Qw(i,u,d){i.lanes|=u;var m=i.alternate;m!==null&&(m.lanes|=u),ap(i.return,u,d)}function Up(i,u,d,m,b){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:b}:(_.isBackwards=u,_.rendering=null,_.renderingStartTime=0,_.last=m,_.tail=d,_.tailMode=b)}function Zw(i,u,d){var m=u.pendingProps,b=m.revealOrder,_=m.tail;if(cn(i,u,m.children,d),m=Wt.current,(m&2)!==0)m=m&1|2,u.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=u.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Qw(i,d,u);else if(i.tag===19)Qw(i,d,u);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===u)break e;for(;i.sibling===null;){if(i.return===null||i.return===u)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}switch(J(Wt,m),b){case"forwards":for(d=u.child,b=null;d!==null;)i=d.alternate,i!==null&&Fc(i)===null&&(b=d),d=d.sibling;d=b,d===null?(b=u.child,u.child=null):(b=d.sibling,d.sibling=null),Up(u,!1,b,d,_);break;case"backwards":for(d=null,b=u.child,u.child=null;b!==null;){if(i=b.alternate,i!==null&&Fc(i)===null){u.child=b;break}i=b.sibling,b.sibling=d,d=b,b=i}Up(u,!0,d,null,_);break;case"together":Up(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Ca(i,u,d){if(i!==null&&(u.dependencies=i.dependencies),so|=u.lanes,(d&u.childLanes)===0)if(i!==null){if(pu(i,u,d,!1),(d&u.childLanes)===0)return null}else return null;if(i!==null&&u.child!==i.child)throw Error(r(153));if(u.child!==null){for(i=u.child,d=ga(i,i.pendingProps),u.child=d,d.return=u;i.sibling!==null;)i=i.sibling,d=d.sibling=ga(i,i.pendingProps),d.return=u;d.sibling=null}return u.child}function qp(i,u){return(i.lanes&u)!==0?!0:(i=i.dependencies,!!(i!==null&&wc(i)))}function $T(i,u,d){switch(u.tag){case 3:xe(u,u.stateNode.containerInfo),$a(u,Vt,i.memoizedState.cache),du();break;case 27:case 5:de(u);break;case 4:xe(u,u.stateNode.containerInfo);break;case 10:$a(u,u.type,u.memoizedProps.value);break;case 13:var m=u.memoizedState;if(m!==null)return m.dehydrated!==null?(to(u),u.flags|=128,null):(d&u.child.childLanes)!==0?$w(i,u,d):(to(u),i=Ca(i,u,d),i!==null?i.sibling:null);to(u);break;case 19:var b=(i.flags&128)!==0;if(m=(d&u.childLanes)!==0,m||(pu(i,u,d,!1),m=(d&u.childLanes)!==0),b){if(m)return Zw(i,u,d);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),J(Wt,Wt.current),m)break;return null;case 22:case 23:return u.lanes=0,Ww(i,u,d);case 24:$a(u,Vt,i.memoizedState.cache)}return Ca(i,u,d)}function Jw(i,u,d){if(i!==null)if(i.memoizedProps!==u.pendingProps)en=!0;else{if(!qp(i,d)&&(u.flags&128)===0)return en=!1,$T(i,u,d);en=(i.flags&131072)!==0}else en=!1,lt&&(u.flags&1048576)!==0&&kb(u,bc,u.index);switch(u.lanes=0,u.tag){case 16:e:{i=u.pendingProps;var m=u.elementType,b=m._init;if(m=b(m._payload),u.type=m,typeof m=="function")Qh(m)?(i=Yo(m,i),u.tag=1,u=Yw(null,u,m,i,d)):(u.tag=0,u=Bp(null,u,m,i,d));else{if(m!=null){if(b=m.$$typeof,b===C){u.tag=11,u=qw(null,u,m,i,d);break e}else if(b===N){u.tag=14,u=Hw(null,u,m,i,d);break e}}throw u=W(m)||m,Error(r(306,u,""))}}return u;case 0:return Bp(i,u,u.type,u.pendingProps,d);case 1:return m=u.type,b=Yo(m,u.pendingProps),Yw(i,u,m,b,d);case 3:e:{if(xe(u,u.stateNode.containerInfo),i===null)throw Error(r(387));m=u.pendingProps;var _=u.memoizedState;b=_.element,fp(i,u),xu(u,m,null,d);var B=u.memoizedState;if(m=B.cache,$a(u,Vt,m),m!==_.cache&&op(u,[Vt],d,!0),wu(),m=B.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:B.cache},u.updateQueue.baseState=_,u.memoizedState=_,u.flags&256){u=Kw(i,u,m,d);break e}else if(m!==b){b=mr(Error(r(424)),u),hu(b),u=Kw(i,u,m,d);break e}else{switch(i=u.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Nt=Or(i.firstChild),Nn=u,lt=!0,qo=null,Vr=!0,d=Dw(u,null,m,d),u.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(du(),m===b){u=Ca(i,u,d);break e}cn(i,u,m,d)}u=u.child}return u;case 26:return jc(i,u),i===null?(d=r1(u.type,null,u.pendingProps,null))?u.memoizedState=d:lt||(d=u.type,i=u.pendingProps,m=ef(pe.current).createElement(d),m[yn]=u,m[Mn]=i,dn(m,d,i),Jt(m),u.stateNode=m):u.memoizedState=r1(u.type,i.memoizedProps,u.pendingProps,i.memoizedState),null;case 27:return de(u),i===null&&lt&&(m=u.stateNode=e1(u.type,u.pendingProps,pe.current),Nn=u,Vr=!0,b=Nt,fo(u.type)?(Sm=b,Nt=Or(m.firstChild)):Nt=b),cn(i,u,u.pendingProps.children,d),jc(i,u),i===null&&(u.flags|=4194304),u.child;case 5:return i===null&&lt&&((b=m=Nt)&&(m=Ck(m,u.type,u.pendingProps,Vr),m!==null?(u.stateNode=m,Nn=u,Nt=Or(m.firstChild),Vr=!1,b=!0):b=!1),b||Ho(u)),de(u),b=u.type,_=u.pendingProps,B=i!==null?i.memoizedProps:null,m=_.children,ym(b,_)?m=null:B!==null&&ym(b,B)&&(u.flags|=32),u.memoizedState!==null&&(b=gp(i,u,qT,null,null,d),Hu._currentValue=b),jc(i,u),cn(i,u,m,d),u.child;case 6:return i===null&&lt&&((i=d=Nt)&&(d=_k(d,u.pendingProps,Vr),d!==null?(u.stateNode=d,Nn=u,Nt=null,i=!0):i=!1),i||Ho(u)),null;case 13:return $w(i,u,d);case 4:return xe(u,u.stateNode.containerInfo),m=u.pendingProps,i===null?u.child=es(u,null,m,d):cn(i,u,m,d),u.child;case 11:return qw(i,u,u.type,u.pendingProps,d);case 7:return cn(i,u,u.pendingProps,d),u.child;case 8:return cn(i,u,u.pendingProps.children,d),u.child;case 12:return cn(i,u,u.pendingProps.children,d),u.child;case 10:return m=u.pendingProps,$a(u,u.type,m.value),cn(i,u,m.children,d),u.child;case 9:return b=u.type._context,m=u.pendingProps.children,Wo(u),b=bn(b),m=m(b),u.flags|=1,cn(i,u,m,d),u.child;case 14:return Hw(i,u,u.type,u.pendingProps,d);case 15:return Vw(i,u,u.type,u.pendingProps,d);case 19:return Zw(i,u,d);case 31:return m=u.pendingProps,d=u.mode,m={mode:m.mode,children:m.children},i===null?(d=zc(m,d),d.ref=u.ref,u.child=d,d.return=u,u=d):(d=ga(i.child,m),d.ref=u.ref,u.child=d,d.return=u,u=d),u;case 22:return Ww(i,u,d);case 24:return Wo(u),m=bn(Vt),i===null?(b=up(),b===null&&(b=bt,_=ip(),b.pooledCache=_,_.refCount++,_!==null&&(b.pooledCacheLanes|=d),b=_),u.memoizedState={parent:m,cache:b},cp(u),$a(u,Vt,b)):((i.lanes&d)!==0&&(fp(i,u),xu(u,null,null,d),wu()),b=i.memoizedState,_=u.memoizedState,b.parent!==m?(b={parent:m,cache:m},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),$a(u,Vt,m)):(m=_.cache,$a(u,Vt,m),m!==b.cache&&op(u,[Vt],d,!0))),cn(i,u,u.pendingProps.children,d),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function _a(i){i.flags|=4}function ex(i,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!u1(u)){if(u=br.current,u!==null&&((rt&4194048)===rt?Wr!==null:(rt&62914560)!==rt&&(rt&536870912)===0||u!==Wr))throw yu=lp,Pb;i.flags|=8192}}function Uc(i,u){u!==null&&(i.flags|=4),i.flags&16384&&(u=i.tag!==22?O0():536870912,i.lanes|=u,as|=u)}function Tu(i,u){if(!lt)switch(i.tailMode){case"hidden":u=i.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?u||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function Ct(i){var u=i.alternate!==null&&i.alternate.child===i.child,d=0,m=0;if(u)for(var b=i.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=i,b=b.sibling;else for(b=i.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=i,b=b.sibling;return i.subtreeFlags|=m,i.childLanes=d,u}function QT(i,u,d){var m=u.pendingProps;switch(tp(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(u),null;case 1:return Ct(u),null;case 3:return d=u.stateNode,m=null,i!==null&&(m=i.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),xa(Vt),Ee(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(fu(u)?_a(u):i===null||i.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Ob())),Ct(u),null;case 26:return d=u.memoizedState,i===null?(_a(u),d!==null?(Ct(u),ex(u,d)):(Ct(u),u.flags&=-16777217)):d?d!==i.memoizedState?(_a(u),Ct(u),ex(u,d)):(Ct(u),u.flags&=-16777217):(i.memoizedProps!==m&&_a(u),Ct(u),u.flags&=-16777217),null;case 27:we(u),d=pe.current;var b=u.type;if(i!==null&&u.stateNode!=null)i.memoizedProps!==m&&_a(u);else{if(!m){if(u.stateNode===null)throw Error(r(166));return Ct(u),null}i=re.current,fu(u)?Nb(u):(i=e1(b,m,d),u.stateNode=i,_a(u))}return Ct(u),null;case 5:if(we(u),d=u.type,i!==null&&u.stateNode!=null)i.memoizedProps!==m&&_a(u);else{if(!m){if(u.stateNode===null)throw Error(r(166));return Ct(u),null}if(i=re.current,fu(u))Nb(u);else{switch(b=ef(pe.current),i){case 1:i=b.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:i=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":i=b.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":i=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":i=b.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof m.is=="string"?b.createElement("select",{is:m.is}):b.createElement("select"),m.multiple?i.multiple=!0:m.size&&(i.size=m.size);break;default:i=typeof m.is=="string"?b.createElement(d,{is:m.is}):b.createElement(d)}}i[yn]=u,i[Mn]=m;e:for(b=u.child;b!==null;){if(b.tag===5||b.tag===6)i.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===u)break e;for(;b.sibling===null;){if(b.return===null||b.return===u)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}u.stateNode=i;e:switch(dn(i,d,m),d){case"button":case"input":case"select":case"textarea":i=!!m.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&_a(u)}}return Ct(u),u.flags&=-16777217,null;case 6:if(i&&u.stateNode!=null)i.memoizedProps!==m&&_a(u);else{if(typeof m!="string"&&u.stateNode===null)throw Error(r(166));if(i=pe.current,fu(u)){if(i=u.stateNode,d=u.memoizedProps,m=null,b=Nn,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}i[yn]=u,i=!!(i.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||Xx(i.nodeValue,d)),i||Ho(u)}else i=ef(i).createTextNode(m),i[yn]=u,u.stateNode=i}return Ct(u),null;case 13:if(m=u.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(b=fu(u),m!==null&&m.dehydrated!==null){if(i===null){if(!b)throw Error(r(318));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[yn]=u}else du(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ct(u),b=!1}else b=Ob(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(Ea(u),u):(Ea(u),null)}if(Ea(u),(u.flags&128)!==0)return u.lanes=d,u;if(d=m!==null,i=i!==null&&i.memoizedState!==null,d){m=u.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool);var _=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(_=m.memoizedState.cachePool.pool),_!==b&&(m.flags|=2048)}return d!==i&&d&&(u.child.flags|=8192),Uc(u,u.updateQueue),Ct(u),null;case 4:return Ee(),i===null&&hm(u.stateNode.containerInfo),Ct(u),null;case 10:return xa(u.type),Ct(u),null;case 19:if(Q(Wt),b=u.memoizedState,b===null)return Ct(u),null;if(m=(u.flags&128)!==0,_=b.rendering,_===null)if(m)Tu(b,!1);else{if(Dt!==0||i!==null&&(i.flags&128)!==0)for(i=u.child;i!==null;){if(_=Fc(i),_!==null){for(u.flags|=128,Tu(b,!1),i=_.updateQueue,u.updateQueue=i,Uc(u,i),u.subtreeFlags=0,i=d,d=u.child;d!==null;)Tb(d,i),d=d.sibling;return J(Wt,Wt.current&1|2),u.child}i=i.sibling}b.tail!==null&&it()>Vc&&(u.flags|=128,m=!0,Tu(b,!1),u.lanes=4194304)}else{if(!m)if(i=Fc(_),i!==null){if(u.flags|=128,m=!0,i=i.updateQueue,u.updateQueue=i,Uc(u,i),Tu(b,!0),b.tail===null&&b.tailMode==="hidden"&&!_.alternate&&!lt)return Ct(u),null}else 2*it()-b.renderingStartTime>Vc&&d!==536870912&&(u.flags|=128,m=!0,Tu(b,!1),u.lanes=4194304);b.isBackwards?(_.sibling=u.child,u.child=_):(i=b.last,i!==null?i.sibling=_:u.child=_,b.last=_)}return b.tail!==null?(u=b.tail,b.rendering=u,b.tail=u.sibling,b.renderingStartTime=it(),u.sibling=null,i=Wt.current,J(Wt,m?i&1|2:i&1),u):(Ct(u),null);case 22:case 23:return Ea(u),mp(),m=u.memoizedState!==null,i!==null?i.memoizedState!==null!==m&&(u.flags|=8192):m&&(u.flags|=8192),m?(d&536870912)!==0&&(u.flags&128)===0&&(Ct(u),u.subtreeFlags&6&&(u.flags|=8192)):Ct(u),d=u.updateQueue,d!==null&&Uc(u,d.retryQueue),d=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==d&&(u.flags|=2048),i!==null&&Q(Go),null;case 24:return d=null,i!==null&&(d=i.memoizedState.cache),u.memoizedState.cache!==d&&(u.flags|=2048),xa(Vt),Ct(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function ZT(i,u){switch(tp(u),u.tag){case 1:return i=u.flags,i&65536?(u.flags=i&-65537|128,u):null;case 3:return xa(Vt),Ee(),i=u.flags,(i&65536)!==0&&(i&128)===0?(u.flags=i&-65537|128,u):null;case 26:case 27:case 5:return we(u),null;case 13:if(Ea(u),i=u.memoizedState,i!==null&&i.dehydrated!==null){if(u.alternate===null)throw Error(r(340));du()}return i=u.flags,i&65536?(u.flags=i&-65537|128,u):null;case 19:return Q(Wt),null;case 4:return Ee(),null;case 10:return xa(u.type),null;case 22:case 23:return Ea(u),mp(),i!==null&&Q(Go),i=u.flags,i&65536?(u.flags=i&-65537|128,u):null;case 24:return xa(Vt),null;case 25:return null;default:return null}}function tx(i,u){switch(tp(u),u.tag){case 3:xa(Vt),Ee();break;case 26:case 27:case 5:we(u);break;case 4:Ee();break;case 13:Ea(u);break;case 19:Q(Wt);break;case 10:xa(u.type);break;case 22:case 23:Ea(u),mp(),i!==null&&Q(Go);break;case 24:xa(Vt)}}function ku(i,u){try{var d=u.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var b=m.next;d=b;do{if((d.tag&i)===i){m=void 0;var _=d.create,B=d.inst;m=_(),B.destroy=m}d=d.next}while(d!==b)}}catch(j){yt(u,u.return,j)}}function ro(i,u,d){try{var m=u.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var _=b.next;m=_;do{if((m.tag&i)===i){var B=m.inst,j=B.destroy;if(j!==void 0){B.destroy=void 0,b=u;var $=d,oe=j;try{oe()}catch(ve){yt(b,$,ve)}}}m=m.next}while(m!==_)}}catch(ve){yt(u,u.return,ve)}}function nx(i){var u=i.updateQueue;if(u!==null){var d=i.stateNode;try{Hb(u,d)}catch(m){yt(i,i.return,m)}}}function rx(i,u,d){d.props=Yo(i.type,i.memoizedProps),d.state=i.memoizedState;try{d.componentWillUnmount()}catch(m){yt(i,u,m)}}function Nu(i,u){try{var d=i.ref;if(d!==null){switch(i.tag){case 26:case 27:case 5:var m=i.stateNode;break;case 30:m=i.stateNode;break;default:m=i.stateNode}typeof d=="function"?i.refCleanup=d(m):d.current=m}}catch(b){yt(i,u,b)}}function Gr(i,u){var d=i.ref,m=i.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(b){yt(i,u,b)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(b){yt(i,u,b)}else d.current=null}function ax(i){var u=i.type,d=i.memoizedProps,m=i.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(b){yt(i,i.return,b)}}function Hp(i,u,d){try{var m=i.stateNode;bk(m,i.type,d,u),m[Mn]=u}catch(b){yt(i,i.return,b)}}function ox(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&fo(i.type)||i.tag===4}function Vp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||ox(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&fo(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Wp(i,u,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,u?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(i,u):(u=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,u.appendChild(i),d=d._reactRootContainer,d!=null||u.onclick!==null||(u.onclick=Jc));else if(m!==4&&(m===27&&fo(i.type)&&(d=i.stateNode,u=null),i=i.child,i!==null))for(Wp(i,u,d),i=i.sibling;i!==null;)Wp(i,u,d),i=i.sibling}function qc(i,u,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,u?d.insertBefore(i,u):d.appendChild(i);else if(m!==4&&(m===27&&fo(i.type)&&(d=i.stateNode),i=i.child,i!==null))for(qc(i,u,d),i=i.sibling;i!==null;)qc(i,u,d),i=i.sibling}function ix(i){var u=i.stateNode,d=i.memoizedProps;try{for(var m=i.type,b=u.attributes;b.length;)u.removeAttributeNode(b[0]);dn(u,m,d),u[yn]=i,u[Mn]=d}catch(_){yt(i,i.return,_)}}var Ra=!1,It=!1,Gp=!1,sx=typeof WeakSet=="function"?WeakSet:Set,tn=null;function JT(i,u){if(i=i.containerInfo,vm=sf,i=yb(i),Vh(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var b=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{d.nodeType,_.nodeType}catch{d=null;break e}var B=0,j=-1,$=-1,oe=0,ve=0,ye=i,se=null;t:for(;;){for(var ue;ye!==d||b!==0&&ye.nodeType!==3||(j=B+b),ye!==_||m!==0&&ye.nodeType!==3||($=B+m),ye.nodeType===3&&(B+=ye.nodeValue.length),(ue=ye.firstChild)!==null;)se=ye,ye=ue;for(;;){if(ye===i)break t;if(se===d&&++oe===b&&(j=B),se===_&&++ve===m&&($=B),(ue=ye.nextSibling)!==null)break;ye=se,se=ye.parentNode}ye=ue}d=j===-1||$===-1?null:{start:j,end:$}}else d=null}d=d||{start:0,end:0}}else d=null;for(gm={focusedElem:i,selectionRange:d},sf=!1,tn=u;tn!==null;)if(u=tn,i=u.child,(u.subtreeFlags&1024)!==0&&i!==null)i.return=u,tn=i;else for(;tn!==null;){switch(u=tn,_=u.alternate,i=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,d=u,b=_.memoizedProps,_=_.memoizedState,m=d.stateNode;try{var ze=Yo(d.type,b,d.elementType===d.type);i=m.getSnapshotBeforeUpdate(ze,_),m.__reactInternalSnapshotBeforeUpdate=i}catch(Le){yt(d,d.return,Le)}}break;case 3:if((i&1024)!==0){if(i=u.stateNode.containerInfo,d=i.nodeType,d===9)wm(i);else if(d===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":wm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=u.sibling,i!==null){i.return=u.return,tn=i;break}tn=u.return}}function ux(i,u,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:ao(i,d),m&4&&ku(5,d);break;case 1:if(ao(i,d),m&4)if(i=d.stateNode,u===null)try{i.componentDidMount()}catch(B){yt(d,d.return,B)}else{var b=Yo(d.type,u.memoizedProps);u=u.memoizedState;try{i.componentDidUpdate(b,u,i.__reactInternalSnapshotBeforeUpdate)}catch(B){yt(d,d.return,B)}}m&64&&nx(d),m&512&&Nu(d,d.return);break;case 3:if(ao(i,d),m&64&&(i=d.updateQueue,i!==null)){if(u=null,d.child!==null)switch(d.child.tag){case 27:case 5:u=d.child.stateNode;break;case 1:u=d.child.stateNode}try{Hb(i,u)}catch(B){yt(d,d.return,B)}}break;case 27:u===null&&m&4&&ix(d);case 26:case 5:ao(i,d),u===null&&m&4&&ax(d),m&512&&Nu(d,d.return);break;case 12:ao(i,d);break;case 13:ao(i,d),m&4&&fx(i,d),m&64&&(i=d.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(d=uk.bind(null,d),Rk(i,d))));break;case 22:if(m=d.memoizedState!==null||Ra,!m){u=u!==null&&u.memoizedState!==null||It,b=Ra;var _=It;Ra=m,(It=u)&&!_?oo(i,d,(d.subtreeFlags&8772)!==0):ao(i,d),Ra=b,It=_}break;case 30:break;default:ao(i,d)}}function lx(i){var u=i.alternate;u!==null&&(i.alternate=null,lx(u)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(u=i.stateNode,u!==null&&_h(u)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Et=null,Fn=!1;function Aa(i,u,d){for(d=d.child;d!==null;)cx(i,u,d),d=d.sibling}function cx(i,u,d){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(pa,d)}catch{}switch(d.tag){case 26:It||Gr(d,u),Aa(i,u,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:It||Gr(d,u);var m=Et,b=Fn;fo(d.type)&&(Et=d.stateNode,Fn=!1),Aa(i,u,d),ju(d.stateNode),Et=m,Fn=b;break;case 5:It||Gr(d,u);case 6:if(m=Et,b=Fn,Et=null,Aa(i,u,d),Et=m,Fn=b,Et!==null)if(Fn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(d.stateNode)}catch(_){yt(d,u,_)}else try{Et.removeChild(d.stateNode)}catch(_){yt(d,u,_)}break;case 18:Et!==null&&(Fn?(i=Et,Zx(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,d.stateNode),Xu(i)):Zx(Et,d.stateNode));break;case 4:m=Et,b=Fn,Et=d.stateNode.containerInfo,Fn=!0,Aa(i,u,d),Et=m,Fn=b;break;case 0:case 11:case 14:case 15:It||ro(2,d,u),It||ro(4,d,u),Aa(i,u,d);break;case 1:It||(Gr(d,u),m=d.stateNode,typeof m.componentWillUnmount=="function"&&rx(d,u,m)),Aa(i,u,d);break;case 21:Aa(i,u,d);break;case 22:It=(m=It)||d.memoizedState!==null,Aa(i,u,d),It=m;break;default:Aa(i,u,d)}}function fx(i,u){if(u.memoizedState===null&&(i=u.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Xu(i)}catch(d){yt(u,u.return,d)}}function ek(i){switch(i.tag){case 13:case 19:var u=i.stateNode;return u===null&&(u=i.stateNode=new sx),u;case 22:return i=i.stateNode,u=i._retryCache,u===null&&(u=i._retryCache=new sx),u;default:throw Error(r(435,i.tag))}}function Xp(i,u){var d=ek(i);u.forEach(function(m){var b=lk.bind(null,i,m);d.has(m)||(d.add(m),m.then(b,b))})}function Kn(i,u){var d=u.deletions;if(d!==null)for(var m=0;m<d.length;m++){var b=d[m],_=i,B=u,j=B;e:for(;j!==null;){switch(j.tag){case 27:if(fo(j.type)){Et=j.stateNode,Fn=!1;break e}break;case 5:Et=j.stateNode,Fn=!1;break e;case 3:case 4:Et=j.stateNode.containerInfo,Fn=!0;break e}j=j.return}if(Et===null)throw Error(r(160));cx(_,B,b),Et=null,Fn=!1,_=b.alternate,_!==null&&(_.return=null),b.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)dx(u,i),u=u.sibling}var Dr=null;function dx(i,u){var d=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Kn(u,i),$n(i),m&4&&(ro(3,i,i.return),ku(3,i),ro(5,i,i.return));break;case 1:Kn(u,i),$n(i),m&512&&(It||d===null||Gr(d,d.return)),m&64&&Ra&&(i=i.updateQueue,i!==null&&(m=i.callbacks,m!==null&&(d=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var b=Dr;if(Kn(u,i),$n(i),m&512&&(It||d===null||Gr(d,d.return)),m&4){var _=d!==null?d.memoizedState:null;if(m=i.memoizedState,d===null)if(m===null)if(i.stateNode===null){e:{m=i.type,d=i.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":_=b.getElementsByTagName("title")[0],(!_||_[eu]||_[yn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=b.createElement(m),b.head.insertBefore(_,b.querySelector("head > title"))),dn(_,m,d),_[yn]=i,Jt(_),m=_;break e;case"link":var B=i1("link","href",b).get(m+(d.href||""));if(B){for(var j=0;j<B.length;j++)if(_=B[j],_.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&_.getAttribute("rel")===(d.rel==null?null:d.rel)&&_.getAttribute("title")===(d.title==null?null:d.title)&&_.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){B.splice(j,1);break t}}_=b.createElement(m),dn(_,m,d),b.head.appendChild(_);break;case"meta":if(B=i1("meta","content",b).get(m+(d.content||""))){for(j=0;j<B.length;j++)if(_=B[j],_.getAttribute("content")===(d.content==null?null:""+d.content)&&_.getAttribute("name")===(d.name==null?null:d.name)&&_.getAttribute("property")===(d.property==null?null:d.property)&&_.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&_.getAttribute("charset")===(d.charSet==null?null:d.charSet)){B.splice(j,1);break t}}_=b.createElement(m),dn(_,m,d),b.head.appendChild(_);break;default:throw Error(r(468,m))}_[yn]=i,Jt(_),m=_}i.stateNode=m}else s1(b,i.type,i.stateNode);else i.stateNode=o1(b,m,i.memoizedProps);else _!==m?(_===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):_.count--,m===null?s1(b,i.type,i.stateNode):o1(b,m,i.memoizedProps)):m===null&&i.stateNode!==null&&Hp(i,i.memoizedProps,d.memoizedProps)}break;case 27:Kn(u,i),$n(i),m&512&&(It||d===null||Gr(d,d.return)),d!==null&&m&4&&Hp(i,i.memoizedProps,d.memoizedProps);break;case 5:if(Kn(u,i),$n(i),m&512&&(It||d===null||Gr(d,d.return)),i.flags&32){b=i.stateNode;try{Fi(b,"")}catch(ue){yt(i,i.return,ue)}}m&4&&i.stateNode!=null&&(b=i.memoizedProps,Hp(i,b,d!==null?d.memoizedProps:b)),m&1024&&(Gp=!0);break;case 6:if(Kn(u,i),$n(i),m&4){if(i.stateNode===null)throw Error(r(162));m=i.memoizedProps,d=i.stateNode;try{d.nodeValue=m}catch(ue){yt(i,i.return,ue)}}break;case 3:if(rf=null,b=Dr,Dr=tf(u.containerInfo),Kn(u,i),Dr=b,$n(i),m&4&&d!==null&&d.memoizedState.isDehydrated)try{Xu(u.containerInfo)}catch(ue){yt(i,i.return,ue)}Gp&&(Gp=!1,hx(i));break;case 4:m=Dr,Dr=tf(i.stateNode.containerInfo),Kn(u,i),$n(i),Dr=m;break;case 12:Kn(u,i),$n(i);break;case 13:Kn(u,i),$n(i),i.child.flags&8192&&i.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Jp=it()),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,Xp(i,m)));break;case 22:b=i.memoizedState!==null;var $=d!==null&&d.memoizedState!==null,oe=Ra,ve=It;if(Ra=oe||b,It=ve||$,Kn(u,i),It=ve,Ra=oe,$n(i),m&8192)e:for(u=i.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(d===null||$||Ra||It||Ko(i)),d=null,u=i;;){if(u.tag===5||u.tag===26){if(d===null){$=d=u;try{if(_=$.stateNode,b)B=_.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{j=$.stateNode;var ye=$.memoizedProps.style,se=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;j.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(ue){yt($,$.return,ue)}}}else if(u.tag===6){if(d===null){$=u;try{$.stateNode.nodeValue=b?"":$.memoizedProps}catch(ue){yt($,$.return,ue)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===i)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===i)break e;for(;u.sibling===null;){if(u.return===null||u.return===i)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}m&4&&(m=i.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,Xp(i,d))));break;case 19:Kn(u,i),$n(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,Xp(i,m)));break;case 30:break;case 21:break;default:Kn(u,i),$n(i)}}function $n(i){var u=i.flags;if(u&2){try{for(var d,m=i.return;m!==null;){if(ox(m)){d=m;break}m=m.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var b=d.stateNode,_=Vp(i);qc(i,_,b);break;case 5:var B=d.stateNode;d.flags&32&&(Fi(B,""),d.flags&=-33);var j=Vp(i);qc(i,j,B);break;case 3:case 4:var $=d.stateNode.containerInfo,oe=Vp(i);Wp(i,oe,$);break;default:throw Error(r(161))}}catch(ve){yt(i,i.return,ve)}i.flags&=-3}u&4096&&(i.flags&=-4097)}function hx(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var u=i;hx(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),i=i.sibling}}function ao(i,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)ux(i,u.alternate,u),u=u.sibling}function Ko(i){for(i=i.child;i!==null;){var u=i;switch(u.tag){case 0:case 11:case 14:case 15:ro(4,u,u.return),Ko(u);break;case 1:Gr(u,u.return);var d=u.stateNode;typeof d.componentWillUnmount=="function"&&rx(u,u.return,d),Ko(u);break;case 27:ju(u.stateNode);case 26:case 5:Gr(u,u.return),Ko(u);break;case 22:u.memoizedState===null&&Ko(u);break;case 30:Ko(u);break;default:Ko(u)}i=i.sibling}}function oo(i,u,d){for(d=d&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var m=u.alternate,b=i,_=u,B=_.flags;switch(_.tag){case 0:case 11:case 15:oo(b,_,d),ku(4,_);break;case 1:if(oo(b,_,d),m=_,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(oe){yt(m,m.return,oe)}if(m=_,b=m.updateQueue,b!==null){var j=m.stateNode;try{var $=b.shared.hiddenCallbacks;if($!==null)for(b.shared.hiddenCallbacks=null,b=0;b<$.length;b++)qb($[b],j)}catch(oe){yt(m,m.return,oe)}}d&&B&64&&nx(_),Nu(_,_.return);break;case 27:ix(_);case 26:case 5:oo(b,_,d),d&&m===null&&B&4&&ax(_),Nu(_,_.return);break;case 12:oo(b,_,d);break;case 13:oo(b,_,d),d&&B&4&&fx(b,_);break;case 22:_.memoizedState===null&&oo(b,_,d),Nu(_,_.return);break;case 30:break;default:oo(b,_,d)}u=u.sibling}}function Yp(i,u){var d=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),i=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(i=u.memoizedState.cachePool.pool),i!==d&&(i!=null&&i.refCount++,d!=null&&mu(d))}function Kp(i,u){i=null,u.alternate!==null&&(i=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==i&&(u.refCount++,i!=null&&mu(i))}function Xr(i,u,d,m){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)px(i,u,d,m),u=u.sibling}function px(i,u,d,m){var b=u.flags;switch(u.tag){case 0:case 11:case 15:Xr(i,u,d,m),b&2048&&ku(9,u);break;case 1:Xr(i,u,d,m);break;case 3:Xr(i,u,d,m),b&2048&&(i=null,u.alternate!==null&&(i=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==i&&(u.refCount++,i!=null&&mu(i)));break;case 12:if(b&2048){Xr(i,u,d,m),i=u.stateNode;try{var _=u.memoizedProps,B=_.id,j=_.onPostCommit;typeof j=="function"&&j(B,u.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch($){yt(u,u.return,$)}}else Xr(i,u,d,m);break;case 13:Xr(i,u,d,m);break;case 23:break;case 22:_=u.stateNode,B=u.alternate,u.memoizedState!==null?_._visibility&2?Xr(i,u,d,m):Du(i,u):_._visibility&2?Xr(i,u,d,m):(_._visibility|=2,ts(i,u,d,m,(u.subtreeFlags&10256)!==0)),b&2048&&Yp(B,u);break;case 24:Xr(i,u,d,m),b&2048&&Kp(u.alternate,u);break;default:Xr(i,u,d,m)}}function ts(i,u,d,m,b){for(b=b&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var _=i,B=u,j=d,$=m,oe=B.flags;switch(B.tag){case 0:case 11:case 15:ts(_,B,j,$,b),ku(8,B);break;case 23:break;case 22:var ve=B.stateNode;B.memoizedState!==null?ve._visibility&2?ts(_,B,j,$,b):Du(_,B):(ve._visibility|=2,ts(_,B,j,$,b)),b&&oe&2048&&Yp(B.alternate,B);break;case 24:ts(_,B,j,$,b),b&&oe&2048&&Kp(B.alternate,B);break;default:ts(_,B,j,$,b)}u=u.sibling}}function Du(i,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var d=i,m=u,b=m.flags;switch(m.tag){case 22:Du(d,m),b&2048&&Yp(m.alternate,m);break;case 24:Du(d,m),b&2048&&Kp(m.alternate,m);break;default:Du(d,m)}u=u.sibling}}var Ou=8192;function ns(i){if(i.subtreeFlags&Ou)for(i=i.child;i!==null;)mx(i),i=i.sibling}function mx(i){switch(i.tag){case 26:ns(i),i.flags&Ou&&i.memoizedState!==null&&jk(Dr,i.memoizedState,i.memoizedProps);break;case 5:ns(i);break;case 3:case 4:var u=Dr;Dr=tf(i.stateNode.containerInfo),ns(i),Dr=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Ou,Ou=16777216,ns(i),Ou=u):ns(i));break;default:ns(i)}}function vx(i){var u=i.alternate;if(u!==null&&(i=u.child,i!==null)){u.child=null;do u=i.sibling,i.sibling=null,i=u;while(i!==null)}}function Mu(i){var u=i.deletions;if((i.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var m=u[d];tn=m,yx(m,i)}vx(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)gx(i),i=i.sibling}function gx(i){switch(i.tag){case 0:case 11:case 15:Mu(i),i.flags&2048&&ro(9,i,i.return);break;case 3:Mu(i);break;case 12:Mu(i);break;case 22:var u=i.stateNode;i.memoizedState!==null&&u._visibility&2&&(i.return===null||i.return.tag!==13)?(u._visibility&=-3,Hc(i)):Mu(i);break;default:Mu(i)}}function Hc(i){var u=i.deletions;if((i.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var m=u[d];tn=m,yx(m,i)}vx(i)}for(i=i.child;i!==null;){switch(u=i,u.tag){case 0:case 11:case 15:ro(8,u,u.return),Hc(u);break;case 22:d=u.stateNode,d._visibility&2&&(d._visibility&=-3,Hc(u));break;default:Hc(u)}i=i.sibling}}function yx(i,u){for(;tn!==null;){var d=tn;switch(d.tag){case 0:case 11:case 15:ro(8,d,u);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:mu(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,tn=m;else e:for(d=i;tn!==null;){m=tn;var b=m.sibling,_=m.return;if(lx(m),m===d){tn=null;break e}if(b!==null){b.return=_,tn=b;break e}tn=_}}}var tk={getCacheForType:function(i){var u=bn(Vt),d=u.data.get(i);return d===void 0&&(d=i(),u.data.set(i,d)),d}},nk=typeof WeakMap=="function"?WeakMap:Map,ht=0,bt=null,Je=null,rt=0,pt=0,Qn=null,io=!1,rs=!1,$p=!1,Ta=0,Dt=0,so=0,$o=0,Qp=0,wr=0,as=0,Iu=null,Pn=null,Zp=!1,Jp=0,Vc=1/0,Wc=null,uo=null,fn=0,lo=null,os=null,is=0,em=0,tm=null,bx=null,Bu=0,nm=null;function Zn(){if((ht&2)!==0&&rt!==0)return rt&-rt;if(z.T!==null){var i=Xi;return i!==0?i:lm()}return B0()}function wx(){wr===0&&(wr=(rt&536870912)===0||lt?D0():536870912);var i=br.current;return i!==null&&(i.flags|=32),wr}function Jn(i,u,d){(i===bt&&(pt===2||pt===9)||i.cancelPendingCommit!==null)&&(ss(i,0),co(i,rt,wr,!1)),Js(i,d),((ht&2)===0||i!==bt)&&(i===bt&&((ht&2)===0&&($o|=d),Dt===4&&co(i,rt,wr,!1)),Yr(i))}function xx(i,u,d){if((ht&6)!==0)throw Error(r(327));var m=!d&&(u&124)===0&&(u&i.expiredLanes)===0||Zs(i,u),b=m?ok(i,u):om(i,u,!0),_=m;do{if(b===0){rs&&!m&&co(i,u,0,!1);break}else{if(d=i.current.alternate,_&&!rk(d)){b=om(i,u,!1),_=!1;continue}if(b===2){if(_=u,i.errorRecoveryDisabledLanes&_)var B=0;else B=i.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){u=B;e:{var j=i;b=Iu;var $=j.current.memoizedState.isDehydrated;if($&&(ss(j,B).flags|=256),B=om(j,B,!1),B!==2){if($p&&!$){j.errorRecoveryDisabledLanes|=_,$o|=_,b=4;break e}_=Pn,Pn=b,_!==null&&(Pn===null?Pn=_:Pn.push.apply(Pn,_))}b=B}if(_=!1,b!==2)continue}}if(b===1){ss(i,0),co(i,u,0,!0);break}e:{switch(m=i,_=b,_){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:co(m,u,wr,!io);break e;case 2:Pn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(b=Jp+300-it(),10<b)){if(co(m,u,wr,!io),nc(m,0,!0)!==0)break e;m.timeoutHandle=$x(Sx.bind(null,m,d,Pn,Wc,Zp,u,wr,$o,as,io,_,2,-0,0),b);break e}Sx(m,d,Pn,Wc,Zp,u,wr,$o,as,io,_,0,-0,0)}}break}while(!0);Yr(i)}function Sx(i,u,d,m,b,_,B,j,$,oe,ve,ye,se,ue){if(i.timeoutHandle=-1,ye=u.subtreeFlags,(ye&8192||(ye&16785408)===16785408)&&(qu={stylesheets:null,count:0,unsuspend:Lk},mx(u),ye=zk(),ye!==null)){i.cancelPendingCommit=ye(kx.bind(null,i,u,_,d,m,b,B,j,$,ve,1,se,ue)),co(i,_,B,!oe);return}kx(i,u,_,d,m,b,B,j,$)}function rk(i){for(var u=i;;){var d=u.tag;if((d===0||d===11||d===15)&&u.flags&16384&&(d=u.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var b=d[m],_=b.getSnapshot;b=b.value;try{if(!Xn(_(),b))return!1}catch{return!1}}if(d=u.child,u.subtreeFlags&16384&&d!==null)d.return=u,u=d;else{if(u===i)break;for(;u.sibling===null;){if(u.return===null||u.return===i)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function co(i,u,d,m){u&=~Qp,u&=~$o,i.suspendedLanes|=u,i.pingedLanes&=~u,m&&(i.warmLanes|=u),m=i.expirationTimes;for(var b=u;0<b;){var _=31-ln(b),B=1<<_;m[_]=-1,b&=~B}d!==0&&M0(i,d,u)}function Gc(){return(ht&6)===0?(Fu(0),!1):!0}function rm(){if(Je!==null){if(pt===0)var i=Je.return;else i=Je,wa=Vo=null,wp(i),Ji=null,Ru=0,i=Je;for(;i!==null;)tx(i.alternate,i),i=i.return;Je=null}}function ss(i,u){var d=i.timeoutHandle;d!==-1&&(i.timeoutHandle=-1,xk(d)),d=i.cancelPendingCommit,d!==null&&(i.cancelPendingCommit=null,d()),rm(),bt=i,Je=d=ga(i.current,null),rt=u,pt=0,Qn=null,io=!1,rs=Zs(i,u),$p=!1,as=wr=Qp=$o=so=Dt=0,Pn=Iu=null,Zp=!1,(u&8)!==0&&(u|=u&32);var m=i.entangledLanes;if(m!==0)for(i=i.entanglements,m&=u;0<m;){var b=31-ln(m),_=1<<b;u|=i[b],m&=~_}return Ta=u,pc(),d}function Ex(i,u){Ke=null,z.H=Mc,u===gu||u===Ec?(u=zb(),pt=3):u===Pb?(u=zb(),pt=4):pt=u===Uw?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Qn=u,Je===null&&(Dt=1,Lc(i,mr(u,i.current)))}function Cx(){var i=z.H;return z.H=Mc,i===null?Mc:i}function _x(){var i=z.A;return z.A=tk,i}function am(){Dt=4,io||(rt&4194048)!==rt&&br.current!==null||(rs=!0),(so&134217727)===0&&($o&134217727)===0||bt===null||co(bt,rt,wr,!1)}function om(i,u,d){var m=ht;ht|=2;var b=Cx(),_=_x();(bt!==i||rt!==u)&&(Wc=null,ss(i,u)),u=!1;var B=Dt;e:do try{if(pt!==0&&Je!==null){var j=Je,$=Qn;switch(pt){case 8:rm(),B=6;break e;case 3:case 2:case 9:case 6:br.current===null&&(u=!0);var oe=pt;if(pt=0,Qn=null,us(i,j,$,oe),d&&rs){B=0;break e}break;default:oe=pt,pt=0,Qn=null,us(i,j,$,oe)}}ak(),B=Dt;break}catch(ve){Ex(i,ve)}while(!0);return u&&i.shellSuspendCounter++,wa=Vo=null,ht=m,z.H=b,z.A=_,Je===null&&(bt=null,rt=0,pc()),B}function ak(){for(;Je!==null;)Rx(Je)}function ok(i,u){var d=ht;ht|=2;var m=Cx(),b=_x();bt!==i||rt!==u?(Wc=null,Vc=it()+500,ss(i,u)):rs=Zs(i,u);e:do try{if(pt!==0&&Je!==null){u=Je;var _=Qn;t:switch(pt){case 1:pt=0,Qn=null,us(i,u,_,1);break;case 2:case 9:if(Lb(_)){pt=0,Qn=null,Ax(u);break}u=function(){pt!==2&&pt!==9||bt!==i||(pt=7),Yr(i)},_.then(u,u);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:Lb(_)?(pt=0,Qn=null,Ax(u)):(pt=0,Qn=null,us(i,u,_,7));break;case 5:var B=null;switch(Je.tag){case 26:B=Je.memoizedState;case 5:case 27:var j=Je;if(!B||u1(B)){pt=0,Qn=null;var $=j.sibling;if($!==null)Je=$;else{var oe=j.return;oe!==null?(Je=oe,Xc(oe)):Je=null}break t}}pt=0,Qn=null,us(i,u,_,5);break;case 6:pt=0,Qn=null,us(i,u,_,6);break;case 8:rm(),Dt=6;break e;default:throw Error(r(462))}}ik();break}catch(ve){Ex(i,ve)}while(!0);return wa=Vo=null,z.H=m,z.A=b,ht=d,Je!==null?0:(bt=null,rt=0,pc(),Dt)}function ik(){for(;Je!==null&&!ot();)Rx(Je)}function Rx(i){var u=Jw(i.alternate,i,Ta);i.memoizedProps=i.pendingProps,u===null?Xc(i):Je=u}function Ax(i){var u=i,d=u.alternate;switch(u.tag){case 15:case 0:u=Xw(d,u,u.pendingProps,u.type,void 0,rt);break;case 11:u=Xw(d,u,u.pendingProps,u.type.render,u.ref,rt);break;case 5:wp(u);default:tx(d,u),u=Je=Tb(u,Ta),u=Jw(d,u,Ta)}i.memoizedProps=i.pendingProps,u===null?Xc(i):Je=u}function us(i,u,d,m){wa=Vo=null,wp(u),Ji=null,Ru=0;var b=u.return;try{if(KT(i,b,u,d,rt)){Dt=1,Lc(i,mr(d,i.current)),Je=null;return}}catch(_){if(b!==null)throw Je=b,_;Dt=1,Lc(i,mr(d,i.current)),Je=null;return}u.flags&32768?(lt||m===1?i=!0:rs||(rt&536870912)!==0?i=!1:(io=i=!0,(m===2||m===9||m===3||m===6)&&(m=br.current,m!==null&&m.tag===13&&(m.flags|=16384))),Tx(u,i)):Xc(u)}function Xc(i){var u=i;do{if((u.flags&32768)!==0){Tx(u,io);return}i=u.return;var d=QT(u.alternate,u,Ta);if(d!==null){Je=d;return}if(u=u.sibling,u!==null){Je=u;return}Je=u=i}while(u!==null);Dt===0&&(Dt=5)}function Tx(i,u){do{var d=ZT(i.alternate,i);if(d!==null){d.flags&=32767,Je=d;return}if(d=i.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!u&&(i=i.sibling,i!==null)){Je=i;return}Je=i=d}while(i!==null);Dt=6,Je=null}function kx(i,u,d,m,b,_,B,j,$){i.cancelPendingCommit=null;do Yc();while(fn!==0);if((ht&6)!==0)throw Error(r(327));if(u!==null){if(u===i.current)throw Error(r(177));if(_=u.lanes|u.childLanes,_|=Kh,LA(i,d,_,B,j,$),i===bt&&(Je=bt=null,rt=0),os=u,lo=i,is=d,em=_,tm=b,bx=m,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,ck(un,function(){return Ix(),null})):(i.callbackNode=null,i.callbackPriority=0),m=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||m){m=z.T,z.T=null,b=X.p,X.p=2,B=ht,ht|=4;try{JT(i,u,d)}finally{ht=B,X.p=b,z.T=m}}fn=1,Nx(),Dx(),Ox()}}function Nx(){if(fn===1){fn=0;var i=lo,u=os,d=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||d){d=z.T,z.T=null;var m=X.p;X.p=2;var b=ht;ht|=4;try{dx(u,i);var _=gm,B=yb(i.containerInfo),j=_.focusedElem,$=_.selectionRange;if(B!==j&&j&&j.ownerDocument&&gb(j.ownerDocument.documentElement,j)){if($!==null&&Vh(j)){var oe=$.start,ve=$.end;if(ve===void 0&&(ve=oe),"selectionStart"in j)j.selectionStart=oe,j.selectionEnd=Math.min(ve,j.value.length);else{var ye=j.ownerDocument||document,se=ye&&ye.defaultView||window;if(se.getSelection){var ue=se.getSelection(),ze=j.textContent.length,Le=Math.min($.start,ze),gt=$.end===void 0?Le:Math.min($.end,ze);!ue.extend&&Le>gt&&(B=gt,gt=Le,Le=B);var ne=vb(j,Le),ee=vb(j,gt);if(ne&&ee&&(ue.rangeCount!==1||ue.anchorNode!==ne.node||ue.anchorOffset!==ne.offset||ue.focusNode!==ee.node||ue.focusOffset!==ee.offset)){var ae=ye.createRange();ae.setStart(ne.node,ne.offset),ue.removeAllRanges(),Le>gt?(ue.addRange(ae),ue.extend(ee.node,ee.offset)):(ae.setEnd(ee.node,ee.offset),ue.addRange(ae))}}}}for(ye=[],ue=j;ue=ue.parentNode;)ue.nodeType===1&&ye.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<ye.length;j++){var ge=ye[j];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}sf=!!vm,gm=vm=null}finally{ht=b,X.p=m,z.T=d}}i.current=u,fn=2}}function Dx(){if(fn===2){fn=0;var i=lo,u=os,d=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||d){d=z.T,z.T=null;var m=X.p;X.p=2;var b=ht;ht|=4;try{ux(i,u.alternate,u)}finally{ht=b,X.p=m,z.T=d}}fn=3}}function Ox(){if(fn===4||fn===3){fn=0,Ye();var i=lo,u=os,d=is,m=bx;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?fn=5:(fn=0,os=lo=null,Mx(i,i.pendingLanes));var b=i.pendingLanes;if(b===0&&(uo=null),Eh(d),u=u.stateNode,jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(pa,u,void 0,(u.current.flags&128)===128)}catch{}if(m!==null){u=z.T,b=X.p,X.p=2,z.T=null;try{for(var _=i.onRecoverableError,B=0;B<m.length;B++){var j=m[B];_(j.value,{componentStack:j.stack})}}finally{z.T=u,X.p=b}}(is&3)!==0&&Yc(),Yr(i),b=i.pendingLanes,(d&4194090)!==0&&(b&42)!==0?i===nm?Bu++:(Bu=0,nm=i):Bu=0,Fu(0)}}function Mx(i,u){(i.pooledCacheLanes&=u)===0&&(u=i.pooledCache,u!=null&&(i.pooledCache=null,mu(u)))}function Yc(i){return Nx(),Dx(),Ox(),Ix()}function Ix(){if(fn!==5)return!1;var i=lo,u=em;em=0;var d=Eh(is),m=z.T,b=X.p;try{X.p=32>d?32:d,z.T=null,d=tm,tm=null;var _=lo,B=is;if(fn=0,os=lo=null,is=0,(ht&6)!==0)throw Error(r(331));var j=ht;if(ht|=4,gx(_.current),px(_,_.current,B,d),ht=j,Fu(0,!1),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(pa,_)}catch{}return!0}finally{X.p=b,z.T=m,Mx(i,u)}}function Bx(i,u,d){u=mr(d,u),u=Ip(i.stateNode,u,2),i=Ja(i,u,2),i!==null&&(Js(i,2),Yr(i))}function yt(i,u,d){if(i.tag===3)Bx(i,i,d);else for(;u!==null;){if(u.tag===3){Bx(u,i,d);break}else if(u.tag===1){var m=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(uo===null||!uo.has(m))){i=mr(d,i),d=jw(2),m=Ja(u,d,2),m!==null&&(zw(d,m,u,i),Js(m,2),Yr(m));break}}u=u.return}}function im(i,u,d){var m=i.pingCache;if(m===null){m=i.pingCache=new nk;var b=new Set;m.set(u,b)}else b=m.get(u),b===void 0&&(b=new Set,m.set(u,b));b.has(d)||($p=!0,b.add(d),i=sk.bind(null,i,u,d),u.then(i,i))}function sk(i,u,d){var m=i.pingCache;m!==null&&m.delete(u),i.pingedLanes|=i.suspendedLanes&d,i.warmLanes&=~d,bt===i&&(rt&d)===d&&(Dt===4||Dt===3&&(rt&62914560)===rt&&300>it()-Jp?(ht&2)===0&&ss(i,0):Qp|=d,as===rt&&(as=0)),Yr(i)}function Fx(i,u){u===0&&(u=O0()),i=Hi(i,u),i!==null&&(Js(i,u),Yr(i))}function uk(i){var u=i.memoizedState,d=0;u!==null&&(d=u.retryLane),Fx(i,d)}function lk(i,u){var d=0;switch(i.tag){case 13:var m=i.stateNode,b=i.memoizedState;b!==null&&(d=b.retryLane);break;case 19:m=i.stateNode;break;case 22:m=i.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(u),Fx(i,d)}function ck(i,u){return Ae(i,u)}var Kc=null,ls=null,sm=!1,$c=!1,um=!1,Qo=0;function Yr(i){i!==ls&&i.next===null&&(ls===null?Kc=ls=i:ls=ls.next=i),$c=!0,sm||(sm=!0,dk())}function Fu(i,u){if(!um&&$c){um=!0;do for(var d=!1,m=Kc;m!==null;){if(i!==0){var b=m.pendingLanes;if(b===0)var _=0;else{var B=m.suspendedLanes,j=m.pingedLanes;_=(1<<31-ln(42|i)+1)-1,_&=b&~(B&~j),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(d=!0,zx(m,_))}else _=rt,_=nc(m,m===bt?_:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(_&3)===0||Zs(m,_)||(d=!0,zx(m,_));m=m.next}while(d);um=!1}}function fk(){Px()}function Px(){$c=sm=!1;var i=0;Qo!==0&&(wk()&&(i=Qo),Qo=0);for(var u=it(),d=null,m=Kc;m!==null;){var b=m.next,_=Lx(m,u);_===0?(m.next=null,d===null?Kc=b:d.next=b,b===null&&(ls=d)):(d=m,(i!==0||(_&3)!==0)&&($c=!0)),m=b}Fu(i)}function Lx(i,u){for(var d=i.suspendedLanes,m=i.pingedLanes,b=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var B=31-ln(_),j=1<<B,$=b[B];$===-1?((j&d)===0||(j&m)!==0)&&(b[B]=PA(j,u)):$<=u&&(i.expiredLanes|=j),_&=~j}if(u=bt,d=rt,d=nc(i,i===u?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m=i.callbackNode,d===0||i===u&&(pt===2||pt===9)||i.cancelPendingCommit!==null)return m!==null&&m!==null&&Fe(m),i.callbackNode=null,i.callbackPriority=0;if((d&3)===0||Zs(i,d)){if(u=d&-d,u===i.callbackPriority)return u;switch(m!==null&&Fe(m),Eh(d)){case 2:case 8:d=Ar;break;case 32:d=un;break;case 268435456:d=dr;break;default:d=un}return m=jx.bind(null,i),d=Ae(d,m),i.callbackPriority=u,i.callbackNode=d,u}return m!==null&&m!==null&&Fe(m),i.callbackPriority=2,i.callbackNode=null,2}function jx(i,u){if(fn!==0&&fn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var d=i.callbackNode;if(Yc()&&i.callbackNode!==d)return null;var m=rt;return m=nc(i,i===bt?m:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m===0?null:(xx(i,m,u),Lx(i,it()),i.callbackNode!=null&&i.callbackNode===d?jx.bind(null,i):null)}function zx(i,u){if(Yc())return null;xx(i,u,!0)}function dk(){Sk(function(){(ht&6)!==0?Ae(Lt,fk):Px()})}function lm(){return Qo===0&&(Qo=D0()),Qo}function Ux(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:sc(""+i)}function qx(i,u){var d=u.ownerDocument.createElement("input");return d.name=u.name,d.value=u.value,i.id&&d.setAttribute("form",i.id),u.parentNode.insertBefore(d,u),i=new FormData(i),d.parentNode.removeChild(d),i}function hk(i,u,d,m,b){if(u==="submit"&&d&&d.stateNode===b){var _=Ux((b[Mn]||null).action),B=m.submitter;B&&(u=(u=B[Mn]||null)?Ux(u.formAction):B.getAttribute("formAction"),u!==null&&(_=u,B=null));var j=new fc("action","action",null,m,b);i.push({event:j,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Qo!==0){var $=B?qx(b,B):new FormData(b);kp(d,{pending:!0,data:$,method:b.method,action:_},null,$)}}else typeof _=="function"&&(j.preventDefault(),$=B?qx(b,B):new FormData(b),kp(d,{pending:!0,data:$,method:b.method,action:_},_,$))},currentTarget:b}]})}}for(var cm=0;cm<Yh.length;cm++){var fm=Yh[cm],pk=fm.toLowerCase(),mk=fm[0].toUpperCase()+fm.slice(1);Nr(pk,"on"+mk)}Nr(xb,"onAnimationEnd"),Nr(Sb,"onAnimationIteration"),Nr(Eb,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(OT,"onTransitionRun"),Nr(MT,"onTransitionStart"),Nr(IT,"onTransitionCancel"),Nr(Cb,"onTransitionEnd"),Mi("onMouseEnter",["mouseout","mouseover"]),Mi("onMouseLeave",["mouseout","mouseover"]),Mi("onPointerEnter",["pointerout","pointerover"]),Mi("onPointerLeave",["pointerout","pointerover"]),Bo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pu));function Hx(i,u){u=(u&4)!==0;for(var d=0;d<i.length;d++){var m=i[d],b=m.event;m=m.listeners;e:{var _=void 0;if(u)for(var B=m.length-1;0<=B;B--){var j=m[B],$=j.instance,oe=j.currentTarget;if(j=j.listener,$!==_&&b.isPropagationStopped())break e;_=j,b.currentTarget=oe;try{_(b)}catch(ve){Pc(ve)}b.currentTarget=null,_=$}else for(B=0;B<m.length;B++){if(j=m[B],$=j.instance,oe=j.currentTarget,j=j.listener,$!==_&&b.isPropagationStopped())break e;_=j,b.currentTarget=oe;try{_(b)}catch(ve){Pc(ve)}b.currentTarget=null,_=$}}}}function et(i,u){var d=u[Ch];d===void 0&&(d=u[Ch]=new Set);var m=i+"__bubble";d.has(m)||(Vx(u,i,2,!1),d.add(m))}function dm(i,u,d){var m=0;u&&(m|=4),Vx(d,i,m,u)}var Qc="_reactListening"+Math.random().toString(36).slice(2);function hm(i){if(!i[Qc]){i[Qc]=!0,P0.forEach(function(d){d!=="selectionchange"&&(vk.has(d)||dm(d,!1,i),dm(d,!0,i))});var u=i.nodeType===9?i:i.ownerDocument;u===null||u[Qc]||(u[Qc]=!0,dm("selectionchange",!1,u))}}function Vx(i,u,d,m){switch(p1(u)){case 2:var b=Hk;break;case 8:b=Vk;break;default:b=Am}d=b.bind(null,u,d,i),b=void 0,!Bh||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),m?b!==void 0?i.addEventListener(u,d,{capture:!0,passive:b}):i.addEventListener(u,d,!0):b!==void 0?i.addEventListener(u,d,{passive:b}):i.addEventListener(u,d,!1)}function pm(i,u,d,m,b){var _=m;if((u&1)===0&&(u&2)===0&&m!==null)e:for(;;){if(m===null)return;var B=m.tag;if(B===3||B===4){var j=m.stateNode.containerInfo;if(j===b)break;if(B===4)for(B=m.return;B!==null;){var $=B.tag;if(($===3||$===4)&&B.stateNode.containerInfo===b)return;B=B.return}for(;j!==null;){if(B=Ni(j),B===null)return;if($=B.tag,$===5||$===6||$===26||$===27){m=_=B;continue e}j=j.parentNode}}m=m.return}Q0(function(){var oe=_,ve=Mh(d),ye=[];e:{var se=_b.get(i);if(se!==void 0){var ue=fc,ze=i;switch(i){case"keypress":if(lc(d)===0)break e;case"keydown":case"keyup":ue=cT;break;case"focusin":ze="focus",ue=jh;break;case"focusout":ze="blur",ue=jh;break;case"beforeblur":case"afterblur":ue=jh;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=eb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=ZA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=hT;break;case xb:case Sb:case Eb:ue=tT;break;case Cb:ue=mT;break;case"scroll":case"scrollend":ue=$A;break;case"wheel":ue=gT;break;case"copy":case"cut":case"paste":ue=rT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=nb;break;case"toggle":case"beforetoggle":ue=bT}var Le=(u&4)!==0,gt=!Le&&(i==="scroll"||i==="scrollend"),ne=Le?se!==null?se+"Capture":null:se;Le=[];for(var ee=oe,ae;ee!==null;){var ge=ee;if(ae=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||ae===null||ne===null||(ge=nu(ee,ne),ge!=null&&Le.push(Lu(ee,ge,ae))),gt)break;ee=ee.return}0<Le.length&&(se=new ue(se,ze,null,d,ve),ye.push({event:se,listeners:Le}))}}if((u&7)===0){e:{if(se=i==="mouseover"||i==="pointerover",ue=i==="mouseout"||i==="pointerout",se&&d!==Oh&&(ze=d.relatedTarget||d.fromElement)&&(Ni(ze)||ze[ki]))break e;if((ue||se)&&(se=ve.window===ve?ve:(se=ve.ownerDocument)?se.defaultView||se.parentWindow:window,ue?(ze=d.relatedTarget||d.toElement,ue=oe,ze=ze?Ni(ze):null,ze!==null&&(gt=o(ze),Le=ze.tag,ze!==gt||Le!==5&&Le!==27&&Le!==6)&&(ze=null)):(ue=null,ze=oe),ue!==ze)){if(Le=eb,ge="onMouseLeave",ne="onMouseEnter",ee="mouse",(i==="pointerout"||i==="pointerover")&&(Le=nb,ge="onPointerLeave",ne="onPointerEnter",ee="pointer"),gt=ue==null?se:tu(ue),ae=ze==null?se:tu(ze),se=new Le(ge,ee+"leave",ue,d,ve),se.target=gt,se.relatedTarget=ae,ge=null,Ni(ve)===oe&&(Le=new Le(ne,ee+"enter",ze,d,ve),Le.target=ae,Le.relatedTarget=gt,ge=Le),gt=ge,ue&&ze)t:{for(Le=ue,ne=ze,ee=0,ae=Le;ae;ae=cs(ae))ee++;for(ae=0,ge=ne;ge;ge=cs(ge))ae++;for(;0<ee-ae;)Le=cs(Le),ee--;for(;0<ae-ee;)ne=cs(ne),ae--;for(;ee--;){if(Le===ne||ne!==null&&Le===ne.alternate)break t;Le=cs(Le),ne=cs(ne)}Le=null}else Le=null;ue!==null&&Wx(ye,se,ue,Le,!1),ze!==null&&gt!==null&&Wx(ye,gt,ze,Le,!0)}}e:{if(se=oe?tu(oe):window,ue=se.nodeName&&se.nodeName.toLowerCase(),ue==="select"||ue==="input"&&se.type==="file")var Te=cb;else if(ub(se))if(fb)Te=kT;else{Te=AT;var $e=RT}else ue=se.nodeName,!ue||ue.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?oe&&Dh(oe.elementType)&&(Te=cb):Te=TT;if(Te&&(Te=Te(i,oe))){lb(ye,Te,d,ve);break e}$e&&$e(i,se,oe),i==="focusout"&&oe&&se.type==="number"&&oe.memoizedProps.value!=null&&Nh(se,"number",se.value)}switch($e=oe?tu(oe):window,i){case"focusin":(ub($e)||$e.contentEditable==="true")&&(zi=$e,Wh=oe,cu=null);break;case"focusout":cu=Wh=zi=null;break;case"mousedown":Gh=!0;break;case"contextmenu":case"mouseup":case"dragend":Gh=!1,bb(ye,d,ve);break;case"selectionchange":if(DT)break;case"keydown":case"keyup":bb(ye,d,ve)}var Be;if(Uh)e:{switch(i){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else ji?ib(i,d)&&(je="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(je="onCompositionStart");je&&(rb&&d.locale!=="ko"&&(ji||je!=="onCompositionStart"?je==="onCompositionEnd"&&ji&&(Be=Z0()):(Ka=ve,Fh="value"in Ka?Ka.value:Ka.textContent,ji=!0)),$e=Zc(oe,je),0<$e.length&&(je=new tb(je,i,null,d,ve),ye.push({event:je,listeners:$e}),Be?je.data=Be:(Be=sb(d),Be!==null&&(je.data=Be)))),(Be=xT?ST(i,d):ET(i,d))&&(je=Zc(oe,"onBeforeInput"),0<je.length&&($e=new tb("onBeforeInput","beforeinput",null,d,ve),ye.push({event:$e,listeners:je}),$e.data=Be)),hk(ye,i,oe,d,ve)}Hx(ye,u)})}function Lu(i,u,d){return{instance:i,listener:u,currentTarget:d}}function Zc(i,u){for(var d=u+"Capture",m=[];i!==null;){var b=i,_=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||_===null||(b=nu(i,d),b!=null&&m.unshift(Lu(i,b,_)),b=nu(i,u),b!=null&&m.push(Lu(i,b,_))),i.tag===3)return m;i=i.return}return[]}function cs(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Wx(i,u,d,m,b){for(var _=u._reactName,B=[];d!==null&&d!==m;){var j=d,$=j.alternate,oe=j.stateNode;if(j=j.tag,$!==null&&$===m)break;j!==5&&j!==26&&j!==27||oe===null||($=oe,b?(oe=nu(d,_),oe!=null&&B.unshift(Lu(d,oe,$))):b||(oe=nu(d,_),oe!=null&&B.push(Lu(d,oe,$)))),d=d.return}B.length!==0&&i.push({event:u,listeners:B})}var gk=/\r\n?/g,yk=/\u0000|\uFFFD/g;function Gx(i){return(typeof i=="string"?i:""+i).replace(gk,`
`).replace(yk,"")}function Xx(i,u){return u=Gx(u),Gx(i)===u}function Jc(){}function vt(i,u,d,m,b,_){switch(d){case"children":typeof m=="string"?u==="body"||u==="textarea"&&m===""||Fi(i,m):(typeof m=="number"||typeof m=="bigint")&&u!=="body"&&Fi(i,""+m);break;case"className":ac(i,"class",m);break;case"tabIndex":ac(i,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":ac(i,d,m);break;case"style":K0(i,m,_);break;case"data":if(u!=="object"){ac(i,"data",m);break}case"src":case"href":if(m===""&&(u!=="a"||d!=="href")){i.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(d);break}m=sc(""+m),i.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){i.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(d==="formAction"?(u!=="input"&&vt(i,u,"name",b.name,b,null),vt(i,u,"formEncType",b.formEncType,b,null),vt(i,u,"formMethod",b.formMethod,b,null),vt(i,u,"formTarget",b.formTarget,b,null)):(vt(i,u,"encType",b.encType,b,null),vt(i,u,"method",b.method,b,null),vt(i,u,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(d);break}m=sc(""+m),i.setAttribute(d,m);break;case"onClick":m!=null&&(i.onclick=Jc);break;case"onScroll":m!=null&&et("scroll",i);break;case"onScrollEnd":m!=null&&et("scrollend",i);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(b.children!=null)throw Error(r(60));i.innerHTML=d}}break;case"multiple":i.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":i.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){i.removeAttribute("xlink:href");break}d=sc(""+m),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(d,""+m):i.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(d,""):i.removeAttribute(d);break;case"capture":case"download":m===!0?i.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(d,m):i.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?i.setAttribute(d,m):i.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?i.removeAttribute(d):i.setAttribute(d,m);break;case"popover":et("beforetoggle",i),et("toggle",i),rc(i,"popover",m);break;case"xlinkActuate":ma(i,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":ma(i,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":ma(i,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":ma(i,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":ma(i,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":ma(i,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":ma(i,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":ma(i,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":ma(i,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":rc(i,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=YA.get(d)||d,rc(i,d,m))}}function mm(i,u,d,m,b,_){switch(d){case"style":K0(i,m,_);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(b.children!=null)throw Error(r(60));i.innerHTML=d}}break;case"children":typeof m=="string"?Fi(i,m):(typeof m=="number"||typeof m=="bigint")&&Fi(i,""+m);break;case"onScroll":m!=null&&et("scroll",i);break;case"onScrollEnd":m!=null&&et("scrollend",i);break;case"onClick":m!=null&&(i.onclick=Jc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!L0.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(b=d.endsWith("Capture"),u=d.slice(2,b?d.length-7:void 0),_=i[Mn]||null,_=_!=null?_[d]:null,typeof _=="function"&&i.removeEventListener(u,_,b),typeof m=="function")){typeof _!="function"&&_!==null&&(d in i?i[d]=null:i.hasAttribute(d)&&i.removeAttribute(d)),i.addEventListener(u,m,b);break e}d in i?i[d]=m:m===!0?i.setAttribute(d,""):rc(i,d,m)}}}function dn(i,u,d){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",i),et("load",i);var m=!1,b=!1,_;for(_ in d)if(d.hasOwnProperty(_)){var B=d[_];if(B!=null)switch(_){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:vt(i,u,_,B,d,null)}}b&&vt(i,u,"srcSet",d.srcSet,d,null),m&&vt(i,u,"src",d.src,d,null);return;case"input":et("invalid",i);var j=_=B=b=null,$=null,oe=null;for(m in d)if(d.hasOwnProperty(m)){var ve=d[m];if(ve!=null)switch(m){case"name":b=ve;break;case"type":B=ve;break;case"checked":$=ve;break;case"defaultChecked":oe=ve;break;case"value":_=ve;break;case"defaultValue":j=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,u));break;default:vt(i,u,m,ve,d,null)}}W0(i,_,j,$,oe,B,b,!1),oc(i);return;case"select":et("invalid",i),m=B=_=null;for(b in d)if(d.hasOwnProperty(b)&&(j=d[b],j!=null))switch(b){case"value":_=j;break;case"defaultValue":B=j;break;case"multiple":m=j;default:vt(i,u,b,j,d,null)}u=_,d=B,i.multiple=!!m,u!=null?Bi(i,!!m,u,!1):d!=null&&Bi(i,!!m,d,!0);return;case"textarea":et("invalid",i),_=b=m=null;for(B in d)if(d.hasOwnProperty(B)&&(j=d[B],j!=null))switch(B){case"value":m=j;break;case"defaultValue":b=j;break;case"children":_=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:vt(i,u,B,j,d,null)}X0(i,m,b,_),oc(i);return;case"option":for($ in d)if(d.hasOwnProperty($)&&(m=d[$],m!=null))switch($){case"selected":i.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:vt(i,u,$,m,d,null)}return;case"dialog":et("beforetoggle",i),et("toggle",i),et("cancel",i),et("close",i);break;case"iframe":case"object":et("load",i);break;case"video":case"audio":for(m=0;m<Pu.length;m++)et(Pu[m],i);break;case"image":et("error",i),et("load",i);break;case"details":et("toggle",i);break;case"embed":case"source":case"link":et("error",i),et("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in d)if(d.hasOwnProperty(oe)&&(m=d[oe],m!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:vt(i,u,oe,m,d,null)}return;default:if(Dh(u)){for(ve in d)d.hasOwnProperty(ve)&&(m=d[ve],m!==void 0&&mm(i,u,ve,m,d,void 0));return}}for(j in d)d.hasOwnProperty(j)&&(m=d[j],m!=null&&vt(i,u,j,m,d,null))}function bk(i,u,d,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,_=null,B=null,j=null,$=null,oe=null,ve=null;for(ue in d){var ye=d[ue];if(d.hasOwnProperty(ue)&&ye!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":$=ye;default:m.hasOwnProperty(ue)||vt(i,u,ue,null,m,ye)}}for(var se in m){var ue=m[se];if(ye=d[se],m.hasOwnProperty(se)&&(ue!=null||ye!=null))switch(se){case"type":_=ue;break;case"name":b=ue;break;case"checked":oe=ue;break;case"defaultChecked":ve=ue;break;case"value":B=ue;break;case"defaultValue":j=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,u));break;default:ue!==ye&&vt(i,u,se,ue,m,ye)}}kh(i,B,j,$,oe,ve,_,b);return;case"select":ue=B=j=se=null;for(_ in d)if($=d[_],d.hasOwnProperty(_)&&$!=null)switch(_){case"value":break;case"multiple":ue=$;default:m.hasOwnProperty(_)||vt(i,u,_,null,m,$)}for(b in m)if(_=m[b],$=d[b],m.hasOwnProperty(b)&&(_!=null||$!=null))switch(b){case"value":se=_;break;case"defaultValue":j=_;break;case"multiple":B=_;default:_!==$&&vt(i,u,b,_,m,$)}u=j,d=B,m=ue,se!=null?Bi(i,!!d,se,!1):!!m!=!!d&&(u!=null?Bi(i,!!d,u,!0):Bi(i,!!d,d?[]:"",!1));return;case"textarea":ue=se=null;for(j in d)if(b=d[j],d.hasOwnProperty(j)&&b!=null&&!m.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:vt(i,u,j,null,m,b)}for(B in m)if(b=m[B],_=d[B],m.hasOwnProperty(B)&&(b!=null||_!=null))switch(B){case"value":se=b;break;case"defaultValue":ue=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==_&&vt(i,u,B,b,m,_)}G0(i,se,ue);return;case"option":for(var ze in d)if(se=d[ze],d.hasOwnProperty(ze)&&se!=null&&!m.hasOwnProperty(ze))switch(ze){case"selected":i.selected=!1;break;default:vt(i,u,ze,null,m,se)}for($ in m)if(se=m[$],ue=d[$],m.hasOwnProperty($)&&se!==ue&&(se!=null||ue!=null))switch($){case"selected":i.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:vt(i,u,$,se,m,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in d)se=d[Le],d.hasOwnProperty(Le)&&se!=null&&!m.hasOwnProperty(Le)&&vt(i,u,Le,null,m,se);for(oe in m)if(se=m[oe],ue=d[oe],m.hasOwnProperty(oe)&&se!==ue&&(se!=null||ue!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,u));break;default:vt(i,u,oe,se,m,ue)}return;default:if(Dh(u)){for(var gt in d)se=d[gt],d.hasOwnProperty(gt)&&se!==void 0&&!m.hasOwnProperty(gt)&&mm(i,u,gt,void 0,m,se);for(ve in m)se=m[ve],ue=d[ve],!m.hasOwnProperty(ve)||se===ue||se===void 0&&ue===void 0||mm(i,u,ve,se,m,ue);return}}for(var ne in d)se=d[ne],d.hasOwnProperty(ne)&&se!=null&&!m.hasOwnProperty(ne)&&vt(i,u,ne,null,m,se);for(ye in m)se=m[ye],ue=d[ye],!m.hasOwnProperty(ye)||se===ue||se==null&&ue==null||vt(i,u,ye,se,m,ue)}var vm=null,gm=null;function ef(i){return i.nodeType===9?i:i.ownerDocument}function Yx(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kx(i,u){if(i===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&u==="foreignObject"?0:i}function ym(i,u){return i==="textarea"||i==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var bm=null;function wk(){var i=window.event;return i&&i.type==="popstate"?i===bm?!1:(bm=i,!0):(bm=null,!1)}var $x=typeof setTimeout=="function"?setTimeout:void 0,xk=typeof clearTimeout=="function"?clearTimeout:void 0,Qx=typeof Promise=="function"?Promise:void 0,Sk=typeof queueMicrotask=="function"?queueMicrotask:typeof Qx<"u"?function(i){return Qx.resolve(null).then(i).catch(Ek)}:$x;function Ek(i){setTimeout(function(){throw i})}function fo(i){return i==="head"}function Zx(i,u){var d=u,m=0,b=0;do{var _=d.nextSibling;if(i.removeChild(d),_&&_.nodeType===8)if(d=_.data,d==="/$"){if(0<m&&8>m){d=m;var B=i.ownerDocument;if(d&1&&ju(B.documentElement),d&2&&ju(B.body),d&4)for(d=B.head,ju(d),B=d.firstChild;B;){var j=B.nextSibling,$=B.nodeName;B[eu]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&B.rel.toLowerCase()==="stylesheet"||d.removeChild(B),B=j}}if(b===0){i.removeChild(_),Xu(u);return}b--}else d==="$"||d==="$?"||d==="$!"?b++:m=d.charCodeAt(0)-48;else m=0;d=_}while(d);Xu(u)}function wm(i){var u=i.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var d=u;switch(u=u.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":wm(d),_h(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}i.removeChild(d)}}function Ck(i,u,d,m){for(;i.nodeType===1;){var b=d;if(i.nodeName.toLowerCase()!==u.toLowerCase()){if(!m&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(m){if(!i[eu])switch(u){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==b.rel||i.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||i.getAttribute("title")!==(b.title==null?null:b.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(b.src==null?null:b.src)||i.getAttribute("type")!==(b.type==null?null:b.type)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(u==="input"&&i.type==="hidden"){var _=b.name==null?null:""+b.name;if(b.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Or(i.nextSibling),i===null)break}return null}function _k(i,u,d){if(u==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!d||(i=Or(i.nextSibling),i===null))return null;return i}function xm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function Rk(i,u){var d=i.ownerDocument;if(i.data!=="$?"||d.readyState==="complete")u();else{var m=function(){u(),d.removeEventListener("DOMContentLoaded",m)};d.addEventListener("DOMContentLoaded",m),i._reactRetry=m}}function Or(i){for(;i!=null;i=i.nextSibling){var u=i.nodeType;if(u===1||u===3)break;if(u===8){if(u=i.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return i}var Sm=null;function Jx(i){i=i.previousSibling;for(var u=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(u===0)return i;u--}else d==="/$"&&u++}i=i.previousSibling}return null}function e1(i,u,d){switch(u=ef(d),i){case"html":if(i=u.documentElement,!i)throw Error(r(452));return i;case"head":if(i=u.head,!i)throw Error(r(453));return i;case"body":if(i=u.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function ju(i){for(var u=i.attributes;u.length;)i.removeAttributeNode(u[0]);_h(i)}var xr=new Map,t1=new Set;function tf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ka=X.d;X.d={f:Ak,r:Tk,D:kk,C:Nk,L:Dk,m:Ok,X:Ik,S:Mk,M:Bk};function Ak(){var i=ka.f(),u=Gc();return i||u}function Tk(i){var u=Di(i);u!==null&&u.tag===5&&u.type==="form"?xw(u):ka.r(i)}var fs=typeof document>"u"?null:document;function n1(i,u,d){var m=fs;if(m&&typeof u=="string"&&u){var b=pr(u);b='link[rel="'+i+'"][href="'+b+'"]',typeof d=="string"&&(b+='[crossorigin="'+d+'"]'),t1.has(b)||(t1.add(b),i={rel:i,crossOrigin:d,href:u},m.querySelector(b)===null&&(u=m.createElement("link"),dn(u,"link",i),Jt(u),m.head.appendChild(u)))}}function kk(i){ka.D(i),n1("dns-prefetch",i,null)}function Nk(i,u){ka.C(i,u),n1("preconnect",i,u)}function Dk(i,u,d){ka.L(i,u,d);var m=fs;if(m&&i&&u){var b='link[rel="preload"][as="'+pr(u)+'"]';u==="image"&&d&&d.imageSrcSet?(b+='[imagesrcset="'+pr(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(b+='[imagesizes="'+pr(d.imageSizes)+'"]')):b+='[href="'+pr(i)+'"]';var _=b;switch(u){case"style":_=ds(i);break;case"script":_=hs(i)}xr.has(_)||(i=h({rel:"preload",href:u==="image"&&d&&d.imageSrcSet?void 0:i,as:u},d),xr.set(_,i),m.querySelector(b)!==null||u==="style"&&m.querySelector(zu(_))||u==="script"&&m.querySelector(Uu(_))||(u=m.createElement("link"),dn(u,"link",i),Jt(u),m.head.appendChild(u)))}}function Ok(i,u){ka.m(i,u);var d=fs;if(d&&i){var m=u&&typeof u.as=="string"?u.as:"script",b='link[rel="modulepreload"][as="'+pr(m)+'"][href="'+pr(i)+'"]',_=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=hs(i)}if(!xr.has(_)&&(i=h({rel:"modulepreload",href:i},u),xr.set(_,i),d.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Uu(_)))return}m=d.createElement("link"),dn(m,"link",i),Jt(m),d.head.appendChild(m)}}}function Mk(i,u,d){ka.S(i,u,d);var m=fs;if(m&&i){var b=Oi(m).hoistableStyles,_=ds(i);u=u||"default";var B=b.get(_);if(!B){var j={loading:0,preload:null};if(B=m.querySelector(zu(_)))j.loading=5;else{i=h({rel:"stylesheet",href:i,"data-precedence":u},d),(d=xr.get(_))&&Em(i,d);var $=B=m.createElement("link");Jt($),dn($,"link",i),$._p=new Promise(function(oe,ve){$.onload=oe,$.onerror=ve}),$.addEventListener("load",function(){j.loading|=1}),$.addEventListener("error",function(){j.loading|=2}),j.loading|=4,nf(B,u,m)}B={type:"stylesheet",instance:B,count:1,state:j},b.set(_,B)}}}function Ik(i,u){ka.X(i,u);var d=fs;if(d&&i){var m=Oi(d).hoistableScripts,b=hs(i),_=m.get(b);_||(_=d.querySelector(Uu(b)),_||(i=h({src:i,async:!0},u),(u=xr.get(b))&&Cm(i,u),_=d.createElement("script"),Jt(_),dn(_,"link",i),d.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(b,_))}}function Bk(i,u){ka.M(i,u);var d=fs;if(d&&i){var m=Oi(d).hoistableScripts,b=hs(i),_=m.get(b);_||(_=d.querySelector(Uu(b)),_||(i=h({src:i,async:!0,type:"module"},u),(u=xr.get(b))&&Cm(i,u),_=d.createElement("script"),Jt(_),dn(_,"link",i),d.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(b,_))}}function r1(i,u,d,m){var b=(b=pe.current)?tf(b):null;if(!b)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(u=ds(d.href),d=Oi(b).hoistableStyles,m=d.get(u),m||(m={type:"style",instance:null,count:0,state:null},d.set(u,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){i=ds(d.href);var _=Oi(b).hoistableStyles,B=_.get(i);if(B||(b=b.ownerDocument||b,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,B),(_=b.querySelector(zu(i)))&&!_._p&&(B.instance=_,B.state.loading=5),xr.has(i)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},xr.set(i,d),_||Fk(b,i,d,B.state))),u&&m===null)throw Error(r(528,""));return B}if(u&&m!==null)throw Error(r(529,""));return null;case"script":return u=d.async,d=d.src,typeof d=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=hs(d),d=Oi(b).hoistableScripts,m=d.get(u),m||(m={type:"script",instance:null,count:0,state:null},d.set(u,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function ds(i){return'href="'+pr(i)+'"'}function zu(i){return'link[rel="stylesheet"]['+i+"]"}function a1(i){return h({},i,{"data-precedence":i.precedence,precedence:null})}function Fk(i,u,d,m){i.querySelector('link[rel="preload"][as="style"]['+u+"]")?m.loading=1:(u=i.createElement("link"),m.preload=u,u.addEventListener("load",function(){return m.loading|=1}),u.addEventListener("error",function(){return m.loading|=2}),dn(u,"link",d),Jt(u),i.head.appendChild(u))}function hs(i){return'[src="'+pr(i)+'"]'}function Uu(i){return"script[async]"+i}function o1(i,u,d){if(u.count++,u.instance===null)switch(u.type){case"style":var m=i.querySelector('style[data-href~="'+pr(d.href)+'"]');if(m)return u.instance=m,Jt(m),m;var b=h({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(i.ownerDocument||i).createElement("style"),Jt(m),dn(m,"style",b),nf(m,d.precedence,i),u.instance=m;case"stylesheet":b=ds(d.href);var _=i.querySelector(zu(b));if(_)return u.state.loading|=4,u.instance=_,Jt(_),_;m=a1(d),(b=xr.get(b))&&Em(m,b),_=(i.ownerDocument||i).createElement("link"),Jt(_);var B=_;return B._p=new Promise(function(j,$){B.onload=j,B.onerror=$}),dn(_,"link",m),u.state.loading|=4,nf(_,d.precedence,i),u.instance=_;case"script":return _=hs(d.src),(b=i.querySelector(Uu(_)))?(u.instance=b,Jt(b),b):(m=d,(b=xr.get(_))&&(m=h({},d),Cm(m,b)),i=i.ownerDocument||i,b=i.createElement("script"),Jt(b),dn(b,"link",m),i.head.appendChild(b),u.instance=b);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(m=u.instance,u.state.loading|=4,nf(m,d.precedence,i));return u.instance}function nf(i,u,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,_=b,B=0;B<m.length;B++){var j=m[B];if(j.dataset.precedence===u)_=j;else if(_!==b)break}_?_.parentNode.insertBefore(i,_.nextSibling):(u=d.nodeType===9?d.head:d,u.insertBefore(i,u.firstChild))}function Em(i,u){i.crossOrigin==null&&(i.crossOrigin=u.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=u.referrerPolicy),i.title==null&&(i.title=u.title)}function Cm(i,u){i.crossOrigin==null&&(i.crossOrigin=u.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=u.referrerPolicy),i.integrity==null&&(i.integrity=u.integrity)}var rf=null;function i1(i,u,d){if(rf===null){var m=new Map,b=rf=new Map;b.set(d,m)}else b=rf,m=b.get(d),m||(m=new Map,b.set(d,m));if(m.has(i))return m;for(m.set(i,null),d=d.getElementsByTagName(i),b=0;b<d.length;b++){var _=d[b];if(!(_[eu]||_[yn]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var B=_.getAttribute(u)||"";B=i+B;var j=m.get(B);j?j.push(_):m.set(B,[_])}}return m}function s1(i,u,d){i=i.ownerDocument||i,i.head.insertBefore(d,u==="title"?i.querySelector("head > title"):null)}function Pk(i,u,d){if(d===1||u.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return i=u.disabled,typeof u.precedence=="string"&&i==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function u1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var qu=null;function Lk(){}function jk(i,u,d){if(qu===null)throw Error(r(475));var m=qu;if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var b=ds(d.href),_=i.querySelector(zu(b));if(_){i=_._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(m.count++,m=af.bind(m),i.then(m,m)),u.state.loading|=4,u.instance=_,Jt(_);return}_=i.ownerDocument||i,d=a1(d),(b=xr.get(b))&&Em(d,b),_=_.createElement("link"),Jt(_);var B=_;B._p=new Promise(function(j,$){B.onload=j,B.onerror=$}),dn(_,"link",d),u.instance=_}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(u,i),(i=u.state.preload)&&(u.state.loading&3)===0&&(m.count++,u=af.bind(m),i.addEventListener("load",u),i.addEventListener("error",u))}}function zk(){if(qu===null)throw Error(r(475));var i=qu;return i.stylesheets&&i.count===0&&_m(i,i.stylesheets),0<i.count?function(u){var d=setTimeout(function(){if(i.stylesheets&&_m(i,i.stylesheets),i.unsuspend){var m=i.unsuspend;i.unsuspend=null,m()}},6e4);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(d)}}:null}function af(){if(this.count--,this.count===0){if(this.stylesheets)_m(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var of=null;function _m(i,u){i.stylesheets=null,i.unsuspend!==null&&(i.count++,of=new Map,u.forEach(Uk,i),of=null,af.call(i))}function Uk(i,u){if(!(u.state.loading&4)){var d=of.get(i);if(d)var m=d.get(null);else{d=new Map,of.set(i,d);for(var b=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<b.length;_++){var B=b[_];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(d.set(B.dataset.precedence,B),m=B)}m&&d.set(null,m)}b=u.instance,B=b.getAttribute("data-precedence"),_=d.get(B)||m,_===m&&d.set(null,b),d.set(B,b),this.count++,m=af.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),_?_.parentNode.insertBefore(b,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(b,i.firstChild)),u.state.loading|=4}}var Hu={$$typeof:A,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function qk(i,u,d,m,b,_,B,j){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xh(0),this.hiddenUpdates=xh(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=_,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function l1(i,u,d,m,b,_,B,j,$,oe,ve,ye){return i=new qk(i,u,d,B,j,$,oe,ye),u=1,_===!0&&(u|=24),_=Yn(3,null,null,u),i.current=_,_.stateNode=i,u=ip(),u.refCount++,i.pooledCache=u,u.refCount++,_.memoizedState={element:m,isDehydrated:d,cache:u},cp(_),i}function c1(i){return i?(i=Vi,i):Vi}function f1(i,u,d,m,b,_){b=c1(b),m.context===null?m.context=b:m.pendingContext=b,m=Za(u),m.payload={element:d},_=_===void 0?null:_,_!==null&&(m.callback=_),d=Ja(i,m,u),d!==null&&(Jn(d,i,u),bu(d,i,u))}function d1(i,u){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<u?d:u}}function Rm(i,u){d1(i,u),(i=i.alternate)&&d1(i,u)}function h1(i){if(i.tag===13){var u=Hi(i,67108864);u!==null&&Jn(u,i,67108864),Rm(i,67108864)}}var sf=!0;function Hk(i,u,d,m){var b=z.T;z.T=null;var _=X.p;try{X.p=2,Am(i,u,d,m)}finally{X.p=_,z.T=b}}function Vk(i,u,d,m){var b=z.T;z.T=null;var _=X.p;try{X.p=8,Am(i,u,d,m)}finally{X.p=_,z.T=b}}function Am(i,u,d,m){if(sf){var b=Tm(m);if(b===null)pm(i,u,m,uf,d),m1(i,m);else if(Gk(b,i,u,d,m))m.stopPropagation();else if(m1(i,m),u&4&&-1<Wk.indexOf(i)){for(;b!==null;){var _=Di(b);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var B=kr(_.pendingLanes);if(B!==0){var j=_;for(j.pendingLanes|=2,j.entangledLanes|=2;B;){var $=1<<31-ln(B);j.entanglements[1]|=$,B&=~$}Yr(_),(ht&6)===0&&(Vc=it()+500,Fu(0))}}break;case 13:j=Hi(_,2),j!==null&&Jn(j,_,2),Gc(),Rm(_,2)}if(_=Tm(m),_===null&&pm(i,u,m,uf,d),_===b)break;b=_}b!==null&&m.stopPropagation()}else pm(i,u,m,null,d)}}function Tm(i){return i=Mh(i),km(i)}var uf=null;function km(i){if(uf=null,i=Ni(i),i!==null){var u=o(i);if(u===null)i=null;else{var d=u.tag;if(d===13){if(i=s(u),i!==null)return i;i=null}else if(d===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;i=null}else u!==i&&(i=null)}}return uf=i,null}function p1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zt()){case Lt:return 2;case Ar:return 8;case un:case fr:return 32;case dr:return 268435456;default:return 32}default:return 32}}var Nm=!1,ho=null,po=null,mo=null,Vu=new Map,Wu=new Map,vo=[],Wk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function m1(i,u){switch(i){case"focusin":case"focusout":ho=null;break;case"dragenter":case"dragleave":po=null;break;case"mouseover":case"mouseout":mo=null;break;case"pointerover":case"pointerout":Vu.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wu.delete(u.pointerId)}}function Gu(i,u,d,m,b,_){return i===null||i.nativeEvent!==_?(i={blockedOn:u,domEventName:d,eventSystemFlags:m,nativeEvent:_,targetContainers:[b]},u!==null&&(u=Di(u),u!==null&&h1(u)),i):(i.eventSystemFlags|=m,u=i.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),i)}function Gk(i,u,d,m,b){switch(u){case"focusin":return ho=Gu(ho,i,u,d,m,b),!0;case"dragenter":return po=Gu(po,i,u,d,m,b),!0;case"mouseover":return mo=Gu(mo,i,u,d,m,b),!0;case"pointerover":var _=b.pointerId;return Vu.set(_,Gu(Vu.get(_)||null,i,u,d,m,b)),!0;case"gotpointercapture":return _=b.pointerId,Wu.set(_,Gu(Wu.get(_)||null,i,u,d,m,b)),!0}return!1}function v1(i){var u=Ni(i.target);if(u!==null){var d=o(u);if(d!==null){if(u=d.tag,u===13){if(u=s(d),u!==null){i.blockedOn=u,jA(i.priority,function(){if(d.tag===13){var m=Zn();m=Sh(m);var b=Hi(d,m);b!==null&&Jn(b,d,m),Rm(d,m)}});return}}else if(u===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function lf(i){if(i.blockedOn!==null)return!1;for(var u=i.targetContainers;0<u.length;){var d=Tm(i.nativeEvent);if(d===null){d=i.nativeEvent;var m=new d.constructor(d.type,d);Oh=m,d.target.dispatchEvent(m),Oh=null}else return u=Di(d),u!==null&&h1(u),i.blockedOn=d,!1;u.shift()}return!0}function g1(i,u,d){lf(i)&&d.delete(u)}function Xk(){Nm=!1,ho!==null&&lf(ho)&&(ho=null),po!==null&&lf(po)&&(po=null),mo!==null&&lf(mo)&&(mo=null),Vu.forEach(g1),Wu.forEach(g1)}function cf(i,u){i.blockedOn===u&&(i.blockedOn=null,Nm||(Nm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Xk)))}var ff=null;function y1(i){ff!==i&&(ff=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ff===i&&(ff=null);for(var u=0;u<i.length;u+=3){var d=i[u],m=i[u+1],b=i[u+2];if(typeof m!="function"){if(km(m||d)===null)continue;break}var _=Di(d);_!==null&&(i.splice(u,3),u-=3,kp(_,{pending:!0,data:b,method:d.method,action:m},m,b))}}))}function Xu(i){function u($){return cf($,i)}ho!==null&&cf(ho,i),po!==null&&cf(po,i),mo!==null&&cf(mo,i),Vu.forEach(u),Wu.forEach(u);for(var d=0;d<vo.length;d++){var m=vo[d];m.blockedOn===i&&(m.blockedOn=null)}for(;0<vo.length&&(d=vo[0],d.blockedOn===null);)v1(d),d.blockedOn===null&&vo.shift();if(d=(i.ownerDocument||i).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var b=d[m],_=d[m+1],B=b[Mn]||null;if(typeof _=="function")B||y1(d);else if(B){var j=null;if(_&&_.hasAttribute("formAction")){if(b=_,B=_[Mn]||null)j=B.formAction;else if(km(b)!==null)continue}else j=B.action;typeof j=="function"?d[m+1]=j:(d.splice(m,3),m-=3),y1(d)}}}function Dm(i){this._internalRoot=i}df.prototype.render=Dm.prototype.render=function(i){var u=this._internalRoot;if(u===null)throw Error(r(409));var d=u.current,m=Zn();f1(d,m,i,u,null,null)},df.prototype.unmount=Dm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var u=i.containerInfo;f1(i.current,2,null,i,null,null),Gc(),u[ki]=null}};function df(i){this._internalRoot=i}df.prototype.unstable_scheduleHydration=function(i){if(i){var u=B0();i={blockedOn:null,target:i,priority:u};for(var d=0;d<vo.length&&u!==0&&u<vo[d].priority;d++);vo.splice(d,0,i),d===0&&v1(i)}};var b1=n.version;if(b1!=="19.1.0")throw Error(r(527,b1,"19.1.0"));X.findDOMNode=function(i){var u=i._reactInternals;if(u===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=c(u),i=i!==null?f(i):null,i=i===null?null:i.stateNode,i};var Yk={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hf.isDisabled&&hf.supportsFiber)try{pa=hf.inject(Yk),jt=hf}catch{}}return Ku.createRoot=function(i,u){if(!a(i))throw Error(r(299));var d=!1,m="",b=Bw,_=Fw,B=Pw,j=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&(B=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(j=u.unstable_transitionCallbacks)),u=l1(i,1,!1,null,null,d,m,b,_,B,j,null),i[ki]=u.current,hm(i),new Dm(u)},Ku.hydrateRoot=function(i,u,d){if(!a(i))throw Error(r(299));var m=!1,b="",_=Bw,B=Fw,j=Pw,$=null,oe=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(_=d.onUncaughtError),d.onCaughtError!==void 0&&(B=d.onCaughtError),d.onRecoverableError!==void 0&&(j=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&($=d.unstable_transitionCallbacks),d.formState!==void 0&&(oe=d.formState)),u=l1(i,1,!0,u,d??null,m,b,_,B,j,$,oe),u.context=c1(null),d=u.current,m=Zn(),m=Sh(m),b=Za(m),b.callback=null,Ja(d,b,m),d=m,u.current.lanes=d,Js(u,d),Yr(u),i[ki]=u.current,hm(i),new df(u)},Ku.version="19.1.0",Ku}var k1;function sN(){if(k1)return Im.exports;k1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),Im.exports=iN(),Im.exports}var uN=sN(),$u={},N1;function lN(){if(N1)return $u;N1=1,Object.defineProperty($u,"__esModule",{value:!0}),$u.parse=s,$u.serialize=f;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function s(v,g){const y=new o,x=v.length;if(x<2)return y;const S=(g==null?void 0:g.decode)||h;let w=0;do{const T=v.indexOf("=",w);if(T===-1)break;const A=v.indexOf(";",w),C=A===-1?x:A;if(T>C){w=v.lastIndexOf(";",T-1)+1;continue}const R=l(v,w,T),k=c(v,T,R),N=v.slice(R,k);if(y[N]===void 0){let O=l(v,T+1,C),D=c(v,C,O);const M=S(v.slice(O,D));y[N]=M}w=C+1}while(w<x);return y}function l(v,g,y){do{const x=v.charCodeAt(g);if(x!==32&&x!==9)return g}while(++g<y);return y}function c(v,g,y){for(;g>y;){const x=v.charCodeAt(--g);if(x!==32&&x!==9)return g+1}return y}function f(v,g,y){const x=(y==null?void 0:y.encode)||encodeURIComponent;if(!t.test(v))throw new TypeError(`argument name is invalid: ${v}`);const S=x(g);if(!n.test(S))throw new TypeError(`argument val is invalid: ${g}`);let w=v+"="+S;if(!y)return w;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);w+="; Max-Age="+y.maxAge}if(y.domain){if(!e.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);w+="; Domain="+y.domain}if(y.path){if(!r.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);w+="; Path="+y.path}if(y.expires){if(!p(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);w+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(w+="; HttpOnly"),y.secure&&(w+="; Secure"),y.partitioned&&(w+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":w+="; Priority=Low";break;case"medium":w+="; Priority=Medium";break;case"high":w+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":w+="; SameSite=Strict";break;case"lax":w+="; SameSite=Lax";break;case"none":w+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return w}function h(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function p(v){return a.call(v)==="[object Date]"}return $u}lN();var D1="popstate";function cN(t={}){function n(a,o){let{pathname:s="/",search:l="",hash:c=""}=wi(a.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),eg("",{pathname:s,search:l,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function e(a,o){let s=a.document.querySelector("base"),l="";if(s&&s.getAttribute("href")){let c=a.location.href,f=c.indexOf("#");l=f===-1?c:c.slice(0,f)}return l+"#"+(typeof o=="string"?o:pl(o))}function r(a,o){jr(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return dN(n,e,r,t)}function Tt(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function jr(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function fN(){return Math.random().toString(36).substring(2,10)}function O1(t,n){return{usr:t.state,key:t.key,idx:n}}function eg(t,n,e=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof n=="string"?wi(n):n,state:e,key:n&&n.key||r||fN()}}function pl({pathname:t="/",search:n="",hash:e=""}){return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),e&&e!=="#"&&(t+=e.charAt(0)==="#"?e:"#"+e),t}function wi(t){let n={};if(t){let e=t.indexOf("#");e>=0&&(n.hash=t.substring(e),t=t.substring(0,e));let r=t.indexOf("?");r>=0&&(n.search=t.substring(r),t=t.substring(0,r)),t&&(n.pathname=t)}return n}function dN(t,n,e,r={}){let{window:a=document.defaultView,v5Compat:o=!1}=r,s=a.history,l="POP",c=null,f=h();f==null&&(f=0,s.replaceState({...s.state,idx:f},""));function h(){return(s.state||{idx:null}).idx}function p(){l="POP";let S=h(),w=S==null?null:S-f;f=S,c&&c({action:l,location:x.location,delta:w})}function v(S,w){l="PUSH";let T=eg(x.location,S,w);e&&e(T,S),f=h()+1;let A=O1(T,f),C=x.createHref(T);try{s.pushState(A,"",C)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;a.location.assign(C)}o&&c&&c({action:l,location:x.location,delta:1})}function g(S,w){l="REPLACE";let T=eg(x.location,S,w);e&&e(T,S),f=h();let A=O1(T,f),C=x.createHref(T);s.replaceState(A,"",C),o&&c&&c({action:l,location:x.location,delta:0})}function y(S){return hN(S)}let x={get action(){return l},get location(){return t(a,s)},listen(S){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(D1,p),c=S,()=>{a.removeEventListener(D1,p),c=null}},createHref(S){return n(a,S)},createURL:y,encodeLocation(S){let w=y(S);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:v,replace:g,go(S){return s.go(S)}};return x}function hN(t,n=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Tt(e,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:pl(t);return r=r.replace(/ $/,"%20"),!n&&r.startsWith("//")&&(r=e+r),new URL(r,e)}function aE(t,n,e="/"){return pN(t,n,e,!1)}function pN(t,n,e,r){let a=typeof n=="string"?wi(n):n,o=Fa(a.pathname||"/",e);if(o==null)return null;let s=oE(t);mN(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let f=RN(o);l=CN(s[c],f,r)}return l}function oE(t,n=[],e=[],r=""){let a=(o,s,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};c.relativePath.startsWith("/")&&(Tt(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let f=Ia([r,c.relativePath]),h=e.concat(c);o.children&&o.children.length>0&&(Tt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),oE(o.children,n,h,f)),!(o.path==null&&!o.index)&&n.push({path:f,score:SN(f,o.index),routesMeta:h})};return t.forEach((o,s)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))a(o,s);else for(let c of iE(o.path))a(o,s,c)}),n}function iE(t){let n=t.split("/");if(n.length===0)return[];let[e,...r]=n,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(r.length===0)return a?[o,""]:[o];let s=iE(r.join("/")),l=[];return l.push(...s.map(c=>c===""?o:[o,c].join("/"))),a&&l.push(...s),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function mN(t){t.sort((n,e)=>n.score!==e.score?e.score-n.score:EN(n.routesMeta.map(r=>r.childrenIndex),e.routesMeta.map(r=>r.childrenIndex)))}var vN=/^:[\w-]+$/,gN=3,yN=2,bN=1,wN=10,xN=-2,M1=t=>t==="*";function SN(t,n){let e=t.split("/"),r=e.length;return e.some(M1)&&(r+=xN),n&&(r+=yN),e.filter(a=>!M1(a)).reduce((a,o)=>a+(vN.test(o)?gN:o===""?bN:wN),r)}function EN(t,n){return t.length===n.length&&t.slice(0,-1).every((r,a)=>r===n[a])?t[t.length-1]-n[n.length-1]:0}function CN(t,n,e=!1){let{routesMeta:r}=t,a={},o="/",s=[];for(let l=0;l<r.length;++l){let c=r[l],f=l===r.length-1,h=o==="/"?n:n.slice(o.length)||"/",p=Gf({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),v=c.route;if(!p&&f&&e&&!r[r.length-1].route.index&&(p=Gf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!p)return null;Object.assign(a,p.params),s.push({params:a,pathname:Ia([o,p.pathname]),pathnameBase:NN(Ia([o,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(o=Ia([o,p.pathnameBase]))}return s}function Gf(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[e,r]=_N(t.path,t.caseSensitive,t.end),a=n.match(e);if(!a)return null;let o=a[0],s=o.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((f,{paramName:h,isOptional:p},v)=>{if(h==="*"){let y=l[v]||"";s=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const g=l[v];return p&&!g?f[h]=void 0:f[h]=(g||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:s,pattern:t}}function _N(t,n=!1,e=!0){jr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,n?void 0:"i"),r]}function RN(t){try{return t.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return jr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),t}}function Fa(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let e=n.endsWith("/")?n.length-1:n.length,r=t.charAt(e);return r&&r!=="/"?null:t.slice(e)||"/"}function AN(t,n="/"){let{pathname:e,search:r="",hash:a=""}=typeof t=="string"?wi(t):t;return{pathname:e?e.startsWith("/")?e:TN(e,n):n,search:DN(r),hash:ON(a)}}function TN(t,n){let e=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function Lm(t,n,e,r){return`Cannot include a '${t}' character in a manually specified \`to.${n}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kN(t){return t.filter((n,e)=>e===0||n.route.path&&n.route.path.length>0)}function sE(t){let n=kN(t);return n.map((e,r)=>r===n.length-1?e.pathname:e.pathnameBase)}function uE(t,n,e,r=!1){let a;typeof t=="string"?a=wi(t):(a={...t},Tt(!a.pathname||!a.pathname.includes("?"),Lm("?","pathname","search",a)),Tt(!a.pathname||!a.pathname.includes("#"),Lm("#","pathname","hash",a)),Tt(!a.search||!a.search.includes("#"),Lm("#","search","hash",a)));let o=t===""||a.pathname==="",s=o?"/":a.pathname,l;if(s==null)l=e;else{let p=n.length-1;if(!r&&s.startsWith("..")){let v=s.split("/");for(;v[0]==="..";)v.shift(),p-=1;a.pathname=v.join("/")}l=p>=0?n[p]:"/"}let c=AN(a,l),f=s&&s!=="/"&&s.endsWith("/"),h=(o||s===".")&&e.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}var Ia=t=>t.join("/").replace(/\/\/+/g,"/"),NN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),DN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ON=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function MN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var lE=["POST","PUT","PATCH","DELETE"];new Set(lE);var IN=["GET",...lE];new Set(IN);var Hs=L.createContext(null);Hs.displayName="DataRouter";var Fd=L.createContext(null);Fd.displayName="DataRouterState";var cE=L.createContext({isTransitioning:!1});cE.displayName="ViewTransition";var BN=L.createContext(new Map);BN.displayName="Fetchers";var FN=L.createContext(null);FN.displayName="Await";var la=L.createContext(null);la.displayName="Navigation";var kl=L.createContext(null);kl.displayName="Location";var La=L.createContext({outlet:null,matches:[],isDataRoute:!1});La.displayName="Route";var Vg=L.createContext(null);Vg.displayName="RouteError";function PN(t,{relative:n}={}){Tt(Nl(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:r}=L.useContext(la),{hash:a,pathname:o,search:s}=Dl(t,{relative:n}),l=o;return e!=="/"&&(l=o==="/"?e:Ia([e,o])),r.createHref({pathname:l,search:s,hash:a})}function Nl(){return L.useContext(kl)!=null}function xi(){return Tt(Nl(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(kl).location}var fE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function dE(t){L.useContext(la).static||L.useLayoutEffect(t)}function Wg(){let{isDataRoute:t}=L.useContext(La);return t?$N():LN()}function LN(){Tt(Nl(),"useNavigate() may be used only in the context of a <Router> component.");let t=L.useContext(Hs),{basename:n,navigator:e}=L.useContext(la),{matches:r}=L.useContext(La),{pathname:a}=xi(),o=JSON.stringify(sE(r)),s=L.useRef(!1);return dE(()=>{s.current=!0}),L.useCallback((c,f={})=>{if(jr(s.current,fE),!s.current)return;if(typeof c=="number"){e.go(c);return}let h=uE(c,JSON.parse(o),a,f.relative==="path");t==null&&n!=="/"&&(h.pathname=h.pathname==="/"?n:Ia([n,h.pathname])),(f.replace?e.replace:e.push)(h,f.state,f)},[n,e,o,a,t])}L.createContext(null);function Dl(t,{relative:n}={}){let{matches:e}=L.useContext(La),{pathname:r}=xi(),a=JSON.stringify(sE(e));return L.useMemo(()=>uE(t,JSON.parse(a),r,n==="path"),[t,a,r,n])}function jN(t,n){return hE(t,n)}function hE(t,n,e,r){var w;Tt(Nl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=L.useContext(la),{matches:o}=L.useContext(La),s=o[o.length-1],l=s?s.params:{},c=s?s.pathname:"/",f=s?s.pathnameBase:"/",h=s&&s.route;{let T=h&&h.path||"";pE(c,!h||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let p=xi(),v;if(n){let T=typeof n=="string"?wi(n):n;Tt(f==="/"||((w=T.pathname)==null?void 0:w.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${T.pathname}" was given in the \`location\` prop.`),v=T}else v=p;let g=v.pathname||"/",y=g;if(f!=="/"){let T=f.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(T.length).join("/")}let x=aE(t,{pathname:y});jr(h||x!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),jr(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=VN(x&&x.map(T=>Object.assign({},T,{params:Object.assign({},l,T.params),pathname:Ia([f,a.encodeLocation?a.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:Ia([f,a.encodeLocation?a.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,e,r);return n&&S?L.createElement(kl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},S):S}function zN(){let t=KN(),n=MN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),e=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=L.createElement(L.Fragment,null,L.createElement("p",null,"💿 Hey developer 👋"),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:o},"ErrorBoundary")," or"," ",L.createElement("code",{style:o},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},n),e?L.createElement("pre",{style:a},e):null,s)}var UN=L.createElement(zN,null),qN=class extends L.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?L.createElement(La.Provider,{value:this.props.routeContext},L.createElement(Vg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function HN({routeContext:t,match:n,children:e}){let r=L.useContext(Hs);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(La.Provider,{value:t},e)}function VN(t,n=[],e=null,r=null){if(t==null){if(!e)return null;if(e.errors)t=e.matches;else if(n.length===0&&!e.initialized&&e.matches.length>0)t=e.matches;else return null}let a=t,o=e==null?void 0:e.errors;if(o!=null){let c=a.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);Tt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let s=!1,l=-1;if(e)for(let c=0;c<a.length;c++){let f=a[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:h,errors:p}=e,v=f.route.loader&&!h.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||v){s=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,f,h)=>{let p,v=!1,g=null,y=null;e&&(p=o&&f.route.id?o[f.route.id]:void 0,g=f.route.errorElement||UN,s&&(l<0&&h===0?(pE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,y=null):l===h&&(v=!0,y=f.route.hydrateFallbackElement||null)));let x=n.concat(a.slice(0,h+1)),S=()=>{let w;return p?w=g:v?w=y:f.route.Component?w=L.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=c,L.createElement(HN,{match:f,routeContext:{outlet:c,matches:x,isDataRoute:e!=null},children:w})};return e&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?L.createElement(qN,{location:e.location,revalidation:e.revalidation,component:g,error:p,children:S(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):S()},null)}function Gg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WN(t){let n=L.useContext(Hs);return Tt(n,Gg(t)),n}function GN(t){let n=L.useContext(Fd);return Tt(n,Gg(t)),n}function XN(t){let n=L.useContext(La);return Tt(n,Gg(t)),n}function Xg(t){let n=XN(t),e=n.matches[n.matches.length-1];return Tt(e.route.id,`${t} can only be used on routes that contain a unique "id"`),e.route.id}function YN(){return Xg("useRouteId")}function KN(){var r;let t=L.useContext(Vg),n=GN("useRouteError"),e=Xg("useRouteError");return t!==void 0?t:(r=n.errors)==null?void 0:r[e]}function $N(){let{router:t}=WN("useNavigate"),n=Xg("useNavigate"),e=L.useRef(!1);return dE(()=>{e.current=!0}),L.useCallback(async(a,o={})=>{jr(e.current,fE),e.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:n,...o}))},[t,n])}var I1={};function pE(t,n,e){!n&&!I1[t]&&(I1[t]=!0,jr(!1,e))}L.memo(QN);function QN({routes:t,future:n,state:e}){return hE(t,void 0,e,n)}function Qe(t){Tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZN({basename:t="/",children:n=null,location:e,navigationType:r="POP",navigator:a,static:o=!1}){Tt(!Nl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),l=L.useMemo(()=>({basename:s,navigator:a,static:o,future:{}}),[s,a,o]);typeof e=="string"&&(e=wi(e));let{pathname:c="/",search:f="",hash:h="",state:p=null,key:v="default"}=e,g=L.useMemo(()=>{let y=Fa(c,s);return y==null?null:{location:{pathname:y,search:f,hash:h,state:p,key:v},navigationType:r}},[s,c,f,h,p,v,r]);return jr(g!=null,`<Router basename="${s}"> is not able to match the URL "${c}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:L.createElement(la.Provider,{value:l},L.createElement(kl.Provider,{children:n,value:g}))}function JN({children:t,location:n}){return jN(tg(t),n)}function tg(t,n=[]){let e=[];return L.Children.forEach(t,(r,a)=>{if(!L.isValidElement(r))return;let o=[...n,a];if(r.type===L.Fragment){e.push.apply(e,tg(r.props.children,o));return}Tt(r.type===Qe,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Tt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=tg(r.props.children,o)),e.push(s)}),e}var Lf="get",jf="application/x-www-form-urlencoded";function Pd(t){return t!=null&&typeof t.tagName=="string"}function e3(t){return Pd(t)&&t.tagName.toLowerCase()==="button"}function t3(t){return Pd(t)&&t.tagName.toLowerCase()==="form"}function n3(t){return Pd(t)&&t.tagName.toLowerCase()==="input"}function r3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function a3(t,n){return t.button===0&&(!n||n==="_self")&&!r3(t)}var mf=null;function o3(){if(mf===null)try{new FormData(document.createElement("form"),0),mf=!1}catch{mf=!0}return mf}var i3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jm(t){return t!=null&&!i3.has(t)?(jr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jf}"`),null):t}function s3(t,n){let e,r,a,o,s;if(t3(t)){let l=t.getAttribute("action");r=l?Fa(l,n):null,e=t.getAttribute("method")||Lf,a=jm(t.getAttribute("enctype"))||jf,o=new FormData(t)}else if(e3(t)||n3(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(r=c?Fa(c,n):null,e=t.getAttribute("formmethod")||l.getAttribute("method")||Lf,a=jm(t.getAttribute("formenctype"))||jm(l.getAttribute("enctype"))||jf,o=new FormData(l,t),!o3()){let{name:f,type:h,value:p}=t;if(h==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,p)}}else{if(Pd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Lf,r=null,a=jf,s=t}return o&&a==="text/plain"&&(s=o,o=void 0),{action:r,method:e.toLowerCase(),encType:a,formData:o,body:s}}function Yg(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}async function u3(t,n){if(t.id in n)return n[t.id];try{let e=await import(t.module);return n[t.id]=e,e}catch(e){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function l3(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function c3(t,n,e){let r=await Promise.all(t.map(async a=>{let o=n.routes[a.route.id];if(o){let s=await u3(o,e);return s.links?s.links():[]}return[]}));return p3(r.flat(1).filter(l3).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function B1(t,n,e,r,a,o){let s=(c,f)=>e[f]?c.route.id!==e[f].route.id:!0,l=(c,f)=>{var h;return e[f].pathname!==c.pathname||((h=e[f].route.path)==null?void 0:h.endsWith("*"))&&e[f].params["*"]!==c.params["*"]};return o==="assets"?n.filter((c,f)=>s(c,f)||l(c,f)):o==="data"?n.filter((c,f)=>{var p;let h=r.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(s(c,f)||l(c,f))return!0;if(c.route.shouldRevalidate){let v=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((p=e[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function f3(t,n,{includeHydrateFallback:e}={}){return d3(t.map(r=>{let a=n.routes[r.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function d3(t){return[...new Set(t)]}function h3(t){let n={},e=Object.keys(t).sort();for(let r of e)n[r]=t[r];return n}function p3(t,n){let e=new Set;return new Set(n),t.reduce((r,a)=>{let o=JSON.stringify(h3(a));return e.has(o)||(e.add(o),r.push({key:o,link:a})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var m3=new Set([100,101,204,205]);function v3(t,n){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":n&&Fa(e.pathname,n)==="/"?e.pathname=`${n.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function mE(){let t=L.useContext(Hs);return Yg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function g3(){let t=L.useContext(Fd);return Yg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Kg=L.createContext(void 0);Kg.displayName="FrameworkContext";function vE(){let t=L.useContext(Kg);return Yg(t,"You must render this element inside a <HydratedRouter> element"),t}function y3(t,n){let e=L.useContext(Kg),[r,a]=L.useState(!1),[o,s]=L.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:f,onMouseLeave:h,onTouchStart:p}=n,v=L.useRef(null);L.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let x=w=>{w.forEach(T=>{s(T.isIntersecting)})},S=new IntersectionObserver(x,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[t]),L.useEffect(()=>{if(r){let x=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(x)}}},[r]);let g=()=>{a(!0)},y=()=>{a(!1),s(!1)};return e?t!=="intent"?[o,v,{}]:[o,v,{onFocus:Qu(l,g),onBlur:Qu(c,y),onMouseEnter:Qu(f,g),onMouseLeave:Qu(h,y),onTouchStart:Qu(p,g)}]:[!1,v,{}]}function Qu(t,n){return e=>{t&&t(e),e.defaultPrevented||n(e)}}function b3({page:t,...n}){let{router:e}=mE(),r=L.useMemo(()=>aE(e.routes,t,e.basename),[e.routes,t,e.basename]);return r?L.createElement(x3,{page:t,matches:r,...n}):null}function w3(t){let{manifest:n,routeModules:e}=vE(),[r,a]=L.useState([]);return L.useEffect(()=>{let o=!1;return c3(t,n,e).then(s=>{o||a(s)}),()=>{o=!0}},[t,n,e]),r}function x3({page:t,matches:n,...e}){let r=xi(),{manifest:a,routeModules:o}=vE(),{basename:s}=mE(),{loaderData:l,matches:c}=g3(),f=L.useMemo(()=>B1(t,n,c,a,r,"data"),[t,n,c,a,r]),h=L.useMemo(()=>B1(t,n,c,a,r,"assets"),[t,n,c,a,r]),p=L.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let y=new Set,x=!1;if(n.forEach(w=>{var A;let T=a.routes[w.route.id];!T||!T.hasLoader||(!f.some(C=>C.route.id===w.route.id)&&w.route.id in l&&((A=o[w.route.id])!=null&&A.shouldRevalidate)||T.hasClientLoader?x=!0:y.add(w.route.id))}),y.size===0)return[];let S=v3(t,s);return x&&y.size>0&&S.searchParams.set("_routes",n.filter(w=>y.has(w.route.id)).map(w=>w.route.id).join(",")),[S.pathname+S.search]},[s,l,r,a,f,n,t,o]),v=L.useMemo(()=>f3(h,a),[h,a]),g=w3(h);return L.createElement(L.Fragment,null,p.map(y=>L.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...e})),v.map(y=>L.createElement("link",{key:y,rel:"modulepreload",href:y,...e})),g.map(({key:y,link:x})=>L.createElement("link",{key:y,...x})))}function S3(...t){return n=>{t.forEach(e=>{typeof e=="function"?e(n):e!=null&&(e.current=n)})}}var gE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gE&&(window.__reactRouterVersion="7.6.2")}catch{}function E3({basename:t,children:n,window:e}){let r=L.useRef();r.current==null&&(r.current=cN({window:e,v5Compat:!0}));let a=r.current,[o,s]=L.useState({action:a.action,location:a.location}),l=L.useCallback(c=>{L.startTransition(()=>s(c))},[s]);return L.useLayoutEffect(()=>a.listen(l),[a,l]),L.createElement(ZN,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:a})}var yE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bE=L.forwardRef(function({onClick:n,discover:e="render",prefetch:r="none",relative:a,reloadDocument:o,replace:s,state:l,target:c,to:f,preventScrollReset:h,viewTransition:p,...v},g){let{basename:y}=L.useContext(la),x=typeof f=="string"&&yE.test(f),S,w=!1;if(typeof f=="string"&&x&&(S=f,gE))try{let D=new URL(window.location.href),M=f.startsWith("//")?new URL(D.protocol+f):new URL(f),P=Fa(M.pathname,y);M.origin===D.origin&&P!=null?f=P+M.search+M.hash:w=!0}catch{jr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=PN(f,{relative:a}),[A,C,R]=y3(r,v),k=A3(f,{replace:s,state:l,target:c,preventScrollReset:h,relative:a,viewTransition:p});function N(D){n&&n(D),D.defaultPrevented||k(D)}let O=L.createElement("a",{...v,...R,href:S||T,onClick:w||o?n:N,ref:S3(g,C),target:c,"data-discover":!x&&e==="render"?"true":void 0});return A&&!x?L.createElement(L.Fragment,null,O,L.createElement(b3,{page:T})):O});bE.displayName="Link";var C3=L.forwardRef(function({"aria-current":n="page",caseSensitive:e=!1,className:r="",end:a=!1,style:o,to:s,viewTransition:l,children:c,...f},h){let p=Dl(s,{relative:f.relative}),v=xi(),g=L.useContext(Fd),{navigator:y,basename:x}=L.useContext(la),S=g!=null&&O3(p)&&l===!0,w=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,T=v.pathname,A=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;e||(T=T.toLowerCase(),A=A?A.toLowerCase():null,w=w.toLowerCase()),A&&x&&(A=Fa(A,x)||A);const C=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let R=T===w||!a&&T.startsWith(w)&&T.charAt(C)==="/",k=A!=null&&(A===w||!a&&A.startsWith(w)&&A.charAt(w.length)==="/"),N={isActive:R,isPending:k,isTransitioning:S},O=R?n:void 0,D;typeof r=="function"?D=r(N):D=[r,R?"active":null,k?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let M=typeof o=="function"?o(N):o;return L.createElement(bE,{...f,"aria-current":O,className:D,ref:h,style:M,to:s,viewTransition:l},typeof c=="function"?c(N):c)});C3.displayName="NavLink";var _3=L.forwardRef(({discover:t="render",fetcherKey:n,navigate:e,reloadDocument:r,replace:a,state:o,method:s=Lf,action:l,onSubmit:c,relative:f,preventScrollReset:h,viewTransition:p,...v},g)=>{let y=N3(),x=D3(l,{relative:f}),S=s.toLowerCase()==="get"?"get":"post",w=typeof l=="string"&&yE.test(l),T=A=>{if(c&&c(A),A.defaultPrevented)return;A.preventDefault();let C=A.nativeEvent.submitter,R=(C==null?void 0:C.getAttribute("formmethod"))||s;y(C||A.currentTarget,{fetcherKey:n,method:R,navigate:e,replace:a,state:o,relative:f,preventScrollReset:h,viewTransition:p})};return L.createElement("form",{ref:g,method:S,action:x,onSubmit:r?c:T,...v,"data-discover":!w&&t==="render"?"true":void 0})});_3.displayName="Form";function R3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wE(t){let n=L.useContext(Hs);return Tt(n,R3(t)),n}function A3(t,{target:n,replace:e,state:r,preventScrollReset:a,relative:o,viewTransition:s}={}){let l=Wg(),c=xi(),f=Dl(t,{relative:o});return L.useCallback(h=>{if(a3(h,n)){h.preventDefault();let p=e!==void 0?e:pl(c)===pl(f);l(t,{replace:p,state:r,preventScrollReset:a,relative:o,viewTransition:s})}},[c,l,f,e,r,n,t,a,o,s])}var T3=0,k3=()=>`__${String(++T3)}__`;function N3(){let{router:t}=wE("useSubmit"),{basename:n}=L.useContext(la),e=YN();return L.useCallback(async(r,a={})=>{let{action:o,method:s,encType:l,formData:c,body:f}=s3(r,n);if(a.navigate===!1){let h=a.fetcherKey||k3();await t.fetch(h,e,a.action||o,{preventScrollReset:a.preventScrollReset,formData:c,body:f,formMethod:a.method||s,formEncType:a.encType||l,flushSync:a.flushSync})}else await t.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:c,body:f,formMethod:a.method||s,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:e,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,n,e])}function D3(t,{relative:n}={}){let{basename:e}=L.useContext(la),r=L.useContext(La);Tt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),o={...Dl(t||".",{relative:n})},s=xi();if(t==null){o.search=s.search;let l=new URLSearchParams(o.search),c=l.getAll("index");if(c.some(h=>h==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let h=l.toString();o.search=h?`?${h}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:Ia([e,o.pathname])),pl(o)}function O3(t,n={}){let e=L.useContext(cE);Tt(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=wE("useViewTransitionState"),a=Dl(t,{relative:n.relative});if(!e.isTransitioning)return!1;let o=Fa(e.currentLocation.pathname,r)||e.currentLocation.pathname,s=Fa(e.nextLocation.pathname,r)||e.nextLocation.pathname;return Gf(a.pathname,s)!=null||Gf(a.pathname,o)!=null}[...m3];var zm={exports:{}},Um={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F1;function M3(){if(F1)return Um;F1=1;var t=Bd();function n(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var e=typeof Object.is=="function"?Object.is:n,r=t.useSyncExternalStore,a=t.useRef,o=t.useEffect,s=t.useMemo,l=t.useDebugValue;return Um.useSyncExternalStoreWithSelector=function(c,f,h,p,v){var g=a(null);if(g.current===null){var y={hasValue:!1,value:null};g.current=y}else y=g.current;g=s(function(){function S(R){if(!w){if(w=!0,T=R,R=p(R),v!==void 0&&y.hasValue){var k=y.value;if(v(k,R))return A=k}return A=R}if(k=A,e(T,R))return k;var N=p(R);return v!==void 0&&v(k,N)?(T=R,k):(T=R,A=N)}var w=!1,T,A,C=h===void 0?null:h;return[function(){return S(f())},C===null?void 0:function(){return S(C())}]},[f,h,p,v]);var x=r(c,g[0],g[1]);return o(function(){y.hasValue=!0,y.value=x},[x]),l(x),x},Um}var P1;function I3(){return P1||(P1=1,zm.exports=M3()),zm.exports}var B3=I3();function xE(t){t()}function F3(){let t=null,n=null;return{clear(){t=null,n=null},notify(){xE(()=>{let e=t;for(;e;)e.callback(),e=e.next})},get(){const e=[];let r=t;for(;r;)e.push(r),r=r.next;return e},subscribe(e){let r=!0;const a=n={callback:e,next:null,prev:n};return a.prev?a.prev.next=a:t=a,function(){!r||t===null||(r=!1,a.next?a.next.prev=a.prev:n=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var L1={notify(){},get:()=>[]};function P3(t,n){let e,r=L1,a=0,o=!1;function s(x){h();const S=r.subscribe(x);let w=!1;return()=>{w||(w=!0,S(),p())}}function l(){r.notify()}function c(){y.onStateChange&&y.onStateChange()}function f(){return o}function h(){a++,e||(e=t.subscribe(c),r=F3())}function p(){a--,e&&a===0&&(e(),e=void 0,r.clear(),r=L1)}function v(){o||(o=!0,h())}function g(){o&&(o=!1,p())}const y={addNestedSub:s,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:f,trySubscribe:v,tryUnsubscribe:g,getListeners:()=>r};return y}var L3=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",j3=L3(),z3=()=>typeof navigator<"u"&&navigator.product==="ReactNative",U3=z3(),q3=()=>j3||U3?L.useLayoutEffect:L.useEffect,H3=q3();function j1(t,n){return t===n?t!==0||n!==0||1/t===1/n:t!==t&&n!==n}function ul(t,n){if(j1(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;const e=Object.keys(t),r=Object.keys(n);if(e.length!==r.length)return!1;for(let a=0;a<e.length;a++)if(!Object.prototype.hasOwnProperty.call(n,e[a])||!j1(t[e[a]],n[e[a]]))return!1;return!0}var qm=Symbol.for("react-redux-context"),Hm=typeof globalThis<"u"?globalThis:{};function V3(){if(!L.createContext)return{};const t=Hm[qm]??(Hm[qm]=new Map);let n=t.get(L.createContext);return n||(n=L.createContext(null),t.set(L.createContext,n)),n}var Ao=V3();function W3(t){const{children:n,context:e,serverState:r,store:a}=t,o=L.useMemo(()=>{const c=P3(a);return{store:a,subscription:c,getServerState:r?()=>r:void 0}},[a,r]),s=L.useMemo(()=>a.getState(),[a]);H3(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,s]);const l=e||Ao;return L.createElement(l.Provider,{value:o},n)}var G3=W3;function $g(t=Ao){return function(){return L.useContext(t)}}var SE=$g();function EE(t=Ao){const n=t===Ao?SE:$g(t),e=()=>{const{store:r}=n();return r};return Object.assign(e,{withTypes:()=>e}),e}var CE=EE();function X3(t=Ao){const n=t===Ao?CE:EE(t),e=()=>n().dispatch;return Object.assign(e,{withTypes:()=>e}),e}var Qg=X3(),Y3=(t,n)=>t===n;function K3(t=Ao){const n=t===Ao?SE:$g(t),e=(r,a={})=>{const{equalityFn:o=Y3}=typeof a=="function"?{equalityFn:a}:a,s=n(),{store:l,subscription:c,getServerState:f}=s;L.useRef(!0);const h=L.useCallback({[r.name](v){return r(v)}}[r.name],[r]),p=B3.useSyncExternalStoreWithSelector(c.addNestedSub,l.getState,f||l.getState,h,o);return L.useDebugValue(p),p};return Object.assign(e,{withTypes:()=>e}),e}var Zg=K3(),$3=xE;function hn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Q3=typeof Symbol=="function"&&Symbol.observable||"@@observable",z1=Q3,Vm=()=>Math.random().toString(36).substring(7).split("").join("."),Z3={INIT:`@@redux/INIT${Vm()}`,REPLACE:`@@redux/REPLACE${Vm()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Vm()}`},Xf=Z3;function To(t){if(typeof t!="object"||t===null)return!1;let n=t;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n||Object.getPrototypeOf(t)===null}function _E(t,n,e){if(typeof t!="function")throw new Error(hn(2));if(typeof n=="function"&&typeof e=="function"||typeof e=="function"&&typeof arguments[3]=="function")throw new Error(hn(0));if(typeof n=="function"&&typeof e>"u"&&(e=n,n=void 0),typeof e<"u"){if(typeof e!="function")throw new Error(hn(1));return e(_E)(t,n)}let r=t,a=n,o=new Map,s=o,l=0,c=!1;function f(){s===o&&(s=new Map,o.forEach((S,w)=>{s.set(w,S)}))}function h(){if(c)throw new Error(hn(3));return a}function p(S){if(typeof S!="function")throw new Error(hn(4));if(c)throw new Error(hn(5));let w=!0;f();const T=l++;return s.set(T,S),function(){if(w){if(c)throw new Error(hn(6));w=!1,f(),s.delete(T),o=null}}}function v(S){if(!To(S))throw new Error(hn(7));if(typeof S.type>"u")throw new Error(hn(8));if(typeof S.type!="string")throw new Error(hn(17));if(c)throw new Error(hn(9));try{c=!0,a=r(a,S)}finally{c=!1}return(o=s).forEach(T=>{T()}),S}function g(S){if(typeof S!="function")throw new Error(hn(10));r=S,v({type:Xf.REPLACE})}function y(){const S=p;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(hn(11));function T(){const C=w;C.next&&C.next(h())}return T(),{unsubscribe:S(T)}},[z1](){return this}}}return v({type:Xf.INIT}),{dispatch:v,subscribe:p,getState:h,replaceReducer:g,[z1]:y}}function J3(t){Object.keys(t).forEach(n=>{const e=t[n];if(typeof e(void 0,{type:Xf.INIT})>"u")throw new Error(hn(12));if(typeof e(void 0,{type:Xf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(hn(13))})}function RE(t){const n=Object.keys(t),e={};for(let o=0;o<n.length;o++){const s=n[o];typeof t[s]=="function"&&(e[s]=t[s])}const r=Object.keys(e);let a;try{J3(e)}catch(o){a=o}return function(s={},l){if(a)throw a;let c=!1;const f={};for(let h=0;h<r.length;h++){const p=r[h],v=e[p],g=s[p],y=v(g,l);if(typeof y>"u")throw l&&l.type,new Error(hn(14));f[p]=y,c=c||y!==g}return c=c||r.length!==Object.keys(s).length,c?f:s}}function Yf(...t){return t.length===0?n=>n:t.length===1?t[0]:t.reduce((n,e)=>(...r)=>n(e(...r)))}function eD(...t){return n=>(e,r)=>{const a=n(e,r);let o=()=>{throw new Error(hn(15))};const s={getState:a.getState,dispatch:(c,...f)=>o(c,...f)},l=t.map(c=>c(s));return o=Yf(...l)(a.dispatch),{...a,dispatch:o}}}function AE(t){return To(t)&&"type"in t&&typeof t.type=="string"}var Jg=Symbol.for("immer-nothing"),ll=Symbol.for("immer-draftable"),Vn=Symbol.for("immer-state");function gn(t,...n){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var hi=Object.getPrototypeOf;function ia(t){return!!t&&!!t[Vn]}function zr(t){var n;return t?TE(t)||Array.isArray(t)||!!t[ll]||!!((n=t.constructor)!=null&&n[ll])||Ol(t)||Ml(t):!1}var tD=Object.prototype.constructor.toString();function TE(t){if(!t||typeof t!="object")return!1;const n=hi(t);if(n===null)return!0;const e=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return e===Object?!0:typeof e=="function"&&Function.toString.call(e)===tD}function nD(t){return ia(t)||gn(15,t),t[Vn].base_}function ml(t,n){pi(t)===0?Reflect.ownKeys(t).forEach(e=>{n(e,t[e],t)}):t.forEach((e,r)=>n(r,e,t))}function pi(t){const n=t[Vn];return n?n.type_:Array.isArray(t)?1:Ol(t)?2:Ml(t)?3:0}function vl(t,n){return pi(t)===2?t.has(n):Object.prototype.hasOwnProperty.call(t,n)}function Wm(t,n){return pi(t)===2?t.get(n):t[n]}function kE(t,n,e){const r=pi(t);r===2?t.set(n,e):r===3?t.add(e):t[n]=e}function rD(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}function Ol(t){return t instanceof Map}function Ml(t){return t instanceof Set}function ti(t){return t.copy_||t.base_}function ng(t,n){if(Ol(t))return new Map(t);if(Ml(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const e=TE(t);if(n===!0||n==="class_only"&&!e){const r=Object.getOwnPropertyDescriptors(t);delete r[Vn];let a=Reflect.ownKeys(r);for(let o=0;o<a.length;o++){const s=a[o],l=r[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(hi(t),r)}else{const r=hi(t);if(r!==null&&e)return{...t};const a=Object.create(r);return Object.assign(a,t)}}function ey(t,n=!1){return Ld(t)||ia(t)||!zr(t)||(pi(t)>1&&(t.set=t.add=t.clear=t.delete=aD),Object.freeze(t),n&&Object.entries(t).forEach(([e,r])=>ey(r,!0))),t}function aD(){gn(2)}function Ld(t){return Object.isFrozen(t)}var rg={};function mi(t){const n=rg[t];return n||gn(0,t),n}function oD(t,n){rg[t]||(rg[t]=n)}var gl;function NE(){return gl}function iD(t,n){return{drafts_:[],parent_:t,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function U1(t,n){n&&(mi("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=n)}function ag(t){og(t),t.drafts_.forEach(sD),t.drafts_=null}function og(t){t===gl&&(gl=t.parent_)}function q1(t){return gl=iD(gl,t)}function sD(t){const n=t[Vn];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function H1(t,n){n.unfinalizedDrafts_=n.drafts_.length;const e=n.drafts_[0];return t!==void 0&&t!==e?(e[Vn].modified_&&(ag(n),gn(4)),zr(t)&&(t=Kf(n,t),n.parent_||$f(n,t)),n.patches_&&mi("Patches").generateReplacementPatches_(e[Vn].base_,t,n.patches_,n.inversePatches_)):t=Kf(n,e,[]),ag(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),t!==Jg?t:void 0}function Kf(t,n,e){if(Ld(n))return n;const r=n[Vn];if(!r)return ml(n,(a,o)=>V1(t,r,n,a,o,e)),n;if(r.scope_!==t)return n;if(!r.modified_)return $f(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let o=a,s=!1;r.type_===3&&(o=new Set(a),a.clear(),s=!0),ml(o,(l,c)=>V1(t,r,a,l,c,e,s)),$f(t,a,!1),e&&t.patches_&&mi("Patches").generatePatches_(r,e,t.patches_,t.inversePatches_)}return r.copy_}function V1(t,n,e,r,a,o,s){if(ia(a)){const l=o&&n&&n.type_!==3&&!vl(n.assigned_,r)?o.concat(r):void 0,c=Kf(t,a,l);if(kE(e,r,c),ia(c))t.canAutoFreeze_=!1;else return}else s&&e.add(a);if(zr(a)&&!Ld(a)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Kf(t,a),(!n||!n.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(e,r)&&$f(t,a)}}function $f(t,n,e=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&ey(n,e)}function uD(t,n){const e=Array.isArray(t),r={type_:e?1:0,scope_:n?n.scope_:NE(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,o=ty;e&&(a=[r],o=yl);const{revoke:s,proxy:l}=Proxy.revocable(a,o);return r.draft_=l,r.revoke_=s,l}var ty={get(t,n){if(n===Vn)return t;const e=ti(t);if(!vl(e,n))return lD(t,e,n);const r=e[n];return t.finalized_||!zr(r)?r:r===Gm(t.base_,n)?(Xm(t),t.copy_[n]=sg(r,t)):r},has(t,n){return n in ti(t)},ownKeys(t){return Reflect.ownKeys(ti(t))},set(t,n,e){const r=DE(ti(t),n);if(r!=null&&r.set)return r.set.call(t.draft_,e),!0;if(!t.modified_){const a=Gm(ti(t),n),o=a==null?void 0:a[Vn];if(o&&o.base_===e)return t.copy_[n]=e,t.assigned_[n]=!1,!0;if(rD(e,a)&&(e!==void 0||vl(t.base_,n)))return!0;Xm(t),ig(t)}return t.copy_[n]===e&&(e!==void 0||n in t.copy_)||Number.isNaN(e)&&Number.isNaN(t.copy_[n])||(t.copy_[n]=e,t.assigned_[n]=!0),!0},deleteProperty(t,n){return Gm(t.base_,n)!==void 0||n in t.base_?(t.assigned_[n]=!1,Xm(t),ig(t)):delete t.assigned_[n],t.copy_&&delete t.copy_[n],!0},getOwnPropertyDescriptor(t,n){const e=ti(t),r=Reflect.getOwnPropertyDescriptor(e,n);return r&&{writable:!0,configurable:t.type_!==1||n!=="length",enumerable:r.enumerable,value:e[n]}},defineProperty(){gn(11)},getPrototypeOf(t){return hi(t.base_)},setPrototypeOf(){gn(12)}},yl={};ml(ty,(t,n)=>{yl[t]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});yl.deleteProperty=function(t,n){return yl.set.call(this,t,n,void 0)};yl.set=function(t,n,e){return ty.set.call(this,t[0],n,e,t[0])};function Gm(t,n){const e=t[Vn];return(e?ti(e):t)[n]}function lD(t,n,e){var a;const r=DE(n,e);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(t.draft_):void 0}function DE(t,n){if(!(n in t))return;let e=hi(t);for(;e;){const r=Object.getOwnPropertyDescriptor(e,n);if(r)return r;e=hi(e)}}function ig(t){t.modified_||(t.modified_=!0,t.parent_&&ig(t.parent_))}function Xm(t){t.copy_||(t.copy_=ng(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var cD=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(n,e,r)=>{if(typeof n=="function"&&typeof e!="function"){const o=e;e=n;const s=this;return function(c=o,...f){return s.produce(c,h=>e.call(this,h,...f))}}typeof e!="function"&&gn(6),r!==void 0&&typeof r!="function"&&gn(7);let a;if(zr(n)){const o=q1(this),s=sg(n,void 0);let l=!0;try{a=e(s),l=!1}finally{l?ag(o):og(o)}return U1(o,r),H1(a,o)}else if(!n||typeof n!="object"){if(a=e(n),a===void 0&&(a=n),a===Jg&&(a=void 0),this.autoFreeze_&&ey(a,!0),r){const o=[],s=[];mi("Patches").generateReplacementPatches_(n,a,o,s),r(o,s)}return a}else gn(1,n)},this.produceWithPatches=(n,e)=>{if(typeof n=="function")return(s,...l)=>this.produceWithPatches(s,c=>n(c,...l));let r,a;return[this.produce(n,e,(s,l)=>{r=s,a=l}),r,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){zr(t)||gn(8),ia(t)&&(t=fD(t));const n=q1(this),e=sg(t,void 0);return e[Vn].isManual_=!0,og(n),e}finishDraft(t,n){const e=t&&t[Vn];(!e||!e.isManual_)&&gn(9);const{scope_:r}=e;return U1(r,n),H1(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,n){let e;for(e=n.length-1;e>=0;e--){const a=n[e];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}e>-1&&(n=n.slice(e+1));const r=mi("Patches").applyPatches_;return ia(t)?r(t,n):this.produce(t,a=>r(a,n))}};function sg(t,n){const e=Ol(t)?mi("MapSet").proxyMap_(t,n):Ml(t)?mi("MapSet").proxySet_(t,n):uD(t,n);return(n?n.scope_:NE()).drafts_.push(e),e}function fD(t){return ia(t)||gn(10,t),OE(t)}function OE(t){if(!zr(t)||Ld(t))return t;const n=t[Vn];let e;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,e=ng(t,n.scope_.immer_.useStrictShallowCopy_)}else e=ng(t,!0);return ml(e,(r,a)=>{kE(e,r,OE(a))}),n&&(n.finalized_=!1),e}function dD(){const n="replace",e="add",r="remove";function a(v,g,y,x){switch(v.type_){case 0:case 2:return s(v,g,y,x);case 1:return o(v,g,y,x);case 3:return l(v,g,y,x)}}function o(v,g,y,x){let{base_:S,assigned_:w}=v,T=v.copy_;T.length<S.length&&([S,T]=[T,S],[y,x]=[x,y]);for(let A=0;A<S.length;A++)if(w[A]&&T[A]!==S[A]){const C=g.concat([A]);y.push({op:n,path:C,value:p(T[A])}),x.push({op:n,path:C,value:p(S[A])})}for(let A=S.length;A<T.length;A++){const C=g.concat([A]);y.push({op:e,path:C,value:p(T[A])})}for(let A=T.length-1;S.length<=A;--A){const C=g.concat([A]);x.push({op:r,path:C})}}function s(v,g,y,x){const{base_:S,copy_:w}=v;ml(v.assigned_,(T,A)=>{const C=Wm(S,T),R=Wm(w,T),k=A?vl(S,T)?n:e:r;if(C===R&&k===n)return;const N=g.concat(T);y.push(k===r?{op:k,path:N}:{op:k,path:N,value:R}),x.push(k===e?{op:r,path:N}:k===r?{op:e,path:N,value:p(C)}:{op:n,path:N,value:p(C)})})}function l(v,g,y,x){let{base_:S,copy_:w}=v,T=0;S.forEach(A=>{if(!w.has(A)){const C=g.concat([T]);y.push({op:r,path:C,value:A}),x.unshift({op:e,path:C,value:A})}T++}),T=0,w.forEach(A=>{if(!S.has(A)){const C=g.concat([T]);y.push({op:e,path:C,value:A}),x.unshift({op:r,path:C,value:A})}T++})}function c(v,g,y,x){y.push({op:n,path:[],value:g===Jg?void 0:g}),x.push({op:n,path:[],value:v})}function f(v,g){return g.forEach(y=>{const{path:x,op:S}=y;let w=v;for(let R=0;R<x.length-1;R++){const k=pi(w);let N=x[R];typeof N!="string"&&typeof N!="number"&&(N=""+N),(k===0||k===1)&&(N==="__proto__"||N==="constructor")&&gn(19),typeof w=="function"&&N==="prototype"&&gn(19),w=Wm(w,N),typeof w!="object"&&gn(18,x.join("/"))}const T=pi(w),A=h(y.value),C=x[x.length-1];switch(S){case n:switch(T){case 2:return w.set(C,A);case 3:gn(16);default:return w[C]=A}case e:switch(T){case 1:return C==="-"?w.push(A):w.splice(C,0,A);case 2:return w.set(C,A);case 3:return w.add(A);default:return w[C]=A}case r:switch(T){case 1:return w.splice(C,1);case 2:return w.delete(C);case 3:return w.delete(y.value);default:return delete w[C]}default:gn(17,S)}}),v}function h(v){if(!zr(v))return v;if(Array.isArray(v))return v.map(h);if(Ol(v))return new Map(Array.from(v.entries()).map(([y,x])=>[y,h(x)]));if(Ml(v))return new Set(Array.from(v).map(h));const g=Object.create(hi(v));for(const y in v)g[y]=h(v[y]);return vl(v,ll)&&(g[ll]=v[ll]),g}function p(v){return ia(v)?h(v):v}oD("Patches",{applyPatches_:f,generatePatches_:a,generateReplacementPatches_:c})}var sr=new cD,Il=sr.produce,ME=sr.produceWithPatches.bind(sr);sr.setAutoFreeze.bind(sr);sr.setUseStrictShallowCopy.bind(sr);var W1=sr.applyPatches.bind(sr);sr.createDraft.bind(sr);sr.finishDraft.bind(sr);function hD(t,n=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(n)}function pD(t,n=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(n)}function mD(t,n="expected all items to be functions, instead received the following types: "){if(!t.every(e=>typeof e=="function")){const e=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${n}[${e}]`)}}var G1=t=>Array.isArray(t)?t:[t];function vD(t){const n=Array.isArray(t[0])?t[0]:t;return mD(n,"createSelector expects all input-selectors to be functions, but received the following types: "),n}function gD(t,n){const e=[],{length:r}=t;for(let a=0;a<r;a++)e.push(t[a].apply(null,n));return e}var yD=class{constructor(t){this.value=t}deref(){return this.value}},bD=typeof WeakRef<"u"?WeakRef:yD,wD=0,X1=1;function vf(){return{s:wD,v:void 0,o:null,p:null}}function Qf(t,n={}){let e=vf();const{resultEqualityCheck:r}=n;let a,o=0;function s(){var p;let l=e;const{length:c}=arguments;for(let v=0,g=c;v<g;v++){const y=arguments[v];if(typeof y=="function"||typeof y=="object"&&y!==null){let x=l.o;x===null&&(l.o=x=new WeakMap);const S=x.get(y);S===void 0?(l=vf(),x.set(y,l)):l=S}else{let x=l.p;x===null&&(l.p=x=new Map);const S=x.get(y);S===void 0?(l=vf(),x.set(y,l)):l=S}}const f=l;let h;if(l.s===X1)h=l.v;else if(h=t.apply(null,arguments),o++,r){const v=((p=a==null?void 0:a.deref)==null?void 0:p.call(a))??a;v!=null&&r(v,h)&&(h=v,o!==0&&o--),a=typeof h=="object"&&h!==null||typeof h=="function"?new bD(h):h}return f.s=X1,f.v=h,h}return s.clearCache=()=>{e=vf(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function xD(t,...n){const e=typeof t=="function"?{memoize:t,memoizeOptions:n}:t,r=(...a)=>{let o=0,s=0,l,c={},f=a.pop();typeof f=="object"&&(c=f,f=a.pop()),hD(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const h={...e,...c},{memoize:p,memoizeOptions:v=[],argsMemoize:g=Qf,argsMemoizeOptions:y=[]}=h,x=G1(v),S=G1(y),w=vD(a),T=p(function(){return o++,f.apply(null,arguments)},...x),A=g(function(){s++;const R=gD(w,arguments);return l=T.apply(null,R),l},...S);return Object.assign(A,{resultFunc:f,memoizedResultFunc:T,dependencies:w,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>l,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:p,argsMemoize:g})};return Object.assign(r,{withTypes:()=>r}),r}var ny=xD(Qf),SD=Object.assign((t,n=ny)=>{pD(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const e=Object.keys(t),r=e.map(o=>t[o]);return n(r,(...o)=>o.reduce((s,l,c)=>(s[e[c]]=l,s),{}))},{withTypes:()=>SD});function IE(t){return({dispatch:e,getState:r})=>a=>o=>typeof o=="function"?o(e,r,t):a(o)}var ED=IE(),CD=IE,_D=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Yf:Yf.apply(null,arguments)},RD=t=>t&&typeof t.match=="function";function Fr(t,n){function e(...r){if(n){let a=n(...r);if(!a)throw new Error(Pr(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:r[0]}}return e.toString=()=>`${t}`,e.type=t,e.match=r=>AE(r)&&r.type===t,e}var BE=class sl extends Array{constructor(...n){super(...n),Object.setPrototypeOf(this,sl.prototype)}static get[Symbol.species](){return sl}concat(...n){return super.concat.apply(this,n)}prepend(...n){return n.length===1&&Array.isArray(n[0])?new sl(...n[0].concat(this)):new sl(...n.concat(this))}};function Y1(t){return zr(t)?Il(t,()=>{}):t}function gf(t,n,e){return t.has(n)?t.get(n):t.set(n,e(n)).get(n)}function AD(t){return typeof t=="boolean"}var TD=()=>function(n){const{thunk:e=!0,immutableCheck:r=!0,serializableCheck:a=!0,actionCreatorCheck:o=!0}=n??{};let s=new BE;return e&&(AD(e)?s.push(ED):s.push(CD(e.extraArgument))),s},jd="RTK_autoBatch",Zu=()=>t=>({payload:t,meta:{[jd]:!0}}),K1=t=>n=>{setTimeout(n,t)},kD=(t={type:"raf"})=>n=>(...e)=>{const r=n(...e);let a=!0,o=!1,s=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:K1(10):t.type==="callback"?t.queueNotification:K1(t.timeout),f=()=>{s=!1,o&&(o=!1,l.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const p=()=>a&&h(),v=r.subscribe(p);return l.add(h),()=>{v(),l.delete(h)}},dispatch(h){var p;try{return a=!((p=h==null?void 0:h.meta)!=null&&p[jd]),o=!a,o&&(s||(s=!0,c(f))),r.dispatch(h)}finally{a=!0}}})},ND=t=>function(e){const{autoBatch:r=!0}=e??{};let a=new BE(t);return r&&a.push(kD(typeof r=="object"?r:void 0)),a};function DD(t){const n=TD(),{reducer:e=void 0,middleware:r,devTools:a=!0,preloadedState:o=void 0,enhancers:s=void 0}=t||{};let l;if(typeof e=="function")l=e;else if(To(e))l=RE(e);else throw new Error(Pr(1));let c;typeof r=="function"?c=r(n):c=n();let f=Yf;a&&(f=_D({trace:!1,...typeof a=="object"&&a}));const h=eD(...c),p=ND(h);let v=typeof s=="function"?s(p):p();const g=f(...v);return _E(l,o,g)}function FE(t){const n={},e=[];let r;const a={addCase(o,s){const l=typeof o=="string"?o:o.type;if(!l)throw new Error(Pr(28));if(l in n)throw new Error(Pr(29));return n[l]=s,a},addMatcher(o,s){return e.push({matcher:o,reducer:s}),a},addDefaultCase(o){return r=o,a}};return t(a),[n,e,r]}function OD(t){return typeof t=="function"}function MD(t,n){let[e,r,a]=FE(n),o;if(OD(t))o=()=>Y1(t());else{const l=Y1(t);o=()=>l}function s(l=o(),c){let f=[e[c.type],...r.filter(({matcher:h})=>h(c)).map(({reducer:h})=>h)];return f.filter(h=>!!h).length===0&&(f=[a]),f.reduce((h,p)=>{if(p)if(ia(h)){const g=p(h,c);return g===void 0?h:g}else{if(zr(h))return Il(h,v=>p(v,c));{const v=p(h,c);if(v===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return h},l)}return s.getInitialState=o,s}var PE=(t,n)=>RD(t)?t.match(n):t(n);function Pa(...t){return n=>t.some(e=>PE(e,n))}function cl(...t){return n=>t.every(e=>PE(e,n))}function zd(t,n){if(!t||!t.meta)return!1;const e=typeof t.meta.requestId=="string",r=n.indexOf(t.meta.requestStatus)>-1;return e&&r}function Bl(t){return typeof t[0]=="function"&&"pending"in t[0]&&"fulfilled"in t[0]&&"rejected"in t[0]}function ry(...t){return t.length===0?n=>zd(n,["pending"]):Bl(t)?Pa(...t.map(n=>n.pending)):ry()(t[0])}function Fs(...t){return t.length===0?n=>zd(n,["rejected"]):Bl(t)?Pa(...t.map(n=>n.rejected)):Fs()(t[0])}function Ud(...t){const n=e=>e&&e.meta&&e.meta.rejectedWithValue;return t.length===0?cl(Fs(...t),n):Bl(t)?cl(Fs(...t),n):Ud()(t[0])}function ko(...t){return t.length===0?n=>zd(n,["fulfilled"]):Bl(t)?Pa(...t.map(n=>n.fulfilled)):ko()(t[0])}function ug(...t){return t.length===0?n=>zd(n,["pending","fulfilled","rejected"]):Bl(t)?Pa(...t.flatMap(n=>[n.pending,n.rejected,n.fulfilled])):ug()(t[0])}var ID="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ay=(t=21)=>{let n="",e=t;for(;e--;)n+=ID[Math.random()*64|0];return n},BD=["name","message","stack","code"],Ym=class{constructor(t,n){pf(this,"_type");this.payload=t,this.meta=n}},$1=class{constructor(t,n){pf(this,"_type");this.payload=t,this.meta=n}},FD=t=>{if(typeof t=="object"&&t!==null){const n={};for(const e of BD)typeof t[e]=="string"&&(n[e]=t[e]);return n}return{message:String(t)}},Q1="External signal was aborted",Z1=(()=>{function t(n,e,r){const a=Fr(n+"/fulfilled",(c,f,h,p)=>({payload:c,meta:{...p||{},arg:h,requestId:f,requestStatus:"fulfilled"}})),o=Fr(n+"/pending",(c,f,h)=>({payload:void 0,meta:{...h||{},arg:f,requestId:c,requestStatus:"pending"}})),s=Fr(n+"/rejected",(c,f,h,p,v)=>({payload:p,error:(r&&r.serializeError||FD)(c||"Rejected"),meta:{...v||{},arg:h,requestId:f,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"}}));function l(c,{signal:f}={}){return(h,p,v)=>{const g=r!=null&&r.idGenerator?r.idGenerator(c):ay(),y=new AbortController;let x,S;function w(A){S=A,y.abort()}f&&(f.aborted?w(Q1):f.addEventListener("abort",()=>w(Q1),{once:!0}));const T=async function(){var R,k;let A;try{let N=(R=r==null?void 0:r.condition)==null?void 0:R.call(r,c,{getState:p,extra:v});if(LD(N)&&(N=await N),N===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const O=new Promise((D,M)=>{x=()=>{M({name:"AbortError",message:S||"Aborted"})},y.signal.addEventListener("abort",x)});h(o(g,c,(k=r==null?void 0:r.getPendingMeta)==null?void 0:k.call(r,{requestId:g,arg:c},{getState:p,extra:v}))),A=await Promise.race([O,Promise.resolve(e(c,{dispatch:h,getState:p,extra:v,requestId:g,signal:y.signal,abort:w,rejectWithValue:(D,M)=>new Ym(D,M),fulfillWithValue:(D,M)=>new $1(D,M)})).then(D=>{if(D instanceof Ym)throw D;return D instanceof $1?a(D.payload,g,c,D.meta):a(D,g,c)})])}catch(N){A=N instanceof Ym?s(null,g,c,N.payload,N.meta):s(N,g,c)}finally{x&&y.signal.removeEventListener("abort",x)}return r&&!r.dispatchConditionRejection&&s.match(A)&&A.meta.condition||h(A),A}();return Object.assign(T,{abort:w,requestId:g,arg:c,unwrap(){return T.then(PD)}})}}return Object.assign(l,{pending:o,rejected:s,fulfilled:a,settled:Pa(s,a),typePrefix:n})}return t.withTypes=()=>t,t})();function PD(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function LD(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var jD=Symbol.for("rtk-slice-createasyncthunk");function zD(t,n){return`${t}/${n}`}function UD({creators:t}={}){var e;const n=(e=t==null?void 0:t.asyncThunk)==null?void 0:e[jD];return function(a){const{name:o,reducerPath:s=o}=a;if(!o)throw new Error(Pr(11));const l=(typeof a.reducers=="function"?a.reducers(HD()):a.reducers)||{},c=Object.keys(l),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(C,R){const k=typeof C=="string"?C:C.type;if(!k)throw new Error(Pr(12));if(k in f.sliceCaseReducersByType)throw new Error(Pr(13));return f.sliceCaseReducersByType[k]=R,h},addMatcher(C,R){return f.sliceMatchers.push({matcher:C,reducer:R}),h},exposeAction(C,R){return f.actionCreators[C]=R,h},exposeCaseReducer(C,R){return f.sliceCaseReducersByName[C]=R,h}};c.forEach(C=>{const R=l[C],k={reducerName:C,type:zD(o,C),createNotation:typeof a.reducers=="function"};WD(R)?XD(k,R,h,n):VD(k,R,h)});function p(){const[C={},R=[],k=void 0]=typeof a.extraReducers=="function"?FE(a.extraReducers):[a.extraReducers],N={...C,...f.sliceCaseReducersByType};return MD(a.initialState,O=>{for(let D in N)O.addCase(D,N[D]);for(let D of f.sliceMatchers)O.addMatcher(D.matcher,D.reducer);for(let D of R)O.addMatcher(D.matcher,D.reducer);k&&O.addDefaultCase(k)})}const v=C=>C,g=new Map,y=new WeakMap;let x;function S(C,R){return x||(x=p()),x(C,R)}function w(){return x||(x=p()),x.getInitialState()}function T(C,R=!1){function k(O){let D=O[C];return typeof D>"u"&&R&&(D=gf(y,k,w)),D}function N(O=v){const D=gf(g,R,()=>new WeakMap);return gf(D,O,()=>{const M={};for(const[P,F]of Object.entries(a.selectors??{}))M[P]=qD(F,O,()=>gf(y,O,w),R);return M})}return{reducerPath:C,getSelectors:N,get selectors(){return N(k)},selectSlice:k}}const A={name:o,reducer:S,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:w,...T(s),injectInto(C,{reducerPath:R,...k}={}){const N=R??s;return C.inject({reducerPath:N,reducer:S},k),{...A,...T(N,!0)}}};return A}}function qD(t,n,e,r){function a(o,...s){let l=n(o);return typeof l>"u"&&r&&(l=e()),t(l,...s)}return a.unwrapped=t,a}var ni=UD();function HD(){function t(n,e){return{_reducerDefinitionType:"asyncThunk",payloadCreator:n,...e}}return t.withTypes=()=>t,{reducer(n){return Object.assign({[n.name](...e){return n(...e)}}[n.name],{_reducerDefinitionType:"reducer"})},preparedReducer(n,e){return{_reducerDefinitionType:"reducerWithPrepare",prepare:n,reducer:e}},asyncThunk:t}}function VD({type:t,reducerName:n,createNotation:e},r,a){let o,s;if("reducer"in r){if(e&&!GD(r))throw new Error(Pr(17));o=r.reducer,s=r.prepare}else o=r;a.addCase(t,o).exposeCaseReducer(n,o).exposeAction(n,s?Fr(t,s):Fr(t))}function WD(t){return t._reducerDefinitionType==="asyncThunk"}function GD(t){return t._reducerDefinitionType==="reducerWithPrepare"}function XD({type:t,reducerName:n},e,r,a){if(!a)throw new Error(Pr(18));const{payloadCreator:o,fulfilled:s,pending:l,rejected:c,settled:f,options:h}=e,p=a(t,o,h);r.exposeAction(n,p),s&&r.addCase(p.fulfilled,s),l&&r.addCase(p.pending,l),c&&r.addCase(p.rejected,c),f&&r.addMatcher(p.settled,f),r.exposeCaseReducer(n,{fulfilled:s||yf,pending:l||yf,rejected:c||yf,settled:f||yf})}function yf(){}function Pr(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var YD=class extends Error{constructor(n){super(n[0].message);pf(this,"issues");this.name="SchemaError",this.issues=n}},LE=(t=>(t.uninitialized="uninitialized",t.pending="pending",t.fulfilled="fulfilled",t.rejected="rejected",t))(LE||{});function J1(t){return{status:t,isUninitialized:t==="uninitialized",isLoading:t==="pending",isSuccess:t==="fulfilled",isError:t==="rejected"}}var e2=To;function jE(t,n){if(t===n||!(e2(t)&&e2(n)||Array.isArray(t)&&Array.isArray(n)))return n;const e=Object.keys(n),r=Object.keys(t);let a=e.length===r.length;const o=Array.isArray(n)?[]:{};for(const s of e)o[s]=jE(t[s],n[s]),a&&(a=t[s]===o[s]);return a?t:o}function Cs(t){let n=0;for(const e in t)n++;return n}var t2=t=>[].concat(...t);function KD(t){return new RegExp("(^|:)//").test(t)}function $D(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function Zf(t){return t!=null}function QD(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var ZD=t=>t.replace(/\/$/,""),JD=t=>t.replace(/^\//,"");function eO(t,n){if(!t)return n;if(!n)return t;if(KD(n))return n;const e=t.endsWith("/")||!n.startsWith("?")?"/":"";return t=ZD(t),n=JD(n),`${t}${e}${n}`}function tO(t,n,e){return t.has(n)?t.get(n):t.set(n,e).get(n)}var n2=(...t)=>fetch(...t),nO=t=>t.status>=200&&t.status<=299,rO=t=>/ion\/(vnd\.api\+)?json/.test(t.get("content-type")||"");function r2(t){if(!To(t))return t;const n={...t};for(const[e,r]of Object.entries(n))r===void 0&&delete n[e];return n}function aO({baseUrl:t,prepareHeaders:n=p=>p,fetchFn:e=n2,paramsSerializer:r,isJsonContentType:a=rO,jsonContentType:o="application/json",jsonReplacer:s,timeout:l,responseHandler:c,validateStatus:f,...h}={}){return typeof fetch>"u"&&e===n2&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(v,g,y)=>{const{getState:x,extra:S,endpoint:w,forced:T,type:A}=g;let C,{url:R,headers:k=new Headers(h.headers),params:N=void 0,responseHandler:O=c??"json",validateStatus:D=f??nO,timeout:M=l,...P}=typeof v=="string"?{url:v}:v,F,U=g.signal;M&&(F=new AbortController,g.signal.addEventListener("abort",F.abort),U=F.signal);let W={...h,signal:U,...P};k=new Headers(r2(k)),W.headers=await n(k,{getState:x,arg:v,extra:S,endpoint:w,forced:T,type:A,extraOptions:y})||k;const Y=re=>typeof re=="object"&&(To(re)||Array.isArray(re)||typeof re.toJSON=="function");if(!W.headers.has("content-type")&&Y(W.body)&&W.headers.set("content-type",o),Y(W.body)&&a(W.headers)&&(W.body=JSON.stringify(W.body,s)),N){const re=~R.indexOf("?")?"&":"?",ie=r?r(N):new URLSearchParams(r2(N));R+=re+ie}R=eO(t,R);const z=new Request(R,W);C={request:new Request(R,W)};let K,V=!1,I=F&&setTimeout(()=>{V=!0,F.abort()},M);try{K=await e(z)}catch(re){return{error:{status:V?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(re)},meta:C}}finally{I&&clearTimeout(I),F==null||F.signal.removeEventListener("abort",F.abort)}const H=K.clone();C.response=H;let Q,J="";try{let re;if(await Promise.all([p(K,O).then(ie=>Q=ie,ie=>re=ie),H.text().then(ie=>J=ie,()=>{})]),re)throw re}catch(re){return{error:{status:"PARSING_ERROR",originalStatus:K.status,data:J,error:String(re)},meta:C}}return D(K,Q)?{data:Q,meta:C}:{error:{status:K.status,data:Q},meta:C}};async function p(v,g){if(typeof g=="function")return g(v);if(g==="content-type"&&(g=a(v.headers)?"json":"text"),g==="json"){const y=await v.text();return y.length?JSON.parse(y):null}return v.text()}}var a2=class{constructor(t,n=void 0){this.value=t,this.meta=n}},oy=Fr("__rtkq/focused"),zE=Fr("__rtkq/unfocused"),iy=Fr("__rtkq/online"),UE=Fr("__rtkq/offline");function qd(t){return t.type==="query"}function oO(t){return t.type==="mutation"}function Hd(t){return t.type==="infinitequery"}function Jf(t){return qd(t)||Hd(t)}function sy(t,n,e,r,a,o){return iO(t)?t(n,e,r,a).filter(Zf).map(lg).map(o):Array.isArray(t)?t.map(lg).map(o):[]}function iO(t){return typeof t=="function"}function lg(t){return typeof t=="string"?{type:t}:t}function sO(t,n){return t.catch(n)}var bl=Symbol("forceQueryFn"),cg=t=>typeof t[bl]=="function";function uO({serializeQueryArgs:t,queryThunk:n,infiniteQueryThunk:e,mutationThunk:r,api:a,context:o}){const s=new Map,l=new Map,{unsubscribeQueryResult:c,removeMutationResult:f,updateSubscriptionOptions:h}=a.internalActions;return{buildInitiateQuery:S,buildInitiateInfiniteQuery:w,buildInitiateMutation:T,getRunningQueryThunk:p,getRunningMutationThunk:v,getRunningQueriesThunk:g,getRunningMutationsThunk:y};function p(A,C){return R=>{var O;const k=o.endpointDefinitions[A],N=t({queryArgs:C,endpointDefinition:k,endpointName:A});return(O=s.get(R))==null?void 0:O[N]}}function v(A,C){return R=>{var k;return(k=l.get(R))==null?void 0:k[C]}}function g(){return A=>Object.values(s.get(A)||{}).filter(Zf)}function y(){return A=>Object.values(l.get(A)||{}).filter(Zf)}function x(A,C){const R=(k,{subscribe:N=!0,forceRefetch:O,subscriptionOptions:D,[bl]:M,...P}={})=>(F,U)=>{var pe;const W=t({queryArgs:k,endpointDefinition:C,endpointName:A});let Y;const z={...P,type:"query",subscribe:N,forceRefetch:O,subscriptionOptions:D,endpointName:A,originalArgs:k,queryCacheKey:W,[bl]:M};if(qd(C))Y=n(z);else{const{direction:Se,initialPageParam:xe}=P;Y=e({...z,direction:Se,initialPageParam:xe})}const X=a.endpoints[A].select(k),K=F(Y),V=X(U()),{requestId:I,abort:H}=K,Q=V.requestId!==I,J=(pe=s.get(F))==null?void 0:pe[W],re=()=>X(U()),ie=Object.assign(M?K.then(re):Q&&!J?Promise.resolve(V):Promise.all([J,K]).then(re),{arg:k,requestId:I,subscriptionOptions:D,queryCacheKey:W,abort:H,async unwrap(){const Se=await ie;if(Se.isError)throw Se.error;return Se.data},refetch:()=>F(R(k,{subscribe:!1,forceRefetch:!0})),unsubscribe(){N&&F(c({queryCacheKey:W,requestId:I}))},updateSubscriptionOptions(Se){ie.subscriptionOptions=Se,F(h({endpointName:A,requestId:I,queryCacheKey:W,options:Se}))}});if(!J&&!Q&&!M){const Se=tO(s,F,{});Se[W]=ie,ie.then(()=>{delete Se[W],Cs(Se)||s.delete(F)})}return ie};return R}function S(A,C){return x(A,C)}function w(A,C){return x(A,C)}function T(A){return(C,{track:R=!0,fixedCacheKey:k}={})=>(N,O)=>{const D=r({type:"mutation",endpointName:A,originalArgs:C,track:R,fixedCacheKey:k}),M=N(D),{requestId:P,abort:F,unwrap:U}=M,W=sO(M.unwrap().then(K=>({data:K})),K=>({error:K})),Y=()=>{N(f({requestId:P,fixedCacheKey:k}))},z=Object.assign(W,{arg:M.arg,requestId:P,abort:F,unwrap:U,reset:Y}),X=l.get(N)||{};return l.set(N,X),X[P]=z,z.then(()=>{delete X[P],Cs(X)||l.delete(N)}),k&&(X[k]=z,z.then(()=>{X[k]===z&&(delete X[k],Cs(X)||l.delete(N))})),z}}}var qE=class extends YD{constructor(t,n,e,r){super(t),this.value=n,this.schemaName=e,this._bqMeta=r}};async function Zo(t,n,e,r){const a=await t["~standard"].validate(n);if(a.issues)throw new qE(a.issues,n,e,r);return a.value}function lO(t){return t}var Ju=(t={})=>({...t,[jd]:!0});function cO({reducerPath:t,baseQuery:n,context:{endpointDefinitions:e},serializeQueryArgs:r,api:a,assertTagType:o,selectors:s,onSchemaFailure:l,catchSchemaFailure:c,skipSchemaValidation:f}){const h=(P,F,U,W)=>(Y,z)=>{const X=e[P],K=r({queryArgs:F,endpointDefinition:X,endpointName:P});if(Y(a.internalActions.queryResultPatched({queryCacheKey:K,patches:U})),!W)return;const V=a.endpoints[P].select(F)(z()),I=sy(X.providesTags,V.data,void 0,F,{},o);Y(a.internalActions.updateProvidedBy([{queryCacheKey:K,providedTags:I}]))};function p(P,F,U=0){const W=[F,...P];return U&&W.length>U?W.slice(0,-1):W}function v(P,F,U=0){const W=[...P,F];return U&&W.length>U?W.slice(1):W}const g=(P,F,U,W=!0)=>(Y,z)=>{const K=a.endpoints[P].select(F)(z()),V={patches:[],inversePatches:[],undo:()=>Y(a.util.patchQueryData(P,F,V.inversePatches,W))};if(K.status==="uninitialized")return V;let I;if("data"in K)if(zr(K.data)){const[H,Q,J]=ME(K.data,U);V.patches.push(...Q),V.inversePatches.push(...J),I=H}else I=U(K.data),V.patches.push({op:"replace",path:[],value:I}),V.inversePatches.push({op:"replace",path:[],value:K.data});return V.patches.length===0||Y(a.util.patchQueryData(P,F,V.patches,W)),V},y=(P,F,U)=>W=>W(a.endpoints[P].initiate(F,{subscribe:!1,forceRefetch:!0,[bl]:()=>({data:U})})),x=(P,F)=>P.query&&P[F]?P[F]:lO,S=async(P,{signal:F,abort:U,rejectWithValue:W,fulfillWithValue:Y,dispatch:z,getState:X,extra:K})=>{var Q,J;const V=e[P.endpointName],{metaSchema:I,skipSchemaValidation:H=f}=V;try{let re=x(V,"transformResponse");const ie={signal:F,abort:U,dispatch:z,getState:X,extra:K,endpoint:P.endpointName,type:P.type,forced:P.type==="query"?w(P,X()):void 0,queryCacheKey:P.type==="query"?P.queryCacheKey:void 0},pe=P.type==="query"?P[bl]:void 0;let Se;const xe=async(de,we,Ce,Ae)=>{if(we==null&&de.pages.length)return Promise.resolve({data:de});const Fe={queryArg:P.originalArgs,pageParam:we},ot=await Ee(Fe),Ye=Ae?p:v;return{data:{pages:Ye(de.pages,ot.data,Ce),pageParams:Ye(de.pageParams,we,Ce)},meta:ot.meta}};async function Ee(de){let we;const{extraOptions:Ce,argSchema:Ae,rawResponseSchema:Fe,responseSchema:ot}=V;if(Ae&&!H&&(de=await Zo(Ae,de,"argSchema",{})),pe?we=pe():V.query?we=await n(V.query(de),ie,Ce):we=await V.queryFn(de,ie,Ce,Zt=>n(Zt,ie,Ce)),typeof process<"u",we.error)throw new a2(we.error,we.meta);let{data:Ye}=we;Fe&&!H&&(Ye=await Zo(Fe,we.data,"rawResponseSchema",we.meta));let it=await re(Ye,we.meta,de);return ot&&!H&&(it=await Zo(ot,it,"responseSchema",we.meta)),{...we,data:it}}if(P.type==="query"&&"infiniteQueryOptions"in V){const{infiniteQueryOptions:de}=V,{maxPages:we=1/0}=de;let Ce;const Ae={pages:[],pageParams:[]},Fe=(Q=s.selectQueryEntry(X(),P.queryCacheKey))==null?void 0:Q.data,Ye=w(P,X())&&!P.direction||!Fe?Ae:Fe;if("direction"in P&&P.direction&&Ye.pages.length){const it=P.direction==="backward",Lt=(it?HE:fg)(de,Ye,P.originalArgs);Ce=await xe(Ye,Lt,we,it)}else{const{initialPageParam:it=de.initialPageParam}=P,Zt=(Fe==null?void 0:Fe.pageParams)??[],Lt=Zt[0]??it,Ar=Zt.length;Ce=await xe(Ye,Lt,we),pe&&(Ce={data:Ce.data.pages[0]});for(let un=1;un<Ar;un++){const fr=fg(de,Ce.data,P.originalArgs);Ce=await xe(Ce.data,fr,we)}}Se=Ce}else Se=await Ee(P.originalArgs);return I&&!H&&Se.meta&&(Se.meta=await Zo(I,Se.meta,"metaSchema",Se.meta)),Y(Se.data,Ju({fulfilledTimeStamp:Date.now(),baseQueryMeta:Se.meta}))}catch(re){let ie=re;if(ie instanceof a2){let pe=x(V,"transformErrorResponse");const{rawErrorResponseSchema:Se,errorResponseSchema:xe}=V;let{value:Ee,meta:de}=ie;try{Se&&!H&&(Ee=await Zo(Se,Ee,"rawErrorResponseSchema",de)),I&&!H&&(de=await Zo(I,de,"metaSchema",de));let we=await pe(Ee,de,P.originalArgs);return xe&&!H&&(we=await Zo(xe,we,"errorResponseSchema",de)),W(we,Ju({baseQueryMeta:de}))}catch(we){ie=we}}try{if(ie instanceof qE){const pe={endpoint:P.endpointName,arg:P.originalArgs,type:P.type,queryCacheKey:P.type==="query"?P.queryCacheKey:void 0};(J=V.onSchemaFailure)==null||J.call(V,ie,pe),l==null||l(ie,pe);const{catchSchemaFailure:Se=c}=V;if(Se)return W(Se(ie,pe),Ju({baseQueryMeta:ie._bqMeta}))}}catch(pe){ie=pe}throw console.error(ie),ie}};function w(P,F){const U=s.selectQueryEntry(F,P.queryCacheKey),W=s.selectConfig(F).refetchOnMountOrArgChange,Y=U==null?void 0:U.fulfilledTimeStamp,z=P.forceRefetch??(P.subscribe&&W);return z?z===!0||(Number(new Date)-Number(Y))/1e3>=z:!1}const T=()=>Z1(`${t}/executeQuery`,S,{getPendingMeta({arg:F}){const U=e[F.endpointName];return Ju({startedTimeStamp:Date.now(),...Hd(U)?{direction:F.direction}:{}})},condition(F,{getState:U}){var H;const W=U(),Y=s.selectQueryEntry(W,F.queryCacheKey),z=Y==null?void 0:Y.fulfilledTimeStamp,X=F.originalArgs,K=Y==null?void 0:Y.originalArgs,V=e[F.endpointName],I=F.direction;return cg(F)?!0:(Y==null?void 0:Y.status)==="pending"?!1:w(F,W)||qd(V)&&((H=V==null?void 0:V.forceRefetch)!=null&&H.call(V,{currentArg:X,previousArg:K,endpointState:Y,state:W}))?!0:!(z&&!I)},dispatchConditionRejection:!0}),A=T(),C=T(),R=Z1(`${t}/executeMutation`,S,{getPendingMeta(){return Ju({startedTimeStamp:Date.now()})}}),k=P=>"force"in P,N=P=>"ifOlderThan"in P,O=(P,F,U)=>(W,Y)=>{const z=k(U)&&U.force,X=N(U)&&U.ifOlderThan,K=(I=!0)=>{const H={forceRefetch:I,isPrefetch:!0};return a.endpoints[P].initiate(F,H)},V=a.endpoints[P].select(F)(Y());if(z)W(K());else if(X){const I=V==null?void 0:V.fulfilledTimeStamp;if(!I){W(K());return}(Number(new Date)-Number(new Date(I)))/1e3>=X&&W(K())}else W(K(!1))};function D(P){return F=>{var U,W;return((W=(U=F==null?void 0:F.meta)==null?void 0:U.arg)==null?void 0:W.endpointName)===P}}function M(P,F){return{matchPending:cl(ry(P),D(F)),matchFulfilled:cl(ko(P),D(F)),matchRejected:cl(Fs(P),D(F))}}return{queryThunk:A,mutationThunk:R,infiniteQueryThunk:C,prefetch:O,updateQueryData:g,upsertQueryData:y,patchQueryData:h,buildMatchThunkActions:M}}function fg(t,{pages:n,pageParams:e},r){const a=n.length-1;return t.getNextPageParam(n[a],n,e[a],e,r)}function HE(t,{pages:n,pageParams:e},r){var a;return(a=t.getPreviousPageParam)==null?void 0:a.call(t,n[0],n,e[0],e,r)}function VE(t,n,e,r){return sy(e[t.meta.arg.endpointName][n],ko(t)?t.payload:void 0,Ud(t)?t.payload:void 0,t.meta.arg.originalArgs,"baseQueryMeta"in t.meta?t.meta.baseQueryMeta:void 0,r)}function bf(t,n,e){const r=t[n];r&&e(r)}function wl(t){return("arg"in t?t.arg.fixedCacheKey:t.fixedCacheKey)??t.requestId}function o2(t,n,e){const r=t[wl(n)];r&&e(r)}var wf={};function fO({reducerPath:t,queryThunk:n,mutationThunk:e,serializeQueryArgs:r,context:{endpointDefinitions:a,apiUid:o,extractRehydrationInfo:s,hasRehydrationInfo:l},assertTagType:c,config:f}){const h=Fr(`${t}/resetApiState`);function p(D,M,P,F){var U;D[U=M.queryCacheKey]??(D[U]={status:"uninitialized",endpointName:M.endpointName}),bf(D,M.queryCacheKey,W=>{W.status="pending",W.requestId=P&&W.requestId?W.requestId:F.requestId,M.originalArgs!==void 0&&(W.originalArgs=M.originalArgs),W.startedTimeStamp=F.startedTimeStamp;const Y=a[F.arg.endpointName];Hd(Y)&&"direction"in M&&(W.direction=M.direction)})}function v(D,M,P,F){bf(D,M.arg.queryCacheKey,U=>{if(U.requestId!==M.requestId&&!F)return;const{merge:W}=a[M.arg.endpointName];if(U.status="fulfilled",W)if(U.data!==void 0){const{fulfilledTimeStamp:Y,arg:z,baseQueryMeta:X,requestId:K}=M;let V=Il(U.data,I=>W(I,P,{arg:z.originalArgs,baseQueryMeta:X,fulfilledTimeStamp:Y,requestId:K}));U.data=V}else U.data=P;else U.data=a[M.arg.endpointName].structuralSharing??!0?jE(ia(U.data)?nD(U.data):U.data,P):P;delete U.error,U.fulfilledTimeStamp=M.fulfilledTimeStamp})}const g=ni({name:`${t}/queries`,initialState:wf,reducers:{removeQueryResult:{reducer(D,{payload:{queryCacheKey:M}}){delete D[M]},prepare:Zu()},cacheEntriesUpserted:{reducer(D,M){for(const P of M.payload){const{queryDescription:F,value:U}=P;p(D,F,!0,{arg:F,requestId:M.meta.requestId,startedTimeStamp:M.meta.timestamp}),v(D,{arg:F,requestId:M.meta.requestId,fulfilledTimeStamp:M.meta.timestamp,baseQueryMeta:{}},U,!0)}},prepare:D=>({payload:D.map(F=>{const{endpointName:U,arg:W,value:Y}=F,z=a[U];return{queryDescription:{type:"query",endpointName:U,originalArgs:F.arg,queryCacheKey:r({queryArgs:W,endpointDefinition:z,endpointName:U})},value:Y}}),meta:{[jd]:!0,requestId:ay(),timestamp:Date.now()}})},queryResultPatched:{reducer(D,{payload:{queryCacheKey:M,patches:P}}){bf(D,M,F=>{F.data=W1(F.data,P.concat())})},prepare:Zu()}},extraReducers(D){D.addCase(n.pending,(M,{meta:P,meta:{arg:F}})=>{const U=cg(F);p(M,F,U,P)}).addCase(n.fulfilled,(M,{meta:P,payload:F})=>{const U=cg(P.arg);v(M,P,F,U)}).addCase(n.rejected,(M,{meta:{condition:P,arg:F,requestId:U},error:W,payload:Y})=>{bf(M,F.queryCacheKey,z=>{if(!P){if(z.requestId!==U)return;z.status="rejected",z.error=Y??W}})}).addMatcher(l,(M,P)=>{const{queries:F}=s(P);for(const[U,W]of Object.entries(F))((W==null?void 0:W.status)==="fulfilled"||(W==null?void 0:W.status)==="rejected")&&(M[U]=W)})}}),y=ni({name:`${t}/mutations`,initialState:wf,reducers:{removeMutationResult:{reducer(D,{payload:M}){const P=wl(M);P in D&&delete D[P]},prepare:Zu()}},extraReducers(D){D.addCase(e.pending,(M,{meta:P,meta:{requestId:F,arg:U,startedTimeStamp:W}})=>{U.track&&(M[wl(P)]={requestId:F,status:"pending",endpointName:U.endpointName,startedTimeStamp:W})}).addCase(e.fulfilled,(M,{payload:P,meta:F})=>{F.arg.track&&o2(M,F,U=>{U.requestId===F.requestId&&(U.status="fulfilled",U.data=P,U.fulfilledTimeStamp=F.fulfilledTimeStamp)})}).addCase(e.rejected,(M,{payload:P,error:F,meta:U})=>{U.arg.track&&o2(M,U,W=>{W.requestId===U.requestId&&(W.status="rejected",W.error=P??F)})}).addMatcher(l,(M,P)=>{const{mutations:F}=s(P);for(const[U,W]of Object.entries(F))((W==null?void 0:W.status)==="fulfilled"||(W==null?void 0:W.status)==="rejected")&&U!==(W==null?void 0:W.requestId)&&(M[U]=W)})}}),x={tags:{},keys:{}},S=ni({name:`${t}/invalidation`,initialState:x,reducers:{updateProvidedBy:{reducer(D,M){var P,F,U;for(const{queryCacheKey:W,providedTags:Y}of M.payload){w(D,W);for(const{type:z,id:X}of Y){const K=(F=(P=D.tags)[z]??(P[z]={}))[U=X||"__internal_without_id"]??(F[U]=[]);K.includes(W)||K.push(W)}D.keys[W]=Y}},prepare:Zu()}},extraReducers(D){D.addCase(g.actions.removeQueryResult,(M,{payload:{queryCacheKey:P}})=>{w(M,P)}).addMatcher(l,(M,P)=>{var U,W,Y;const{provided:F}=s(P);for(const[z,X]of Object.entries(F))for(const[K,V]of Object.entries(X)){const I=(W=(U=M.tags)[z]??(U[z]={}))[Y=K||"__internal_without_id"]??(W[Y]=[]);for(const H of V)I.includes(H)||I.push(H)}}).addMatcher(Pa(ko(n),Ud(n)),(M,P)=>{T(M,[P])}).addMatcher(g.actions.cacheEntriesUpserted.match,(M,P)=>{const F=P.payload.map(({queryDescription:U,value:W})=>({type:"UNKNOWN",payload:W,meta:{requestStatus:"fulfilled",requestId:"UNKNOWN",arg:U}}));T(M,F)})}});function w(D,M){var F;const P=D.keys[M]??[];for(const U of P){const W=U.type,Y=U.id??"__internal_without_id",z=(F=D.tags[W])==null?void 0:F[Y];z&&(D.tags[W][Y]=z.filter(X=>X!==M))}delete D.keys[M]}function T(D,M){const P=M.map(F=>{const U=VE(F,"providesTags",a,c),{queryCacheKey:W}=F.meta.arg;return{queryCacheKey:W,providedTags:U}});S.caseReducers.updateProvidedBy(D,S.actions.updateProvidedBy(P))}const A=ni({name:`${t}/subscriptions`,initialState:wf,reducers:{updateSubscriptionOptions(D,M){},unsubscribeQueryResult(D,M){},internal_getRTKQSubscriptions(){}}}),C=ni({name:`${t}/internalSubscriptions`,initialState:wf,reducers:{subscriptionsUpdated:{reducer(D,M){return W1(D,M.payload)},prepare:Zu()}}}),R=ni({name:`${t}/config`,initialState:{online:QD(),focused:$D(),middlewareRegistered:!1,...f},reducers:{middlewareRegistered(D,{payload:M}){D.middlewareRegistered=D.middlewareRegistered==="conflict"||o!==M?"conflict":!0}},extraReducers:D=>{D.addCase(iy,M=>{M.online=!0}).addCase(UE,M=>{M.online=!1}).addCase(oy,M=>{M.focused=!0}).addCase(zE,M=>{M.focused=!1}).addMatcher(l,M=>({...M}))}}),k=RE({queries:g.reducer,mutations:y.reducer,provided:S.reducer,subscriptions:C.reducer,config:R.reducer}),N=(D,M)=>k(h.match(M)?void 0:D,M),O={...R.actions,...g.actions,...A.actions,...C.actions,...y.actions,...S.actions,resetApiState:h};return{reducer:N,actions:O}}var Mr=Symbol.for("RTKQ/skipToken"),WE={status:"uninitialized"},i2=Il(WE,()=>{}),s2=Il(WE,()=>{});function dO({serializeQueryArgs:t,reducerPath:n,createSelector:e}){const r=A=>i2,a=A=>s2;return{buildQuerySelector:v,buildInfiniteQuerySelector:g,buildMutationSelector:y,selectInvalidatedBy:x,selectCachedArgsForQuery:S,selectApiState:s,selectQueries:l,selectMutations:f,selectQueryEntry:c,selectConfig:h};function o(A){return{...A,...J1(A.status)}}function s(A){return A[n]}function l(A){var C;return(C=s(A))==null?void 0:C.queries}function c(A,C){var R;return(R=l(A))==null?void 0:R[C]}function f(A){var C;return(C=s(A))==null?void 0:C.mutations}function h(A){var C;return(C=s(A))==null?void 0:C.config}function p(A,C,R){return k=>{if(k===Mr)return e(r,R);const N=t({queryArgs:k,endpointDefinition:C,endpointName:A});return e(D=>c(D,N)??i2,R)}}function v(A,C){return p(A,C,o)}function g(A,C){const{infiniteQueryOptions:R}=C;function k(N){const O={...N,...J1(N.status)},{isLoading:D,isError:M,direction:P}=O,F=P==="forward",U=P==="backward";return{...O,hasNextPage:w(R,O.data,O.originalArgs),hasPreviousPage:T(R,O.data,O.originalArgs),isFetchingNextPage:D&&F,isFetchingPreviousPage:D&&U,isFetchNextPageError:M&&F,isFetchPreviousPageError:M&&U}}return p(A,C,k)}function y(){return A=>{let C;return typeof A=="object"?C=wl(A)??Mr:C=A,e(C===Mr?a:N=>{var O,D;return((D=(O=s(N))==null?void 0:O.mutations)==null?void 0:D[C])??s2},o)}}function x(A,C){const R=A[n],k=new Set;for(const N of C.filter(Zf).map(lg)){const O=R.provided.tags[N.type];if(!O)continue;let D=(N.id!==void 0?O[N.id]:t2(Object.values(O)))??[];for(const M of D)k.add(M)}return t2(Array.from(k.values()).map(N=>{const O=R.queries[N];return O?[{queryCacheKey:N,endpointName:O.endpointName,originalArgs:O.originalArgs}]:[]}))}function S(A,C){return Object.values(l(A)).filter(R=>(R==null?void 0:R.endpointName)===C&&R.status!=="uninitialized").map(R=>R.originalArgs)}function w(A,C,R){return C?fg(A,C,R)!=null:!1}function T(A,C,R){return!C||!A.getPreviousPageParam?!1:HE(A,C,R)!=null}}var ps=WeakMap?new WeakMap:void 0,ed=({endpointName:t,queryArgs:n})=>{let e="";const r=ps==null?void 0:ps.get(n);if(typeof r=="string")e=r;else{const a=JSON.stringify(n,(o,s)=>(s=typeof s=="bigint"?{$bigint:s.toString()}:s,s=To(s)?Object.keys(s).sort().reduce((l,c)=>(l[c]=s[c],l),{}):s,s));To(n)&&(ps==null||ps.set(n,a)),e=a}return`${t}(${e})`};function GE(...t){return function(e){const r=Qf(f=>{var h;return(h=e.extractRehydrationInfo)==null?void 0:h.call(e,f,{reducerPath:e.reducerPath??"api"})}),a={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...e,extractRehydrationInfo:r,serializeQueryArgs(f){let h=ed;if("serializeQueryArgs"in f.endpointDefinition){const p=f.endpointDefinition.serializeQueryArgs;h=v=>{const g=p(v);return typeof g=="string"?g:ed({...v,queryArgs:g})}}else e.serializeQueryArgs&&(h=e.serializeQueryArgs);return h(f)},tagTypes:[...e.tagTypes||[]]},o={endpointDefinitions:{},batch(f){f()},apiUid:ay(),extractRehydrationInfo:r,hasRehydrationInfo:Qf(f=>r(f)!=null)},s={injectEndpoints:c,enhanceEndpoints({addTagTypes:f,endpoints:h}){if(f)for(const p of f)a.tagTypes.includes(p)||a.tagTypes.push(p);if(h)for(const[p,v]of Object.entries(h))typeof v=="function"?v(o.endpointDefinitions[p]):Object.assign(o.endpointDefinitions[p]||{},v);return s}},l=t.map(f=>f.init(s,a,o));function c(f){const h=f.endpoints({query:p=>({...p,type:"query"}),mutation:p=>({...p,type:"mutation"}),infiniteQuery:p=>({...p,type:"infinitequery"})});for(const[p,v]of Object.entries(h)){if(f.overrideExisting!==!0&&p in o.endpointDefinitions){if(f.overrideExisting==="throw")throw new Error(Pr(39));continue}o.endpointDefinitions[p]=v;for(const g of l)g.injectEndpoint(p,v)}return s}return s.injectEndpoints({endpoints:e.endpoints})}}function Na(t,...n){return Object.assign(t,...n)}var hO=({api:t,queryThunk:n,internalState:e})=>{const r=`${t.reducerPath}/subscriptions`;let a=null,o=null;const{updateSubscriptionOptions:s,unsubscribeQueryResult:l}=t.internalActions,c=(g,y)=>{var S,w,T;if(s.match(y)){const{queryCacheKey:A,requestId:C,options:R}=y.payload;return(S=g==null?void 0:g[A])!=null&&S[C]&&(g[A][C]=R),!0}if(l.match(y)){const{queryCacheKey:A,requestId:C}=y.payload;return g[A]&&delete g[A][C],!0}if(t.internalActions.removeQueryResult.match(y))return delete g[y.payload.queryCacheKey],!0;if(n.pending.match(y)){const{meta:{arg:A,requestId:C}}=y,R=g[w=A.queryCacheKey]??(g[w]={});return R[`${C}_running`]={},A.subscribe&&(R[C]=A.subscriptionOptions??R[C]??{}),!0}let x=!1;if(n.fulfilled.match(y)||n.rejected.match(y)){const A=g[y.meta.arg.queryCacheKey]||{},C=`${y.meta.requestId}_running`;x||(x=!!A[C]),delete A[C]}if(n.rejected.match(y)){const{meta:{condition:A,arg:C,requestId:R}}=y;if(A&&C.subscribe){const k=g[T=C.queryCacheKey]??(g[T]={});k[R]=C.subscriptionOptions??k[R]??{},x=!0}}return x},f=()=>e.currentSubscriptions,v={getSubscriptions:f,getSubscriptionCount:g=>{const x=f()[g]??{};return Cs(x)},isRequestSubscribed:(g,y)=>{var S;const x=f();return!!((S=x==null?void 0:x[g])!=null&&S[y])}};return(g,y)=>{if(a||(a=JSON.parse(JSON.stringify(e.currentSubscriptions))),t.util.resetApiState.match(g))return a=e.currentSubscriptions={},o=null,[!0,!1];if(t.internalActions.internal_getRTKQSubscriptions.match(g))return[!1,v];const x=c(e.currentSubscriptions,g);let S=!0;if(x){o||(o=setTimeout(()=>{const A=JSON.parse(JSON.stringify(e.currentSubscriptions)),[,C]=ME(a,()=>A);y.next(t.internalActions.subscriptionsUpdated(C)),a=A,o=null},500));const w=typeof g.type=="string"&&!!g.type.startsWith(r),T=n.rejected.match(g)&&g.meta.condition&&!!g.meta.arg.subscribe;S=!w&&!T}return[S,!1]}};function pO(t){for(const n in t)return!1;return!0}var mO=2147483647/1e3-1,vO=({reducerPath:t,api:n,queryThunk:e,context:r,internalState:a,selectors:{selectQueryEntry:o,selectConfig:s}})=>{const{removeQueryResult:l,unsubscribeQueryResult:c,cacheEntriesUpserted:f}=n.internalActions,h=Pa(c.match,e.fulfilled,e.rejected,f.match);function p(S){const w=a.currentSubscriptions[S];return!!w&&!pO(w)}const v={},g=(S,w,T)=>{const A=w.getState(),C=s(A);if(h(S)){let R;if(f.match(S))R=S.payload.map(k=>k.queryDescription.queryCacheKey);else{const{queryCacheKey:k}=c.match(S)?S.payload:S.meta.arg;R=[k]}y(R,w,C)}if(n.util.resetApiState.match(S))for(const[R,k]of Object.entries(v))k&&clearTimeout(k),delete v[R];if(r.hasRehydrationInfo(S)){const{queries:R}=r.extractRehydrationInfo(S);y(Object.keys(R),w,C)}};function y(S,w,T){const A=w.getState();for(const C of S){const R=o(A,C);x(C,R==null?void 0:R.endpointName,w,T)}}function x(S,w,T,A){const C=r.endpointDefinitions[w],R=(C==null?void 0:C.keepUnusedDataFor)??A.keepUnusedDataFor;if(R===1/0)return;const k=Math.max(0,Math.min(R,mO));if(!p(S)){const N=v[S];N&&clearTimeout(N),v[S]=setTimeout(()=>{p(S)||T.dispatch(l({queryCacheKey:S})),delete v[S]},k*1e3)}}return g},u2=new Error("Promise never resolved before cacheEntryRemoved."),gO=({api:t,reducerPath:n,context:e,queryThunk:r,mutationThunk:a,internalState:o,selectors:{selectQueryEntry:s,selectApiState:l}})=>{const c=ug(r),f=ug(a),h=ko(r,a),p={};function v(w,T,A){const C=p[w];C!=null&&C.valueResolved&&(C.valueResolved({data:T,meta:A}),delete C.valueResolved)}function g(w){const T=p[w];T&&(delete p[w],T.cacheEntryRemoved())}const y=(w,T,A)=>{const C=x(w);function R(k,N,O,D){const M=s(A,N),P=s(T.getState(),N);!M&&P&&S(k,D,N,T,O)}if(r.pending.match(w))R(w.meta.arg.endpointName,C,w.meta.requestId,w.meta.arg.originalArgs);else if(t.internalActions.cacheEntriesUpserted.match(w))for(const{queryDescription:k,value:N}of w.payload){const{endpointName:O,originalArgs:D,queryCacheKey:M}=k;R(O,M,w.meta.requestId,D),v(M,N,{})}else if(a.pending.match(w))T.getState()[n].mutations[C]&&S(w.meta.arg.endpointName,w.meta.arg.originalArgs,C,T,w.meta.requestId);else if(h(w))v(C,w.payload,w.meta.baseQueryMeta);else if(t.internalActions.removeQueryResult.match(w)||t.internalActions.removeMutationResult.match(w))g(C);else if(t.util.resetApiState.match(w))for(const k of Object.keys(p))g(k)};function x(w){return c(w)?w.meta.arg.queryCacheKey:f(w)?w.meta.arg.fixedCacheKey??w.meta.requestId:t.internalActions.removeQueryResult.match(w)?w.payload.queryCacheKey:t.internalActions.removeMutationResult.match(w)?wl(w.payload):""}function S(w,T,A,C,R){const k=e.endpointDefinitions[w],N=k==null?void 0:k.onCacheEntryAdded;if(!N)return;const O={},D=new Promise(Y=>{O.cacheEntryRemoved=Y}),M=Promise.race([new Promise(Y=>{O.valueResolved=Y}),D.then(()=>{throw u2})]);M.catch(()=>{}),p[A]=O;const P=t.endpoints[w].select(Jf(k)?T:A),F=C.dispatch((Y,z,X)=>X),U={...C,getCacheEntry:()=>P(C.getState()),requestId:R,extra:F,updateCachedData:Jf(k)?Y=>C.dispatch(t.util.updateQueryData(w,T,Y)):void 0,cacheDataLoaded:M,cacheEntryRemoved:D},W=N(T,U);Promise.resolve(W).catch(Y=>{if(Y!==u2)throw Y})}return y},yO=({api:t,context:{apiUid:n},reducerPath:e})=>(r,a)=>{t.util.resetApiState.match(r)&&a.dispatch(t.internalActions.middlewareRegistered(n))},bO=({reducerPath:t,context:n,context:{endpointDefinitions:e},mutationThunk:r,queryThunk:a,api:o,assertTagType:s,refetchQuery:l,internalState:c})=>{const{removeQueryResult:f}=o.internalActions,h=Pa(ko(r),Ud(r)),p=Pa(ko(r,a),Fs(r,a));let v=[];const g=(S,w)=>{h(S)?x(VE(S,"invalidatesTags",e,s),w):p(S)?x([],w):o.util.invalidateTags.match(S)&&x(sy(S.payload,void 0,void 0,void 0,void 0,s),w)};function y(S){var A;const{queries:w,mutations:T}=S;for(const C of[w,T])for(const R in C)if(((A=C[R])==null?void 0:A.status)==="pending")return!0;return!1}function x(S,w){const T=w.getState(),A=T[t];if(v.push(...S),A.config.invalidationBehavior==="delayed"&&y(A))return;const C=v;if(v=[],C.length===0)return;const R=o.util.selectInvalidatedBy(T,C);n.batch(()=>{const k=Array.from(R.values());for(const{queryCacheKey:N}of k){const O=A.queries[N],D=c.currentSubscriptions[N]??{};O&&(Cs(D)===0?w.dispatch(f({queryCacheKey:N})):O.status!=="uninitialized"&&w.dispatch(l(O)))}})}return g},wO=({reducerPath:t,queryThunk:n,api:e,refetchQuery:r,internalState:a})=>{const o={},s=(v,g)=>{(e.internalActions.updateSubscriptionOptions.match(v)||e.internalActions.unsubscribeQueryResult.match(v))&&c(v.payload,g),(n.pending.match(v)||n.rejected.match(v)&&v.meta.condition)&&c(v.meta.arg,g),(n.fulfilled.match(v)||n.rejected.match(v)&&!v.meta.condition)&&l(v.meta.arg,g),e.util.resetApiState.match(v)&&h()};function l({queryCacheKey:v},g){const y=g.getState()[t],x=y.queries[v],S=a.currentSubscriptions[v];if(!x||x.status==="uninitialized")return;const{lowestPollingInterval:w,skipPollingIfUnfocused:T}=p(S);if(!Number.isFinite(w))return;const A=o[v];A!=null&&A.timeout&&(clearTimeout(A.timeout),A.timeout=void 0);const C=Date.now()+w;o[v]={nextPollTimestamp:C,pollingInterval:w,timeout:setTimeout(()=>{(y.config.focused||!T)&&g.dispatch(r(x)),l({queryCacheKey:v},g)},w)}}function c({queryCacheKey:v},g){const x=g.getState()[t].queries[v],S=a.currentSubscriptions[v];if(!x||x.status==="uninitialized")return;const{lowestPollingInterval:w}=p(S);if(!Number.isFinite(w)){f(v);return}const T=o[v],A=Date.now()+w;(!T||A<T.nextPollTimestamp)&&l({queryCacheKey:v},g)}function f(v){const g=o[v];g!=null&&g.timeout&&clearTimeout(g.timeout),delete o[v]}function h(){for(const v of Object.keys(o))f(v)}function p(v={}){let g=!1,y=Number.POSITIVE_INFINITY;for(let x in v)v[x].pollingInterval&&(y=Math.min(v[x].pollingInterval,y),g=v[x].skipPollingIfUnfocused||g);return{lowestPollingInterval:y,skipPollingIfUnfocused:g}}return s},xO=({api:t,context:n,queryThunk:e,mutationThunk:r})=>{const a=ry(e,r),o=Fs(e,r),s=ko(e,r),l={};return(f,h)=>{var p,v;if(a(f)){const{requestId:g,arg:{endpointName:y,originalArgs:x}}=f.meta,S=n.endpointDefinitions[y],w=S==null?void 0:S.onQueryStarted;if(w){const T={},A=new Promise((N,O)=>{T.resolve=N,T.reject=O});A.catch(()=>{}),l[g]=T;const C=t.endpoints[y].select(Jf(S)?x:g),R=h.dispatch((N,O,D)=>D),k={...h,getCacheEntry:()=>C(h.getState()),requestId:g,extra:R,updateCachedData:Jf(S)?N=>h.dispatch(t.util.updateQueryData(y,x,N)):void 0,queryFulfilled:A};w(x,k)}}else if(s(f)){const{requestId:g,baseQueryMeta:y}=f.meta;(p=l[g])==null||p.resolve({data:f.payload,meta:y}),delete l[g]}else if(o(f)){const{requestId:g,rejectedWithValue:y,baseQueryMeta:x}=f.meta;(v=l[g])==null||v.reject({error:f.payload??f.error,isUnhandledError:!y,meta:x}),delete l[g]}}},SO=({reducerPath:t,context:n,api:e,refetchQuery:r,internalState:a})=>{const{removeQueryResult:o}=e.internalActions,s=(c,f)=>{oy.match(c)&&l(f,"refetchOnFocus"),iy.match(c)&&l(f,"refetchOnReconnect")};function l(c,f){const h=c.getState()[t],p=h.queries,v=a.currentSubscriptions;n.batch(()=>{for(const g of Object.keys(v)){const y=p[g],x=v[g];if(!x||!y)continue;(Object.values(x).some(w=>w[f]===!0)||Object.values(x).every(w=>w[f]===void 0)&&h.config[f])&&(Cs(x)===0?c.dispatch(o({queryCacheKey:g})):y.status!=="uninitialized"&&c.dispatch(r(y)))}})}return s};function EO(t){const{reducerPath:n,queryThunk:e,api:r,context:a}=t,{apiUid:o}=a,s={invalidateTags:Fr(`${n}/invalidateTags`)},l=p=>p.type.startsWith(`${n}/`),c=[yO,vO,bO,wO,gO,xO];return{middleware:p=>{let v=!1;const y={...t,internalState:{currentSubscriptions:{}},refetchQuery:h,isThisApiSliceAction:l},x=c.map(T=>T(y)),S=hO(y),w=SO(y);return T=>A=>{if(!AE(A))return T(A);v||(v=!0,p.dispatch(r.internalActions.middlewareRegistered(o)));const C={...p,next:T},R=p.getState(),[k,N]=S(A,C,R);let O;if(k?O=T(A):O=N,p.getState()[n]&&(w(A,C,R),l(A)||a.hasRehydrationInfo(A)))for(const D of x)D(A,C,R);return O}},actions:s};function h(p){return t.api.endpoints[p.endpointName].initiate(p.originalArgs,{subscribe:!1,forceRefetch:!0})}}var l2=Symbol(),XE=({createSelector:t=ny}={})=>({name:l2,init(n,{baseQuery:e,tagTypes:r,reducerPath:a,serializeQueryArgs:o,keepUnusedDataFor:s,refetchOnMountOrArgChange:l,refetchOnFocus:c,refetchOnReconnect:f,invalidationBehavior:h,onSchemaFailure:p,catchSchemaFailure:v,skipSchemaValidation:g},y){dD();const x=ie=>ie;Object.assign(n,{reducerPath:a,endpoints:{},internalActions:{onOnline:iy,onOffline:UE,onFocus:oy,onFocusLost:zE},util:{}});const S=dO({serializeQueryArgs:o,reducerPath:a,createSelector:t}),{selectInvalidatedBy:w,selectCachedArgsForQuery:T,buildQuerySelector:A,buildInfiniteQuerySelector:C,buildMutationSelector:R}=S;Na(n.util,{selectInvalidatedBy:w,selectCachedArgsForQuery:T});const{queryThunk:k,infiniteQueryThunk:N,mutationThunk:O,patchQueryData:D,updateQueryData:M,upsertQueryData:P,prefetch:F,buildMatchThunkActions:U}=cO({baseQuery:e,reducerPath:a,context:y,api:n,serializeQueryArgs:o,assertTagType:x,selectors:S,onSchemaFailure:p,catchSchemaFailure:v,skipSchemaValidation:g}),{reducer:W,actions:Y}=fO({context:y,queryThunk:k,mutationThunk:O,serializeQueryArgs:o,reducerPath:a,assertTagType:x,config:{refetchOnFocus:c,refetchOnReconnect:f,refetchOnMountOrArgChange:l,keepUnusedDataFor:s,reducerPath:a,invalidationBehavior:h}});Na(n.util,{patchQueryData:D,updateQueryData:M,upsertQueryData:P,prefetch:F,resetApiState:Y.resetApiState,upsertQueryEntries:Y.cacheEntriesUpserted}),Na(n.internalActions,Y);const{middleware:z,actions:X}=EO({reducerPath:a,context:y,queryThunk:k,mutationThunk:O,infiniteQueryThunk:N,api:n,assertTagType:x,selectors:S});Na(n.util,X),Na(n,{reducer:W,middleware:z});const{buildInitiateQuery:K,buildInitiateInfiniteQuery:V,buildInitiateMutation:I,getRunningMutationThunk:H,getRunningMutationsThunk:Q,getRunningQueriesThunk:J,getRunningQueryThunk:re}=uO({queryThunk:k,mutationThunk:O,infiniteQueryThunk:N,api:n,serializeQueryArgs:o,context:y});return Na(n.util,{getRunningMutationThunk:H,getRunningMutationsThunk:Q,getRunningQueryThunk:re,getRunningQueriesThunk:J}),{name:l2,injectEndpoint(ie,pe){var Ee;const xe=(Ee=n.endpoints)[ie]??(Ee[ie]={});qd(pe)&&Na(xe,{name:ie,select:A(ie,pe),initiate:K(ie,pe)},U(k,ie)),oO(pe)&&Na(xe,{name:ie,select:R(),initiate:I(ie)},U(O,ie)),Hd(pe)&&Na(xe,{name:ie,select:C(ie,pe),initiate:V(ie,pe)},U(k,ie))}}}});XE();function xf(t){return t.replace(t[0],t[0].toUpperCase())}function CO(t){return t.type==="query"}function _O(t){return t.type==="mutation"}function YE(t){return t.type==="infinitequery"}function el(t,...n){return Object.assign(t,...n)}var Km=Symbol();function $m(t,n,e,r){const a=L.useMemo(()=>({queryArgs:t,serialized:typeof t=="object"?n({queryArgs:t,endpointDefinition:e,endpointName:r}):t}),[t,n,e,r]),o=L.useRef(a);return L.useEffect(()=>{o.current.serialized!==a.serialized&&(o.current=a)},[a]),o.current.serialized===a.serialized?o.current.queryArgs:t}function Sf(t){const n=L.useRef(t);return L.useEffect(()=>{ul(n.current,t)||(n.current=t)},[t]),ul(n.current,t)?n.current:t}var RO=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AO=RO(),TO=()=>typeof navigator<"u"&&navigator.product==="ReactNative",kO=TO(),NO=()=>AO||kO?L.useLayoutEffect:L.useEffect,DO=NO(),c2=t=>t.isUninitialized?{...t,isUninitialized:!1,isFetching:!0,isLoading:t.data===void 0,status:LE.pending}:t;function Qm(t,...n){const e={};return n.forEach(r=>{e[r]=t[r]}),e}var Zm=["data","status","isLoading","isSuccess","isError","error"];function OO({api:t,moduleOptions:{batch:n,hooks:{useDispatch:e,useSelector:r,useStore:a},unstable__sideEffectsInRender:o,createSelector:s},serializeQueryArgs:l,context:c}){const f=o?C=>C():L.useEffect;return{buildQueryHooks:w,buildInfiniteQueryHooks:T,buildMutationHook:A,usePrefetch:v};function h(C,R,k){if(R!=null&&R.endpointName&&C.isUninitialized){const{endpointName:F}=R,U=c.endpointDefinitions[F];k!==Mr&&l({queryArgs:R.originalArgs,endpointDefinition:U,endpointName:F})===l({queryArgs:k,endpointDefinition:U,endpointName:F})&&(R=void 0)}let N=C.isSuccess?C.data:R==null?void 0:R.data;N===void 0&&(N=C.data);const O=N!==void 0,D=C.isLoading,M=(!R||R.isLoading||R.isUninitialized)&&!O&&D,P=C.isSuccess||O&&(D&&!(R!=null&&R.isError)||C.isUninitialized);return{...C,data:N,currentData:C.data,isFetching:D,isLoading:M,isSuccess:P}}function p(C,R,k){if(R!=null&&R.endpointName&&C.isUninitialized){const{endpointName:F}=R,U=c.endpointDefinitions[F];k!==Mr&&l({queryArgs:R.originalArgs,endpointDefinition:U,endpointName:F})===l({queryArgs:k,endpointDefinition:U,endpointName:F})&&(R=void 0)}let N=C.isSuccess?C.data:R==null?void 0:R.data;N===void 0&&(N=C.data);const O=N!==void 0,D=C.isLoading,M=(!R||R.isLoading||R.isUninitialized)&&!O&&D,P=C.isSuccess||D&&O;return{...C,data:N,currentData:C.data,isFetching:D,isLoading:M,isSuccess:P}}function v(C,R){const k=e(),N=Sf(R);return L.useCallback((O,D)=>k(t.util.prefetch(C,O,{...N,...D})),[C,k,N])}function g(C,R,{refetchOnReconnect:k,refetchOnFocus:N,refetchOnMountOrArgChange:O,skip:D=!1,pollingInterval:M=0,skipPollingIfUnfocused:P=!1,...F}={}){const{initiate:U}=t.endpoints[C],W=e(),Y=L.useRef(void 0);if(!Y.current){const ie=W(t.internalActions.internal_getRTKQSubscriptions());Y.current=ie}const z=$m(D?Mr:R,ed,c.endpointDefinitions[C],C),X=Sf({refetchOnReconnect:k,refetchOnFocus:N,pollingInterval:M,skipPollingIfUnfocused:P}),K=F.initialPageParam,V=Sf(K),I=L.useRef(void 0);let{queryCacheKey:H,requestId:Q}=I.current||{},J=!1;H&&Q&&(J=Y.current.isRequestSubscribed(H,Q));const re=!J&&I.current!==void 0;return f(()=>{re&&(I.current=void 0)},[re]),f(()=>{var Se;const ie=I.current;if(z===Mr){ie==null||ie.unsubscribe(),I.current=void 0;return}const pe=(Se=I.current)==null?void 0:Se.subscriptionOptions;if(!ie||ie.arg!==z){ie==null||ie.unsubscribe();const xe=W(U(z,{subscriptionOptions:X,forceRefetch:O,...YE(c.endpointDefinitions[C])?{initialPageParam:V}:{}}));I.current=xe}else X!==pe&&ie.updateSubscriptionOptions(X)},[W,U,O,z,X,re,V,C]),[I,W,U,X]}function y(C,R){return(N,{skip:O=!1,selectFromResult:D}={})=>{const{select:M}=t.endpoints[C],P=$m(O?Mr:N,l,c.endpointDefinitions[C],C),F=L.useRef(void 0),U=L.useMemo(()=>s([M(P),(K,V)=>V,K=>P],R,{memoizeOptions:{resultEqualityCheck:ul}}),[M,P]),W=L.useMemo(()=>D?s([U],D,{devModeChecks:{identityFunctionCheck:"never"}}):U,[U,D]),Y=r(K=>W(K,F.current),ul),z=a(),X=U(z.getState(),F.current);return DO(()=>{F.current=X},[X]),Y}}function x(C){L.useEffect(()=>()=>{var R,k;(k=(R=C.current)==null?void 0:R.unsubscribe)==null||k.call(R),C.current=void 0},[C])}function S(C){if(!C.current)throw new Error(Pr(38));return C.current.refetch()}function w(C){const R=(O,D={})=>{const[M]=g(C,O,D);return x(M),L.useMemo(()=>({refetch:()=>S(M)}),[M])},k=({refetchOnReconnect:O,refetchOnFocus:D,pollingInterval:M=0,skipPollingIfUnfocused:P=!1}={})=>{const{initiate:F}=t.endpoints[C],U=e(),[W,Y]=L.useState(Km),z=L.useRef(void 0),X=Sf({refetchOnReconnect:O,refetchOnFocus:D,pollingInterval:M,skipPollingIfUnfocused:P});f(()=>{var Q,J;const H=(Q=z.current)==null?void 0:Q.subscriptionOptions;X!==H&&((J=z.current)==null||J.updateSubscriptionOptions(X))},[X]);const K=L.useRef(X);f(()=>{K.current=X},[X]);const V=L.useCallback(function(H,Q=!1){let J;return n(()=>{var re;(re=z.current)==null||re.unsubscribe(),z.current=J=U(F(H,{subscriptionOptions:K.current,forceRefetch:!Q})),Y(H)}),J},[U,F]),I=L.useCallback(()=>{var H,Q;(H=z.current)!=null&&H.queryCacheKey&&U(t.internalActions.removeQueryResult({queryCacheKey:(Q=z.current)==null?void 0:Q.queryCacheKey}))},[U]);return L.useEffect(()=>()=>{var H;(H=z==null?void 0:z.current)==null||H.unsubscribe()},[]),L.useEffect(()=>{W!==Km&&!z.current&&V(W,!0)},[W,V]),L.useMemo(()=>[V,W,{reset:I}],[V,W,I])},N=y(C,h);return{useQueryState:N,useQuerySubscription:R,useLazyQuerySubscription:k,useLazyQuery(O){const[D,M,{reset:P}]=k(O),F=N(M,{...O,skip:M===Km}),U=L.useMemo(()=>({lastArg:M}),[M]);return L.useMemo(()=>[D,{...F,reset:P},U],[D,F,P,U])},useQuery(O,D){const M=R(O,D),P=N(O,{selectFromResult:O===Mr||D!=null&&D.skip?void 0:c2,...D}),F=Qm(P,...Zm);return L.useDebugValue(F),L.useMemo(()=>({...P,...M}),[P,M])}}}function T(C){const R=(N,O={})=>{const[D,M,P,F]=g(C,N,O),U=L.useRef(F);f(()=>{U.current=F},[F]);const W=L.useCallback(function(X,K){let V;return n(()=>{var I;(I=D.current)==null||I.unsubscribe(),D.current=V=M(P(X,{subscriptionOptions:U.current,direction:K}))}),V},[D,M,P]);x(D);const Y=$m(O.skip?Mr:N,ed,c.endpointDefinitions[C],C),z=L.useCallback(()=>S(D),[D]);return L.useMemo(()=>({trigger:W,refetch:z,fetchNextPage:()=>W(Y,"forward"),fetchPreviousPage:()=>W(Y,"backward")}),[z,W,Y])},k=y(C,p);return{useInfiniteQueryState:k,useInfiniteQuerySubscription:R,useInfiniteQuery(N,O){const{refetch:D,fetchNextPage:M,fetchPreviousPage:P}=R(N,O),F=k(N,{selectFromResult:N===Mr||O!=null&&O.skip?void 0:c2,...O}),U=Qm(F,...Zm,"hasNextPage","hasPreviousPage");return L.useDebugValue(U),L.useMemo(()=>({...F,fetchNextPage:M,fetchPreviousPage:P,refetch:D}),[F,M,P,D])}}}function A(C){return({selectFromResult:R,fixedCacheKey:k}={})=>{const{select:N,initiate:O}=t.endpoints[C],D=e(),[M,P]=L.useState();L.useEffect(()=>()=>{M!=null&&M.arg.fixedCacheKey||M==null||M.reset()},[M]);const F=L.useCallback(function(H){const Q=D(O(H,{fixedCacheKey:k}));return P(Q),Q},[D,O,k]),{requestId:U}=M||{},W=L.useMemo(()=>N({fixedCacheKey:k,requestId:M==null?void 0:M.requestId}),[k,M,N]),Y=L.useMemo(()=>R?s([W],R):W,[R,W]),z=r(Y,ul),X=k==null?M==null?void 0:M.arg.originalArgs:void 0,K=L.useCallback(()=>{n(()=>{M&&P(void 0),k&&D(t.internalActions.removeMutationResult({requestId:U,fixedCacheKey:k}))})},[D,k,M,U]),V=Qm(z,...Zm,"endpointName");L.useDebugValue(V);const I=L.useMemo(()=>({...z,originalArgs:X,reset:K}),[z,X,K]);return L.useMemo(()=>[F,I],[F,I])}}}var MO=Symbol(),IO=({batch:t=$3,hooks:n={useDispatch:Qg,useSelector:Zg,useStore:CE},createSelector:e=ny,unstable__sideEffectsInRender:r=!1,...a}={})=>({name:MO,init(o,{serializeQueryArgs:s},l){const c=o,{buildQueryHooks:f,buildInfiniteQueryHooks:h,buildMutationHook:p,usePrefetch:v}=OO({api:o,moduleOptions:{batch:t,hooks:n,unstable__sideEffectsInRender:r,createSelector:e},serializeQueryArgs:s,context:l});return el(c,{usePrefetch:v}),el(l,{batch:t}),{injectEndpoint(g,y){if(CO(y)){const{useQuery:x,useLazyQuery:S,useLazyQuerySubscription:w,useQueryState:T,useQuerySubscription:A}=f(g);el(c.endpoints[g],{useQuery:x,useLazyQuery:S,useLazyQuerySubscription:w,useQueryState:T,useQuerySubscription:A}),o[`use${xf(g)}Query`]=x,o[`useLazy${xf(g)}Query`]=S}if(_O(y)){const x=p(g);el(c.endpoints[g],{useMutation:x}),o[`use${xf(g)}Mutation`]=x}else if(YE(y)){const{useInfiniteQuery:x,useInfiniteQuerySubscription:S,useInfiniteQueryState:w}=h(g);el(c.endpoints[g],{useInfiniteQuery:x,useInfiniteQuerySubscription:S,useInfiniteQueryState:w}),o[`use${xf(g)}InfiniteQuery`]=x}}}}}),BO=GE(XE(),IO());const zf=BO({reducerPath:"authApi",baseQuery:aO({baseUrl:"https://auth.dnjs.lk/api"}),endpoints:t=>({getUser:t.query({query:n=>({url:"/user",method:"GET",headers:{Authorization:`Bearer ${n}`}})}),login:t.mutation({query:n=>({url:"/login",method:"POST",body:n,headers:{"Content-Type":"application/json"}})}),logout:t.mutation({query:n=>({url:"/logout",method:"POST",headers:{Authorization:`Bearer ${n}`}})}),updateUser:t.mutation({query:({token:n,name:e,description:r})=>({url:"/user",method:"PUT",body:{name:e,description:r},headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})}),uploadAvatar:t.mutation({query:({token:n,formData:e})=>({url:"/avatar",method:"POST",body:e,headers:{Authorization:`Bearer ${n}`}})}),removeAvatar:t.mutation({query:n=>({url:"/avatar",method:"DELETE",headers:{Authorization:`Bearer ${n}`}})}),changePassword:t.mutation({query:({token:n,old_password:e,new_password:r,new_password_confirmation:a})=>({url:"/password",method:"PUT",body:{old_password:e,new_password:r,new_password_confirmation:a},headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})}),changeEmail:t.mutation({query:({token:n,email:e})=>({url:`/email?token=${n}`,method:"POST",body:{email:e},headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})})})}),{useGetUserQuery:FO,useLoginMutation:PO,useLogoutMutation:LO,useUpdateUserMutation:jO,useUploadAvatarMutation:zO,useRemoveAvatarMutation:UO,useChangePasswordMutation:qO,useChangeEmailMutation:HO}=zf,VO={isAuthenticated:!1,user:null,token:null,mode:"summary",subscriptionEnabled:!0,loading:!1,error:null,success:null},KE=ni({name:"auth",initialState:VO,reducers:{setAuthState:(t,n)=>{const{user:e,token:r,isAuthenticated:a}=n.payload;t.user=e,t.token=r,t.isAuthenticated=a},setMode:(t,n)=>{t.mode=n.payload},setSubscriptionEnabled:(t,n)=>{t.subscriptionEnabled=n.payload},setLoading:(t,n)=>{t.loading=n.payload},setError:(t,n)=>{t.error=n.payload},setSuccess:(t,n)=>{t.success=n.payload},updateUser:(t,n)=>{t.user={...t.user,...n.payload}},clearAuth:t=>{t.isAuthenticated=!1,t.user=null,t.token=null,t.mode="summary",t.error=null,t.success=null},clearMessages:t=>{t.error=null,t.success=null}}}),{setAuthState:f2,setMode:er,setSubscriptionEnabled:WO,setLoading:LH,setError:jH,setSuccess:Jm,updateUser:Uf,clearAuth:ev,clearMessages:GO}=KE.actions,XO=KE.reducer,YO=DD({reducer:{auth:XO,[zf.reducerPath]:zf.reducer},middleware:t=>t().concat(zf.middleware)});function KO(){const t=Wg(),n=Array.from({length:36},(e,r)=>({label:`ASG_${r+1}`,path:`/asg-${r+1}`}));return E.jsxs("div",{className:"asg-btn-container",children:[E.jsx("h1",{children:"React Assignments"}),E.jsx("div",{className:"asg-btn-grid",children:n.map(e=>E.jsx("button",{className:"asg-btn",onClick:()=>t(e.path),children:e.label},e.label))})]})}function nt(){const t=Wg();return E.jsx("button",{className:"back-to-home-btn",onClick:()=>t("/"),children:"Back to Home"})}function $O(){const[t,n]=L.useState({section1:!1,section2:!1,section3:!1}),e=r=>{n(a=>({...a,[r]:!a[r]}))};return L.useEffect(()=>{console.log("Visible sections:",t)},[t]),E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment#1"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsxs("button",{className:"btn-ags1",onClick:()=>e("section1"),children:["Section #1 ",E.jsx("span",{children:t.section1?"Hide TextBox":"Show Text Box"})]}),t.section1&&E.jsx("div",{className:"text-box-container",children:E.jsx("p",{className:"text-box",children:"Beneath the bustling city streets, a secret world thrived. Tunnels stretched for miles, harboring stories lost to time. Echoes bounced off damp stone walls, whispering secrets only the shadows knew. Lanterns flickered dimly, lighting the path for those who dared explore. Graffiti painted over centuries of grime hinted at lives once lived, revolutions sparked, and dreams pursued. Rats scurried into crevices, fleeing unseen threats. A lonely violin note wafted through the air—someone was there. Footsteps followed the music, unsure whether to run or remain. Curiosity often outweighed fear in such places. Underground, everything felt possible, mysterious, even magical in its decay."})}),E.jsxs("button",{className:"btn-ags1",onClick:()=>e("section2"),children:["Section #2 ",E.jsx("span",{children:t.section2?"Hide TextBox":"Show Text Box"})]}),t.section2&&E.jsx("div",{className:"text-box-container",children:E.jsx("p",{className:"text-box",children:"The sun dipped below the horizon, casting a golden glow over the quiet lake. Birds chirped their final melodies of the day, echoing through the rustling leaves. A gentle breeze stirred the tall grasses along the water’s edge. In the distance, a canoe glided silently, its paddler silhouetted against the fiery sky. Nature’s calm enveloped the scene, inviting peace and reflection. Somewhere nearby, a frog croaked, joining the evening chorus. The day ended slowly, thoughtfully, as stars peeked through the fading blue. It was a moment of stillness, untouched by noise or haste—just time, light, and the world unwinding together."})}),E.jsxs("button",{className:"btn-ags1",onClick:()=>e("section3"),children:["Section #3 ",E.jsx("span",{children:t.section3?"Hide TextBox":"Show Text Box"})]}),t.section3&&E.jsx("div",{className:"text-box-container",children:E.jsx("p",{className:"text-box",children:"Rain poured relentlessly, drenching the city in sheets of silver. People hurried beneath umbrellas, their footsteps lost in the downpour’s rhythm. Neon signs blurred behind water-streaked glass, casting colorful reflections onto slick pavement. Taxis splashed by, sending waves toward already soaked pedestrians. Inside a tiny café, warmth and coffee wrapped around customers like a comforting embrace. Steam curled from mugs, fogging windows. Conversations were hushed, intimate, like secrets shared under stormy skies. Outside, thunder grumbled distantly, a reminder of nature’s power. But within, calm prevailed. The rain may have ruled the streets, but the café remained an island of serenity."})})]})}function QO(){const[t,n]=L.useState(""),[e,r]=L.useState(""),[a,o]=L.useState(""),[s,l]=L.useState(""),c=h=>{o(h.target.value)},f=()=>{const h=parseFloat(t),p=parseFloat(e);if(isNaN(h)||isNaN(p)||!a){l("Invalid input");return}let v;switch(a){case"+":v=h+p;break;case"-":v=h-p;break;case"*":v=h*p;break;case"/":v=p!==0?h/p:"Cannot divide by zero";break;default:v="Invalid operation"}l(v)};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-2"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsx("input",{type:"number",value:t,onChange:h=>n(h.target.value),placeholder:"Enter first number"}),E.jsxs("select",{value:a,onChange:c,children:[E.jsx("option",{value:"",children:"--Please choose--"}),E.jsx("option",{value:"+",children:"Addition"}),E.jsx("option",{value:"-",children:"Subtraction"}),E.jsx("option",{value:"*",children:"Multiplication"}),E.jsx("option",{value:"/",children:"Division"})]}),E.jsx("input",{type:"number",value:e,onChange:h=>r(h.target.value),placeholder:"Enter second number"}),t&&e&&a&&E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:f,children:"Calculate"}),E.jsxs("label",{children:["Result: ",s]})]})]})}function ZO(){const[t,n]=L.useState([]),[e,r]=L.useState(""),[a,o]=L.useState(0),[s,l]=L.useState(0),c=()=>{const f=parseFloat(e);if(!isNaN(f)){const h=[...t,f];n(h),console.log(h);const p=h.reduce((v,g)=>v+g,0);l(p),o(p/h.length),r("")}};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-3"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsx("ol",{children:t.map((f,h)=>E.jsx("li",{children:f},h))}),E.jsx("br",{}),E.jsx("br",{}),E.jsx("label",{children:"Enter the Number : "}),E.jsx("input",{className:"input-number",type:"number",value:e,onChange:f=>r(f.target.value)}),E.jsx("button",{onClick:c,children:"Add"}),E.jsx("br",{}),E.jsx("br",{}),E.jsxs("label",{children:[" TOtal :",s]}),E.jsx("br",{}),E.jsxs("label",{children:[" Average : ",a.toFixed(2)]})]})}function JO(){const[t,n]=L.useState([]),[e,r]=L.useState(""),a=L.useRef(null),o=()=>{const l=parseFloat(e);if(!isNaN(l)){const c=[...t,l];n(c),console.log(c),r(""),a.current.focus()}},s=l=>{const c=t.filter((f,h)=>h!==l);n(c),console.log("updated List :",c),console.log("Deleted Index :",l)};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-4"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsx("ul",{className:"number-list",children:t.map((l,c)=>E.jsxs("li",{className:"number-item",children:[E.jsx("span",{children:l}),E.jsx("button",{className:"delete-button",onClick:()=>s(c),children:"Delete"})]},c))}),E.jsx("br",{}),E.jsx("br",{}),E.jsx("input",{id:"numInput",type:"number",ref:a,value:e,onChange:l=>r(l.target.value)}),E.jsx("button",{className:"add-button",onClick:o,disabled:e.trim()==="",children:"Add"}),E.jsx("br",{}),E.jsx("br",{})]})}function eM(){const[t,n]=L.useState([]),[e,r]=L.useState(""),a=L.useRef(null),o=()=>{const p=parseFloat(e);if(!isNaN(p)){const v=[...t,p];n(v),console.log(v),r(""),a.current.focus()}},s=p=>{const v=t.filter((g,y)=>y!==p);n(v),console.log("updated List :",v),console.log("Deleted Index :",p)},l=()=>{const p=[...t].sort((v,g)=>v-g);n(p)},c=()=>{const p=[...t].sort((v,g)=>g-v);n(p)},f=p=>{if(p===0)return;const v=[...t];[v[p-1],v[p]]=[v[p],v[p-1]],n(v)},h=p=>{if(p===t.length-1)return;const v=[...t];[v[p+1],v[p]]=[v[p],v[p+1]],n(v)};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-5"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsx("button",{className:"btn-top",onClick:l,hidden:t.length===0,children:"Sort Ascending"}),E.jsx("button",{className:"btn-top",onClick:c,hidden:t.length===0,children:"Sort Descending"}),E.jsx("ul",{className:"number-list",children:t.map((p,v)=>E.jsxs("li",{className:"number-item",children:[E.jsx("span",{children:p}),E.jsx("button",{className:"delete-button",onClick:()=>s(v),children:"Delete"}),E.jsxs("button",{className:"btn-move",onClick:()=>f(v),disabled:v===0,children:["Move Up ⬆️"," "]}),E.jsxs("button",{className:"btn-move",onClick:()=>h(v),disabled:v===t.length-1,children:[" ","Move Down ⬇️"," "]})]},v))}),E.jsx("br",{}),E.jsx("br",{}),E.jsx("input",{id:"numInput",type:"number",ref:a,value:e,onChange:p=>r(p.target.value)}),E.jsx("button",{className:"add-button",onClick:o,disabled:e.trim()==="",children:"Add"}),E.jsx("label",{}),E.jsx("br",{}),E.jsx("br",{})]})}function tM(){const[t,n]=L.useState([]),[e,r]=L.useState(""),[a,o]=L.useState(""),s=()=>{if(e.trim()!==""&&a.trim()!==""){const f={name:e.trim(),value:a.trim()};n([...t,f]),r(""),o(""),console.log("Added Style Property : ",e),console.log("Added Style Value : ",a)}},l=f=>{const h=t.filter((p,v)=>v!==f);n(h),console.log("Deleted Style :",f)},c=t.reduce((f,h)=>({...f,[h.name]:h.value}),{});return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-6"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsx("label",{className:"asg6-label",children:"CSS Property : "}),E.jsx("input",{className:"asg6-input",placeholder:"enter the css property (e.g. color)",value:e,onChange:f=>r(f.target.value)}),E.jsx("br",{}),E.jsx("label",{className:"asg6-label",children:"CSS Value :"}),E.jsx("input",{className:"asg6-input",placeholder:"enter the css value (e.g. red)",value:a,onChange:f=>o(f.target.value)}),E.jsx("br",{}),E.jsx("br",{}),E.jsx("button",{className:"asg6-btn-add",onClick:s,children:"Add"}),E.jsx("br",{}),E.jsx("br",{}),E.jsxs("div",{children:[E.jsx("h2",{children:"CSS Rules :"}),E.jsx("ul",{className:"asg6-list",children:t.map((f,h)=>E.jsxs("li",{className:"asg6-list-item",children:[E.jsxs("span",{children:[f.name," : ",f.value]}),E.jsx("button",{className:"asg6-btn-delete",onClick:()=>l(h),children:"Delete"})]},h))}),E.jsx("h3",{children:"Style Preview :"}),E.jsx("div",{className:"asg6-preview",style:{...c,padding:"10px",border:"1px solid #ccc"},children:"Sample Text"})]})]})}function $E(t,n){return function(){return t.apply(n,arguments)}}const{toString:nM}=Object.prototype,{getPrototypeOf:uy}=Object,{iterator:Vd,toStringTag:QE}=Symbol,Wd=(t=>n=>{const e=nM.call(n);return t[e]||(t[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Ur=t=>(t=t.toLowerCase(),n=>Wd(n)===t),Gd=t=>n=>typeof n===t,{isArray:Vs}=Array,xl=Gd("undefined");function rM(t){return t!==null&&!xl(t)&&t.constructor!==null&&!xl(t.constructor)&&zn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ZE=Ur("ArrayBuffer");function aM(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&ZE(t.buffer),n}const oM=Gd("string"),zn=Gd("function"),JE=Gd("number"),Xd=t=>t!==null&&typeof t=="object",iM=t=>t===!0||t===!1,qf=t=>{if(Wd(t)!=="object")return!1;const n=uy(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(QE in t)&&!(Vd in t)},sM=Ur("Date"),uM=Ur("File"),lM=Ur("Blob"),cM=Ur("FileList"),fM=t=>Xd(t)&&zn(t.pipe),dM=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||zn(t.append)&&((n=Wd(t))==="formdata"||n==="object"&&zn(t.toString)&&t.toString()==="[object FormData]"))},hM=Ur("URLSearchParams"),[pM,mM,vM,gM]=["ReadableStream","Request","Response","Headers"].map(Ur),yM=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Fl(t,n,{allOwnKeys:e=!1}={}){if(t===null||typeof t>"u")return;let r,a;if(typeof t!="object"&&(t=[t]),Vs(t))for(r=0,a=t.length;r<a;r++)n.call(null,t[r],r,t);else{const o=e?Object.getOwnPropertyNames(t):Object.keys(t),s=o.length;let l;for(r=0;r<s;r++)l=o[r],n.call(null,t[l],l,t)}}function eC(t,n){n=n.toLowerCase();const e=Object.keys(t);let r=e.length,a;for(;r-- >0;)if(a=e[r],n===a.toLowerCase())return a;return null}const ii=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,tC=t=>!xl(t)&&t!==ii;function dg(){const{caseless:t}=tC(this)&&this||{},n={},e=(r,a)=>{const o=t&&eC(n,a)||a;qf(n[o])&&qf(r)?n[o]=dg(n[o],r):qf(r)?n[o]=dg({},r):Vs(r)?n[o]=r.slice():n[o]=r};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&Fl(arguments[r],e);return n}const bM=(t,n,e,{allOwnKeys:r}={})=>(Fl(n,(a,o)=>{e&&zn(a)?t[o]=$E(a,e):t[o]=a},{allOwnKeys:r}),t),wM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),xM=(t,n,e,r)=>{t.prototype=Object.create(n.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),e&&Object.assign(t.prototype,e)},SM=(t,n,e,r)=>{let a,o,s;const l={};if(n=n||{},t==null)return n;do{for(a=Object.getOwnPropertyNames(t),o=a.length;o-- >0;)s=a[o],(!r||r(s,t,n))&&!l[s]&&(n[s]=t[s],l[s]=!0);t=e!==!1&&uy(t)}while(t&&(!e||e(t,n))&&t!==Object.prototype);return n},EM=(t,n,e)=>{t=String(t),(e===void 0||e>t.length)&&(e=t.length),e-=n.length;const r=t.indexOf(n,e);return r!==-1&&r===e},CM=t=>{if(!t)return null;if(Vs(t))return t;let n=t.length;if(!JE(n))return null;const e=new Array(n);for(;n-- >0;)e[n]=t[n];return e},_M=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&uy(Uint8Array)),RM=(t,n)=>{const r=(t&&t[Vd]).call(t);let a;for(;(a=r.next())&&!a.done;){const o=a.value;n.call(t,o[0],o[1])}},AM=(t,n)=>{let e;const r=[];for(;(e=t.exec(n))!==null;)r.push(e);return r},TM=Ur("HTMLFormElement"),kM=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,r,a){return r.toUpperCase()+a}),d2=(({hasOwnProperty:t})=>(n,e)=>t.call(n,e))(Object.prototype),NM=Ur("RegExp"),nC=(t,n)=>{const e=Object.getOwnPropertyDescriptors(t),r={};Fl(e,(a,o)=>{let s;(s=n(a,o,t))!==!1&&(r[o]=s||a)}),Object.defineProperties(t,r)},DM=t=>{nC(t,(n,e)=>{if(zn(t)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const r=t[e];if(zn(r)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},OM=(t,n)=>{const e={},r=a=>{a.forEach(o=>{e[o]=!0})};return Vs(t)?r(t):r(String(t).split(n)),e},MM=()=>{},IM=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n;function BM(t){return!!(t&&zn(t.append)&&t[QE]==="FormData"&&t[Vd])}const FM=t=>{const n=new Array(10),e=(r,a)=>{if(Xd(r)){if(n.indexOf(r)>=0)return;if(!("toJSON"in r)){n[a]=r;const o=Vs(r)?[]:{};return Fl(r,(s,l)=>{const c=e(s,a+1);!xl(c)&&(o[l]=c)}),n[a]=void 0,o}}return r};return e(t,0)},PM=Ur("AsyncFunction"),LM=t=>t&&(Xd(t)||zn(t))&&zn(t.then)&&zn(t.catch),rC=((t,n)=>t?setImmediate:n?((e,r)=>(ii.addEventListener("message",({source:a,data:o})=>{a===ii&&o===e&&r.length&&r.shift()()},!1),a=>{r.push(a),ii.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",zn(ii.postMessage)),jM=typeof queueMicrotask<"u"?queueMicrotask.bind(ii):typeof process<"u"&&process.nextTick||rC,zM=t=>t!=null&&zn(t[Vd]),fe={isArray:Vs,isArrayBuffer:ZE,isBuffer:rM,isFormData:dM,isArrayBufferView:aM,isString:oM,isNumber:JE,isBoolean:iM,isObject:Xd,isPlainObject:qf,isReadableStream:pM,isRequest:mM,isResponse:vM,isHeaders:gM,isUndefined:xl,isDate:sM,isFile:uM,isBlob:lM,isRegExp:NM,isFunction:zn,isStream:fM,isURLSearchParams:hM,isTypedArray:_M,isFileList:cM,forEach:Fl,merge:dg,extend:bM,trim:yM,stripBOM:wM,inherits:xM,toFlatObject:SM,kindOf:Wd,kindOfTest:Ur,endsWith:EM,toArray:CM,forEachEntry:RM,matchAll:AM,isHTMLForm:TM,hasOwnProperty:d2,hasOwnProp:d2,reduceDescriptors:nC,freezeMethods:DM,toObjectSet:OM,toCamelCase:kM,noop:MM,toFiniteNumber:IM,findKey:eC,global:ii,isContextDefined:tC,isSpecCompliantForm:BM,toJSONObject:FM,isAsyncFn:PM,isThenable:LM,setImmediate:rC,asap:jM,isIterable:zM};function We(t,n,e,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),e&&(this.config=e),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}fe.inherits(We,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:fe.toJSONObject(this.config),code:this.code,status:this.status}}});const aC=We.prototype,oC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{oC[t]={value:t}});Object.defineProperties(We,oC);Object.defineProperty(aC,"isAxiosError",{value:!0});We.from=(t,n,e,r,a,o)=>{const s=Object.create(aC);return fe.toFlatObject(t,s,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),We.call(s,t.message,n,e,r,a),s.cause=t,s.name=t.name,o&&Object.assign(s,o),s};const UM=null;function hg(t){return fe.isPlainObject(t)||fe.isArray(t)}function iC(t){return fe.endsWith(t,"[]")?t.slice(0,-2):t}function h2(t,n,e){return t?t.concat(n).map(function(a,o){return a=iC(a),!e&&o?"["+a+"]":a}).join(e?".":""):n}function qM(t){return fe.isArray(t)&&!t.some(hg)}const HM=fe.toFlatObject(fe,{},null,function(n){return/^is[A-Z]/.test(n)});function Yd(t,n,e){if(!fe.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,e=fe.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,S){return!fe.isUndefined(S[x])});const r=e.metaTokens,a=e.visitor||h,o=e.dots,s=e.indexes,c=(e.Blob||typeof Blob<"u"&&Blob)&&fe.isSpecCompliantForm(n);if(!fe.isFunction(a))throw new TypeError("visitor must be a function");function f(y){if(y===null)return"";if(fe.isDate(y))return y.toISOString();if(fe.isBoolean(y))return y.toString();if(!c&&fe.isBlob(y))throw new We("Blob is not supported. Use a Buffer instead.");return fe.isArrayBuffer(y)||fe.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function h(y,x,S){let w=y;if(y&&!S&&typeof y=="object"){if(fe.endsWith(x,"{}"))x=r?x:x.slice(0,-2),y=JSON.stringify(y);else if(fe.isArray(y)&&qM(y)||(fe.isFileList(y)||fe.endsWith(x,"[]"))&&(w=fe.toArray(y)))return x=iC(x),w.forEach(function(A,C){!(fe.isUndefined(A)||A===null)&&n.append(s===!0?h2([x],C,o):s===null?x:x+"[]",f(A))}),!1}return hg(y)?!0:(n.append(h2(S,x,o),f(y)),!1)}const p=[],v=Object.assign(HM,{defaultVisitor:h,convertValue:f,isVisitable:hg});function g(y,x){if(!fe.isUndefined(y)){if(p.indexOf(y)!==-1)throw Error("Circular reference detected in "+x.join("."));p.push(y),fe.forEach(y,function(w,T){(!(fe.isUndefined(w)||w===null)&&a.call(n,w,fe.isString(T)?T.trim():T,x,v))===!0&&g(w,x?x.concat(T):[T])}),p.pop()}}if(!fe.isObject(t))throw new TypeError("data must be an object");return g(t),n}function p2(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return n[r]})}function ly(t,n){this._pairs=[],t&&Yd(t,this,n)}const sC=ly.prototype;sC.append=function(n,e){this._pairs.push([n,e])};sC.toString=function(n){const e=n?function(r){return n.call(this,r,p2)}:p2;return this._pairs.map(function(a){return e(a[0])+"="+e(a[1])},"").join("&")};function VM(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function uC(t,n,e){if(!n)return t;const r=e&&e.encode||VM;fe.isFunction(e)&&(e={serialize:e});const a=e&&e.serialize;let o;if(a?o=a(n,e):o=fe.isURLSearchParams(n)?n.toString():new ly(n,e).toString(r),o){const s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class m2{constructor(){this.handlers=[]}use(n,e,r){return this.handlers.push({fulfilled:n,rejected:e,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){fe.forEach(this.handlers,function(r){r!==null&&n(r)})}}const lC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},WM=typeof URLSearchParams<"u"?URLSearchParams:ly,GM=typeof FormData<"u"?FormData:null,XM=typeof Blob<"u"?Blob:null,YM={isBrowser:!0,classes:{URLSearchParams:WM,FormData:GM,Blob:XM},protocols:["http","https","file","blob","url","data"]},cy=typeof window<"u"&&typeof document<"u",pg=typeof navigator=="object"&&navigator||void 0,KM=cy&&(!pg||["ReactNative","NativeScript","NS"].indexOf(pg.product)<0),$M=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",QM=cy&&window.location.href||"http://localhost",ZM=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:cy,hasStandardBrowserEnv:KM,hasStandardBrowserWebWorkerEnv:$M,navigator:pg,origin:QM},Symbol.toStringTag,{value:"Module"})),En={...ZM,...YM};function JM(t,n){return Yd(t,new En.classes.URLSearchParams,Object.assign({visitor:function(e,r,a,o){return En.isNode&&fe.isBuffer(e)?(this.append(r,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},n))}function eI(t){return fe.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function tI(t){const n={},e=Object.keys(t);let r;const a=e.length;let o;for(r=0;r<a;r++)o=e[r],n[o]=t[o];return n}function cC(t){function n(e,r,a,o){let s=e[o++];if(s==="__proto__")return!0;const l=Number.isFinite(+s),c=o>=e.length;return s=!s&&fe.isArray(a)?a.length:s,c?(fe.hasOwnProp(a,s)?a[s]=[a[s],r]:a[s]=r,!l):((!a[s]||!fe.isObject(a[s]))&&(a[s]=[]),n(e,r,a[s],o)&&fe.isArray(a[s])&&(a[s]=tI(a[s])),!l)}if(fe.isFormData(t)&&fe.isFunction(t.entries)){const e={};return fe.forEachEntry(t,(r,a)=>{n(eI(r),a,e,0)}),e}return null}function nI(t,n,e){if(fe.isString(t))try{return(n||JSON.parse)(t),fe.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(e||JSON.stringify)(t)}const Pl={transitional:lC,adapter:["xhr","http","fetch"],transformRequest:[function(n,e){const r=e.getContentType()||"",a=r.indexOf("application/json")>-1,o=fe.isObject(n);if(o&&fe.isHTMLForm(n)&&(n=new FormData(n)),fe.isFormData(n))return a?JSON.stringify(cC(n)):n;if(fe.isArrayBuffer(n)||fe.isBuffer(n)||fe.isStream(n)||fe.isFile(n)||fe.isBlob(n)||fe.isReadableStream(n))return n;if(fe.isArrayBufferView(n))return n.buffer;if(fe.isURLSearchParams(n))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let l;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return JM(n,this.formSerializer).toString();if((l=fe.isFileList(n))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Yd(l?{"files[]":n}:n,c&&new c,this.formSerializer)}}return o||a?(e.setContentType("application/json",!1),nI(n)):n}],transformResponse:[function(n){const e=this.transitional||Pl.transitional,r=e&&e.forcedJSONParsing,a=this.responseType==="json";if(fe.isResponse(n)||fe.isReadableStream(n))return n;if(n&&fe.isString(n)&&(r&&!this.responseType||a)){const s=!(e&&e.silentJSONParsing)&&a;try{return JSON.parse(n)}catch(l){if(s)throw l.name==="SyntaxError"?We.from(l,We.ERR_BAD_RESPONSE,this,null,this.response):l}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:En.classes.FormData,Blob:En.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};fe.forEach(["delete","get","head","post","put","patch"],t=>{Pl.headers[t]={}});const rI=fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),aI=t=>{const n={};let e,r,a;return t&&t.split(`
`).forEach(function(s){a=s.indexOf(":"),e=s.substring(0,a).trim().toLowerCase(),r=s.substring(a+1).trim(),!(!e||n[e]&&rI[e])&&(e==="set-cookie"?n[e]?n[e].push(r):n[e]=[r]:n[e]=n[e]?n[e]+", "+r:r)}),n},v2=Symbol("internals");function tl(t){return t&&String(t).trim().toLowerCase()}function Hf(t){return t===!1||t==null?t:fe.isArray(t)?t.map(Hf):String(t)}function oI(t){const n=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=e.exec(t);)n[r[1]]=r[2];return n}const iI=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function tv(t,n,e,r,a){if(fe.isFunction(r))return r.call(this,n,e);if(a&&(n=e),!!fe.isString(n)){if(fe.isString(r))return n.indexOf(r)!==-1;if(fe.isRegExp(r))return r.test(n)}}function sI(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,e,r)=>e.toUpperCase()+r)}function uI(t,n){const e=fe.toCamelCase(" "+n);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+e,{value:function(a,o,s){return this[r].call(this,n,a,o,s)},configurable:!0})})}let Un=class{constructor(n){n&&this.set(n)}set(n,e,r){const a=this;function o(l,c,f){const h=tl(c);if(!h)throw new Error("header name must be a non-empty string");const p=fe.findKey(a,h);(!p||a[p]===void 0||f===!0||f===void 0&&a[p]!==!1)&&(a[p||c]=Hf(l))}const s=(l,c)=>fe.forEach(l,(f,h)=>o(f,h,c));if(fe.isPlainObject(n)||n instanceof this.constructor)s(n,e);else if(fe.isString(n)&&(n=n.trim())&&!iI(n))s(aI(n),e);else if(fe.isObject(n)&&fe.isIterable(n)){let l={},c,f;for(const h of n){if(!fe.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[f=h[0]]=(c=l[f])?fe.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}s(l,e)}else n!=null&&o(e,n,r);return this}get(n,e){if(n=tl(n),n){const r=fe.findKey(this,n);if(r){const a=this[r];if(!e)return a;if(e===!0)return oI(a);if(fe.isFunction(e))return e.call(this,a,r);if(fe.isRegExp(e))return e.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,e){if(n=tl(n),n){const r=fe.findKey(this,n);return!!(r&&this[r]!==void 0&&(!e||tv(this,this[r],r,e)))}return!1}delete(n,e){const r=this;let a=!1;function o(s){if(s=tl(s),s){const l=fe.findKey(r,s);l&&(!e||tv(r,r[l],l,e))&&(delete r[l],a=!0)}}return fe.isArray(n)?n.forEach(o):o(n),a}clear(n){const e=Object.keys(this);let r=e.length,a=!1;for(;r--;){const o=e[r];(!n||tv(this,this[o],o,n,!0))&&(delete this[o],a=!0)}return a}normalize(n){const e=this,r={};return fe.forEach(this,(a,o)=>{const s=fe.findKey(r,o);if(s){e[s]=Hf(a),delete e[o];return}const l=n?sI(o):String(o).trim();l!==o&&delete e[o],e[l]=Hf(a),r[l]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const e=Object.create(null);return fe.forEach(this,(r,a)=>{r!=null&&r!==!1&&(e[a]=n&&fe.isArray(r)?r.join(", "):r)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,e])=>n+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...e){const r=new this(n);return e.forEach(a=>r.set(a)),r}static accessor(n){const r=(this[v2]=this[v2]={accessors:{}}).accessors,a=this.prototype;function o(s){const l=tl(s);r[l]||(uI(a,s),r[l]=!0)}return fe.isArray(n)?n.forEach(o):o(n),this}};Un.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);fe.reduceDescriptors(Un.prototype,({value:t},n)=>{let e=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(r){this[e]=r}}});fe.freezeMethods(Un);function nv(t,n){const e=this||Pl,r=n||e,a=Un.from(r.headers);let o=r.data;return fe.forEach(t,function(l){o=l.call(e,o,a.normalize(),n?n.status:void 0)}),a.normalize(),o}function fC(t){return!!(t&&t.__CANCEL__)}function Ws(t,n,e){We.call(this,t??"canceled",We.ERR_CANCELED,n,e),this.name="CanceledError"}fe.inherits(Ws,We,{__CANCEL__:!0});function dC(t,n,e){const r=e.config.validateStatus;!e.status||!r||r(e.status)?t(e):n(new We("Request failed with status code "+e.status,[We.ERR_BAD_REQUEST,We.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function lI(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function cI(t,n){t=t||10;const e=new Array(t),r=new Array(t);let a=0,o=0,s;return n=n!==void 0?n:1e3,function(c){const f=Date.now(),h=r[o];s||(s=f),e[a]=c,r[a]=f;let p=o,v=0;for(;p!==a;)v+=e[p++],p=p%t;if(a=(a+1)%t,a===o&&(o=(o+1)%t),f-s<n)return;const g=h&&f-h;return g?Math.round(v*1e3/g):void 0}}function fI(t,n){let e=0,r=1e3/n,a,o;const s=(f,h=Date.now())=>{e=h,a=null,o&&(clearTimeout(o),o=null),t.apply(null,f)};return[(...f)=>{const h=Date.now(),p=h-e;p>=r?s(f,h):(a=f,o||(o=setTimeout(()=>{o=null,s(a)},r-p)))},()=>a&&s(a)]}const td=(t,n,e=3)=>{let r=0;const a=cI(50,250);return fI(o=>{const s=o.loaded,l=o.lengthComputable?o.total:void 0,c=s-r,f=a(c),h=s<=l;r=s;const p={loaded:s,total:l,progress:l?s/l:void 0,bytes:c,rate:f||void 0,estimated:f&&l&&h?(l-s)/f:void 0,event:o,lengthComputable:l!=null,[n?"download":"upload"]:!0};t(p)},e)},g2=(t,n)=>{const e=t!=null;return[r=>n[0]({lengthComputable:e,total:t,loaded:r}),n[1]]},y2=t=>(...n)=>fe.asap(()=>t(...n)),dI=En.hasStandardBrowserEnv?((t,n)=>e=>(e=new URL(e,En.origin),t.protocol===e.protocol&&t.host===e.host&&(n||t.port===e.port)))(new URL(En.origin),En.navigator&&/(msie|trident)/i.test(En.navigator.userAgent)):()=>!0,hI=En.hasStandardBrowserEnv?{write(t,n,e,r,a,o){const s=[t+"="+encodeURIComponent(n)];fe.isNumber(e)&&s.push("expires="+new Date(e).toGMTString()),fe.isString(r)&&s.push("path="+r),fe.isString(a)&&s.push("domain="+a),o===!0&&s.push("secure"),document.cookie=s.join("; ")},read(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function pI(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function mI(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function hC(t,n,e){let r=!pI(n);return t&&(r||e==!1)?mI(t,n):n}const b2=t=>t instanceof Un?{...t}:t;function vi(t,n){n=n||{};const e={};function r(f,h,p,v){return fe.isPlainObject(f)&&fe.isPlainObject(h)?fe.merge.call({caseless:v},f,h):fe.isPlainObject(h)?fe.merge({},h):fe.isArray(h)?h.slice():h}function a(f,h,p,v){if(fe.isUndefined(h)){if(!fe.isUndefined(f))return r(void 0,f,p,v)}else return r(f,h,p,v)}function o(f,h){if(!fe.isUndefined(h))return r(void 0,h)}function s(f,h){if(fe.isUndefined(h)){if(!fe.isUndefined(f))return r(void 0,f)}else return r(void 0,h)}function l(f,h,p){if(p in n)return r(f,h);if(p in t)return r(void 0,f)}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l,headers:(f,h,p)=>a(b2(f),b2(h),p,!0)};return fe.forEach(Object.keys(Object.assign({},t,n)),function(h){const p=c[h]||a,v=p(t[h],n[h],h);fe.isUndefined(v)&&p!==l||(e[h]=v)}),e}const pC=t=>{const n=vi({},t);let{data:e,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:o,headers:s,auth:l}=n;n.headers=s=Un.from(s),n.url=uC(hC(n.baseURL,n.url,n.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(fe.isFormData(e)){if(En.hasStandardBrowserEnv||En.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((c=s.getContentType())!==!1){const[f,...h]=c?c.split(";").map(p=>p.trim()).filter(Boolean):[];s.setContentType([f||"multipart/form-data",...h].join("; "))}}if(En.hasStandardBrowserEnv&&(r&&fe.isFunction(r)&&(r=r(n)),r||r!==!1&&dI(n.url))){const f=a&&o&&hI.read(o);f&&s.set(a,f)}return n},vI=typeof XMLHttpRequest<"u",gI=vI&&function(t){return new Promise(function(e,r){const a=pC(t);let o=a.data;const s=Un.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:f}=a,h,p,v,g,y;function x(){g&&g(),y&&y(),a.cancelToken&&a.cancelToken.unsubscribe(h),a.signal&&a.signal.removeEventListener("abort",h)}let S=new XMLHttpRequest;S.open(a.method.toUpperCase(),a.url,!0),S.timeout=a.timeout;function w(){if(!S)return;const A=Un.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),R={data:!l||l==="text"||l==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:A,config:t,request:S};dC(function(N){e(N),x()},function(N){r(N),x()},R),S=null}"onloadend"in S?S.onloadend=w:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(w)},S.onabort=function(){S&&(r(new We("Request aborted",We.ECONNABORTED,t,S)),S=null)},S.onerror=function(){r(new We("Network Error",We.ERR_NETWORK,t,S)),S=null},S.ontimeout=function(){let C=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const R=a.transitional||lC;a.timeoutErrorMessage&&(C=a.timeoutErrorMessage),r(new We(C,R.clarifyTimeoutError?We.ETIMEDOUT:We.ECONNABORTED,t,S)),S=null},o===void 0&&s.setContentType(null),"setRequestHeader"in S&&fe.forEach(s.toJSON(),function(C,R){S.setRequestHeader(R,C)}),fe.isUndefined(a.withCredentials)||(S.withCredentials=!!a.withCredentials),l&&l!=="json"&&(S.responseType=a.responseType),f&&([v,y]=td(f,!0),S.addEventListener("progress",v)),c&&S.upload&&([p,g]=td(c),S.upload.addEventListener("progress",p),S.upload.addEventListener("loadend",g)),(a.cancelToken||a.signal)&&(h=A=>{S&&(r(!A||A.type?new Ws(null,t,S):A),S.abort(),S=null)},a.cancelToken&&a.cancelToken.subscribe(h),a.signal&&(a.signal.aborted?h():a.signal.addEventListener("abort",h)));const T=lI(a.url);if(T&&En.protocols.indexOf(T)===-1){r(new We("Unsupported protocol "+T+":",We.ERR_BAD_REQUEST,t));return}S.send(o||null)})},yI=(t,n)=>{const{length:e}=t=t?t.filter(Boolean):[];if(n||e){let r=new AbortController,a;const o=function(f){if(!a){a=!0,l();const h=f instanceof Error?f:this.reason;r.abort(h instanceof We?h:new Ws(h instanceof Error?h.message:h))}};let s=n&&setTimeout(()=>{s=null,o(new We(`timeout ${n} of ms exceeded`,We.ETIMEDOUT))},n);const l=()=>{t&&(s&&clearTimeout(s),s=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(o):f.removeEventListener("abort",o)}),t=null)};t.forEach(f=>f.addEventListener("abort",o));const{signal:c}=r;return c.unsubscribe=()=>fe.asap(l),c}},bI=function*(t,n){let e=t.byteLength;if(e<n){yield t;return}let r=0,a;for(;r<e;)a=r+n,yield t.slice(r,a),r=a},wI=async function*(t,n){for await(const e of xI(t))yield*bI(e,n)},xI=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:e,value:r}=await n.read();if(e)break;yield r}}finally{await n.cancel()}},w2=(t,n,e,r)=>{const a=wI(t,n);let o=0,s,l=c=>{s||(s=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:f,value:h}=await a.next();if(f){l(),c.close();return}let p=h.byteLength;if(e){let v=o+=p;e(v)}c.enqueue(new Uint8Array(h))}catch(f){throw l(f),f}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},Kd=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",mC=Kd&&typeof ReadableStream=="function",SI=Kd&&(typeof TextEncoder=="function"?(t=>n=>t.encode(n))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),vC=(t,...n)=>{try{return!!t(...n)}catch{return!1}},EI=mC&&vC(()=>{let t=!1;const n=new Request(En.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!n}),x2=64*1024,mg=mC&&vC(()=>fe.isReadableStream(new Response("").body)),nd={stream:mg&&(t=>t.body)};Kd&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!nd[n]&&(nd[n]=fe.isFunction(t[n])?e=>e[n]():(e,r)=>{throw new We(`Response type '${n}' is not supported`,We.ERR_NOT_SUPPORT,r)})})})(new Response);const CI=async t=>{if(t==null)return 0;if(fe.isBlob(t))return t.size;if(fe.isSpecCompliantForm(t))return(await new Request(En.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(fe.isArrayBufferView(t)||fe.isArrayBuffer(t))return t.byteLength;if(fe.isURLSearchParams(t)&&(t=t+""),fe.isString(t))return(await SI(t)).byteLength},_I=async(t,n)=>{const e=fe.toFiniteNumber(t.getContentLength());return e??CI(n)},RI=Kd&&(async t=>{let{url:n,method:e,data:r,signal:a,cancelToken:o,timeout:s,onDownloadProgress:l,onUploadProgress:c,responseType:f,headers:h,withCredentials:p="same-origin",fetchOptions:v}=pC(t);f=f?(f+"").toLowerCase():"text";let g=yI([a,o&&o.toAbortSignal()],s),y;const x=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let S;try{if(c&&EI&&e!=="get"&&e!=="head"&&(S=await _I(h,r))!==0){let R=new Request(n,{method:"POST",body:r,duplex:"half"}),k;if(fe.isFormData(r)&&(k=R.headers.get("content-type"))&&h.setContentType(k),R.body){const[N,O]=g2(S,td(y2(c)));r=w2(R.body,x2,N,O)}}fe.isString(p)||(p=p?"include":"omit");const w="credentials"in Request.prototype;y=new Request(n,{...v,signal:g,method:e.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:w?p:void 0});let T=await fetch(y,v);const A=mg&&(f==="stream"||f==="response");if(mg&&(l||A&&x)){const R={};["status","statusText","headers"].forEach(D=>{R[D]=T[D]});const k=fe.toFiniteNumber(T.headers.get("content-length")),[N,O]=l&&g2(k,td(y2(l),!0))||[];T=new Response(w2(T.body,x2,N,()=>{O&&O(),x&&x()}),R)}f=f||"text";let C=await nd[fe.findKey(nd,f)||"text"](T,t);return!A&&x&&x(),await new Promise((R,k)=>{dC(R,k,{data:C,headers:Un.from(T.headers),status:T.status,statusText:T.statusText,config:t,request:y})})}catch(w){throw x&&x(),w&&w.name==="TypeError"&&/Load failed|fetch/i.test(w.message)?Object.assign(new We("Network Error",We.ERR_NETWORK,t,y),{cause:w.cause||w}):We.from(w,w&&w.code,t,y)}}),vg={http:UM,xhr:gI,fetch:RI};fe.forEach(vg,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const S2=t=>`- ${t}`,AI=t=>fe.isFunction(t)||t===null||t===!1,gC={getAdapter:t=>{t=fe.isArray(t)?t:[t];const{length:n}=t;let e,r;const a={};for(let o=0;o<n;o++){e=t[o];let s;if(r=e,!AI(e)&&(r=vg[(s=String(e)).toLowerCase()],r===void 0))throw new We(`Unknown adapter '${s}'`);if(r)break;a[s||"#"+o]=r}if(!r){const o=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let s=n?o.length>1?`since :
`+o.map(S2).join(`
`):" "+S2(o[0]):"as no adapter specified";throw new We("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:vg};function rv(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ws(null,t)}function E2(t){return rv(t),t.headers=Un.from(t.headers),t.data=nv.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),gC.getAdapter(t.adapter||Pl.adapter)(t).then(function(r){return rv(t),r.data=nv.call(t,t.transformResponse,r),r.headers=Un.from(r.headers),r},function(r){return fC(r)||(rv(t),r&&r.response&&(r.response.data=nv.call(t,t.transformResponse,r.response),r.response.headers=Un.from(r.response.headers))),Promise.reject(r)})}const yC="1.10.0",$d={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{$d[t]=function(r){return typeof r===t||"a"+(n<1?"n ":" ")+t}});const C2={};$d.transitional=function(n,e,r){function a(o,s){return"[Axios v"+yC+"] Transitional option '"+o+"'"+s+(r?". "+r:"")}return(o,s,l)=>{if(n===!1)throw new We(a(s," has been removed"+(e?" in "+e:"")),We.ERR_DEPRECATED);return e&&!C2[s]&&(C2[s]=!0,console.warn(a(s," has been deprecated since v"+e+" and will be removed in the near future"))),n?n(o,s,l):!0}};$d.spelling=function(n){return(e,r)=>(console.warn(`${r} is likely a misspelling of ${n}`),!0)};function TI(t,n,e){if(typeof t!="object")throw new We("options must be an object",We.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let a=r.length;for(;a-- >0;){const o=r[a],s=n[o];if(s){const l=t[o],c=l===void 0||s(l,o,t);if(c!==!0)throw new We("option "+o+" must be "+c,We.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new We("Unknown option "+o,We.ERR_BAD_OPTION)}}const Vf={assertOptions:TI,validators:$d},Kr=Vf.validators;let li=class{constructor(n){this.defaults=n||{},this.interceptors={request:new m2,response:new m2}}async request(n,e){try{return await this._request(n,e)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(n,e){typeof n=="string"?(e=e||{},e.url=n):e=n||{},e=vi(this.defaults,e);const{transitional:r,paramsSerializer:a,headers:o}=e;r!==void 0&&Vf.assertOptions(r,{silentJSONParsing:Kr.transitional(Kr.boolean),forcedJSONParsing:Kr.transitional(Kr.boolean),clarifyTimeoutError:Kr.transitional(Kr.boolean)},!1),a!=null&&(fe.isFunction(a)?e.paramsSerializer={serialize:a}:Vf.assertOptions(a,{encode:Kr.function,serialize:Kr.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Vf.assertOptions(e,{baseUrl:Kr.spelling("baseURL"),withXsrfToken:Kr.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let s=o&&fe.merge(o.common,o[e.method]);o&&fe.forEach(["delete","get","head","post","put","patch","common"],y=>{delete o[y]}),e.headers=Un.concat(s,o);const l=[];let c=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(e)===!1||(c=c&&x.synchronous,l.unshift(x.fulfilled,x.rejected))});const f=[];this.interceptors.response.forEach(function(x){f.push(x.fulfilled,x.rejected)});let h,p=0,v;if(!c){const y=[E2.bind(this),void 0];for(y.unshift.apply(y,l),y.push.apply(y,f),v=y.length,h=Promise.resolve(e);p<v;)h=h.then(y[p++],y[p++]);return h}v=l.length;let g=e;for(p=0;p<v;){const y=l[p++],x=l[p++];try{g=y(g)}catch(S){x.call(this,S);break}}try{h=E2.call(this,g)}catch(y){return Promise.reject(y)}for(p=0,v=f.length;p<v;)h=h.then(f[p++],f[p++]);return h}getUri(n){n=vi(this.defaults,n);const e=hC(n.baseURL,n.url,n.allowAbsoluteUrls);return uC(e,n.params,n.paramsSerializer)}};fe.forEach(["delete","get","head","options"],function(n){li.prototype[n]=function(e,r){return this.request(vi(r||{},{method:n,url:e,data:(r||{}).data}))}});fe.forEach(["post","put","patch"],function(n){function e(r){return function(o,s,l){return this.request(vi(l||{},{method:n,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}li.prototype[n]=e(),li.prototype[n+"Form"]=e(!0)});let kI=class bC{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(o){e=o});const r=this;this.promise.then(a=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](a);r._listeners=null}),this.promise.then=a=>{let o;const s=new Promise(l=>{r.subscribe(l),o=l}).then(a);return s.cancel=function(){r.unsubscribe(o)},s},n(function(o,s,l){r.reason||(r.reason=new Ws(o,s,l),e(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const e=this._listeners.indexOf(n);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const n=new AbortController,e=r=>{n.abort(r)};return this.subscribe(e),n.signal.unsubscribe=()=>this.unsubscribe(e),n.signal}static source(){let n;return{token:new bC(function(a){n=a}),cancel:n}}};function NI(t){return function(e){return t.apply(null,e)}}function DI(t){return fe.isObject(t)&&t.isAxiosError===!0}const gg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gg).forEach(([t,n])=>{gg[n]=t});function wC(t){const n=new li(t),e=$E(li.prototype.request,n);return fe.extend(e,li.prototype,n,{allOwnKeys:!0}),fe.extend(e,n,null,{allOwnKeys:!0}),e.create=function(a){return wC(vi(t,a))},e}const qe=wC(Pl);qe.Axios=li;qe.CanceledError=Ws;qe.CancelToken=kI;qe.isCancel=fC;qe.VERSION=yC;qe.toFormData=Yd;qe.AxiosError=We;qe.Cancel=qe.CanceledError;qe.all=function(n){return Promise.all(n)};qe.spread=NI;qe.isAxiosError=DI;qe.mergeConfig=vi;qe.AxiosHeaders=Un;qe.formToJSON=t=>cC(fe.isHTMLForm(t)?new FormData(t):t);qe.getAdapter=gC.getAdapter;qe.HttpStatusCode=gg;qe.default=qe;const{Axios:qH,AxiosError:HH,CanceledError:VH,isCancel:WH,CancelToken:GH,VERSION:XH,all:YH,Cancel:KH,isAxiosError:$H,spread:QH,toFormData:ZH,AxiosHeaders:JH,HttpStatusCode:eV,formToJSON:tV,getAdapter:nV,mergeConfig:rV}=qe;function OI(){const[t,n]=L.useState([]);return L.useEffect(()=>{(async()=>{try{const r=await qe.get("https://apis.dnjs.lk/objects/colors.php");n(r.data),console.log("Data : ",r.data)}catch(r){console.log("Error when fetch Data : ",r)}})()},[]),E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-7"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsx("h2",{children:"Colors"}),E.jsx("ul",{children:t.map((e,r)=>E.jsxs("li",{children:[e.name," - ",e.code]},r))})]})}function MI(){const[t,n]=L.useState([]),[e,r]=L.useState(""),[a,o]=L.useState([]);L.useEffect(()=>{(async()=>{try{const c=await qe.get("https://apis.dnjs.lk/objects/colors.php");n(c.data),console.log("Original Array : ",c.data),o(c.data)}catch(c){console.log("Error when fetch Data : ",c)}})()},[]);const s=()=>{const l=t.filter(c=>c.name.toLowerCase().includes(e.toLowerCase()));o(l),console.log("Filtered List : ",l)};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-8"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsx("h2",{children:"Colors"}),E.jsx("label",{children:"Search: "}),E.jsx("input",{placeholder:"Enter the color",type:"text",value:e,onChange:l=>r(l.target.value)}),E.jsx("button",{onClick:s,children:"Search"}),E.jsx("ul",{children:a.map((l,c)=>E.jsxs("li",{children:[l.name," - ",l.code,E.jsx("samn",{style:{display:"inline-block",width:"16px",height:"16px",backgroundColor:l.code,borderRadius:"4px",marginRight:"8px",verticalAlign:"middle"}})]},c))})]})}function II(){const[t,n]=L.useState([]),[e,r]=L.useState(""),[a,o]=L.useState(1),[s,l]=L.useState(10),[c,f]=L.useState(1);L.useEffect(()=>{(async()=>{try{const v=`https://apis.dnjs.lk/objects/colors.php?search=${e}&page=${a}&limit=${s}`,y=(await qe.get(v)).data;n(y.data),o(y.page),l(y.limit);const x=y.total,S=Math.ceil(x/y.limit);f(S)}catch(v){console.error("Error fetching data:",v)}})()},[e,a,s]);const h=()=>{o(1)};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-9"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsxs("div",{className:"main-body",children:[E.jsx("h2",{children:"Colors"}),E.jsx("label",{children:"Search: "}),E.jsx("input",{className:"asg9-search-input",placeholder:"Enter the color",type:"text",value:e,onChange:p=>r(p.target.value)}),E.jsx("button",{className:"asg9-search-btn",onClick:h,children:"Search"}),E.jsx("ul",{className:"asg9-color-list",children:t.map((p,v)=>E.jsxs("li",{className:"asg9-color-item",children:[E.jsx("span",{className:"asg9-color-box",style:{backgroundColor:p.code}}),p.name," - ",p.code]},v))}),E.jsxs("div",{className:"asg9-pagination",children:[E.jsx("button",{className:"asg9-page-btn-main",onClick:()=>o(p=>Math.max(p-1,1)),disabled:a===1,children:"Previous"}),(()=>{let p=Math.max(a-1,1),v=Math.min(p+2,c);return v-p<2&&(p=Math.max(v-2,1)),Array.from({length:v-p+1},(g,y)=>p+y).map(g=>E.jsx("button",{className:`asg9-page-btn${a===g?" asg9-page-btn-active":""}`,onClick:()=>o(g),children:g},g))})(),E.jsx("button",{className:"asg9-page-btn-main",onClick:()=>o(p=>Math.min(p+1,c)),disabled:a===c,children:"Next"}),E.jsx("label",{className:"lb-page",children:`${a} of ${c}`})]}),E.jsxs("div",{className:"asg9-items-per-page",children:[E.jsx("label",{htmlFor:"itemsPerPage",children:"Items per page: "}),E.jsxs("select",{id:"itemsPerPage",value:s,onChange:p=>{l(Number(p.target.value)),o(1)},children:[E.jsx("option",{value:5,children:"5"}),E.jsx("option",{value:10,children:"10"}),E.jsx("option",{value:20,children:"20"}),E.jsx("option",{value:50,children:"50"})]})]})]})]})}function BI(){const[t,n]=L.useState({email:"",password:""}),[e,r]=L.useState(""),[a,o]=L.useState(""),s=c=>{n({...t,[c.target.name]:c.target.value})},l=c=>{c.preventDefault(),r(""),o(""),qe.post("https://auth.dnjs.lk/api/login",{email:t.email,password:t.password},{headers:{"Content-Type":"application/json"}}).then(f=>{console.log(f),r(""),o("Login successful!")}).catch(f=>{var h,p;console.log(f),o(""),r(((p=(h=f.response)==null?void 0:h.data)==null?void 0:p.message)||"Login failed")})};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-10"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsx("div",{className:"asg10-login-container",children:E.jsxs("form",{onSubmit:l,children:[E.jsx("h2",{children:"Login :"}),e&&E.jsx("div",{className:"asg10-error",children:e}),a&&E.jsx("pre",{className:"asg10-success",children:a}),E.jsx("label",{className:"asg10-label",children:"Email :"}),E.jsx("input",{className:"asg10-input",placeholder:"Enter the email",onChange:s,value:t.email,name:"email"}),E.jsx("label",{className:"asg10-label",children:"Password :"}),E.jsx("input",{className:"asg10-input",placeholder:"Enter the password",onChange:s,value:t.password,name:"password",type:"password"}),E.jsx("button",{className:"btn-login",type:"submit",disabled:!t.email||!t.password,children:"Submit"})]})})]})}function FI(){const[t,n]=L.useState({email:"",password:""}),[e,r]=L.useState(""),[a,o]=L.useState(""),[s,l]=L.useState(null),[c,f]=L.useState(!1),h=y=>{n({...t,[y.target.name]:y.target.value}),r("")},p=y=>{y.preventDefault(),r(""),o(""),qe.post("https://auth.dnjs.lk/api/login",{email:t.email,password:t.password},{headers:{"Content-Type":"application/json"}}).then(x=>{console.log(x);const S=x.data.access_token;localStorage.setItem("authToken",S),v(S),r(""),o("You have logged!")}).catch(x=>{var S,w;console.log(x),o(""),r(((w=(S=x.response)==null?void 0:S.data)==null?void 0:w.message)||"Login failed")})},v=y=>{qe.get("https://auth.dnjs.lk/api/user",{headers:{Authorization:`Bearer ${y}`}}).then(x=>{console.log("User Data : ",x.data),l(x.data)}).catch(x=>{console.error("Failed to fetch user : ",x)})},g=()=>{localStorage.removeItem("authToken"),l(null),o(""),r(""),n({email:"",password:""})};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-11"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsx("div",{className:"asg10-login-container",children:E.jsxs("form",{onSubmit:p,children:[E.jsx("h2",{children:"Login :"}),e&&E.jsx("div",{className:"asg10-error",children:e}),a&&E.jsx("pre",{className:"asg10-success",children:a}),s&&E.jsxs("div",{className:"user-profile",children:[E.jsx("h3",{children:s.name}),E.jsx("p",{children:s.description}),s.avatar&&E.jsx("img",{src:s.avatar,alt:"Profile",style:{width:"100px",borderRadius:"50%"}})]}),!a&&E.jsxs(E.Fragment,{children:[E.jsx("label",{className:"asg10-label",children:"Email :"}),E.jsx("input",{className:"asg10-input",placeholder:"Enter the email",onChange:h,value:t.email,name:"email"}),E.jsx("label",{className:"asg10-label",children:"Password :"}),E.jsx("input",{className:"asg10-input",placeholder:"Enter the password",onChange:h,value:t.password,name:"password",type:c?"text":"password"}),E.jsxs("div",{className:"asg10-checkbox-row",children:[E.jsx("input",{type:"checkbox",id:"showPassword",checked:c,onChange:()=>f(!c),className:"asg10-checkbox"}),E.jsx("label",{htmlFor:"showPassword",className:"asg10-checkbox-label",children:"Show Password"})]}),E.jsx("button",{className:"btn-login",type:"submit",disabled:!t.email||!t.password,children:"Submit"})]}),a&&E.jsx("div",{children:E.jsx("button",{className:"btn-logout",type:"button",onClick:g,children:"Logout"})})]})})]})}function PI(){const[t,n]=L.useState({email:"",password:""}),[e,r]=L.useState(""),[a,o]=L.useState(""),[s,l]=L.useState(null),[c,f]=L.useState(!1),[h,p]=L.useState(!1);L.useEffect(()=>{y()&&(x(),o("You are already logged in."))},[]);const v=w=>{n({...t,[w.target.name]:w.target.value}),r("")},g=w=>{w.preventDefault(),r(""),o(""),qe.post("https://auth.dnjs.lk/api/login",{email:t.email,password:t.password},{headers:{"Content-Type":"application/json"}}).then(T=>{console.log(T);const A=T.data.access_token;h?localStorage.setItem("authToken",A):sessionStorage.setItem("authToken",A),x(),r(""),o("You have logged!")}).catch(T=>{var A,C;console.log(T),o(""),r(((C=(A=T.response)==null?void 0:A.data)==null?void 0:C.message)||"Login failed")})},y=()=>localStorage.getItem("authToken")||sessionStorage.getItem("authToken"),x=()=>{const w=y();w&&qe.get("https://auth.dnjs.lk/api/user",{headers:{Authorization:`Bearer ${w}`}}).then(T=>{console.log("User Data : ",T.data),l(T.data)}).catch(T=>{console.error("Failed to fetch user : ",T)})},S=()=>{localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),l(null),o(""),r(""),n({email:"",password:""})};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-12"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsx("div",{className:"asg10-login-container",children:E.jsxs("form",{onSubmit:g,children:[E.jsx("h2",{children:"Login :"}),e&&E.jsx("div",{className:"asg10-error",children:e}),a&&E.jsx("pre",{className:"asg10-success",children:a}),s&&E.jsxs("div",{className:"user-profile",children:[E.jsx("h3",{children:s.name}),E.jsx("p",{children:s.description}),s.avatar&&E.jsx("img",{src:s.avatar,alt:"Profile",style:{width:"100px",borderRadius:"50%"}})]}),!a&&E.jsxs(E.Fragment,{children:[E.jsx("label",{className:"asg10-label",children:"Email :"}),E.jsx("input",{className:"asg10-input",placeholder:"Enter the email",onChange:v,value:t.email,name:"email"}),E.jsx("label",{className:"asg10-label",children:"Password :"}),E.jsx("input",{className:"asg10-input",placeholder:"Enter the password",onChange:v,value:t.password,name:"password",type:c?"text":"password"}),E.jsxs("div",{className:"asg10-checkbox-row",children:[E.jsx("input",{type:"checkbox",id:"showPassword",checked:c,onChange:()=>f(!c),className:"asg10-checkbox"}),E.jsx("label",{htmlFor:"showPassword",className:"asg10-checkbox-label",children:"Show Password"}),E.jsx("input",{type:"checkbox",id:"keepLoggedIn",checked:h,onChange:()=>p(!h),className:"asg10-checkbox"}),E.jsx("label",{htmlFor:"keepLoggedIn",className:"asg10-checkbox-label",children:"Keep me logged in"})]}),E.jsx("button",{className:"btn-login",type:"submit",disabled:!t.email||!t.password,children:"Submit"})]}),a&&E.jsx("div",{children:E.jsx("button",{className:"btn-logout",type:"button",onClick:S,children:"Logout"})})]})})]})}function Ll({onLoginSuccess:t,success:n,loading:e=!1,disabled:r=!1}){const[a,o]=L.useState({email:"",password:""}),[s,l]=L.useState(""),[c,f]=L.useState(!1),[h,p]=L.useState(!1),[v,g]=L.useState(""),[y,{isLoading:x}]=PO(),S=T=>{o({...a,[T.target.name]:T.target.value}),l(""),g("")},w=async T=>{var A,C;if(T.preventDefault(),l(""),g(""),!(!a.email||!a.password)&&!(e||r||x))try{const R=await y({email:a.email,password:a.password}).unwrap(),k=R.access_token;h?localStorage.setItem("authToken",k):sessionStorage.setItem("authToken",k),l(""),g("You have logged!"),t&&t(R.user,k,h)}catch(R){g(""),console.log("Error : ",R),l(((C=(A=R.data)==null?void 0:A.error)==null?void 0:C.message)||"Login failed")}};return E.jsxs("div",{className:"asg33-login-form",children:[E.jsx("h2",{children:"Login"}),s&&E.jsx("div",{className:"asg10-error",children:s}),v&&E.jsx("pre",{className:"asg10-success",children:v}),E.jsxs("form",{onSubmit:w,children:[E.jsxs("div",{className:"asg33-input-icon-row",children:[E.jsx("div",{className:"asg33-input-icon asg33-input-icon-person"}),E.jsx("input",{type:"email",className:"asg33-login-input asg33-input-with-icon",placeholder:"Email",value:a.email,onChange:S,name:"email",disabled:e||r||x,autoComplete:"email",required:!0})]}),E.jsxs("div",{className:"asg33-input-icon-row",children:[E.jsx("div",{className:"asg33-input-icon asg33-input-icon-lock"}),E.jsx("input",{className:"asg33-login-input asg33-input-with-icon",placeholder:"Enter the password",onChange:S,value:a.password,name:"password",type:c?"text":"password",disabled:e||r||x,autoComplete:"current-password",required:!0})]}),E.jsxs("div",{className:"asg33-checkbox-row",children:[E.jsxs("div",{children:[E.jsx("input",{type:"checkbox",id:"showPassword",checked:c,onChange:()=>f(!c),disabled:e||r||x}),E.jsx("label",{htmlFor:"showPassword",children:"Show Password"})]}),E.jsxs("div",{children:[E.jsx("input",{type:"checkbox",id:"keepLoggedIn",checked:h,onChange:()=>p(!h),disabled:e||r||x}),E.jsx("label",{htmlFor:"keepLoggedIn",children:"Keep me logged in"})]})]}),E.jsx("button",{className:"asg33-btn-primary asg33-btn-fullwidth",type:"submit",disabled:!a.email||!a.password||e||r||x,children:e||r||x?"Loading...":"Submit"})]})]})}/*!
* sweetalert2 v11.22.2
* Released under the MIT License.
*/function xC(t,n,e){if(typeof t=="function"?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}function LI(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _2(t,n){return t.get(xC(t,n))}function jI(t,n,e){LI(t,n),n.set(t,e)}function zI(t,n,e){return t.set(xC(t,n),e),e}const UI=100,Pe={},qI=()=>{Pe.previousActiveElement instanceof HTMLElement?(Pe.previousActiveElement.focus(),Pe.previousActiveElement=null):document.body&&document.body.focus()},HI=t=>new Promise(n=>{if(!t)return n();const e=window.scrollX,r=window.scrollY;Pe.restoreFocusTimeout=setTimeout(()=>{qI(),n()},UI),window.scrollTo(e,r)}),SC="swal2-",VI=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],he=VI.reduce((t,n)=>(t[n]=SC+n,t),{}),WI=["success","warning","info","question","error"],rd=WI.reduce((t,n)=>(t[n]=SC+n,t),{}),EC="SweetAlert2:",fy=t=>t.charAt(0).toUpperCase()+t.slice(1),Dn=t=>{console.warn(`${EC} ${typeof t=="object"?t.join(" "):t}`)},Si=t=>{console.error(`${EC} ${t}`)},R2=[],GI=t=>{R2.includes(t)||(R2.push(t),Dn(t))},CC=(t,n=null)=>{GI(`"${t}" is deprecated and will be removed in the next major release.${n?` Use "${n}" instead.`:""}`)},Qd=t=>typeof t=="function"?t():t,dy=t=>t&&typeof t.toPromise=="function",jl=t=>dy(t)?t.toPromise():Promise.resolve(t),hy=t=>t&&Promise.resolve(t)===t,On=()=>document.body.querySelector(`.${he.container}`),zl=t=>{const n=On();return n?n.querySelector(t):null},lr=t=>zl(`.${t}`),ut=()=>lr(he.popup),Gs=()=>lr(he.icon),XI=()=>lr(he["icon-content"]),_C=()=>lr(he.title),py=()=>lr(he["html-container"]),RC=()=>lr(he.image),my=()=>lr(he["progress-steps"]),Zd=()=>lr(he["validation-message"]),sa=()=>zl(`.${he.actions} .${he.confirm}`),Xs=()=>zl(`.${he.actions} .${he.cancel}`),Ei=()=>zl(`.${he.actions} .${he.deny}`),YI=()=>lr(he["input-label"]),Ys=()=>zl(`.${he.loader}`),Ul=()=>lr(he.actions),AC=()=>lr(he.footer),Jd=()=>lr(he["timer-progress-bar"]),vy=()=>lr(he.close),KI=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,gy=()=>{const t=ut();if(!t)return[];const n=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),e=Array.from(n).sort((o,s)=>{const l=parseInt(o.getAttribute("tabindex")||"0"),c=parseInt(s.getAttribute("tabindex")||"0");return l>c?1:l<c?-1:0}),r=t.querySelectorAll(KI),a=Array.from(r).filter(o=>o.getAttribute("tabindex")!=="-1");return[...new Set(e.concat(a))].filter(o=>qn(o))},yy=()=>Ba(document.body,he.shown)&&!Ba(document.body,he["toast-shown"])&&!Ba(document.body,he["no-backdrop"]),eh=()=>{const t=ut();return t?Ba(t,he.toast):!1},$I=()=>{const t=ut();return t?t.hasAttribute("data-loading"):!1},cr=(t,n)=>{if(t.textContent="",n){const r=new DOMParser().parseFromString(n,"text/html"),a=r.querySelector("head");a&&Array.from(a.childNodes).forEach(s=>{t.appendChild(s)});const o=r.querySelector("body");o&&Array.from(o.childNodes).forEach(s=>{s instanceof HTMLVideoElement||s instanceof HTMLAudioElement?t.appendChild(s.cloneNode(!0)):t.appendChild(s)})}},Ba=(t,n)=>{if(!n)return!1;const e=n.split(/\s+/);for(let r=0;r<e.length;r++)if(!t.classList.contains(e[r]))return!1;return!0},QI=(t,n)=>{Array.from(t.classList).forEach(e=>{!Object.values(he).includes(e)&&!Object.values(rd).includes(e)&&!Object.values(n.showClass||{}).includes(e)&&t.classList.remove(e)})},ur=(t,n,e)=>{if(QI(t,n),!n.customClass)return;const r=n.customClass[e];if(r){if(typeof r!="string"&&!r.forEach){Dn(`Invalid type of customClass.${e}! Expected string or iterable object, got "${typeof r}"`);return}ct(t,r)}},th=(t,n)=>{if(!n)return null;switch(n){case"select":case"textarea":case"file":return t.querySelector(`.${he.popup} > .${he[n]}`);case"checkbox":return t.querySelector(`.${he.popup} > .${he.checkbox} input`);case"radio":return t.querySelector(`.${he.popup} > .${he.radio} input:checked`)||t.querySelector(`.${he.popup} > .${he.radio} input:first-child`);case"range":return t.querySelector(`.${he.popup} > .${he.range} input`);default:return t.querySelector(`.${he.popup} > .${he.input}`)}},TC=t=>{if(t.focus(),t.type!=="file"){const n=t.value;t.value="",t.value=n}},kC=(t,n,e)=>{!t||!n||(typeof n=="string"&&(n=n.split(/\s+/).filter(Boolean)),n.forEach(r=>{Array.isArray(t)?t.forEach(a=>{e?a.classList.add(r):a.classList.remove(r)}):e?t.classList.add(r):t.classList.remove(r)}))},ct=(t,n)=>{kC(t,n,!0)},_r=(t,n)=>{kC(t,n,!1)},wo=(t,n)=>{const e=Array.from(t.children);for(let r=0;r<e.length;r++){const a=e[r];if(a instanceof HTMLElement&&Ba(a,n))return a}},ci=(t,n,e)=>{e===`${parseInt(e)}`&&(e=parseInt(e)),e||parseInt(e)===0?t.style.setProperty(n,typeof e=="number"?`${e}px`:e):t.style.removeProperty(n)},on=(t,n="flex")=>{t&&(t.style.display=n)},Tn=t=>{t&&(t.style.display="none")},by=(t,n="block")=>{t&&new MutationObserver(()=>{ql(t,t.innerHTML,n)}).observe(t,{childList:!0,subtree:!0})},A2=(t,n,e,r)=>{const a=t.querySelector(n);a&&a.style.setProperty(e,r)},ql=(t,n,e="flex")=>{n?on(t,e):Tn(t)},qn=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),ZI=()=>!qn(sa())&&!qn(Ei())&&!qn(Xs()),yg=t=>t.scrollHeight>t.clientHeight,JI=(t,n)=>{let e=t;for(;e&&e!==n;){if(yg(e))return!0;e=e.parentElement}return!1},NC=t=>{const n=window.getComputedStyle(t),e=parseFloat(n.getPropertyValue("animation-duration")||"0"),r=parseFloat(n.getPropertyValue("transition-duration")||"0");return e>0||r>0},wy=(t,n=!1)=>{const e=Jd();e&&qn(e)&&(n&&(e.style.transition="none",e.style.width="100%"),setTimeout(()=>{e.style.transition=`width ${t/1e3}s linear`,e.style.width="0%"},10))},e4=()=>{const t=Jd();if(!t)return;const n=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const e=parseInt(window.getComputedStyle(t).width),r=n/e*100;t.style.width=`${r}%`},t4=()=>typeof window>"u"||typeof document>"u",n4=`
 <div aria-labelledby="${he.title}" aria-describedby="${he["html-container"]}" class="${he.popup}" tabindex="-1">
   <button type="button" class="${he.close}"></button>
   <ul class="${he["progress-steps"]}"></ul>
   <div class="${he.icon}"></div>
   <img class="${he.image}" />
   <h2 class="${he.title}" id="${he.title}"></h2>
   <div class="${he["html-container"]}" id="${he["html-container"]}"></div>
   <input class="${he.input}" id="${he.input}" />
   <input type="file" class="${he.file}" />
   <div class="${he.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${he.select}" id="${he.select}"></select>
   <div class="${he.radio}"></div>
   <label class="${he.checkbox}">
     <input type="checkbox" id="${he.checkbox}" />
     <span class="${he.label}"></span>
   </label>
   <textarea class="${he.textarea}" id="${he.textarea}"></textarea>
   <div class="${he["validation-message"]}" id="${he["validation-message"]}"></div>
   <div class="${he.actions}">
     <div class="${he.loader}"></div>
     <button type="button" class="${he.confirm}"></button>
     <button type="button" class="${he.deny}"></button>
     <button type="button" class="${he.cancel}"></button>
   </div>
   <div class="${he.footer}"></div>
   <div class="${he["timer-progress-bar-container"]}">
     <div class="${he["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),r4=()=>{const t=On();return t?(t.remove(),_r([document.documentElement,document.body],[he["no-backdrop"],he["toast-shown"],he["has-column"]]),!0):!1},Jo=()=>{Pe.currentInstance.resetValidationMessage()},a4=()=>{const t=ut(),n=wo(t,he.input),e=wo(t,he.file),r=t.querySelector(`.${he.range} input`),a=t.querySelector(`.${he.range} output`),o=wo(t,he.select),s=t.querySelector(`.${he.checkbox} input`),l=wo(t,he.textarea);n.oninput=Jo,e.onchange=Jo,o.onchange=Jo,s.onchange=Jo,l.oninput=Jo,r.oninput=()=>{Jo(),a.value=r.value},r.onchange=()=>{Jo(),a.value=r.value}},o4=t=>typeof t=="string"?document.querySelector(t):t,i4=t=>{const n=ut();n.setAttribute("role",t.toast?"alert":"dialog"),n.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||n.setAttribute("aria-modal","true")},s4=t=>{window.getComputedStyle(t).direction==="rtl"&&ct(On(),he.rtl)},u4=t=>{const n=r4();if(t4()){Si("SweetAlert2 requires document to initialize");return}const e=document.createElement("div");e.className=he.container,n&&ct(e,he["no-transition"]),cr(e,n4),e.dataset.swal2Theme=t.theme;const r=o4(t.target);r.appendChild(e),t.topLayer&&(e.setAttribute("popover",""),e.showPopover()),i4(t),s4(r),a4()},xy=(t,n)=>{t instanceof HTMLElement?n.appendChild(t):typeof t=="object"?l4(t,n):t&&cr(n,t)},l4=(t,n)=>{t.jquery?c4(n,t):cr(n,t.toString())},c4=(t,n)=>{if(t.textContent="",0 in n)for(let e=0;e in n;e++)t.appendChild(n[e].cloneNode(!0));else t.appendChild(n.cloneNode(!0))},f4=(t,n)=>{const e=Ul(),r=Ys();!e||!r||(!n.showConfirmButton&&!n.showDenyButton&&!n.showCancelButton?Tn(e):on(e),ur(e,n,"actions"),d4(e,r,n),cr(r,n.loaderHtml||""),ur(r,n,"loader"))};function d4(t,n,e){const r=sa(),a=Ei(),o=Xs();!r||!a||!o||(ov(r,"confirm",e),ov(a,"deny",e),ov(o,"cancel",e),h4(r,a,o,e),e.reverseButtons&&(e.toast?(t.insertBefore(o,r),t.insertBefore(a,r)):(t.insertBefore(o,n),t.insertBefore(a,n),t.insertBefore(r,n))))}function h4(t,n,e,r){if(!r.buttonsStyling){_r([t,n,e],he.styled);return}ct([t,n,e],he.styled),r.confirmButtonColor&&t.style.setProperty("--swal2-confirm-button-background-color",r.confirmButtonColor),r.denyButtonColor&&n.style.setProperty("--swal2-deny-button-background-color",r.denyButtonColor),r.cancelButtonColor&&e.style.setProperty("--swal2-cancel-button-background-color",r.cancelButtonColor),av(t),av(n),av(e)}function av(t){const n=window.getComputedStyle(t);if(n.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const e=n.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");t.style.setProperty("--swal2-action-button-focus-box-shadow",n.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${e}`))}function ov(t,n,e){const r=fy(n);ql(t,e[`show${r}Button`],"inline-block"),cr(t,e[`${n}ButtonText`]||""),t.setAttribute("aria-label",e[`${n}ButtonAriaLabel`]||""),t.className=he[n],ur(t,e,`${n}Button`)}const p4=(t,n)=>{const e=vy();e&&(cr(e,n.closeButtonHtml||""),ur(e,n,"closeButton"),ql(e,n.showCloseButton),e.setAttribute("aria-label",n.closeButtonAriaLabel||""))},m4=(t,n)=>{const e=On();e&&(v4(e,n.backdrop),g4(e,n.position),y4(e,n.grow),ur(e,n,"container"))};function v4(t,n){typeof n=="string"?t.style.background=n:n||ct([document.documentElement,document.body],he["no-backdrop"])}function g4(t,n){n&&(n in he?ct(t,he[n]):(Dn('The "position" parameter is not valid, defaulting to "center"'),ct(t,he.center)))}function y4(t,n){n&&ct(t,he[`grow-${n}`])}var wt={innerParams:new WeakMap,domCache:new WeakMap};const b4=["input","file","range","select","radio","checkbox","textarea"],w4=(t,n)=>{const e=ut();if(!e)return;const r=wt.innerParams.get(t),a=!r||n.input!==r.input;b4.forEach(o=>{const s=wo(e,he[o]);s&&(E4(o,n.inputAttributes),s.className=he[o],a&&Tn(s))}),n.input&&(a&&x4(n),C4(n))},x4=t=>{if(!t.input)return;if(!Bt[t.input]){Si(`Unexpected type of input! Expected ${Object.keys(Bt).join(" | ")}, got "${t.input}"`);return}const n=DC(t.input);if(!n)return;const e=Bt[t.input](n,t);on(n),t.inputAutoFocus&&setTimeout(()=>{TC(e)})},S4=t=>{for(let n=0;n<t.attributes.length;n++){const e=t.attributes[n].name;["id","type","value","style"].includes(e)||t.removeAttribute(e)}},E4=(t,n)=>{const e=ut();if(!e)return;const r=th(e,t);if(r){S4(r);for(const a in n)r.setAttribute(a,n[a])}},C4=t=>{if(!t.input)return;const n=DC(t.input);n&&ur(n,t,"input")},Sy=(t,n)=>{!t.placeholder&&n.inputPlaceholder&&(t.placeholder=n.inputPlaceholder)},Hl=(t,n,e)=>{if(e.inputLabel){const r=document.createElement("label"),a=he["input-label"];r.setAttribute("for",t.id),r.className=a,typeof e.customClass=="object"&&ct(r,e.customClass.inputLabel),r.innerText=e.inputLabel,n.insertAdjacentElement("beforebegin",r)}},DC=t=>{const n=ut();if(n)return wo(n,he[t]||he.input)},ad=(t,n)=>{["string","number"].includes(typeof n)?t.value=`${n}`:hy(n)||Dn(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof n}"`)},Bt={};Bt.text=Bt.email=Bt.password=Bt.number=Bt.tel=Bt.url=Bt.search=Bt.date=Bt["datetime-local"]=Bt.time=Bt.week=Bt.month=(t,n)=>(ad(t,n.inputValue),Hl(t,t,n),Sy(t,n),t.type=n.input,t);Bt.file=(t,n)=>(Hl(t,t,n),Sy(t,n),t);Bt.range=(t,n)=>{const e=t.querySelector("input"),r=t.querySelector("output");return ad(e,n.inputValue),e.type=n.input,ad(r,n.inputValue),Hl(e,t,n),t};Bt.select=(t,n)=>{if(t.textContent="",n.inputPlaceholder){const e=document.createElement("option");cr(e,n.inputPlaceholder),e.value="",e.disabled=!0,e.selected=!0,t.appendChild(e)}return Hl(t,t,n),t};Bt.radio=t=>(t.textContent="",t);Bt.checkbox=(t,n)=>{const e=th(ut(),"checkbox");e.value="1",e.checked=!!n.inputValue;const r=t.querySelector("span");return cr(r,n.inputPlaceholder||n.inputLabel),e};Bt.textarea=(t,n)=>{ad(t,n.inputValue),Sy(t,n),Hl(t,t,n);const e=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(ut()).width),a=()=>{if(!document.body.contains(t))return;const o=t.offsetWidth+e(t);o>r?ut().style.width=`${o}px`:ci(ut(),"width",n.width)};new MutationObserver(a).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const _4=(t,n)=>{const e=py();e&&(by(e),ur(e,n,"htmlContainer"),n.html?(xy(n.html,e),on(e,"block")):n.text?(e.textContent=n.text,on(e,"block")):Tn(e),w4(t,n))},R4=(t,n)=>{const e=AC();e&&(by(e),ql(e,n.footer,"block"),n.footer&&xy(n.footer,e),ur(e,n,"footer"))},A4=(t,n)=>{const e=wt.innerParams.get(t),r=Gs();if(!r)return;if(e&&n.icon===e.icon){k2(r,n),T2(r,n);return}if(!n.icon&&!n.iconHtml){Tn(r);return}if(n.icon&&Object.keys(rd).indexOf(n.icon)===-1){Si(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${n.icon}"`),Tn(r);return}on(r),k2(r,n),T2(r,n),ct(r,n.showClass&&n.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",OC)},T2=(t,n)=>{for(const[e,r]of Object.entries(rd))n.icon!==e&&_r(t,r);ct(t,n.icon&&rd[n.icon]),N4(t,n),OC(),ur(t,n,"icon")},OC=()=>{const t=ut();if(!t)return;const n=window.getComputedStyle(t).getPropertyValue("background-color"),e=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<e.length;r++)e[r].style.backgroundColor=n},T4=t=>`
  ${t.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${t.animation?'<div class="swal2-success-fix"></div>':""}
  ${t.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,k4=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,k2=(t,n)=>{if(!n.icon&&!n.iconHtml)return;let e=t.innerHTML,r="";n.iconHtml?r=N2(n.iconHtml):n.icon==="success"?(r=T4(n),e=e.replace(/ style=".*?"/g,"")):n.icon==="error"?r=k4:n.icon&&(r=N2({question:"?",warning:"!",info:"i"}[n.icon])),e.trim()!==r.trim()&&cr(t,r)},N4=(t,n)=>{if(n.iconColor){t.style.color=n.iconColor,t.style.borderColor=n.iconColor;for(const e of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])A2(t,e,"background-color",n.iconColor);A2(t,".swal2-success-ring","border-color",n.iconColor)}},N2=t=>`<div class="${he["icon-content"]}">${t}</div>`,D4=(t,n)=>{const e=RC();if(e){if(!n.imageUrl){Tn(e);return}on(e,""),e.setAttribute("src",n.imageUrl),e.setAttribute("alt",n.imageAlt||""),ci(e,"width",n.imageWidth),ci(e,"height",n.imageHeight),e.className=he.image,ur(e,n,"image")}};let Ey=!1,MC=0,IC=0,BC=0,FC=0;const O4=t=>{t.addEventListener("mousedown",od),document.body.addEventListener("mousemove",id),t.addEventListener("mouseup",sd),t.addEventListener("touchstart",od),document.body.addEventListener("touchmove",id),t.addEventListener("touchend",sd)},M4=t=>{t.removeEventListener("mousedown",od),document.body.removeEventListener("mousemove",id),t.removeEventListener("mouseup",sd),t.removeEventListener("touchstart",od),document.body.removeEventListener("touchmove",id),t.removeEventListener("touchend",sd)},od=t=>{const n=ut();if(t.target===n||Gs().contains(t.target)){Ey=!0;const e=PC(t);MC=e.clientX,IC=e.clientY,BC=parseInt(n.style.insetInlineStart)||0,FC=parseInt(n.style.insetBlockStart)||0,ct(n,"swal2-dragging")}},id=t=>{const n=ut();if(Ey){let{clientX:e,clientY:r}=PC(t);n.style.insetInlineStart=`${BC+(e-MC)}px`,n.style.insetBlockStart=`${FC+(r-IC)}px`}},sd=()=>{const t=ut();Ey=!1,_r(t,"swal2-dragging")},PC=t=>{let n=0,e=0;return t.type.startsWith("mouse")?(n=t.clientX,e=t.clientY):t.type.startsWith("touch")&&(n=t.touches[0].clientX,e=t.touches[0].clientY),{clientX:n,clientY:e}},I4=(t,n)=>{const e=On(),r=ut();if(!(!e||!r)){if(n.toast){ci(e,"width",n.width),r.style.width="100%";const a=Ys();a&&r.insertBefore(a,Gs())}else ci(r,"width",n.width);ci(r,"padding",n.padding),n.color&&(r.style.color=n.color),n.background&&(r.style.background=n.background),Tn(Zd()),B4(r,n),n.draggable&&!n.toast?(ct(r,he.draggable),O4(r)):(_r(r,he.draggable),M4(r))}},B4=(t,n)=>{const e=n.showClass||{};t.className=`${he.popup} ${qn(t)?e.popup:""}`,n.toast?(ct([document.documentElement,document.body],he["toast-shown"]),ct(t,he.toast)):ct(t,he.modal),ur(t,n,"popup"),typeof n.customClass=="string"&&ct(t,n.customClass),n.icon&&ct(t,he[`icon-${n.icon}`])},F4=(t,n)=>{const e=my();if(!e)return;const{progressSteps:r,currentProgressStep:a}=n;if(!r||r.length===0||a===void 0){Tn(e);return}on(e),e.textContent="",a>=r.length&&Dn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((o,s)=>{const l=P4(o);if(e.appendChild(l),s===a&&ct(l,he["active-progress-step"]),s!==r.length-1){const c=L4(n);e.appendChild(c)}})},P4=t=>{const n=document.createElement("li");return ct(n,he["progress-step"]),cr(n,t),n},L4=t=>{const n=document.createElement("li");return ct(n,he["progress-step-line"]),t.progressStepsDistance&&ci(n,"width",t.progressStepsDistance),n},j4=(t,n)=>{const e=_C();e&&(by(e),ql(e,n.title||n.titleText,"block"),n.title&&xy(n.title,e),n.titleText&&(e.innerText=n.titleText),ur(e,n,"title"))},LC=(t,n)=>{I4(t,n),m4(t,n),F4(t,n),A4(t,n),D4(t,n),j4(t,n),p4(t,n),_4(t,n),f4(t,n),R4(t,n);const e=ut();typeof n.didRender=="function"&&e&&n.didRender(e),Pe.eventEmitter.emit("didRender",e)},z4=()=>qn(ut()),jC=()=>{var t;return(t=sa())===null||t===void 0?void 0:t.click()},U4=()=>{var t;return(t=Ei())===null||t===void 0?void 0:t.click()},q4=()=>{var t;return(t=Xs())===null||t===void 0?void 0:t.click()},Ks=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),zC=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},H4=(t,n,e)=>{zC(t),n.toast||(t.keydownHandler=r=>W4(n,r,e),t.keydownTarget=n.keydownListenerCapture?window:ut(),t.keydownListenerCapture=n.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},bg=(t,n)=>{var e;const r=gy();if(r.length){t=t+n,t===-2&&(t=r.length-1),t===r.length?t=0:t===-1&&(t=r.length-1),r[t].focus();return}(e=ut())===null||e===void 0||e.focus()},UC=["ArrowRight","ArrowDown"],V4=["ArrowLeft","ArrowUp"],W4=(t,n,e)=>{t&&(n.isComposing||n.keyCode===229||(t.stopKeydownPropagation&&n.stopPropagation(),n.key==="Enter"?G4(n,t):n.key==="Tab"?X4(n):[...UC,...V4].includes(n.key)?Y4(n.key):n.key==="Escape"&&K4(n,t,e)))},G4=(t,n)=>{if(!Qd(n.allowEnterKey))return;const e=th(ut(),n.input);if(t.target&&e&&t.target instanceof HTMLElement&&t.target.outerHTML===e.outerHTML){if(["textarea","file"].includes(n.input))return;jC(),t.preventDefault()}},X4=t=>{const n=t.target,e=gy();let r=-1;for(let a=0;a<e.length;a++)if(n===e[a]){r=a;break}t.shiftKey?bg(r,-1):bg(r,1),t.stopPropagation(),t.preventDefault()},Y4=t=>{const n=Ul(),e=sa(),r=Ei(),a=Xs();if(!n||!e||!r||!a)return;const o=[e,r,a];if(document.activeElement instanceof HTMLElement&&!o.includes(document.activeElement))return;const s=UC.includes(t)?"nextElementSibling":"previousElementSibling";let l=document.activeElement;if(l){for(let c=0;c<n.children.length;c++){if(l=l[s],!l)return;if(l instanceof HTMLButtonElement&&qn(l))break}l instanceof HTMLButtonElement&&l.focus()}},K4=(t,n,e)=>{t.preventDefault(),Qd(n.allowEscapeKey)&&e(Ks.esc)};var Ps={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const $4=()=>{const t=On();Array.from(document.body.children).forEach(e=>{e.contains(t)||(e.hasAttribute("aria-hidden")&&e.setAttribute("data-previous-aria-hidden",e.getAttribute("aria-hidden")||""),e.setAttribute("aria-hidden","true"))})},qC=()=>{Array.from(document.body.children).forEach(n=>{n.hasAttribute("data-previous-aria-hidden")?(n.setAttribute("aria-hidden",n.getAttribute("data-previous-aria-hidden")||""),n.removeAttribute("data-previous-aria-hidden")):n.removeAttribute("aria-hidden")})},HC=typeof window<"u"&&!!window.GestureEvent,Q4=()=>{if(HC&&!Ba(document.body,he.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,ct(document.body,he.iosfix),Z4()}},Z4=()=>{const t=On();if(!t)return;let n;t.ontouchstart=e=>{n=J4(e)},t.ontouchmove=e=>{n&&(e.preventDefault(),e.stopPropagation())}},J4=t=>{const n=t.target,e=On(),r=py();return!e||!r||eB(t)||tB(t)?!1:n===e||!yg(e)&&n instanceof HTMLElement&&!JI(n,r)&&n.tagName!=="INPUT"&&n.tagName!=="TEXTAREA"&&!(yg(r)&&r.contains(n))},eB=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",tB=t=>t.touches&&t.touches.length>1,nB=()=>{if(Ba(document.body,he.iosfix)){const t=parseInt(document.body.style.top,10);_r(document.body,he.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},rB=()=>{const t=document.createElement("div");t.className=he["scrollbar-measure"],document.body.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),n};let _s=null;const aB=t=>{_s===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(_s=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${_s+rB()}px`)},oB=()=>{_s!==null&&(document.body.style.paddingRight=`${_s}px`,_s=null)};function VC(t,n,e,r){eh()?D2(t,r):(HI(e).then(()=>D2(t,r)),zC(Pe)),HC?(n.setAttribute("style","display:none !important"),n.removeAttribute("class"),n.innerHTML=""):n.remove(),yy()&&(oB(),nB(),qC()),iB()}function iB(){_r([document.documentElement,document.body],[he.shown,he["height-auto"],he["no-backdrop"],he["toast-shown"]])}function xo(t){t=uB(t);const n=Ps.swalPromiseResolve.get(this),e=sB(this);this.isAwaitingPromise?t.isDismissed||(Vl(this),n(t)):e&&n(t)}const sB=t=>{const n=ut();if(!n)return!1;const e=wt.innerParams.get(t);if(!e||Ba(n,e.hideClass.popup))return!1;_r(n,e.showClass.popup),ct(n,e.hideClass.popup);const r=On();return _r(r,e.showClass.backdrop),ct(r,e.hideClass.backdrop),lB(t,n,e),!0};function WC(t){const n=Ps.swalPromiseReject.get(this);Vl(this),n&&n(t)}const Vl=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,wt.innerParams.get(t)||t._destroy())},uB=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),lB=(t,n,e)=>{var r;const a=On(),o=NC(n);typeof e.willClose=="function"&&e.willClose(n),(r=Pe.eventEmitter)===null||r===void 0||r.emit("willClose",n),o?cB(t,n,a,e.returnFocus,e.didClose):VC(t,a,e.returnFocus,e.didClose)},cB=(t,n,e,r,a)=>{Pe.swalCloseEventFinishedCallback=VC.bind(null,t,e,r,a);const o=function(s){if(s.target===n){var l;(l=Pe.swalCloseEventFinishedCallback)===null||l===void 0||l.call(Pe),delete Pe.swalCloseEventFinishedCallback,n.removeEventListener("animationend",o),n.removeEventListener("transitionend",o)}};n.addEventListener("animationend",o),n.addEventListener("transitionend",o)},D2=(t,n)=>{setTimeout(()=>{var e;typeof n=="function"&&n.bind(t.params)(),(e=Pe.eventEmitter)===null||e===void 0||e.emit("didClose"),t._destroy&&t._destroy()})},Ls=t=>{let n=ut();if(n||new _t,n=ut(),!n)return;const e=Ys();eh()?Tn(Gs()):fB(n,t),on(e),n.setAttribute("data-loading","true"),n.setAttribute("aria-busy","true"),n.focus()},fB=(t,n)=>{const e=Ul(),r=Ys();!e||!r||(!n&&qn(sa())&&(n=sa()),on(e),n&&(Tn(n),r.setAttribute("data-button-to-replace",n.className),e.insertBefore(r,n)),ct([t,e],he.loading))},dB=(t,n)=>{n.input==="select"||n.input==="radio"?gB(t,n):["text","email","number","tel","textarea"].some(e=>e===n.input)&&(dy(n.inputValue)||hy(n.inputValue))&&(Ls(sa()),yB(t,n))},hB=(t,n)=>{const e=t.getInput();if(!e)return null;switch(n.input){case"checkbox":return pB(e);case"radio":return mB(e);case"file":return vB(e);default:return n.inputAutoTrim?e.value.trim():e.value}},pB=t=>t.checked?1:0,mB=t=>t.checked?t.value:null,vB=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,gB=(t,n)=>{const e=ut();if(!e)return;const r=a=>{n.input==="select"?bB(e,ud(a),n):n.input==="radio"&&wB(e,ud(a),n)};dy(n.inputOptions)||hy(n.inputOptions)?(Ls(sa()),jl(n.inputOptions).then(a=>{t.hideLoading(),r(a)})):typeof n.inputOptions=="object"?r(n.inputOptions):Si(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof n.inputOptions}`)},yB=(t,n)=>{const e=t.getInput();e&&(Tn(e),jl(n.inputValue).then(r=>{e.value=n.input==="number"?`${parseFloat(r)||0}`:`${r}`,on(e),e.focus(),t.hideLoading()}).catch(r=>{Si(`Error in inputValue promise: ${r}`),e.value="",on(e),e.focus(),t.hideLoading()}))};function bB(t,n,e){const r=wo(t,he.select);if(!r)return;const a=(o,s,l)=>{const c=document.createElement("option");c.value=l,cr(c,s),c.selected=GC(l,e.inputValue),o.appendChild(c)};n.forEach(o=>{const s=o[0],l=o[1];if(Array.isArray(l)){const c=document.createElement("optgroup");c.label=s,c.disabled=!1,r.appendChild(c),l.forEach(f=>a(c,f[1],f[0]))}else a(r,l,s)}),r.focus()}function wB(t,n,e){const r=wo(t,he.radio);if(!r)return;n.forEach(o=>{const s=o[0],l=o[1],c=document.createElement("input"),f=document.createElement("label");c.type="radio",c.name=he.radio,c.value=s,GC(s,e.inputValue)&&(c.checked=!0);const h=document.createElement("span");cr(h,l),h.className=he.label,f.appendChild(c),f.appendChild(h),r.appendChild(f)});const a=r.querySelectorAll("input");a.length&&a[0].focus()}const ud=t=>{const n=[];return t instanceof Map?t.forEach((e,r)=>{let a=e;typeof a=="object"&&(a=ud(a)),n.push([r,a])}):Object.keys(t).forEach(e=>{let r=t[e];typeof r=="object"&&(r=ud(r)),n.push([e,r])}),n},GC=(t,n)=>!!n&&n.toString()===t.toString(),xB=t=>{const n=wt.innerParams.get(t);t.disableButtons(),n.input?XC(t,"confirm"):_y(t,!0)},SB=t=>{const n=wt.innerParams.get(t);t.disableButtons(),n.returnInputValueOnDeny?XC(t,"deny"):Cy(t,!1)},EB=(t,n)=>{t.disableButtons(),n(Ks.cancel)},XC=(t,n)=>{const e=wt.innerParams.get(t);if(!e.input){Si(`The "input" parameter is needed to be set when using returnInputValueOn${fy(n)}`);return}const r=t.getInput(),a=hB(t,e);e.inputValidator?CB(t,a,n):r&&!r.checkValidity()?(t.enableButtons(),t.showValidationMessage(e.validationMessage||r.validationMessage)):n==="deny"?Cy(t,a):_y(t,a)},CB=(t,n,e)=>{const r=wt.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>jl(r.inputValidator(n,r.validationMessage))).then(o=>{t.enableButtons(),t.enableInput(),o?t.showValidationMessage(o):e==="deny"?Cy(t,n):_y(t,n)})},Cy=(t,n)=>{const e=wt.innerParams.get(t||void 0);e.showLoaderOnDeny&&Ls(Ei()),e.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>jl(e.preDeny(n,e.validationMessage))).then(a=>{a===!1?(t.hideLoading(),Vl(t)):t.close({isDenied:!0,value:typeof a>"u"?n:a})}).catch(a=>YC(t||void 0,a))):t.close({isDenied:!0,value:n})},O2=(t,n)=>{t.close({isConfirmed:!0,value:n})},YC=(t,n)=>{t.rejectPromise(n)},_y=(t,n)=>{const e=wt.innerParams.get(t||void 0);e.showLoaderOnConfirm&&Ls(),e.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>jl(e.preConfirm(n,e.validationMessage))).then(a=>{qn(Zd())||a===!1?(t.hideLoading(),Vl(t)):O2(t,typeof a>"u"?n:a)}).catch(a=>YC(t||void 0,a))):O2(t,n)};function ld(){const t=wt.innerParams.get(this);if(!t)return;const n=wt.domCache.get(this);Tn(n.loader),eh()?t.icon&&on(Gs()):_B(n),_r([n.popup,n.actions],he.loading),n.popup.removeAttribute("aria-busy"),n.popup.removeAttribute("data-loading"),n.confirmButton.disabled=!1,n.denyButton.disabled=!1,n.cancelButton.disabled=!1}const _B=t=>{const n=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));n.length?on(n[0],"inline-block"):ZI()&&Tn(t.actions)};function KC(){const t=wt.innerParams.get(this),n=wt.domCache.get(this);return n?th(n.popup,t.input):null}function $C(t,n,e){const r=wt.domCache.get(t);n.forEach(a=>{r[a].disabled=e})}function QC(t,n){const e=ut();if(!(!e||!t))if(t.type==="radio"){const r=e.querySelectorAll(`[name="${he.radio}"]`);for(let a=0;a<r.length;a++)r[a].disabled=n}else t.disabled=n}function ZC(){$C(this,["confirmButton","denyButton","cancelButton"],!1)}function JC(){$C(this,["confirmButton","denyButton","cancelButton"],!0)}function e_(){QC(this.getInput(),!1)}function t_(){QC(this.getInput(),!0)}function n_(t){const n=wt.domCache.get(this),e=wt.innerParams.get(this);cr(n.validationMessage,t),n.validationMessage.className=he["validation-message"],e.customClass&&e.customClass.validationMessage&&ct(n.validationMessage,e.customClass.validationMessage),on(n.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",he["validation-message"]),TC(r),ct(r,he.inputerror))}function r_(){const t=wt.domCache.get(this);t.validationMessage&&Tn(t.validationMessage);const n=this.getInput();n&&(n.removeAttribute("aria-invalid"),n.removeAttribute("aria-describedby"),_r(n,he.inputerror))}const Rs={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},RB=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],AB={allowEnterKey:void 0},TB=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],a_=t=>Object.prototype.hasOwnProperty.call(Rs,t),o_=t=>RB.indexOf(t)!==-1,i_=t=>AB[t],kB=t=>{a_(t)||Dn(`Unknown parameter "${t}"`)},NB=t=>{TB.includes(t)&&Dn(`The parameter "${t}" is incompatible with toasts`)},DB=t=>{const n=i_(t);n&&CC(t,n)},s_=t=>{t.backdrop===!1&&t.allowOutsideClick&&Dn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(t.theme)&&Dn(`Invalid theme "${t.theme}"`);for(const n in t)kB(n),t.toast&&NB(n),DB(n)};function u_(t){const n=On(),e=ut(),r=wt.innerParams.get(this);if(!e||Ba(e,r.hideClass.popup)){Dn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const a=OB(t),o=Object.assign({},r,a);s_(o),n.dataset.swal2Theme=o.theme,LC(this,o),wt.innerParams.set(this,o),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const OB=t=>{const n={};return Object.keys(t).forEach(e=>{o_(e)?n[e]=t[e]:Dn(`Invalid parameter to update: ${e}`)}),n};function l_(){const t=wt.domCache.get(this),n=wt.innerParams.get(this);if(!n){c_(this);return}t.popup&&Pe.swalCloseEventFinishedCallback&&(Pe.swalCloseEventFinishedCallback(),delete Pe.swalCloseEventFinishedCallback),typeof n.didDestroy=="function"&&n.didDestroy(),Pe.eventEmitter.emit("didDestroy"),MB(this)}const MB=t=>{c_(t),delete t.params,delete Pe.keydownHandler,delete Pe.keydownTarget,delete Pe.currentInstance},c_=t=>{t.isAwaitingPromise?(iv(wt,t),t.isAwaitingPromise=!0):(iv(Ps,t),iv(wt,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},iv=(t,n)=>{for(const e in t)t[e].delete(n)};var IB=Object.freeze({__proto__:null,_destroy:l_,close:xo,closeModal:xo,closePopup:xo,closeToast:xo,disableButtons:JC,disableInput:t_,disableLoading:ld,enableButtons:ZC,enableInput:e_,getInput:KC,handleAwaitingPromise:Vl,hideLoading:ld,rejectPromise:WC,resetValidationMessage:r_,showValidationMessage:n_,update:u_});const BB=(t,n,e)=>{t.toast?FB(t,n,e):(LB(n),jB(n),zB(t,n,e))},FB=(t,n,e)=>{n.popup.onclick=()=>{t&&(PB(t)||t.timer||t.input)||e(Ks.close)}},PB=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let cd=!1;const LB=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(n){t.container.onmouseup=()=>{},n.target===t.container&&(cd=!0)}}},jB=t=>{t.container.onmousedown=n=>{n.target===t.container&&n.preventDefault(),t.popup.onmouseup=function(e){t.popup.onmouseup=()=>{},(e.target===t.popup||e.target instanceof HTMLElement&&t.popup.contains(e.target))&&(cd=!0)}}},zB=(t,n,e)=>{n.container.onclick=r=>{if(cd){cd=!1;return}r.target===n.container&&Qd(t.allowOutsideClick)&&e(Ks.backdrop)}},UB=t=>typeof t=="object"&&t.jquery,M2=t=>t instanceof Element||UB(t),qB=t=>{const n={};return typeof t[0]=="object"&&!M2(t[0])?Object.assign(n,t[0]):["title","html","icon"].forEach((e,r)=>{const a=t[r];typeof a=="string"||M2(a)?n[e]=a:a!==void 0&&Si(`Unexpected type of ${e}! Expected "string" or "Element", got ${typeof a}`)}),n};function HB(...t){return new this(...t)}function VB(t){class n extends this{_main(r,a){return super._main(r,Object.assign({},t,a))}}return n}const WB=()=>Pe.timeout&&Pe.timeout.getTimerLeft(),f_=()=>{if(Pe.timeout)return e4(),Pe.timeout.stop()},d_=()=>{if(Pe.timeout){const t=Pe.timeout.start();return wy(t),t}},GB=()=>{const t=Pe.timeout;return t&&(t.running?f_():d_())},XB=t=>{if(Pe.timeout){const n=Pe.timeout.increase(t);return wy(n,!0),n}},YB=()=>!!(Pe.timeout&&Pe.timeout.isRunning());let I2=!1;const wg={};function KB(t="data-swal-template"){wg[t]=this,I2||(document.body.addEventListener("click",$B),I2=!0)}const $B=t=>{for(let n=t.target;n&&n!==document;n=n.parentNode)for(const e in wg){const r=n.getAttribute(e);if(r){wg[e].fire({template:r});return}}};class QB{constructor(){this.events={}}_getHandlersByEventName(n){return typeof this.events[n]>"u"&&(this.events[n]=[]),this.events[n]}on(n,e){const r=this._getHandlersByEventName(n);r.includes(e)||r.push(e)}once(n,e){const r=(...a)=>{this.removeListener(n,r),e.apply(this,a)};this.on(n,r)}emit(n,...e){this._getHandlersByEventName(n).forEach(r=>{try{r.apply(this,e)}catch(a){console.error(a)}})}removeListener(n,e){const r=this._getHandlersByEventName(n),a=r.indexOf(e);a>-1&&r.splice(a,1)}removeAllListeners(n){this.events[n]!==void 0&&(this.events[n].length=0)}reset(){this.events={}}}Pe.eventEmitter=new QB;const ZB=(t,n)=>{Pe.eventEmitter.on(t,n)},JB=(t,n)=>{Pe.eventEmitter.once(t,n)},eF=(t,n)=>{if(!t){Pe.eventEmitter.reset();return}n?Pe.eventEmitter.removeListener(t,n):Pe.eventEmitter.removeAllListeners(t)};var tF=Object.freeze({__proto__:null,argsToParams:qB,bindClickHandler:KB,clickCancel:q4,clickConfirm:jC,clickDeny:U4,enableLoading:Ls,fire:HB,getActions:Ul,getCancelButton:Xs,getCloseButton:vy,getConfirmButton:sa,getContainer:On,getDenyButton:Ei,getFocusableElements:gy,getFooter:AC,getHtmlContainer:py,getIcon:Gs,getIconContent:XI,getImage:RC,getInputLabel:YI,getLoader:Ys,getPopup:ut,getProgressSteps:my,getTimerLeft:WB,getTimerProgressBar:Jd,getTitle:_C,getValidationMessage:Zd,increaseTimer:XB,isDeprecatedParameter:i_,isLoading:$I,isTimerRunning:YB,isUpdatableParameter:o_,isValidParameter:a_,isVisible:z4,mixin:VB,off:eF,on:ZB,once:JB,resumeTimer:d_,showLoading:Ls,stopTimer:f_,toggleTimer:GB});class nF{constructor(n,e){this.callback=n,this.remaining=e,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(n){const e=this.running;return e&&this.stop(),this.remaining+=n,e&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const h_=["swal-title","swal-html","swal-footer"],rF=t=>{const n=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!n)return{};const e=n.content;return fF(e),Object.assign(aF(e),oF(e),iF(e),sF(e),uF(e),lF(e),cF(e,h_))},aF=t=>{const n={};return Array.from(t.querySelectorAll("swal-param")).forEach(r=>{gi(r,["name","value"]);const a=r.getAttribute("name"),o=r.getAttribute("value");!a||!o||(typeof Rs[a]=="boolean"?n[a]=o!=="false":typeof Rs[a]=="object"?n[a]=JSON.parse(o):n[a]=o)}),n},oF=t=>{const n={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(r=>{const a=r.getAttribute("name"),o=r.getAttribute("value");!a||!o||(n[a]=new Function(`return ${o}`)())}),n},iF=t=>{const n={};return Array.from(t.querySelectorAll("swal-button")).forEach(r=>{gi(r,["type","color","aria-label"]);const a=r.getAttribute("type");!a||!["confirm","cancel","deny"].includes(a)||(n[`${a}ButtonText`]=r.innerHTML,n[`show${fy(a)}Button`]=!0,r.hasAttribute("color")&&(n[`${a}ButtonColor`]=r.getAttribute("color")),r.hasAttribute("aria-label")&&(n[`${a}ButtonAriaLabel`]=r.getAttribute("aria-label")))}),n},sF=t=>{const n={},e=t.querySelector("swal-image");return e&&(gi(e,["src","width","height","alt"]),e.hasAttribute("src")&&(n.imageUrl=e.getAttribute("src")||void 0),e.hasAttribute("width")&&(n.imageWidth=e.getAttribute("width")||void 0),e.hasAttribute("height")&&(n.imageHeight=e.getAttribute("height")||void 0),e.hasAttribute("alt")&&(n.imageAlt=e.getAttribute("alt")||void 0)),n},uF=t=>{const n={},e=t.querySelector("swal-icon");return e&&(gi(e,["type","color"]),e.hasAttribute("type")&&(n.icon=e.getAttribute("type")),e.hasAttribute("color")&&(n.iconColor=e.getAttribute("color")),n.iconHtml=e.innerHTML),n},lF=t=>{const n={},e=t.querySelector("swal-input");e&&(gi(e,["type","label","placeholder","value"]),n.input=e.getAttribute("type")||"text",e.hasAttribute("label")&&(n.inputLabel=e.getAttribute("label")),e.hasAttribute("placeholder")&&(n.inputPlaceholder=e.getAttribute("placeholder")),e.hasAttribute("value")&&(n.inputValue=e.getAttribute("value")));const r=Array.from(t.querySelectorAll("swal-input-option"));return r.length&&(n.inputOptions={},r.forEach(a=>{gi(a,["value"]);const o=a.getAttribute("value");if(!o)return;const s=a.innerHTML;n.inputOptions[o]=s})),n},cF=(t,n)=>{const e={};for(const r in n){const a=n[r],o=t.querySelector(a);o&&(gi(o,[]),e[a.replace(/^swal-/,"")]=o.innerHTML.trim())}return e},fF=t=>{const n=h_.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(e=>{const r=e.tagName.toLowerCase();n.includes(r)||Dn(`Unrecognized element <${r}>`)})},gi=(t,n)=>{Array.from(t.attributes).forEach(e=>{n.indexOf(e.name)===-1&&Dn([`Unrecognized attribute "${e.name}" on <${t.tagName.toLowerCase()}>.`,`${n.length?`Allowed attributes are: ${n.join(", ")}`:"To set the value, use HTML within the element."}`])})},p_=10,dF=t=>{const n=On(),e=ut();typeof t.willOpen=="function"&&t.willOpen(e),Pe.eventEmitter.emit("willOpen",e);const a=window.getComputedStyle(document.body).overflowY;mF(n,e,t),setTimeout(()=>{hF(n,e)},p_),yy()&&(pF(n,t.scrollbarPadding,a),$4()),!eh()&&!Pe.previousActiveElement&&(Pe.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(e)),Pe.eventEmitter.emit("didOpen",e),_r(n,he["no-transition"])},fd=t=>{const n=ut();if(t.target!==n)return;const e=On();n.removeEventListener("animationend",fd),n.removeEventListener("transitionend",fd),e.style.overflowY="auto"},hF=(t,n)=>{NC(n)?(t.style.overflowY="hidden",n.addEventListener("animationend",fd),n.addEventListener("transitionend",fd)):t.style.overflowY="auto"},pF=(t,n,e)=>{Q4(),n&&e!=="hidden"&&aB(e),setTimeout(()=>{t.scrollTop=0})},mF=(t,n,e)=>{ct(t,e.showClass.backdrop),e.animation?(n.style.setProperty("opacity","0","important"),on(n,"grid"),setTimeout(()=>{ct(n,e.showClass.popup),n.style.removeProperty("opacity")},p_)):on(n,"grid"),ct([document.documentElement,document.body],he.shown),e.heightAuto&&e.backdrop&&!e.toast&&ct([document.documentElement,document.body],he["height-auto"])};var B2={email:(t,n)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(n||"Invalid email address"),url:(t,n)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(n||"Invalid URL")};function vF(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=B2.email),t.input==="url"&&(t.inputValidator=B2.url))}function gF(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(Dn('Target parameter is not valid, defaulting to "body"'),t.target="body")}function yF(t){vF(t),t.showLoaderOnConfirm&&!t.preConfirm&&Dn(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),gF(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),u4(t)}let Zr;var Ef=new WeakMap;class Pt{constructor(...n){if(jI(this,Ef,void 0),typeof window>"u")return;Zr=this;const e=Object.freeze(this.constructor.argsToParams(n));this.params=e,this.isAwaitingPromise=!1,zI(Ef,this,this._main(Zr.params))}_main(n,e={}){if(s_(Object.assign({},e,n)),Pe.currentInstance){const o=Ps.swalPromiseResolve.get(Pe.currentInstance),{isAwaitingPromise:s}=Pe.currentInstance;Pe.currentInstance._destroy(),s||o({isDismissed:!0}),yy()&&qC()}Pe.currentInstance=Zr;const r=wF(n,e);yF(r),Object.freeze(r),Pe.timeout&&(Pe.timeout.stop(),delete Pe.timeout),clearTimeout(Pe.restoreFocusTimeout);const a=xF(Zr);return LC(Zr,r),wt.innerParams.set(Zr,r),bF(Zr,a,r)}then(n){return _2(Ef,this).then(n)}finally(n){return _2(Ef,this).finally(n)}}const bF=(t,n,e)=>new Promise((r,a)=>{const o=s=>{t.close({isDismissed:!0,dismiss:s})};Ps.swalPromiseResolve.set(t,r),Ps.swalPromiseReject.set(t,a),n.confirmButton.onclick=()=>{xB(t)},n.denyButton.onclick=()=>{SB(t)},n.cancelButton.onclick=()=>{EB(t,o)},n.closeButton.onclick=()=>{o(Ks.close)},BB(e,n,o),H4(Pe,e,o),dB(t,e),dF(e),SF(Pe,e,o),EF(n,e),setTimeout(()=>{n.container.scrollTop=0})}),wF=(t,n)=>{const e=rF(t),r=Object.assign({},Rs,n,e,t);return r.showClass=Object.assign({},Rs.showClass,r.showClass),r.hideClass=Object.assign({},Rs.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},xF=t=>{const n={popup:ut(),container:On(),actions:Ul(),confirmButton:sa(),denyButton:Ei(),cancelButton:Xs(),loader:Ys(),closeButton:vy(),validationMessage:Zd(),progressSteps:my()};return wt.domCache.set(t,n),n},SF=(t,n,e)=>{const r=Jd();Tn(r),n.timer&&(t.timeout=new nF(()=>{e("timer"),delete t.timeout},n.timer),n.timerProgressBar&&(on(r),ur(r,n,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&wy(n.timer)})))},EF=(t,n)=>{if(!n.toast){if(!Qd(n.allowEnterKey)){CC("allowEnterKey"),RF();return}CF(t)||_F(t,n)||bg(-1,1)}},CF=t=>{const n=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const e of n)if(e instanceof HTMLElement&&qn(e))return e.focus(),!0;return!1},_F=(t,n)=>n.focusDeny&&qn(t.denyButton)?(t.denyButton.focus(),!0):n.focusCancel&&qn(t.cancelButton)?(t.cancelButton.focus(),!0):n.focusConfirm&&qn(t.confirmButton)?(t.confirmButton.focus(),!0):!1,RF=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const t=new Date,n=localStorage.getItem("swal-initiation");n?(t.getTime()-Date.parse(n))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const e=document.createElement("audio");e.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",e.loop=!0,document.body.appendChild(e),setTimeout(()=>{e.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${t}`)}Pt.prototype.disableButtons=JC;Pt.prototype.enableButtons=ZC;Pt.prototype.getInput=KC;Pt.prototype.disableInput=t_;Pt.prototype.enableInput=e_;Pt.prototype.hideLoading=ld;Pt.prototype.disableLoading=ld;Pt.prototype.showValidationMessage=n_;Pt.prototype.resetValidationMessage=r_;Pt.prototype.close=xo;Pt.prototype.closePopup=xo;Pt.prototype.closeModal=xo;Pt.prototype.closeToast=xo;Pt.prototype.rejectPromise=WC;Pt.prototype.update=u_;Pt.prototype._destroy=l_;Object.assign(Pt,tF);Object.keys(IB).forEach(t=>{Pt[t]=function(...n){return Zr&&Zr[t]?Zr[t](...n):null}});Pt.DismissReason=Ks;Pt.version="11.22.2";const _t=Pt;_t.default=_t;typeof document<"u"&&function(t,n){var e=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(e),e.styleSheet)e.styleSheet.disabled||(e.styleSheet.cssText=n);else try{e.innerHTML=n}catch{e.innerText=n}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const ms=()=>localStorage.getItem("authToken")||sessionStorage.getItem("authToken");function Wl({user:t,onUserUpdate:n,loading:e=!1,disabled:r=!1,onLoggedOut:a}){const o=Qg(),{mode:s,subscriptionEnabled:l}=Zg(de=>de.auth),[c,f]=L.useState((t==null?void 0:t.name)||""),[h,p]=L.useState((t==null?void 0:t.description)||""),[v,g]=L.useState(null),[y,x]=L.useState({current:"",new:"",confirm:""}),[S,w]=L.useState(""),[T,A]=L.useState(""),[C,R]=L.useState(""),[k,N]=L.useState(!1),[O,{isLoading:D}]=LO(),[M,{isLoading:P}]=jO(),[F,{isLoading:U}]=zO(),[W,{isLoading:Y}]=UO(),[z,{isLoading:X}]=qO(),[K,{isLoading:V}]=HO();L.useEffect(()=>{t&&(f(t.name||""),p(t.description||""))},[t]),L.useEffect(()=>{N(D||P||U||Y||X||V)},[D,P,U,Y,X,V]);const I=async(de,we)=>{if(e||r||P)return;const Ce=ms();if(Ce)try{const Ae=await M({token:Ce,name:de,description:we}).unwrap();_t.fire({icon:"success",title:"Profile Updated",text:"Your profile was updated successfully!",showConfirmButton:!0,timer:5e3}),o(Uf(Ae.data)),n&&n(Ae.data)}catch{_t.fire({icon:"error",title:"Update Failed",text:"Failed to update profile.",showConfirmButton:!0})}},H=async()=>{if(e||r||U)return;if(!v){_t.fire({icon:"warning",title:"No File Selected",text:"Please select an image file.",showConfirmButton:!0});return}const de=ms(),we=new FormData;we.append("avatar",v);try{const Ce=await F({token:de,formData:we}).unwrap();_t.fire({icon:"success",title:"Profile Picture Uploaded",text:"Profile picture uploaded successfully.",showConfirmButton:!0}),g(null),o(Uf(Ce.data)),n&&n(Ce.data)}catch{_t.fire({icon:"error",title:"Upload Failed",text:"Failed to upload avatar.",showConfirmButton:!0})}},Q=async()=>{if(e||r||Y)return;const de=ms();if(!de)return;if((await _t.fire({title:"Remove Profile Picture?",text:"Are you sure you want to remove your profile picture?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d50000",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, remove it!"})).isConfirmed)try{const Ce=await W(de).unwrap();_t.fire("Removed!","Your profile picture has been removed.","success"),o(Uf(Ce.data)),n&&n(Ce.data)}catch{_t.fire("Failed","Failed to remove profile picture.","error")}},J=de=>{const we=/[\*\/@#$\-]/,Ce=/[0-9]/,Ae=/[a-z]/,Fe=/[A-Z]/;return de.length<8?"Password must be at least 8 characters long.":de.length>40?"Password must not exceed 40 characters.":Ce.test(de)?we.test(de)?Ae.test(de)?Fe.test(de)?null:"Password must contain at least one uppercase letter.":"Password must contain at least one lowercase letter.":"Password must contain at least one special character (*/-@#$).":"Password must contain at least one numeric character."},re=async()=>{var Ce,Ae;if(e||r||X)return;if(!y.current||!y.new||!y.confirm){A("All password fields are required.");return}if(y.new!==y.confirm){A("New password and confirmation do not match.");return}const de=J(y.new);if(de){A(de);return}const we=ms();try{await z({token:we,old_password:y.current,new_password:y.new,new_password_confirmation:y.confirm}).unwrap(),_t.fire({icon:"success",title:"Password Changed",text:"Your password was changed successfully!"}),x({current:"",new:"",confirm:""}),A(""),o(er("edit-menu"))}catch(Fe){console.log(Fe),A(((Ae=(Ce=Fe.data)==null?void 0:Ce.error)==null?void 0:Ae.message)||"Failed to change the password")}},ie=async()=>{if(e||r||D)return;const de=ms();try{de&&await O(de).unwrap()}catch(we){console.log("Logout error:",we)}finally{localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),a&&a()}},pe=async()=>{var we,Ce;if(e||r||V)return;if(!S){_t.fire({icon:"warning",title:"No Email Entered",text:"Please enter a new email address.",showConfirmButton:!0});return}const de=ms();if(!de){_t.fire({icon:"error",title:"Not Authenticated",text:"You are not logged in. Please log in again.",showConfirmButton:!0});return}try{await K({token:de,email:S}).unwrap(),_t.fire({icon:"success",title:"Verification Sent",text:"A verification link has been sent to your new email.",showConfirmButton:!0}),w(""),R(""),o(er("edit-menu"))}catch(Ae){console.log(Ae);const Fe=((Ce=(we=Ae.data)==null?void 0:we.error)==null?void 0:Ce.message)||"Failed to change email";R(Fe),_t.fire({icon:"error",title:"Change email failed",text:Fe})}},Se=()=>{window.location.href="/"};let xe,Ee=E.jsx("div",{className:"asg33-section asg33-secondary"});return s==="summary"?xe=E.jsx("div",{className:"asg33-section asg33-primary",children:E.jsxs("div",{className:"asg33-content",children:[E.jsxs("div",{className:"asg33-heading",children:[E.jsx("div",{className:"asg33-heading-logo"}),E.jsx("div",{className:"asg33-heading-title",children:"Account Manager"}),E.jsx("div",{className:"asg33-heading-description",children:"You can update your details here"})]}),E.jsxs("div",{className:"asg33-profile",children:[E.jsx("div",{className:"asg33-profile-avatar","data-active":!0,children:E.jsx("img",{src:(t==null?void 0:t.avatar)||"/default-profile.svg",alt:"Profile",style:{width:"100%",height:"100%",objectFit:"cover"},onError:de=>{de.target.src="/default-profile.svg"}})}),E.jsxs("div",{className:"asg33-profile-data",children:[E.jsx("div",{className:"asg33-profile-name",children:(t==null?void 0:t.name)||"User Name"}),E.jsx("div",{className:"asg33-profile-email",children:t==null?void 0:t.email}),E.jsx("div",{className:"asg33-profile-description",children:t==null?void 0:t.description})]}),E.jsxs("div",{className:"asg33-profile-buttons",children:[E.jsx("button",{className:"asg33-profile-button asg33-edit",onClick:()=>o(er("edit-menu")),disabled:e||r}),E.jsx("button",{className:"asg33-profile-button asg33-logout",onClick:ie,disabled:e||r||k})]}),E.jsxs("div",{className:"asg33-profile-subscription",children:[E.jsx("input",{type:"checkbox",className:"asg33-profile-subscription-switch",checked:l,onChange:de=>o(WO(de.target.checked)),disabled:r}),E.jsx("span",{className:"asg33-profile-subscription-text",children:"Email Subscription"})]}),E.jsx("button",{className:"asg33-action",onClick:Se,disabled:e||r,children:"Go to Homepage"})]})]})}):s==="edit-menu"?xe=E.jsx("div",{className:"asg33-section asg33-primary",children:E.jsxs("div",{className:"asg33-content",children:[E.jsxs("div",{className:"asg33-heading",children:[E.jsx("div",{className:"asg33-heading-logo"}),E.jsx("div",{className:"asg33-heading-title",children:"Edit Profile"}),E.jsx("div",{className:"asg33-heading-description",children:"Update your details and security options"})]}),E.jsxs("div",{className:"asg33-editor",children:[E.jsx("div",{className:"asg33-question","data-align":"left",children:E.jsx("button",{className:"asg33-question-link",onClick:()=>o(er("edit-info")),disabled:e||r,children:"Update Name and Description"})}),E.jsx("div",{className:"asg33-question","data-align":"left",children:E.jsx("button",{className:"asg33-question-link",onClick:()=>o(er("edit-avatar")),disabled:e||r,children:"Update or Remove Avatar"})}),E.jsx("div",{className:"asg33-question","data-align":"left",children:E.jsx("button",{className:"asg33-question-link",onClick:()=>o(er("edit-password")),disabled:e||r,children:"Change Password"})}),E.jsx("div",{className:"asg33-question","data-align":"left",children:E.jsx("button",{className:"asg33-question-link",onClick:()=>o(er("edit-email")),disabled:e||r,children:"Change Email"})}),E.jsx("button",{className:"asg33-action",onClick:()=>o(er("summary")),disabled:e||r,children:"Go Back"})]})]})}):s==="edit-info"?xe=E.jsx("div",{className:"asg33-section primary",children:E.jsxs("div",{className:"asg33-content",children:[E.jsxs("div",{className:"asg33-heading",children:[E.jsx("div",{className:"asg33-heading-logo"}),E.jsx("div",{className:"asg33-heading-title",children:"Name and Description"}),E.jsx("div",{className:"asg33-heading-description",children:"Your name and a short description about you"})]}),E.jsxs("div",{className:"asg33-editor",children:[E.jsx("input",{className:"asg33-input name",type:"text",id:"name",value:c,onChange:de=>f(de.target.value),placeholder:"Name",disabled:e||r}),E.jsx("input",{className:"asg33-input description",id:"description",value:h,onChange:de=>p(de.target.value),placeholder:"Description",disabled:e||r}),E.jsxs("div",{className:"asg33-editor-cols",children:[E.jsx("button",{className:"asg33-action",onClick:()=>o(er("edit-menu")),disabled:e||r,children:"Close"}),E.jsx("button",{className:"asg33-action",onClick:()=>{I(c,h),o(er("summary"))},disabled:e||r,children:"Save Details"})]})]})]})}):s==="edit-avatar"?xe=E.jsx("div",{className:"asg33-section primary",children:E.jsxs("div",{className:"asg33-content",children:[E.jsxs("div",{className:"asg33-heading",children:[E.jsx("div",{className:"asg33-heading-logo"}),E.jsx("div",{className:"asg33-heading-title",children:"Update Avatar"}),E.jsx("div",{className:"asg33-heading-description",children:"Display image for your profile"})]}),E.jsxs("div",{className:"asg33-editor",children:[E.jsxs("div",{className:"asg33-profile",children:[E.jsxs("div",{className:"asg33-profile-avatar large","data-active":!0,children:[E.jsx("img",{src:v?URL.createObjectURL(v):(t==null?void 0:t.avatar)||"/default-profile.svg",alt:"Profile",style:{width:"100%",height:"100%",objectFit:"cover"},onError:de=>{de.target.src="/default-profile.svg"}}),E.jsxs("label",{htmlFor:"avatar-upload-input",children:[E.jsx("input",{id:"avatar-upload-input",type:"file",accept:"image/*",style:{display:"none"},onChange:de=>{de.target.files&&de.target.files[0]&&g(de.target.files[0])},disabled:e||r}),E.jsx("button",{className:"asg33-profile-avatar-upload",disabled:e||r})]})]}),E.jsxs("div",{className:"asg33-profile-buttons",children:[E.jsx("button",{className:"asg33-profile-button upload",onClick:H,disabled:e||r}),E.jsx("button",{className:"asg33-profile-button remove",onClick:Q,disabled:e||r})]})]}),E.jsx("button",{className:"asg33-action",onClick:()=>o(er("edit-menu")),disabled:e||r,children:"Close"})]})]})}):s==="edit-password"?xe=E.jsx("div",{className:"asg33-section primary",children:E.jsxs("div",{className:"asg33-content",children:[E.jsxs("div",{className:"asg33-heading",children:[E.jsx("div",{className:"asg33-heading-logo"}),E.jsx("div",{className:"asg33-heading-title",children:"Change Password"}),E.jsx("div",{className:"asg33-heading-description",children:"Make your account safe and secure"})]}),E.jsxs("div",{className:"asg33-editor",children:[E.jsx("input",{className:"asg33-input password",type:"password",autoComplete:"current-password",value:y.current,onChange:de=>{x({...y,current:de.target.value}),A("")},placeholder:"Current Password",disabled:e||r}),E.jsx("input",{className:"asg33-input password",type:"password",autoComplete:"new-password",value:y.new,onChange:de=>{x({...y,new:de.target.value}),A("")},placeholder:"New Password",disabled:e||r}),E.jsx("input",{className:"asg33-input password",type:"password",autoComplete:"new-password",value:y.confirm,onChange:de=>{x({...y,confirm:de.target.value}),A("")},placeholder:"Confirm New Password",disabled:e||r}),T&&E.jsx("div",{className:"alert error",children:E.jsx("div",{className:"alert-message",children:T})}),E.jsxs("div",{className:"editor-cols",children:[E.jsx("button",{className:"asg33-action",onClick:()=>o(er("edit-menu")),disabled:e||r,children:"Close"}),E.jsx("button",{className:"asg33-action",onClick:re,disabled:e||r,children:"Change Password"})]})]})]})}):s==="edit-email"&&(xe=E.jsx("div",{className:"asg33-section primary",children:E.jsxs("div",{className:"asg33-content",children:[E.jsxs("div",{className:"asg33-heading",children:[E.jsx("div",{className:"asg33-heading-logo"}),E.jsx("div",{className:"asg33-heading-title",children:"Change Email"}),E.jsx("div",{className:"asg33-heading-description",children:"We will send a verification link to your new email"})]}),E.jsxs("div",{className:"editor",children:[E.jsx("input",{className:"asg33-input email",type:"email",value:S,onChange:de=>w(de.target.value),placeholder:"New Email",disabled:e||r}),C&&E.jsx("div",{className:"asg33-alert error",children:E.jsx("div",{className:"asg33-alert-message",children:C})}),E.jsxs("div",{className:"asg33-editor-cols",children:[E.jsx("button",{className:"asg33-action",onClick:()=>o(er("edit-menu")),disabled:e||r,children:"Close"}),E.jsx("button",{className:"asg33-action",onClick:pe,disabled:e||r,children:"Send verification"})]})]})]})})),E.jsx("div",{className:"asg33-app",children:E.jsxs("div",{className:"asg33-container",children:[xe,Ee]})})}function AF(){const[t,n]=L.useState({email:"",password:""}),[e,r]=L.useState(""),[a,o]=L.useState(""),[s,l]=L.useState(null),[c,f]=L.useState(!1),[h,p]=L.useState(!1),[v,g]=L.useState(!1);L.useEffect(()=>{const A=y();A?qe.get("https://auth.dnjs.lk/api/user",{headers:{Authorization:`Bearer ${A}`}}).then(C=>{l(C.data),o("You are already logged in."),g(!0)}).catch(C=>{localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),l(null),o(""),g(!1)}):g(!1)},[]),L.useEffect(()=>{if(a){const A=setTimeout(()=>o(""),5e3);return()=>clearTimeout(A)}},[a]);const y=()=>localStorage.getItem("authToken")||sessionStorage.getItem("authToken"),x=()=>{const A=y();A&&qe.get("https://auth.dnjs.lk/api/user",{headers:{Authorization:`Bearer ${A}`}}).then(C=>{console.log("User Data : ",C.data),l(C.data)}).catch(C=>{console.error("Failed to fetch user : ",C),localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),l(null),o("")})},S=A=>{n({...t,[A.target.name]:A.target.value}),r("")},w=A=>{A.preventDefault(),r(""),o(""),qe.post("https://auth.dnjs.lk/api/login",{email:t.email,password:t.password},{headers:{"Content-Type":"application/json"}}).then(C=>{console.log("Login response data:",C.data);const R=C.data.access_token;h?localStorage.setItem("authToken",R):sessionStorage.setItem("authToken",R),x(),r(""),o("You have logged!"),g(!0)}).catch(C=>{var R,k;console.log(C),o(""),r(((k=(R=C.response)==null?void 0:R.data)==null?void 0:k.message)||"Login failed"),g(!1)})},T=()=>{const A=y();if(!A){localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),l(null),o("You are logged out."),r(""),g(!1),n({email:"",password:""});return}qe.post("https://auth.dnjs.lk/api/logout",{},{headers:{Authorization:`Bearer ${A}`}}).then(C=>{console.log("Logged out:",C.data),localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),l(null),o("You are logged out."),r(""),g(!1),n({email:"",password:""})}).catch(C=>{console.error("Logout error:",C),r("Logout failed. Please try again."),o(""),g(!1),n({email:"",password:""})})};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment - 13"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsx("div",{className:"asg10-login-container",children:v?s?E.jsx(Wl,{user:s,success:a,handleLogout:T,setLogged:g}):null:E.jsx(Ll,{post:t,error:e,success:a,showPassword:c,keepLoggedIn:h,setShowPassword:f,setKeepLoggedIn:p,handleInput:S,handleSubmit:w,setLogged:g})})]})}function TF(){const[t,n]=L.useState({email:"",password:""}),[e,r]=L.useState(""),[a,o]=L.useState(""),[s,l]=L.useState(null),[c,f]=L.useState(!1),[h,p]=L.useState(!1),[v,g]=L.useState(!1);L.useEffect(()=>{const C=y();C?qe.get("https://auth.dnjs.lk/api/user",{headers:{Authorization:`Bearer ${C}`}}).then(R=>{l(R.data),o("You are already logged in."),g(!0)}).catch(R=>{localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),l(null),o(""),g(!1)}):g(!1)},[]),L.useEffect(()=>{if(a){const C=setTimeout(()=>o(""),5e3);return()=>clearTimeout(C)}},[a]);const y=()=>localStorage.getItem("authToken")||sessionStorage.getItem("authToken"),x=()=>{const C=y();C&&qe.get("https://auth.dnjs.lk/api/user",{headers:{Authorization:`Bearer ${C}`}}).then(R=>{console.log("User Data : ",R.data),l(R.data)}).catch(R=>{console.error("Failed to fetch user : ",R),localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),l(null),o("")})},S=C=>{n({...t,[C.target.name]:C.target.value}),r("")},w=C=>{C.preventDefault(),r(""),o(""),qe.post("https://auth.dnjs.lk/api/login",{email:t.email,password:t.password},{headers:{"Content-Type":"application/json"}}).then(R=>{console.log("Login response data:",R.data);const k=R.data.access_token;h?localStorage.setItem("authToken",k):sessionStorage.setItem("authToken",k),x(),r(""),o("You have logged!"),g(!0)}).catch(R=>{var k,N;console.log(R),o(""),r(((N=(k=R.response)==null?void 0:k.data)==null?void 0:N.message)||"Login failed"),g(!1)})},T=()=>{const C=y();if(!C){localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),l(null),o("You are logged out."),r(""),g(!1),n({email:"",password:""});return}qe.post("https://auth.dnjs.lk/api/logout",{},{headers:{Authorization:`Bearer ${C}`}}).then(R=>{console.log("Logged out:",R.data),localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),l(null),o("You are logged out."),r(""),g(!1),n({email:"",password:""})}).catch(R=>{console.error("Logout error:",R),r("Logout failed. Please try again."),o(""),g(!1),n({email:"",password:""})})},A=(C,R)=>{const k=y();k&&qe.put("https://auth.dnjs.lk/api/user",{name:C,description:R},{headers:{Authorization:`Bearer ${k}`,"Content-Type":"application/json"}}).then(N=>{console.log("Profile Updated Successfully"),_t.fire({icon:"success",title:"Profile Updated",text:"Your profile was updated successfully!",showConfirmButton:!0,timer:5e3}),l(N.data)}).catch(N=>{console.log("Update Failed",N),_t.fire({icon:"error",title:"Update Failed",text:"Failed to update profile.",showConfirmButton:!0})})};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment - 14"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsx("div",{className:"asg10-login-container",children:v?s?E.jsx(Wl,{user:s,success:a,handleLogout:T,setLogged:g,handleProfileUpdate:A}):null:E.jsx(Ll,{post:t,error:e,success:a,showPassword:c,keepLoggedIn:h,setShowPassword:f,setKeepLoggedIn:p,handleInput:S,handleSubmit:w,setLogged:g})})]})}function kF(){const[t,n]=L.useState({email:"",password:""}),[e,r]=L.useState(""),[a,o]=L.useState(""),[s,l]=L.useState(null),[c,f]=L.useState(!1),[h,p]=L.useState(!1),[v,g]=L.useState(!1),[y,x]=L.useState(null),[S,w]=L.useState("");L.useEffect(()=>{const D=T();D?qe.get("https://auth.dnjs.lk/api/user",{headers:{Authorization:`Bearer ${D}`}}).then(M=>{l(M.data),o("You are already logged in."),g(!0)}).catch(M=>{localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),l(null),o(""),g(!1)}):g(!1)},[]),L.useEffect(()=>{if(a){const D=setTimeout(()=>o(""),5e3);return()=>clearTimeout(D)}},[a]);const T=()=>localStorage.getItem("authToken")||sessionStorage.getItem("authToken"),A=()=>{const D=T();D&&qe.get("https://auth.dnjs.lk/api/user",{headers:{Authorization:`Bearer ${D}`}}).then(M=>{console.log("User Data : ",M.data),l(M.data)}).catch(M=>{console.error("Failed to fetch user : ",M),localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),l(null),o("")})},C=D=>{n({...t,[D.target.name]:D.target.value}),r("")},R=D=>{D.preventDefault(),r(""),o(""),qe.post("https://auth.dnjs.lk/api/login",{email:t.email,password:t.password},{headers:{"Content-Type":"application/json"}}).then(M=>{console.log("Login response data:",M.data);const P=M.data.access_token;h?localStorage.setItem("authToken",P):sessionStorage.setItem("authToken",P),A(),r(""),o("You have logged!"),g(!0)}).catch(M=>{var P,F;console.log(M),o(""),r(((F=(P=M.response)==null?void 0:P.data)==null?void 0:F.message)||"Login failed"),g(!1)})},k=()=>{const D=T();if(!D){localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),l(null),o("You are logged out."),r(""),g(!1),n({email:"",password:""});return}qe.post("https://auth.dnjs.lk/api/logout",{},{headers:{Authorization:`Bearer ${D}`}}).then(M=>{console.log("Logged out:",M.data),localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),l(null),o("You are logged out."),r(""),g(!1),n({email:"",password:""})}).catch(M=>{console.error("Logout error:",M),r("Logout failed. Please try again."),o(""),g(!1),n({email:"",password:""})})},N=(D,M)=>{const P=T();P&&qe.put("https://auth.dnjs.lk/api/user",{name:D,description:M},{headers:{Authorization:`Bearer ${P}`,"Content-Type":"application/json"}}).then(F=>{console.log("Profile Updated Successfully"),_t.fire({icon:"success",title:"Profile Updated",text:"Your profile was updated successfully!",showConfirmButton:!0,timer:5e3}),l(F.data)}).catch(F=>{console.log("Update Failed",F),_t.fire({icon:"error",title:"Update Failed",text:"Failed to update profile.",showConfirmButton:!0})})},O=()=>{if(w(""),!y){_t.fire({icon:"warning",title:"No File Selected",text:"Please select an image file.",showConfirmButton:!0});return}const D=T(),M=new FormData;M.append("avatar",y),qe.post("https://auth.dnjs.lk/api/avatar",M,{headers:{Authorization:`Bearer ${D}`,"Content-Type":"multipart/form-data"}}).then(P=>{_t.fire({icon:"success",title:"Profile Picture Uploaded",text:"Profile picture uploaded successfully.",showConfirmButton:!0}),w(""),x(null),A()}).catch(P=>{console.error("Avatar upload failed : ",P),_t.fire({icon:"error",title:"Upload Failed",text:"Failed to upload avatar.",showConfirmButton:!0}),w("Failed to upload avatar.")})};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment - 15"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsx("div",{className:"asg10-login-container",children:v?s?E.jsx(Wl,{user:s,success:a,handleLogout:k,setLogged:g,handleProfileUpdate:N,avatarFile:y,setAvatarFile:x,handleAvatarUpload:O,avatarUploadMessage:S}):null:E.jsx(Ll,{post:t,error:e,success:a,showPassword:c,keepLoggedIn:h,setShowPassword:f,setKeepLoggedIn:p,handleInput:C,handleSubmit:R,setLogged:g})})]})}function NF(){const[t,n]=L.useState(null),[e,r]=L.useState(!1),[a,o]=L.useState(""),[s,l]=L.useState(!1);L.useEffect(()=>{const v=c();v?(l(!0),qe.get("https://auth.dnjs.lk/api/user",{headers:{Authorization:`Bearer ${v}`}}).then(g=>{n(g.data),o("You are already logged in."),r(!0)}).catch(()=>{localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),n(null),o(""),r(!1)}).finally(()=>l(!1))):r(!1)},[]),L.useEffect(()=>{if(a){const v=setTimeout(()=>o(""),5e3);return()=>clearTimeout(v)}},[a]);const c=()=>localStorage.getItem("authToken")||sessionStorage.getItem("authToken"),f=(v,g,y)=>{l(!0),y?localStorage.setItem("authToken",g):sessionStorage.setItem("authToken",g),n(v),r(!0),o("You have logged in!"),l(!1)},h=v=>{n(v)},p=()=>{n(null),o("You are logged out."),r(!1)};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{disabled:s}),E.jsx("h1",{className:"assignment-title",children:"Assignment - 16"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsx("div",{className:"asg10-login-container",children:e?t?E.jsx(Wl,{user:t,onUserUpdate:h,loading:s,disabled:s,onLoggedOut:p}):null:E.jsx(Ll,{onLoginSuccess:f,success:a,loading:s,disabled:s})})]})}function DF(){const[t,n]=L.useState("#ff0000"),[e,r]=L.useState("#0000ff"),[a,o]=L.useState("#000000"),[s,l]=L.useState([255,0,0]),[c,f]=L.useState([0,0,255]),h=x=>{x=x.replace("#","");const S=parseInt(x.substring(0,2),16),w=parseInt(x.substring(2,4),16),T=parseInt(x.substring(4,6),16);return[S,w,T]},p=x=>{const S=x.target.value;n(S);const w=h(S);l(w)},v=x=>{const S=x.target.value;r(S);const w=h(S);f(w)},g=()=>{let x=s[0]+c[0],S=s[1]+c[1],w=s[2]+c[2];x=Math.min(x,255),S=Math.min(S,255),w=Math.min(w,255);const T=y(x,S,w);o(T)},y=(x,S,w)=>{const T=A=>A.toString(16).padStart(2,"0").toUpperCase();return`#${T(x)}${T(S)}${T(w)}`};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-17"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsxs("div",{className:"color-mixer-container",children:[E.jsx("div",{className:"color-mixer-title",children:"Color Mixer"}),E.jsxs("div",{className:"color-mixer-row",children:[E.jsx("label",{className:"color-mixer-label",children:"Color 1:"}),E.jsx("input",{type:"color",className:"color-mixer-input",value:t,onChange:p})]}),E.jsxs("div",{className:"color-mixer-row",children:[E.jsx("label",{className:"color-mixer-label",children:"Color 2:"}),E.jsx("input",{type:"color",className:"color-mixer-input",value:e,onChange:v})]}),E.jsx("button",{className:"color-mixer-btn",onClick:g,children:"Add RGB"}),E.jsx("div",{className:"color-mixer-output",children:E.jsx("div",{className:"color-mixer-output-color",style:{"--output-color":a,background:a}})}),E.jsxs("div",{className:"color-mixer-output-label",children:["Output HEX Color: ",a]}),E.jsx("div",{className:"color-mixer-gradient",style:{"--gradient-bg":`linear-gradient(to right, ${t}, ${a}, ${e})`,background:`linear-gradient(to right, ${t}, ${a}, ${e})`},children:E.jsx("span",{className:"color-mixer-gradient-label",children:"Gradient: Color 1 → Mixed → Color 2"})})]})]})}function OF(){const[t,n]=L.useState([]),[e,r]=L.useState(0),[a,o]=L.useState(!1),[s,l]=L.useState(!1),[c,f]=L.useState(!1),h=L.useRef(null);L.useEffect(()=>{if(!(!s||a))return h.current=setInterval(()=>{n(y=>{const S=Math.random()<.5?"blue":"red",w=[...y];return w.unshift(S),w.length>6&&(o(!0),f(!0),clearInterval(h.current)),w})},1e3),()=>clearInterval(h.current)},[s,a]),L.useEffect(()=>{if(a&&c){const y=setTimeout(()=>{f(!1),l(!1)},15e3);return()=>clearTimeout(y)}},[a,c]);function p(y){!s||a||n(x=>x.length===0?x:x[x.length-1]===y?(r(w=>w+1),x.slice(0,-1)):(o(!0),f(!0),clearInterval(h.current),x))}function v(){n([]),r(0),o(!1),f(!1),l(!1),clearInterval(h.current)}function g(){n([]),r(0),o(!1),l(!0)}return E.jsxs("div",{className:"color-clicker-container",children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:c?"Game Over!":"Color Clicker Game"}),E.jsxs("div",{className:"score-panel",children:[E.jsx("span",{className:"score-label",children:"Score:"})," ",E.jsx("span",{className:"score-value",children:e}),E.jsx("span",{className:"score-icon","data-gameover":a})]}),!s&&E.jsx("div",{className:"start-panel",children:E.jsx("button",{className:"start-btn",onClick:g,children:"Start Game"})}),s&&E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"game-board",children:E.jsx("div",{className:"color-stack",children:t.map((y,x)=>E.jsx("div",{className:`color-block color-block-${y}`},x))})}),E.jsxs("div",{className:"button-panel",children:[E.jsx("button",{className:"color-btn color-btn-red",disabled:a,onClick:()=>p("red"),children:"Red"}),E.jsx("button",{className:"color-btn color-btn-blue",disabled:a,onClick:()=>p("blue"),children:"Blue"})]})]}),c&&E.jsx("div",{className:"game-over-modal",children:E.jsxs("div",{className:"game-over-content",style:{boxShadow:"none",background:"none",padding:0,textAlign:"center"},children:[E.jsxs("p",{style:{marginTop:0},children:["Your final score: ",E.jsx("span",{className:"final-score",children:e})]}),E.jsx("button",{className:"restart-btn",onClick:v,children:"Restart"})]})})]})}function MF(){const[t,n]=L.useState([]),[e,r]=L.useState(0),[a,o]=L.useState(0),[s,l]=L.useState(!1);L.useEffect(()=>{qe.get("https://apis.dnjs.lk/objects/quiz.php").then(h=>{n(h.data),console.log("Fetched questions:",h)}).catch(h=>{console.error("Error fetching quiz data",h)})},[]);const c=h=>{const p=t[e].correct;console.log("Selected answer:",h),console.log("Correct answer:",p),parseInt(h)===p&&o(g=>{const y=g+1;return console.log("Score incremented to:",y),y});const v=e+1;console.log("Next question index:",v,"Total questions:",t.length),v<t.length?(r(v),console.log("Moving to question:",v)):(l(!0),console.log("Quiz completed. Final score:",a+(parseInt(h)===p?1:0)))},f=t[e];return E.jsxs("div",{className:"quiz-container",children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-19"}),E.jsx("div",{className:"quiz-progress",children:s?null:`Question ${e+1} of ${t.length}`}),s?E.jsxs("div",{className:"quiz-completed",children:[E.jsx("h2",{children:"Quiz Completed"}),E.jsxs("div",{className:"quiz-score",children:["Your Score: ",a," out of ",t.length]}),E.jsx("button",{className:"quiz-restart-btn",onClick:()=>{r(0),o(0),l(!1)},children:"Restart Quiz"})]}):f&&E.jsxs("div",{children:[E.jsx("div",{className:"quiz-question",children:f.question}),E.jsxs("div",{className:"quiz-answers-row",children:[E.jsx("div",{className:"quiz-answers-col",children:f.answers.slice(0,2).map((h,p)=>h?E.jsxs("button",{className:"quiz-answer-btn",onClick:()=>c(p),children:[E.jsxs("span",{className:"quiz-answer-number",children:[p+1,"."]})," ",h]},p):null)}),E.jsx("div",{className:"quiz-answers-col",children:f.answers.slice(2,4).map((h,p)=>h?E.jsxs("button",{className:"quiz-answer-btn",onClick:()=>c(p+2),children:[E.jsxs("span",{className:"quiz-answer-number",children:[p+3,"."]})," ",h]},p+2):null)})]})]})]})}function IF(){const[t,n]=L.useState([]),[e,r]=L.useState(0),[a,o]=L.useState(0),[s,l]=L.useState(!1),[c,f]=L.useState([]),[h,p]=L.useState(0);L.useEffect(()=>{qe.get("https://apis.dnjs.lk/objects/quiz.php").then(w=>{n(w.data),console.log("Fetched questions:",w.data)}).catch(w=>{console.error("Error fetching quiz data",w)})},[]);const v=w=>{const T=t[e].correct;f(C=>[...C,w]),parseInt(w)===T&&o(C=>C+1);const A=e+1;A<t.length?r(A):(l(!0),p(0))},g=()=>{h<t.length-1&&p(h+1)},y=()=>{h>0&&p(h-1)},x=t[e],S=t[h];return E.jsxs("div",{className:"quiz-container",children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-20"}),s?E.jsxs("div",{className:"quiz-completed",children:[E.jsx("h2",{children:"Quiz Completed"}),E.jsxs("div",{className:"quiz-score",children:["Your Score: ",a," out of ",t.length]}),S&&E.jsxs("div",{className:"review-section",children:[E.jsxs("h3",{children:["Review: Question ",h+1]}),E.jsx("div",{className:"review-answers",children:S.answers.map((w,T)=>{if(!w)return null;const A=S.correct,C=parseInt(c[h]);let R="review-answer";return T===A&&T===C?R+=" review-answer-correct-selected":T===A?R+=" review-answer-correct":T===C&&(R+=" review-answer-selected"),E.jsxs("div",{className:R,children:[T+1,". ",w]},T)})}),E.jsx("div",{className:"review-question-text",children:E.jsx("strong",{children:S.question})}),E.jsxs("div",{className:"review-navigation",children:[E.jsx("button",{onClick:y,disabled:h===0,children:"Last"}),E.jsx("button",{onClick:g,disabled:h===t.length-1,children:"Next"})]})]}),E.jsx("button",{className:"quiz-restart-btn",style:{marginTop:24},onClick:()=>{r(0),o(0),l(!1),f([]),p(0)},children:"Restart Quiz"})]}):E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"quiz-progress",children:["Question ",e+1," of ",t.length]}),x&&E.jsxs("div",{children:[E.jsx("div",{className:"quiz-question",children:x.question}),E.jsxs("div",{className:"quiz-answers-row",children:[E.jsx("div",{className:"quiz-answers-col",children:x.answers.slice(0,2).map((w,T)=>w?E.jsxs("button",{className:"quiz-answer-btn",onClick:()=>v(T),children:[E.jsxs("span",{className:"quiz-answer-number",children:[T+1,"."]})," ",w]},T):null)}),E.jsx("div",{className:"quiz-answers-col",children:x.answers.slice(2,4).map((w,T)=>w?E.jsxs("button",{className:"quiz-answer-btn",onClick:()=>v(T+2),children:[E.jsxs("span",{className:"quiz-answer-number",children:[T+3,"."]})," ",w]},T+2):null)})]})]})]})]})}function BF(){const t=L.useRef(null),n=L.useRef(null),[e,r]=L.useState(""),[a,o]=L.useState(""),[s,l]=L.useState(null),c=400,f=320,h=g=>{const y=g.target.files[0];if(y){const x=URL.createObjectURL(y);l(x)}},p=()=>{const g=t.current,y=g.getContext("2d",{willReadFrequently:!0}),x=n.current;let S=Math.min(c/x.naturalWidth,f/x.naturalHeight,1);const w=Math.round(x.naturalWidth*S),T=Math.round(x.naturalHeight*S);g.width=w,g.height=T,y.clearRect(0,0,w,T),y.drawImage(x,0,0,w,T)},v=g=>{const y=t.current,x=y.getContext("2d",{willReadFrequently:!0}),S=y.getBoundingClientRect(),w=y.width/S.width,T=y.height/S.height,A=Math.floor((g.clientX-S.left)*w),C=Math.floor((g.clientY-S.top)*T);if(A<0||C<0||A>=y.width||C>=y.height)return;const R=x.getImageData(A,C,1,1).data,[k,N,O]=R,D=`rgb(${k},${N},${O})`,M=`#${k.toString(16).padStart(2,"0")}${N.toString(16).padStart(2,"0")}${O.toString(16).padStart(2,"0")}`;r(D),o(M)};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-21"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsxs("div",{className:"color-picker-container",children:[E.jsx("div",{className:"color-picker-title",children:"Color Picker from Image"}),E.jsx("label",{htmlFor:"upload-image",className:"upload-btn-label",onClick:()=>{document.getElementById("upload-image").click()},children:E.jsx("button",{type:"button",tabIndex:-1,children:"Upload"})}),E.jsx("input",{id:"upload-image",type:"file",accept:"image/*",onChange:h,style:{display:"none"}}),s&&E.jsx("div",{className:"canvas-area-row",children:E.jsxs("div",{className:"canvas-area-canvas-wrapper",style:{display:"inline-block",textAlign:"center"},children:[E.jsx("img",{ref:n,src:s,alt:"uploaded",style:{display:"none"},onLoad:p}),E.jsx("canvas",{ref:t,onClick:v,className:"color-canvas",style:{cursor:"crosshair"}})]})}),E.jsxs("div",{className:"color-info",children:[E.jsxs("div",{className:"color-row",children:[E.jsx("strong",{children:"RGB:"})," ",e]}),E.jsxs("div",{className:"color-row",children:[E.jsx("strong",{children:"Hex:"})," ",a]}),a&&E.jsx("div",{className:"color-preview",style:{backgroundColor:a}})]})]})]})}function FF(){const[t,n]=L.useState(null),[e,r]=L.useState(0),[a,o]=L.useState(100),[s,l]=L.useState(100),[c,f]=L.useState(0),[h,p]=L.useState(0),[v,g]=L.useState(0),[y,x]=L.useState(100),[S,w]=L.useState(100),[T,A]=L.useState(0),C=L.useRef(null),R=`
    blur(${e}px)
    brightness(${a}%)
    contrast(${s}%)
    grayscale(${c}%)
    hue-rotate(${h}deg)
    invert(${v}%)
    opacity(${y}%)
    saturate(${S}%)
    sepia(${T}%)
  `,k=O=>{const D=O.target.files[0];if(D){const M=URL.createObjectURL(D);n(M)}},N=()=>{r(0),o(100),l(100),f(0),p(0),g(0),x(100),w(100),A(0)};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-22"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsx("div",{className:"asg22",children:E.jsxs("div",{className:"image-filter-container",children:[E.jsx("h2",{className:"image-filter-title",children:"Image Filter Tool"}),E.jsx("label",{className:"upload-btn-label",children:E.jsx("button",{type:"button",onClick:()=>C.current.click(),children:"Upload"})}),E.jsx("input",{type:"file",accept:"image/*",ref:C,onChange:k,style:{display:"none"}}),t&&E.jsx("img",{src:t,alt:"filtered",className:"filtered-image",style:{filter:R}}),E.jsx("div",{children:E.jsx("button",{class:"btn-reset",onClick:N,children:"Reset Filters"})}),E.jsxs("div",{className:"filter-controls",children:[E.jsxs("div",{className:"filter-slider-row",children:[E.jsx("label",{children:"Blur :"}),E.jsx("input",{type:"range",min:"0",max:"20",step:"0.1",value:e,onChange:O=>r(parseFloat(O.target.value))})]}),E.jsxs("div",{className:"filter-slider-row",children:[E.jsx("label",{children:"Brightness :"}),E.jsx("input",{type:"range",min:"0",max:"200",step:"1",value:a,onChange:O=>o(parseFloat(O.target.value))})]}),E.jsxs("div",{className:"filter-slider-row",children:[E.jsx("label",{children:"Contrast :"}),E.jsx("input",{type:"range",min:"0",max:"200",step:"1",value:s,onChange:O=>l(parseFloat(O.target.value))})]}),E.jsxs("div",{className:"filter-slider-row",children:[E.jsx("label",{children:"Grayscale :"}),E.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:c,onChange:O=>f(parseFloat(O.target.value))})]}),E.jsxs("div",{className:"filter-slider-row",children:[E.jsx("label",{children:"Hue Rotate :"}),E.jsx("input",{type:"range",min:"0",max:"360",step:"1",value:h,onChange:O=>p(parseFloat(O.target.value))})]}),E.jsxs("div",{className:"filter-slider-row",children:[E.jsx("label",{children:"Invert :"}),E.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:v,onChange:O=>g(parseFloat(O.target.value))})]}),E.jsxs("div",{className:"filter-slider-row",children:[E.jsx("label",{children:"Opacity :"}),E.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:y,onChange:O=>x(parseFloat(O.target.value))})]}),E.jsxs("div",{className:"filter-slider-row",children:[E.jsx("label",{children:"Saturate :"}),E.jsx("input",{type:"range",min:"0",max:"200",step:"1",value:S,onChange:O=>w(parseFloat(O.target.value))})]}),E.jsxs("div",{className:"filter-slider-row",children:[E.jsx("label",{children:"Sepia :"}),E.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:T,onChange:O=>A(parseFloat(O.target.value))})]})]})]})})]})}var sv={exports:{}},F2;function PF(){return F2||(F2=1,function(t){var n=function(e){var r=Object.prototype,a=r.hasOwnProperty,o=Object.defineProperty||function(V,I,H){V[I]=H.value},s,l=typeof Symbol=="function"?Symbol:{},c=l.iterator||"@@iterator",f=l.asyncIterator||"@@asyncIterator",h=l.toStringTag||"@@toStringTag";function p(V,I,H){return Object.defineProperty(V,I,{value:H,enumerable:!0,configurable:!0,writable:!0}),V[I]}try{p({},"")}catch{p=function(I,H,Q){return I[H]=Q}}function v(V,I,H,Q){var J=I&&I.prototype instanceof A?I:A,re=Object.create(J.prototype),ie=new z(Q||[]);return o(re,"_invoke",{value:F(V,H,ie)}),re}e.wrap=v;function g(V,I,H){try{return{type:"normal",arg:V.call(I,H)}}catch(Q){return{type:"throw",arg:Q}}}var y="suspendedStart",x="suspendedYield",S="executing",w="completed",T={};function A(){}function C(){}function R(){}var k={};p(k,c,function(){return this});var N=Object.getPrototypeOf,O=N&&N(N(X([])));O&&O!==r&&a.call(O,c)&&(k=O);var D=R.prototype=A.prototype=Object.create(k);C.prototype=R,o(D,"constructor",{value:R,configurable:!0}),o(R,"constructor",{value:C,configurable:!0}),C.displayName=p(R,h,"GeneratorFunction");function M(V){["next","throw","return"].forEach(function(I){p(V,I,function(H){return this._invoke(I,H)})})}e.isGeneratorFunction=function(V){var I=typeof V=="function"&&V.constructor;return I?I===C||(I.displayName||I.name)==="GeneratorFunction":!1},e.mark=function(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,R):(V.__proto__=R,p(V,h,"GeneratorFunction")),V.prototype=Object.create(D),V},e.awrap=function(V){return{__await:V}};function P(V,I){function H(re,ie,pe,Se){var xe=g(V[re],V,ie);if(xe.type==="throw")Se(xe.arg);else{var Ee=xe.arg,de=Ee.value;return de&&typeof de=="object"&&a.call(de,"__await")?I.resolve(de.__await).then(function(we){H("next",we,pe,Se)},function(we){H("throw",we,pe,Se)}):I.resolve(de).then(function(we){Ee.value=we,pe(Ee)},function(we){return H("throw",we,pe,Se)})}}var Q;function J(re,ie){function pe(){return new I(function(Se,xe){H(re,ie,Se,xe)})}return Q=Q?Q.then(pe,pe):pe()}o(this,"_invoke",{value:J})}M(P.prototype),p(P.prototype,f,function(){return this}),e.AsyncIterator=P,e.async=function(V,I,H,Q,J){J===void 0&&(J=Promise);var re=new P(v(V,I,H,Q),J);return e.isGeneratorFunction(I)?re:re.next().then(function(ie){return ie.done?ie.value:re.next()})};function F(V,I,H){var Q=y;return function(re,ie){if(Q===S)throw new Error("Generator is already running");if(Q===w){if(re==="throw")throw ie;return K()}for(H.method=re,H.arg=ie;;){var pe=H.delegate;if(pe){var Se=U(pe,H);if(Se){if(Se===T)continue;return Se}}if(H.method==="next")H.sent=H._sent=H.arg;else if(H.method==="throw"){if(Q===y)throw Q=w,H.arg;H.dispatchException(H.arg)}else H.method==="return"&&H.abrupt("return",H.arg);Q=S;var xe=g(V,I,H);if(xe.type==="normal"){if(Q=H.done?w:x,xe.arg===T)continue;return{value:xe.arg,done:H.done}}else xe.type==="throw"&&(Q=w,H.method="throw",H.arg=xe.arg)}}}function U(V,I){var H=I.method,Q=V.iterator[H];if(Q===s)return I.delegate=null,H==="throw"&&V.iterator.return&&(I.method="return",I.arg=s,U(V,I),I.method==="throw")||H!=="return"&&(I.method="throw",I.arg=new TypeError("The iterator does not provide a '"+H+"' method")),T;var J=g(Q,V.iterator,I.arg);if(J.type==="throw")return I.method="throw",I.arg=J.arg,I.delegate=null,T;var re=J.arg;if(!re)return I.method="throw",I.arg=new TypeError("iterator result is not an object"),I.delegate=null,T;if(re.done)I[V.resultName]=re.value,I.next=V.nextLoc,I.method!=="return"&&(I.method="next",I.arg=s);else return re;return I.delegate=null,T}M(D),p(D,h,"Generator"),p(D,c,function(){return this}),p(D,"toString",function(){return"[object Generator]"});function W(V){var I={tryLoc:V[0]};1 in V&&(I.catchLoc=V[1]),2 in V&&(I.finallyLoc=V[2],I.afterLoc=V[3]),this.tryEntries.push(I)}function Y(V){var I=V.completion||{};I.type="normal",delete I.arg,V.completion=I}function z(V){this.tryEntries=[{tryLoc:"root"}],V.forEach(W,this),this.reset(!0)}e.keys=function(V){var I=Object(V),H=[];for(var Q in I)H.push(Q);return H.reverse(),function J(){for(;H.length;){var re=H.pop();if(re in I)return J.value=re,J.done=!1,J}return J.done=!0,J}};function X(V){if(V){var I=V[c];if(I)return I.call(V);if(typeof V.next=="function")return V;if(!isNaN(V.length)){var H=-1,Q=function J(){for(;++H<V.length;)if(a.call(V,H))return J.value=V[H],J.done=!1,J;return J.value=s,J.done=!0,J};return Q.next=Q}}return{next:K}}e.values=X;function K(){return{value:s,done:!0}}return z.prototype={constructor:z,reset:function(V){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(Y),!V)for(var I in this)I.charAt(0)==="t"&&a.call(this,I)&&!isNaN(+I.slice(1))&&(this[I]=s)},stop:function(){this.done=!0;var V=this.tryEntries[0],I=V.completion;if(I.type==="throw")throw I.arg;return this.rval},dispatchException:function(V){if(this.done)throw V;var I=this;function H(Se,xe){return re.type="throw",re.arg=V,I.next=Se,xe&&(I.method="next",I.arg=s),!!xe}for(var Q=this.tryEntries.length-1;Q>=0;--Q){var J=this.tryEntries[Q],re=J.completion;if(J.tryLoc==="root")return H("end");if(J.tryLoc<=this.prev){var ie=a.call(J,"catchLoc"),pe=a.call(J,"finallyLoc");if(ie&&pe){if(this.prev<J.catchLoc)return H(J.catchLoc,!0);if(this.prev<J.finallyLoc)return H(J.finallyLoc)}else if(ie){if(this.prev<J.catchLoc)return H(J.catchLoc,!0)}else if(pe){if(this.prev<J.finallyLoc)return H(J.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(V,I){for(var H=this.tryEntries.length-1;H>=0;--H){var Q=this.tryEntries[H];if(Q.tryLoc<=this.prev&&a.call(Q,"finallyLoc")&&this.prev<Q.finallyLoc){var J=Q;break}}J&&(V==="break"||V==="continue")&&J.tryLoc<=I&&I<=J.finallyLoc&&(J=null);var re=J?J.completion:{};return re.type=V,re.arg=I,J?(this.method="next",this.next=J.finallyLoc,T):this.complete(re)},complete:function(V,I){if(V.type==="throw")throw V.arg;return V.type==="break"||V.type==="continue"?this.next=V.arg:V.type==="return"?(this.rval=this.arg=V.arg,this.method="return",this.next="end"):V.type==="normal"&&I&&(this.next=I),T},finish:function(V){for(var I=this.tryEntries.length-1;I>=0;--I){var H=this.tryEntries[I];if(H.finallyLoc===V)return this.complete(H.completion,H.afterLoc),Y(H),T}},catch:function(V){for(var I=this.tryEntries.length-1;I>=0;--I){var H=this.tryEntries[I];if(H.tryLoc===V){var Q=H.completion;if(Q.type==="throw"){var J=Q.arg;Y(H)}return J}}throw new Error("illegal catch attempt")},delegateYield:function(V,I,H){return this.delegate={iterator:X(V),resultName:I,nextLoc:H},this.method==="next"&&(this.arg=s),T}},e}(t.exports);try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}(sv)),sv.exports}var uv,P2;function Ry(){return P2||(P2=1,uv=(t,n)=>`${t}-${n}-${Math.random().toString(16).slice(3,8)}`),uv}var lv,L2;function m_(){if(L2)return lv;L2=1;const t=Ry();let n=0;return lv=({id:e,action:r,payload:a={}})=>{let o=e;return typeof o>"u"&&(o=t("Job",n),n+=1),{id:o,action:r,payload:a}},lv}var nl={},j2;function Ay(){if(j2)return nl;j2=1;let t=!1;return nl.logging=t,nl.setLogging=n=>{t=n},nl.log=(...n)=>t?console.log.apply(this,n):null,nl}var cv,z2;function LF(){if(z2)return cv;z2=1;const t=m_(),{log:n}=Ay(),e=Ry();let r=0;return cv=()=>{const a=e("Scheduler",r),o={},s={};let l=[];r+=1;const c=()=>l.length,f=()=>Object.keys(o).length,h=()=>{if(l.length!==0){const x=Object.keys(o);for(let S=0;S<x.length;S+=1)if(typeof s[x[S]]>"u"){l[0](o[x[S]]);break}}},p=(x,S)=>new Promise((w,T)=>{const A=t({action:x,payload:S});l.push(async C=>{l.shift(),s[C.id]=A;try{w(await C[x].apply(this,[...S,A.id]))}catch(R){T(R)}finally{delete s[C.id],h()}}),n(`[${a}]: Add ${A.id} to JobQueue`),n(`[${a}]: JobQueue length=${l.length}`),h()});return{addWorker:x=>(o[x.id]=x,n(`[${a}]: Add ${x.id}`),n(`[${a}]: Number of workers=${f()}`),h(),x.id),addJob:async(x,...S)=>{if(f()===0)throw Error(`[${a}]: You need to have at least one worker before adding jobs`);return p(x,S)},terminate:async()=>{Object.keys(o).forEach(async x=>{await o[x].terminate()}),l=[]},getQueueLen:c,getNumWorkers:f}},cv}function jF(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var fv,U2;function zF(){return U2||(U2=1,fv=t=>{const n={};return typeof WorkerGlobalScope<"u"?n.type="webworker":typeof document=="object"?n.type="browser":typeof process=="object"&&typeof jF=="function"&&(n.type="node"),typeof t>"u"?n:n[t]}),fv}var dv,q2;function UF(){if(q2)return dv;q2=1;const n=zF()("type")==="browser"?e=>new URL(e,window.location.href).href:e=>e;return dv=e=>{const r={...e};return["corePath","workerPath","langPath"].forEach(a=>{e[a]&&(r[a]=n(r[a]))}),r},dv}var hv,H2;function v_(){return H2||(H2=1,hv={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),hv}const qF="6.0.1",HF={version:qF};var pv,V2;function VF(){return V2||(V2=1,pv={workerBlobURL:!0,logger:()=>{}}),pv}var mv,W2;function WF(){if(W2)return mv;W2=1;const t=HF.version;return mv={...VF(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${t}/dist/worker.min.js`},mv}var vv,G2;function GF(){return G2||(G2=1,vv=({workerPath:t,workerBlobURL:n})=>{let e;if(Blob&&URL&&n){const r=new Blob([`importScripts("${t}");`],{type:"application/javascript"});e=new Worker(URL.createObjectURL(r))}else e=new Worker(t);return e}),vv}var gv,X2;function XF(){return X2||(X2=1,gv=t=>{t.terminate()}),gv}var yv,Y2;function YF(){return Y2||(Y2=1,yv=(t,n)=>{t.onmessage=({data:e})=>{n(e)}}),yv}var bv,K2;function KF(){return K2||(K2=1,bv=async(t,n)=>{t.postMessage(n)}),bv}var wv,$2;function $F(){if($2)return wv;$2=1;const t=e=>new Promise((r,a)=>{const o=new FileReader;o.onload=()=>{r(o.result)},o.onerror=({target:{error:{code:s}}})=>{a(Error(`File could not be read! Code=${s}`))},o.readAsArrayBuffer(e)}),n=async e=>{let r=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?r=atob(e.split(",")[1]).split("").map(a=>a.charCodeAt(0)):r=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(r=await n(e.src)),e.tagName==="VIDEO"&&(r=await n(e.poster)),e.tagName==="CANVAS"&&await new Promise(a=>{e.toBlob(async o=>{r=await t(o),a()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const a=await e.convertToBlob();r=await t(a)}else(e instanceof File||e instanceof Blob)&&(r=await t(e));return new Uint8Array(r)};return wv=n,wv}var xv,Q2;function QF(){if(Q2)return xv;Q2=1;const t=WF(),n=GF(),e=XF(),r=YF(),a=KF(),o=$F();return xv={defaultOptions:t,spawnWorker:n,terminateWorker:e,onMessage:r,send:a,loadImage:o},xv}var Sv,Z2;function g_(){if(Z2)return Sv;Z2=1;const t=UF(),n=m_(),{log:e}=Ay(),r=Ry(),a=v_(),{defaultOptions:o,spawnWorker:s,terminateWorker:l,onMessage:c,loadImage:f,send:h}=QF();let p=0;return Sv=async(v="eng",g=a.LSTM_ONLY,y={},x={})=>{const S=r("Worker",p),{logger:w,errorHandler:T,...A}=t({...o,...y}),C={},R=typeof v=="string"?v.split("+"):v;let k=g,N=x;const O=[a.DEFAULT,a.LSTM_ONLY].includes(g)&&!A.legacyCore;let D,M;const P=new Promise((Ee,de)=>{M=Ee,D=de}),F=Ee=>{D(Ee.message)};let U=s(A);U.onerror=F,p+=1;const W=({id:Ee,action:de,payload:we})=>new Promise((Ce,Ae)=>{e(`[${S}]: Start ${Ee}, action=${de}`);const Fe=`${de}-${Ee}`;C[Fe]={resolve:Ce,reject:Ae},h(U,{workerId:S,jobId:Ee,action:de,payload:we})}),Y=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),z=Ee=>W(n({id:Ee,action:"load",payload:{options:{lstmOnly:O,corePath:A.corePath,logging:A.logging}}})),X=(Ee,de,we)=>W(n({id:we,action:"FS",payload:{method:"writeFile",args:[Ee,de]}})),K=(Ee,de)=>W(n({id:de,action:"FS",payload:{method:"readFile",args:[Ee,{encoding:"utf8"}]}})),V=(Ee,de)=>W(n({id:de,action:"FS",payload:{method:"unlink",args:[Ee]}})),I=(Ee,de,we)=>W(n({id:we,action:"FS",payload:{method:Ee,args:de}})),H=(Ee,de)=>W(n({id:de,action:"loadLanguage",payload:{langs:Ee,options:{langPath:A.langPath,dataPath:A.dataPath,cachePath:A.cachePath,cacheMethod:A.cacheMethod,gzip:A.gzip,lstmOnly:[a.DEFAULT,a.LSTM_ONLY].includes(k)&&!A.legacyLang}}})),Q=(Ee,de,we,Ce)=>W(n({id:Ce,action:"initialize",payload:{langs:Ee,oem:de,config:we}})),J=(Ee="eng",de,we,Ce)=>{if(O&&[a.TESSERACT_ONLY,a.TESSERACT_LSTM_COMBINED].includes(de))throw Error("Legacy model requested but code missing.");const Ae=de||k;k=Ae;const Fe=we||N;N=Fe;const Ye=(typeof Ee=="string"?Ee.split("+"):Ee).filter(it=>!R.includes(it));return R.push(...Ye),Ye.length>0?H(Ye,Ce).then(()=>Q(Ee,Ae,Fe,Ce)):Q(Ee,Ae,Fe,Ce)},re=(Ee={},de)=>W(n({id:de,action:"setParameters",payload:{params:Ee}})),ie=async(Ee,de={},we={text:!0},Ce)=>W(n({id:Ce,action:"recognize",payload:{image:await f(Ee),options:de,output:we}})),pe=async(Ee,de)=>{if(O)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return W(n({id:de,action:"detect",payload:{image:await f(Ee)}}))},Se=async()=>(U!==null&&(l(U),U=null),Promise.resolve());c(U,({workerId:Ee,jobId:de,status:we,action:Ce,data:Ae})=>{const Fe=`${Ce}-${de}`;if(we==="resolve")e(`[${Ee}]: Complete ${de}`),C[Fe].resolve({jobId:de,data:Ae}),delete C[Fe];else if(we==="reject")if(C[Fe].reject(Ae),delete C[Fe],Ce==="load"&&D(Ae),T)T(Ae);else throw Error(Ae);else we==="progress"&&w({...Ae,userJobId:de})});const xe={id:S,worker:U,load:Y,writeText:X,readText:K,removeFile:V,FS:I,reinitialize:J,setParameters:re,recognize:ie,detect:pe,terminate:Se};return z().then(()=>H(v)).then(()=>Q(v,g,x)).then(()=>M(xe)).catch(()=>{}),P},Sv}var Ev,J2;function ZF(){if(J2)return Ev;J2=1;const t=g_();return Ev={recognize:async(r,a,o)=>{const s=await t(a,1,o);return s.recognize(r).finally(async()=>{await s.terminate()})},detect:async(r,a)=>{const o=await t("osd",0,a);return o.detect(r).finally(async()=>{await o.terminate()})}},Ev}var Cv,eS;function JF(){return eS||(eS=1,Cv={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),Cv}var _v,tS;function eP(){return tS||(tS=1,_v={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),_v}var Rv,nS;function tP(){if(nS)return Rv;nS=1,PF();const t=LF(),n=g_(),e=ZF(),r=JF(),a=v_(),o=eP(),{setLogging:s}=Ay();return Rv={languages:r,OEM:a,PSM:o,createScheduler:t,createWorker:n,setLogging:s,...e},Rv}var y_=tP();function nP(){const[t,n]=L.useState(null),[e,r]=L.useState(""),[a,o]=L.useState(!1),[s,l]=L.useState(0),c=L.useRef(null),f=()=>{n(null),r(""),l(0),o(!1)};L.useEffect(()=>{c.current||(c.current=y_.createWorker())},[]);const h=async p=>{const v=p.target.files[0];if(!v)return;const g=URL.createObjectURL(v);n(g),o(!0),l(0),r("");try{let y=c.current;typeof y.then=="function"&&(y=await y,c.current=y);const{data:{text:x}}=await y.recognize(v);r(x),l(100)}catch(y){console.error(y),r("OCR failed: "+y.message)}o(!1)};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-23"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsxs("div",{className:"ocr-container",children:[E.jsx("h2",{className:"ocr-title",children:"OCR Reader"}),E.jsxs("div",{className:"ocr-controls",children:[E.jsx("input",{type:"file",accept:"image/*",onChange:h,className:"ocr-upload",disabled:a}),t&&E.jsx("button",{className:"ocr-clear-btn",onClick:f,disabled:a,children:"Clear"})]}),t&&E.jsx("img",{src:t,alt:"Uploaded",className:"ocr-image-preview"}),a&&E.jsxs("div",{className:"ocr-progress-section",children:[E.jsx("p",{className:"ocr-progress-text",children:"Reading text from image..."}),E.jsx("div",{className:"ocr-progress-bar-bg",children:E.jsx("div",{className:`ocr-progress-bar${s===100?"":" ocr-progress-bar-animated"}`,style:{width:"100%",animation:s===100?"none":void 0}})})]}),E.jsxs("div",{className:"ocr-result-section",children:[E.jsx("h3",{className:"ocr-result-title",children:"Extracted Text"}),E.jsx("textarea",{rows:"10",cols:"50",value:e,readOnly:!0,className:"ocr-result-textarea"})]})]})]})}function rP(){const t=L.useRef(null),n=L.useRef(!1),e=L.useRef(null),[r,a]=L.useState(""),[o,s]=L.useState(!1),[l,c]=L.useState(3),[f,h]=L.useState("#000000"),p=()=>{const w=t.current;if(!w)return;w.getContext("2d").clearRect(0,0,w.width,w.height),a(""),s(!1)};L.useEffect(()=>{e.current||(e.current=y_.createWorker())},[]);const v=w=>{const T=t.current;if(!T)return;const A=T.getContext("2d");A.beginPath(),A.moveTo(w.nativeEvent.offsetX,w.nativeEvent.offsetY),A.strokeStyle=f,A.lineWidth=l,A.lineCap="round",A.lineJoin="round",n.current=!0},g=w=>{if(!n.current)return;const T=t.current;if(!T)return;const A=T.getContext("2d");A.lineTo(w.nativeEvent.offsetX,w.nativeEvent.offsetY),A.strokeStyle=f,A.lineWidth=l,A.lineCap="round",A.lineJoin="round",A.stroke()},y=()=>{n.current=!1},x=w=>{const T=document.createElement("canvas"),A=T.getContext("2d");return T.width=w.width*2,T.height=w.height*2,A.fillStyle="white",A.fillRect(0,0,T.width,T.height),A.drawImage(w,0,0,T.width,T.height),T},S=async()=>{s(!0),a("");try{let w=e.current;typeof w.then=="function"&&(w=await w,e.current=w);const T=t.current;if(!T){a("Canvas not available"),s(!1);return}const A=x(T),C=await new Promise(k=>A.toBlob(k,"image/png")),R=await w.recognize(C);a(R.data.text.trim())}catch(w){console.error(w),a("OCR Failed: "+w.message)}s(!1)};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-24"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsxs("div",{className:"ocr-container",children:[E.jsx("h2",{className:"ocr-title",children:"OCR Reader"}),E.jsxs("div",{className:"drawing-controls",children:[E.jsxs("label",{className:"control-label",children:["Stroke Width:",E.jsx("input",{type:"range",min:"1",max:"8",value:l,onChange:w=>c(parseInt(w.target.value)),className:"stroke-slider"}),E.jsxs("span",{className:"stroke-value",children:[l,"px"]})]}),E.jsxs("label",{className:"control-label",children:["Drawing Color:",E.jsx("input",{type:"color",value:f,onChange:w=>h(w.target.value),className:"color-picker"}),E.jsx("span",{className:"color-value",children:f})]}),E.jsxs("div",{className:"color-presets",children:[E.jsx("span",{className:"preset-label",children:"Quick Colors:"}),E.jsx("div",{className:"preset-colors",children:["#000000","#FF0000","#00FF00","#0000FF"].map(w=>E.jsx("button",{className:`color-preset ${f===w?"active":""}`,style:{backgroundColor:w},onClick:()=>h(w),title:w},w))})]})]}),E.jsxs("div",{className:"ocr-controls",children:[E.jsx("canvas",{ref:t,width:300,height:300,className:"ocr-canvas",onMouseDown:v,onMouseMove:g,onMouseUp:y,onMouseLeave:y}),E.jsxs("div",{className:"ocr-controls",children:[E.jsx("button",{onClick:S,disabled:o,children:"Read Text"}),E.jsx("button",{onClick:p,disabled:o,children:"Clear"})]})]}),o&&E.jsx("div",{className:"ocr-progress-section",children:E.jsx("p",{className:"ocr-progress-text",children:"Reading text from canvas..."})}),E.jsxs("div",{className:"ocr-result-section",children:[E.jsx("h3",{className:"ocr-result-title",children:"Extracted Text"}),E.jsx("textarea",{rows:"10",cols:"50",value:r,readOnly:!0,className:"ocr-result-textarea"})]})]})]})}function aP(){return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-25"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsxs("div",{className:"asg25-container",children:[E.jsx("h1",{className:"asg25-title",children:"CSS 3D Transforms"}),E.jsxs("div",{className:"card-container",children:[E.jsx("div",{className:"card rotateX",children:"rotateX(45deg)"}),E.jsx("div",{className:"card rotateY",children:"rotateY(180deg)"}),E.jsx("div",{className:"card rotateZ",children:"rotateZ(45deg)"}),E.jsx("div",{className:"card translateZ",children:"translateZ(50px)"}),E.jsx("div",{className:"card scaleZ",children:"scaleZ(1.5)"}),E.jsx("div",{className:"card perspective",children:E.jsx("div",{className:"inner-card",children:"perspective: 1000px"})}),E.jsxs("div",{className:"card preserve3d",children:[E.jsx("div",{className:"child-card front",children:"Front"}),E.jsx("div",{className:"child-card back",children:"Back"})]}),E.jsx("div",{className:"card backfaceHidden",children:E.jsxs("div",{className:"flip-card-inner",children:[E.jsx("div",{className:"flip-card-front",children:"Front Face"}),E.jsx("div",{className:"flip-card-back",children:"Back Face (hidden)"})]})})]})]})]})}function oP(){const t=L.useRef(null),n=L.useRef(null),[e,r]=L.useState(!1),a=l=>{const c=t.current,f=c.getBoundingClientRect(),h=l.clientX-f.left,p=l.clientY-f.top,v=f.width/2,g=f.height/2,y=(p-g)/g*-8,x=(h-v)/v*8;c.style.transform=`rotateX(${y}deg) rotateY(${x}deg)`},o=()=>{const l=t.current;l.style.transform="rotateX(0deg) rotateY(0deg)"},s=()=>{document.fullscreenElement?document.exitFullscreen().then(()=>{r(!1)}):n.current.requestFullscreen().then(()=>{r(!0)}).catch(l=>{console.error("Error attempting to enable fullscreen:",l)})};return L.useEffect(()=>{const l=()=>{r(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",l),()=>document.removeEventListener("fullscreenchange",l)},[]),E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"back-to-home-container",children:E.jsx(nt,{})}),E.jsx("h1",{className:"assignment-title",children:"Assignment-26"}),E.jsxs("div",{ref:n,className:"asg26-wrapper",onMouseMove:a,onMouseLeave:o,children:[E.jsx("div",{className:"asg26-card",ref:t,children:E.jsx("img",{src:"./card.jpg",alt:"3D colorful abstract card"})}),E.jsx("button",{className:"fullscreen-btn",onClick:s,title:e?"Exit Fullscreen":"Enter Fullscreen"})]})]})}function iP(){const[t,n]=L.useState({x:10,y:30}),[e,r]=L.useState({x:0,y:0}),[a,o]=L.useState(!1),s=f=>{f.target.className==="draggable"&&(o(!0),r({x:f.clientX-t.x,y:f.clientY-t.y}))},l=f=>{if(!a)return;const h=f.clientX-e.x,p=f.clientY-e.y;n({x:h,y:p})},c=()=>{o(!1)};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-27"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsx("div",{className:"asg27-container",onMouseDown:s,onMouseMove:l,onMouseUp:c,children:E.jsx("div",{className:"asg27-draggable",style:{left:t.x+"px",top:t.y+"px"},children:"Drag Me!"})})]})}function sP(){const[t,n]=L.useState([]),e=r=>{const a=r.currentTarget.getBoundingClientRect(),o={x:r.clientX-a.left,y:r.clientY-a.top,id:crypto.randomUUID()};n(s=>[...s,o]),setTimeout(()=>{n(s=>s.filter(l=>l.id!==o.id))},300)};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-28"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsxs("div",{className:"asg28-container",onMouseMove:e,children:[E.jsx("div",{className:"asg28-wording",children:"MOVE YOUR CURSOR HERE"}),t.map(r=>E.jsx("div",{className:"asg28-bubble",style:{left:r.x+"px",top:r.y+"px"}},r.id))]})]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var b_=function(t,n){return(b_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var a in r)r.hasOwnProperty(a)&&(e[a]=r[a])})(t,n)};function qr(t,n){function e(){this.constructor=t}b_(t,n),t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}function ke(t,n,e,r){return new(e||(e=Promise))(function(a,o){function s(f){try{c(r.next(f))}catch(h){o(h)}}function l(f){try{c(r.throw(f))}catch(h){o(h)}}function c(f){f.done?a(f.value):new e(function(h){h(f.value)}).then(s,l)}c((r=r.apply(t,[])).next())})}function Ne(t,n){var e,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(f){return function(h){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(a=2&h[0]?r.return:h[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,h[1])).done)return a;switch(r=0,a&&(h=[2&h[0],a.value]),h[0]){case 0:case 1:a=h;break;case 4:return s.label++,{value:h[1],done:!1};case 5:s.label++,r=h[1],h=[0];continue;case 7:h=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){s=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){s.label=h[1];break}if(h[0]===6&&s.label<a[1]){s.label=a[1],a=h;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(h);break}a[2]&&s.ops.pop(),s.trys.pop();continue}h=n.call(t,s)}catch(p){h=[6,p],r=0}finally{e=a=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([c,f])}}}var uP=function(){function t(n){this.global=n,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(n,e){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+e+"."),this.platformName=n,this.platform=e},t.prototype.registerFlag=function(n,e,r){if(this.flagRegistry[n]={evaluationFn:e,setHook:r},this.urlFlags[n]!=null){var a=this.urlFlags[n];console.warn("Setting feature override from URL "+n+": "+a+"."),this.set(n,a)}},t.prototype.get=function(n){return n in this.flags?this.flags[n]:(this.flags[n]=this.evaluateFlag(n),this.flags[n])},t.prototype.getNumber=function(n){return this.get(n)},t.prototype.getBool=function(n){return this.get(n)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(n,e){if(this.flagRegistry[n]==null)throw new Error("Cannot set flag "+n+" as it has not been registered.");this.flags[n]=e,this.flagRegistry[n].setHook!=null&&this.flagRegistry[n].setHook(e)},t.prototype.evaluateFlag=function(n){if(this.flagRegistry[n]==null)throw new Error("Cannot evaluate flag '"+n+"': no evaluation function found.");return this.flagRegistry[n].evaluationFn()},t.prototype.setFlags=function(n){this.flags=Object.assign({},n)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var n=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var e,r,a=(e=this.global.location.search,r={},e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(o){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];return lP(r,s[0],s[1]),s.join("=")}),r);"tfjsflags"in a&&a.tfjsflags.split(",").forEach(function(o){var s=o.split(":"),l=s[0],c=s[1];n.urlFlags[l]=function(f,h){if((h=h.toLowerCase())==="true"||h==="false")return h==="true";if(""+ +h===h)return+h;throw new Error("Could not parse value flag value "+h+" for flag "+f+".")}(l,c)})}},t}();function lP(t,n,e){t[decodeURIComponent(n)]=decodeURIComponent(e||"")}function me(){return w_}var w_=null,dd=new Map,xg=new Map;function x_(t,n){var e=E_(t,n);return dd.get(e)}function cP(t){return xg.get(t)}function rS(t){for(var n=dd.entries(),e=[];;){var r=n.next(),a=r.done,o=r.value;if(a)break;var s=o[0],l=o[1];s.split("_")[0]===t&&e.push(l)}return e}function S_(t){var n=t.kernelName,e=t.backendName,r=E_(n,e);if(dd.has(r))throw new Error("The kernel '"+n+"' for backend '"+e+"' is already registered");dd.set(r,t)}function fP(t){var n=t.kernelName;xg.has(n)&&console.warn("Overriding the gradient for '"+n+"'"),xg.set(n,t)}function E_(t,n){return n+"_"+t}function Sg(t,n,e){return Math.max(t,Math.min(n,e))}function C_(t){return t%2==0?t:t+1}function dP(t){for(var n=0,e=0;e<t.length;e++)n+=t[e];return n}function G(t,n){if(!t)throw new Error(typeof n=="string"?n:n())}function dt(t,n,e){e===void 0&&(e=""),G(an(t,n),function(){return e+" Shapes "+t+" and "+n+" must match"})}function $s(t){G(t!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function js(t,n,e){if(n===void 0&&(n=[]),e===void 0&&(e=!1),n==null&&(n=[]),Array.isArray(t)||ra(t)&&!e)for(var r=0;r<t.length;++r)js(t[r],n,e);else n.push(t);return n}function De(t){if(t.length===0)return 1;for(var n=t[0],e=1;e<t.length;e++)n*=t[e];return n}function an(t,n){if(t===n)return!0;if(t==null||n==null||t.length!==n.length)return!1;for(var e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function Ft(t){return t%1==0}function hP(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var n=Math.exp(2*t);return(n-1)/(n+1)}function Eg(t){var n=Math.ceil(Math.sqrt(t));return[n,Math.ceil(t/n)]}function As(t,n){return n<=t.length?t:t+" ".repeat(n-t.length)}function aS(t,n,e){return n===void 0&&(n=function(r){return 0}),new Promise(function(r,a){var o=0,s=function(){if(t())r();else{o++;var l=n(o);e!=null&&o>=e?a():setTimeout(s,l)}};s()})}function pP(t,n){for(var e=1,r=-1,a=0;a<t.length;++a)if(t[a]>=0)e*=t[a];else if(t[a]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(t[a]<0)throw Error("Shapes can not be < 0. Found "+t[a]+" at dim "+a);if(r===-1){if(n>0&&n!==e)throw Error("Size("+n+") must match the product of shape "+t);return t}if(e===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(n%e!=0)throw Error("The implicit shape can't be a fractional number. Got "+n+" / "+e);var o=t.slice();return o[r]=n/e,o}function Qt(t,n){var e=n.length;return G((t=t==null?n.map(function(r,a){return a}):[].concat(t)).every(function(r){return r>=-e&&r<e}),function(){return"All values in axis param must be in range [-"+e+", "+e+") but got axis "+t}),G(t.every(function(r){return Ft(r)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(r){return r<0?e+r:r})}function oi(t,n){for(var e=[],r=[],a=n!=null&&Array.isArray(n)&&n.length===0,o=n==null||a?null:Qt(n,t).sort(),s=0,l=0;l<t.length;++l){if(o!=null){if(o[s]===l&&t[l]!==1)throw new Error("Can't squeeze axis "+l+" since its dim '"+t[l]+"' is not 1");(o[s]==null||o[s]>l)&&t[l]===1&&(e.push(t[l]),r.push(l)),o[s]<=l&&s++}t[l]!==1&&(e.push(t[l]),r.push(l))}return{newShape:e,keptDims:r}}function Sl(t,n){var e=null;if(t==null||t==="float32")e=new Float32Array(n);else if(t==="int32")e=new Int32Array(n);else{if(t!=="bool")throw new Error("Unknown data type "+t);e=new Uint8Array(n)}return e}function hd(t,n){var e=null;if(t==null||t==="float32")e=new Float32Array(n);else if(t==="int32")e=new Int32Array(n);else if(t==="bool")e=new Uint8Array(n);else{if(t!=="string")throw new Error("Unknown data type "+t);e=new Array(n)}return e}function mP(t,n){for(var e=0;e<t.length;e++){var r=t[e];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+n+" being uploaded contains "+r+".")}}function vP(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function gP(t,n){return n!=="complex64"&&(n!=="float32"||t==="complex64")&&(n!=="int32"||t==="float32"||t==="complex64")&&(n!=="bool"||t!=="bool")}function ra(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function __(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function yP(t){if(t==null)return 0;var n=0;return t.forEach(function(e){return n+=e.length}),n}function Ty(t){return typeof t=="string"||t instanceof String}function bP(t){return typeof t=="boolean"}function wP(t){return typeof t=="number"}function Gl(t){return Array.isArray(t)?Gl(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":wP(t)?"float32":Ty(t)?"string":bP(t)?"bool":"float32"}function Cg(t){return!!(t&&t.constructor&&t.call&&t.apply)}function _g(t,n){for(var e=n;e<t;++e)if(t%e==0)return e;return t}function aa(t){var n=t.length;if(n<2)return[];var e=new Array(n-1);e[n-2]=t[n-1];for(var r=n-3;r>=0;--r)e[r]=e[r+1]*t[r+1];return e}function R_(t,n,e){if(n==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=js(t)),e&&mP(t,n),function(o,s){return o instanceof Float32Array&&s==="float32"||o instanceof Int32Array&&s==="int32"||o instanceof Uint8Array&&s==="bool"}(t,n))return t;if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool"){for(var r=new Uint8Array(t.length),a=0;a<r.length;++a)Math.round(t[a])!==0&&(r[a]=1);return r}throw new Error("Unknown data type "+n)}function oS(t,n){if(t.length===0)return n[0];var e=t.reduce(function(r,a){return r*a});if(e===0)return[];if(e!==n.length)throw new Error("["+t+"] does not match the input size.");return function r(a,o,s){var l=new Array;if(o.length===1)for(var c=o[0],f=0;f<c;f++)l[f]=s[a+f];else{c=o[0];var h=o.slice(1),p=h.reduce(function(v,g){return v*g});for(f=0;f<c;f++)l[f]=r(a+f*p,h,s)}return l}(0,t,n)}function A_(t,n){for(var e=Xl(t,n),r=0;r<e.length;r++)e[r]=1;return e}function Xl(t,n){if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+n)}function Jr(){return me().platform.now()}function T_(t){t.forEach(function(n){G(Number.isInteger(n)&&n>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}function xP(t,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",me().platform.encode(t,n)}function pd(t,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",me().platform.decode(t,n)}function iS(t,n,e){if(n===0)return 0;if(n===1)return t[0];for(var r=t[t.length-1],a=0;a<t.length-1;++a)r+=e[a]*t[a];return r}function SP(t,n,e){if(n===0)return[];if(n===1)return[t];for(var r=new Array(n),a=0;a<r.length-1;++a)r[a]=Math.floor(t/e[a]),t-=r[a]*e[a];return r[r.length-1]=t,r}var EP=function(){function t(n,e){this.backendTimer=n,this.logger=e,e==null&&(this.logger=new CP)}return t.prototype.profileKernel=function(n,e,r){var a,o=this,s=this.backendTimer.time(function(){a=r()});return a.forEach(function(l){l.data().then(function(c){(function(f,h,p){if(h!=="float32")return!1;for(var v=0;v<f.length;v++){var g=f[v];if(isNaN(g)||!isFinite(g))return console.warn("Found "+g+" in the result of '"+p+"'"),!0}})(c,l.dtype,n),s.then(function(f){var h="";f.getExtraProfileInfo!=null&&(h=f.getExtraProfileInfo()),o.logger.logKernelProfile(n,l,c,f.kernelMs,e,h)})})}),a},t}(),CP=function(){function t(){}return t.prototype.logKernelProfile=function(n,e,r,a,o,s){var l=typeof a=="number"?As(a+"ms",9):a.error,c=As(n,25),f=e.rank,h=e.size,p=As(e.shape.toString(),14),v="";for(var g in o){var y=o[g].shape||e.shape,x=y.length;v+=g+": "+x+"D "+(x>0?y:"")+" "}console.log("%c"+c+"	%c"+l+"	%c"+f+"D "+p+"	%c"+h+"	%c"+v+"	%c"+s,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}(),sS=20,rl=3,Av=7;function _P(t,n,e,r){var a=aa(n),o=function(f,h,p,v){var g=De(h),y=v[v.length-1],x=new Array(y).fill(0),S=h.length,w=p==="complex64"?ol(f):f;if(S>1)for(var T=0;T<g/y;T++)for(var A=T*y,C=0;C<y;C++)x[C]=Math.max(x[C],al(w[A+C],0,p).length);return x}(t,n,e,a),s=n.length,l=function f(h,p,v,g,y,x){x===void 0&&(x=!0);var S=v==="complex64"?2:1,w=p[0],T=p.length;if(T===0)return v==="complex64"?[al(ol(h)[0],0,v)]:v==="bool"?[k_(h[0])]:[h[0].toString()];if(T===1){if(w>sS){var A=rl*S,C=Array.from(h.slice(0,A)),R=Array.from(h.slice((w-rl)*S,w*S));return v==="complex64"&&(C=ol(C),R=ol(R)),["["+C.map(function(Y,z){return al(Y,y[z],v)}).join(", ")+", ..., "+R.map(function(Y,z){return al(Y,y[w-rl+z],v)}).join(", ")+"]"]}return["["+(v==="complex64"?ol(h):Array.from(h)).map(function(Y,z){return al(Y,y[z],v)}).join(", ")+"]"]}var k=p.slice(1),N=g.slice(1),O=g[0]*S,D=[];if(w>sS){for(var M=0;M<rl;M++){var P=(F=M*O)+O;D.push.apply(D,f(h.slice(F,P),k,v,N,y,!1))}for(D.push("..."),M=w-rl;M<w;M++)P=(F=M*O)+O,D.push.apply(D,f(h.slice(F,P),k,v,N,y,M===w-1))}else for(M=0;M<w;M++){var F;P=(F=M*O)+O,D.push.apply(D,f(h.slice(F,P),k,v,N,y,M===w-1))}var U=T===2?",":"";for(D[0]="["+D[0]+U,M=1;M<D.length-1;M++)D[M]=" "+D[M]+U;var W=`,
`;for(M=2;M<T;M++)W+=`
`;return D[D.length-1]=" "+D[D.length-1]+"]"+(x?"":W),D}(t,n,e,a,o),c=["Tensor"];return r&&(c.push("  dtype: "+e),c.push("  rank: "+s),c.push("  shape: ["+n+"]"),c.push("  values:")),c.push(l.map(function(f){return"    "+f}).join(`
`)),c.join(`
`)}function al(t,n,e){return As(Array.isArray(t)?parseFloat(t[0].toFixed(Av))+" + "+parseFloat(t[1].toFixed(Av))+"j":Ty(t)?"'"+t+"'":e==="bool"?k_(t):parseFloat(t.toFixed(Av)).toString(),n)}function k_(t){return t===0?"false":"true"}function ol(t){for(var n=[],e=0;e<t.length;e+=2)n.push([t[e],t[e+1]]);return n}var El=function(){function t(n,e,r){var a=this;if(this.dtype=e,this.shape=n.slice(),this.size=De(n),r!=null){var o=r.length;G(o===this.size,function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+a.size+"'."})}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||hd(e,this.size),this.strides=aa(n)}return t.prototype.set=function(n){for(var e=this,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];r.length===0&&(r=[0]),G(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+e.rank+")"});var o=this.locToIndex(r);this.values[o]=n},t.prototype.get=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];n.length===0&&(n=[0]);for(var r=0,a=0,o=n;a<o.length;a++){var s=o[a];if(s<0||s>=this.shape[r]){var l="Requested out of range element at "+n+".   Buffer shape="+this.shape;throw new Error(l)}r++}for(var c=n[n.length-1],f=0;f<n.length-1;++f)c+=this.strides[f]*n[f];return this.values[c]},t.prototype.locToIndex=function(n){if(this.rank===0)return 0;if(this.rank===1)return n[0];for(var e=n[n.length-1],r=0;r<n.length-1;++r)e+=this.strides[r]*n[r];return e},t.prototype.indexToLoc=function(n){if(this.rank===0)return[];if(this.rank===1)return[n];for(var e=new Array(this.shape.length),r=0;r<e.length-1;++r)e[r]=Math.floor(n/this.strides[r]),n-=e[r]*this.strides[r];return e[e.length-1]=n,e},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return ea().makeTensor(this.values,this.shape,this.dtype)},t}(),ea=null,ce=null,N_=null,Rt=function(){function t(n,e,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=e||"float32",this.size=De(n),this.strides=aa(n),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),G(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(n,e){return this.throwIfDisposed(),this.reshape([n,e])},t.prototype.as3D=function(n,e,r){return this.throwIfDisposed(),this.reshape([n,e,r])},t.prototype.as4D=function(n,e,r,a){return this.throwIfDisposed(),this.reshape([n,e,r,a])},t.prototype.as5D=function(n,e,r,a,o){return this.throwIfDisposed(),this.reshape([n,e,r,a,o])},t.prototype.asType=function(n){return this.throwIfDisposed(),ce.cast(this,n)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return ke(this,void 0,void 0,function(){var n;return Ne(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,ce.buffer(this.shape,this.dtype,n)]}})})},t.prototype.bufferSync=function(){return ce.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return ke(this,void 0,void 0,function(){var n;return Ne(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,oS(this.shape,n)]}})})},t.prototype.arraySync=function(){return oS(this.shape,this.dataSync())},t.prototype.data=function(){return ke(this,void 0,void 0,function(){var n,e;return Ne(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),n=ea().read(this.dataId),this.dtype!=="string"?[3,2]:[4,n];case 1:e=r.sent();try{return[2,e.map(function(a){return pd(a)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,n]}})})},t.prototype.dataSync=function(){this.throwIfDisposed();var n=ea().readSync(this.dataId);if(this.dtype==="string")try{return n.map(function(e){return pd(e)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return n},t.prototype.bytes=function(){return ke(this,void 0,void 0,function(){var n;return Ne(this,function(e){switch(e.label){case 0:return this.throwIfDisposed(),[4,ea().read(this.dataId)];case 1:return n=e.sent(),this.dtype==="string"?[2,n]:[2,new Uint8Array(n.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(ea().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(n){return n===void 0&&(n=!1),ce.print(this,n)},t.prototype.reshape=function(n){return this.throwIfDisposed(),ce.reshape(this,n)},t.prototype.reshapeAs=function(n){return this.throwIfDisposed(),this.reshape(n.shape)},t.prototype.expandDims=function(n){return n===void 0&&(n=0),ce.expandDims(this,n)},t.prototype.cumsum=function(n,e,r){return n===void 0&&(n=0),e===void 0&&(e=!1),r===void 0&&(r=!1),ce.cumsum(this,n,e,r)},t.prototype.squeeze=function(n){return this.throwIfDisposed(),ce.squeeze(this,n)},t.prototype.clone=function(){return this.throwIfDisposed(),ce.clone(this)},t.prototype.oneHot=function(n,e,r){return this.throwIfDisposed(),ce.oneHot(this,n,e,r)},t.prototype.toString=function(n){return n===void 0&&(n=!1),_P(this.dataSync(),this.shape,this.dtype,n)},t.prototype.tile=function(n){return this.throwIfDisposed(),ce.tile(this,n)},t.prototype.gather=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),ce.gather(this,n,e)},t.prototype.matMul=function(n,e,r){return e===void 0&&(e=!1),r===void 0&&(r=!1),this.throwIfDisposed(),ce.matMul(this,n,e,r)},t.prototype.dot=function(n){return this.throwIfDisposed(),ce.dot(this,n)},t.prototype.norm=function(n,e,r){return n===void 0&&(n="euclidean"),e===void 0&&(e=null),r===void 0&&(r=!1),this.throwIfDisposed(),ce.norm(this,n,e,r)},t.prototype.slice=function(n,e){return this.throwIfDisposed(),ce.slice(this,n,e)},t.prototype.reverse=function(n){return this.throwIfDisposed(),ce.reverse(this,n)},t.prototype.concat=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),n instanceof t&&(n=[n]),ce.concat([this].concat(n),e)},t.prototype.split=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),ce.split(this,n,e)},t.prototype.stack=function(n,e){return e===void 0&&(e=0),ce.stack([this,n],e)},t.prototype.unstack=function(n){return n===void 0&&(n=0),ce.unstack(this,n)},t.prototype.pad=function(n,e){return e===void 0&&(e=0),ce.pad(this,n,e)},t.prototype.batchNormalization=function(n,e,r,a,o){return r===void 0&&(r=.001),N_("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(n,e,o,a,r)},t.prototype.batchNorm=function(n,e,r,a,o){return o===void 0&&(o=.001),this.throwIfDisposed(),ce.batchNorm(this,n,e,r,a,o)},t.prototype.all=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ce.all(this,n,e)},t.prototype.any=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ce.any(this,n,e)},t.prototype.logSumExp=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ce.logSumExp(this,n,e)},t.prototype.sum=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ce.sum(this,n,e)},t.prototype.prod=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ce.prod(this,n,e)},t.prototype.mean=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ce.mean(this,n,e)},t.prototype.min=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ce.min(this,n,e)},t.prototype.max=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ce.max(this,n,e)},t.prototype.argMin=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),ce.argMin(this,n)},t.prototype.argMax=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),ce.argMax(this,n)},t.prototype.cast=function(n){return this.throwIfDisposed(),ce.cast(this,n)},t.prototype.add=function(n){return this.throwIfDisposed(),ce.add(this,n)},t.prototype.addStrict=function(n){return this.throwIfDisposed(),ce.addStrict(this,n)},t.prototype.atan2=function(n){return this.throwIfDisposed(),ce.atan2(this,n)},t.prototype.sub=function(n){return this.throwIfDisposed(),ce.sub(this,n)},t.prototype.subStrict=function(n){return this.throwIfDisposed(),ce.subStrict(this,n)},t.prototype.pow=function(n){return this.throwIfDisposed(),ce.pow(this,n)},t.prototype.powStrict=function(n){return this.throwIfDisposed(),ce.powStrict(this,n)},t.prototype.mul=function(n){return this.throwIfDisposed(),ce.mul(this,n)},t.prototype.mulStrict=function(n){return this.throwIfDisposed(),ce.mulStrict(this,n)},t.prototype.div=function(n){return this.throwIfDisposed(),ce.div(this,n)},t.prototype.divNoNan=function(n){return this.throwIfDisposed(),ce.divNoNan(this,n)},t.prototype.floorDiv=function(n){return this.throwIfDisposed(),ce.floorDiv(this,n)},t.prototype.divStrict=function(n){return this.throwIfDisposed(),ce.divStrict(this,n)},t.prototype.minimum=function(n){return this.throwIfDisposed(),ce.minimum(this,n)},t.prototype.minimumStrict=function(n){return this.throwIfDisposed(),ce.minimumStrict(this,n)},t.prototype.maximum=function(n){return this.throwIfDisposed(),ce.maximum(this,n)},t.prototype.maximumStrict=function(n){return this.throwIfDisposed(),ce.maximumStrict(this,n)},t.prototype.mod=function(n){return this.throwIfDisposed(),ce.mod(this,n)},t.prototype.modStrict=function(n){return this.throwIfDisposed(),ce.modStrict(this,n)},t.prototype.squaredDifferenceStrict=function(n){return this.throwIfDisposed(),ce.squaredDifferenceStrict(this,n)},t.prototype.transpose=function(n){return this.throwIfDisposed(),ce.transpose(this,n)},t.prototype.notEqual=function(n){return this.throwIfDisposed(),ce.notEqual(this,n)},t.prototype.notEqualStrict=function(n){return this.throwIfDisposed(),ce.notEqualStrict(this,n)},t.prototype.less=function(n){return this.throwIfDisposed(),ce.less(this,n)},t.prototype.lessStrict=function(n){return this.throwIfDisposed(),ce.lessStrict(this,n)},t.prototype.equal=function(n){return this.throwIfDisposed(),ce.equal(this,n)},t.prototype.equalStrict=function(n){return this.throwIfDisposed(),ce.equalStrict(this,n)},t.prototype.lessEqual=function(n){return this.throwIfDisposed(),ce.lessEqual(this,n)},t.prototype.lessEqualStrict=function(n){return this.throwIfDisposed(),ce.lessEqualStrict(this,n)},t.prototype.greater=function(n){return this.throwIfDisposed(),ce.greater(this,n)},t.prototype.greaterStrict=function(n){return this.throwIfDisposed(),ce.greaterStrict(this,n)},t.prototype.greaterEqual=function(n){return this.throwIfDisposed(),ce.greaterEqual(this,n)},t.prototype.greaterEqualStrict=function(n){return this.throwIfDisposed(),ce.greaterEqualStrict(this,n)},t.prototype.logicalAnd=function(n){return this.throwIfDisposed(),ce.logicalAnd(this,n)},t.prototype.logicalOr=function(n){return this.throwIfDisposed(),ce.logicalOr(this,n)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),ce.logicalNot(this)},t.prototype.logicalXor=function(n){return this.throwIfDisposed(),ce.logicalXor(this,n)},t.prototype.where=function(n,e){return this.throwIfDisposed(),ce.where(n,this,e)},t.prototype.neg=function(){return this.throwIfDisposed(),ce.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),ce.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),ce.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),ce.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),ce.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),ce.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),ce.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),ce.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),ce.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),ce.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),ce.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),ce.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),ce.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),ce.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),ce.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),ce.abs(this)},t.prototype.clipByValue=function(n,e){return this.throwIfDisposed(),ce.clipByValue(this,n,e)},t.prototype.relu=function(){return this.throwIfDisposed(),ce.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),ce.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),ce.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),ce.selu(this)},t.prototype.leakyRelu=function(n){return n===void 0&&(n=.2),this.throwIfDisposed(),ce.leakyRelu(this,n)},t.prototype.prelu=function(n){return this.throwIfDisposed(),ce.prelu(this,n)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),ce.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),ce.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),ce.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),ce.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),ce.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),ce.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),ce.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),ce.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),ce.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),ce.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),ce.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),ce.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),ce.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),ce.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),ce.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),ce.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),ce.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),ce.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),ce.round(this)},t.prototype.step=function(n){return n===void 0&&(n=0),this.throwIfDisposed(),ce.step(this,n)},t.prototype.softmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),ce.softmax(this,n)},t.prototype.logSoftmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),ce.logSoftmax(this,n)},t.prototype.resizeBilinear=function(n,e){return e===void 0&&(e=!1),this.throwIfDisposed(),ce.image.resizeBilinear(this,n,e)},t.prototype.resizeNearestNeighbor=function(n,e){return e===void 0&&(e=!1),this.throwIfDisposed(),ce.image.resizeNearestNeighbor(this,n,e)},t.prototype.conv1d=function(n,e,r,a,o,s){return a===void 0&&(a="NWC"),o===void 0&&(o=1),this.throwIfDisposed(),ce.conv1d(this,n,e,r,a,o,s)},t.prototype.conv2d=function(n,e,r,a,o,s){return a===void 0&&(a="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),ce.conv2d(this,n,e,r,a,o,s)},t.prototype.conv2dTranspose=function(n,e,r,a,o){return this.throwIfDisposed(),ce.conv2dTranspose(this,n,e,r,a,o)},t.prototype.depthwiseConv2D=function(n,e,r,a,o,s){return a===void 0&&(a="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),ce.depthwiseConv2d(this,n,e,r,a,o,s)},t.prototype.separableConv2d=function(n,e,r,a,o,s){return o===void 0&&(o=[1,1]),s===void 0&&(s="NHWC"),this.throwIfDisposed(),ce.separableConv2d(this,n,e,r,a,o,s)},t.prototype.avgPool=function(n,e,r,a){return this.throwIfDisposed(),ce.avgPool(this,n,e,r,a)},t.prototype.maxPool=function(n,e,r,a){return this.throwIfDisposed(),ce.maxPool(this,n,e,r,a)},t.prototype.localResponseNormalization=function(n,e,r,a){return n===void 0&&(n=5),e===void 0&&(e=1),r===void 0&&(r=1),a===void 0&&(a=.5),ce.localResponseNormalization(this,n,e,r,a)},t.prototype.pool=function(n,e,r,a,o){return this.throwIfDisposed(),ce.pool(this,n,e,r,a,o)},t.prototype.variable=function(n,e,r){return n===void 0&&(n=!0),this.throwIfDisposed(),ea().makeVariable(this,n,e,r)},t.prototype.unsortedSegmentSum=function(n,e){return this.throwIfDisposed(),ce.unsortedSegmentSum(this,n,e)},t.prototype.batchToSpaceND=function(n,e){return this.throwIfDisposed(),ce.batchToSpaceND(this,n,e)},t.prototype.spaceToBatchND=function(n,e){return this.throwIfDisposed(),ce.spaceToBatchND(this,n,e)},t.prototype.topk=function(n,e){return n===void 0&&(n=1),e===void 0&&(e=!0),this.throwIfDisposed(),ce.topk(this,n,e)},t.prototype.stridedSlice=function(n,e,r,a,o,s,l,c){return a===void 0&&(a=0),o===void 0&&(o=0),s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=0),this.throwIfDisposed(),ce.stridedSlice(this,n,e,r,a,o,s,l,c)},t.prototype.depthToSpace=function(n,e){return this.throwIfDisposed(),ce.depthToSpace(this,n,e)},t.prototype.fft=function(){return this.throwIfDisposed(),ce.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),ce.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),ce.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),ce.spectral.irfft(this)},t}();Object.defineProperty(Rt,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var uS,Rg,Ag,Tg,kg,zs=function(t){function n(e,r,a,o){var s=t.call(this,e.shape,e.dtype,e.dataId,o)||this;return s.trainable=r,s.name=a,s}return qr(n,t),n.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!an(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");ea().disposeTensor(this),this.dataId=e.dataId,ea().incRef(this,null)},n.prototype.dispose=function(){ea().disposeVariable(this),this.isDisposedInternal=!0},n}(Rt);Object.defineProperty(zs,Symbol.hasInstance,{value:function(t){return t instanceof Rt&&t.assign!=null&&t.assign instanceof Function}}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(uS||(uS={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(Rg||(Rg={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(Ag||(Ag={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(Tg||(Tg={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(kg||(kg={}));var RP={float32:Tg,int32:Rg,bool:Ag,complex64:kg};function mn(t,n){if(t==="string"||n==="string"){if(t==="string"&&n==="string")return"string";throw new Error("Can not upcast "+t+" with "+n)}return RP[t][n]}function Tv(t){return mn(t,"int32")}function kt(t,n){if(t.dtype===n.dtype)return[t,n];var e=mn(t.dtype,n.dtype);return[t.cast(e),n.cast(e)]}function AP(t,n){G(t.dtype===n.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+n.dtype+") input must match"})}function D_(t){var n=[];return function e(r,a,o){if(r!=null){if(r instanceof Rt)return void a.push(r);if(s=r,!(!Array.isArray(s)&&typeof s!="object")){var s,l=r;for(var c in l){var f=l[c];o.has(f)||(o.add(f),e(f,a,o))}}}}(t,n,new Set),n}var kv,lS=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var n in this.registeredVariables)this.registeredVariables[n].dispose()},t}(),TP=function(){function t(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new lS}return t.prototype.ready=function(){return ke(this,void 0,void 0,function(){var n,e,r;return Ne(this,function(a){switch(a.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];n=this.getSortedBackends(),e=0,a.label=1;case 1:return e<n.length?(r=n[e],[4,this.initializeBackend(r).success]):[3,5];case 2:return a.sent()?[4,this.setBackend(r)]:[3,4];case 3:return a.sent(),[2];case 4:return e++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var n=this.initializeBackendsAndReturnBest(),e=n.name;if(n.asyncInit)throw new Error("The highest priority backend '"+e+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(n){return!(n in this.registry)&&(!(n in this.registryFactory)||this.initializeBackend(n).asyncInit)?null:this.registry[n]},t.prototype.findBackendFactory=function(n){return n in this.registryFactory?this.registryFactory[n].factory:null},t.prototype.registerBackend=function(n,e,r){return r===void 0&&(r=1),n in this.registryFactory?(console.warn(n+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[n]={factory:e,priority:r},!0)},t.prototype.setBackend=function(n){return ke(this,void 0,void 0,function(){var e,r,a;return Ne(this,function(o){switch(o.label){case 0:if(this.registryFactory[n]==null)throw new Error("Backend name '"+n+"' not found in registry");return this.backendName=n,this.registry[n]!=null?[3,4]:(this.backendInstance=null,e=this.initializeBackend(n),r=e.success,e.asyncInit?[4,r]:[3,2]);case 1:return a=o.sent(),[3,3];case 2:a=r,o.label=3;case 3:if(!a)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new EP(this.backendInstance),[2,!0]}})})},t.prototype.setupRegisteredKernels=function(){var n=this;rS(this.backendName).forEach(function(e){e.setupFunc!=null&&e.setupFunc(n.backendInstance)})},t.prototype.disposeRegisteredKernels=function(n){var e=this;rS(n).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(e.registry[n])})},t.prototype.initializeBackend=function(n){var e=this,r=this.registryFactory[n];if(r==null)throw new Error("Cannot initialize backend "+n+", no registration found.");try{var a=r.factory();if(Promise.resolve(a)===a){var o=++this.pendingBackendInitId,s=a.then(function(l){return!(o<e.pendingBackendInitId)&&(e.registry[n]=l,e.pendingBackendInit=null,!0)}).catch(function(l){return!(o<e.pendingBackendInitId)&&(e.pendingBackendInit=null,console.warn("Initialization of backend "+n+" failed"),console.warn(l.stack||l.message),!1)});return this.pendingBackendInit=s,{success:s,asyncInit:!0}}return this.registry[n]=a,{success:!0,asyncInit:!1}}catch(l){return console.warn("Initialization of backend "+n+" failed"),console.warn(l.stack||l.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(n){if(!(n in this.registryFactory))throw new Error(n+" backend not found in registry");this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var n=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(e,r){return n.registryFactory[r].priority-n.registryFactory[e].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var n=this.getSortedBackends(),e=0;e<n.length;e++){var r=n[e],a=this.initializeBackend(r),o=a.success,s=a.asyncInit;if(s||o)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(n,e){var r=this.state.tensorInfo.get(e),a=r.backend,o=this.readSync(e);a.disposeData(e),r.backend=n,n.move(e,o,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(n,e){var r,a=this,o=null;if(e==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");e=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof e!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=n}return this.scopedRun(function(){return a.startScope(o)},function(){return a.endScope(r)},function(){return(r=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},t.prototype.scopedRun=function(n,e,r){n();try{var a=r();return e(),a}catch(o){throw e(),o}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(n){var e=this.makeTensorFromDataId(n.dataId,n.shape,n.dtype),r={x:n};return this.addTapeNode(this.state.activeScope.name,r,[e],function(a){return{x:function(){return a.toFloat()}}},[]),e},t.prototype.runKernel=function(n,e,r,a,o){return this.runKernelFunc(null,e,null,n,r,a,o)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(n,e,r){var a=this.backend.numDataIds(),o=0;r.forEach(function(c){o+=c.dtype==="complex64"?3:1});var s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=a-e-o-s;if(l>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+l+" data ids) after running '"+n+"'")},t.prototype.runKernelFunc=function(n,e,r,a,o,s,l){var c,f=this;s===void 0&&(s=[]),l===void 0&&(l=[]);var h=[],p=this.isTapeOn();a==null&&(a=this.state.activeScope!=null?this.state.activeScope.name:"");var v,g=function(T){p&&(h=T.map(function(A){return f.keep(f.clone(A))}))},y=this.state.numBytes,x=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var S,w=x_(a,this.backendName);return v=w!=null?function(){var T=f.backend.numDataIds();S=w.kernelFunc({inputs:e,attrs:o,backend:f.backend});var A=Array.isArray(S)?S:[S];f.shouldCheckForMemLeaks()&&f.checkKernelForMemLeak(a,T,A);var C=A.map(function(k){var N=k.dataId,O=k.shape,D=k.dtype;return f.makeTensorFromDataId(N,O,D)}),R=C.filter(function(k,N){return l[N]});return g((s||[]).slice().concat(R)),C}:function(){var T=f.backend.numDataIds();S=f.tidy(function(){return n(f.backend,g)});var A=Array.isArray(S)?S:[S];return f.shouldCheckForMemLeaks()&&f.checkKernelForMemLeak(a,T,A),A},this.scopedRun(function(){return f.state.kernelDepth++},function(){return f.state.kernelDepth--},function(){c=f.ENV.getBool("DEBUG")?f.profiler.profileKernel(a,e,function(){return v()}):v()}),p&&this.addTapeNode(a,e,c,r,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:a,bytesAdded:this.state.numBytes-y,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-x,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map(function(T){return e[T].shape}),outputShapes:c.map(function(T){return T.shape})}),Array.isArray(S)?c:c[0]},t.prototype.makeTensor=function(n,e,r,a){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;var o=n;r==="string"&&Ty(n[0])&&(o=n.map(function(h){return xP(h)}));var s=a.write(o,e,r),l=new Rt(e,r,s,this.nextTensorId());if(this.incRef(l,a),r==="string"){var c=this.state.tensorInfo.get(s),f=yP(o);this.state.numBytes+=f-c.bytes,c.bytes=f}return l},t.prototype.makeTensorFromDataId=function(n,e,r,a){var o=new Rt(e,r=r||"float32",n,this.nextTensorId());return this.incRef(o,a),o},t.prototype.makeVariable=function(n,e,r,a){e===void 0&&(e=!0),r=r||this.nextVariableId().toString(),a!=null&&a!==n.dtype&&(n=n.asType(a));var o=new zs(n,e,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},t.prototype.incRef=function(n,e){var r=this.state.tensorInfo.has(n.dataId)?this.state.tensorInfo.get(n.dataId).refCount:0;if(this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var a=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(a=n.size*__(n.dtype)),this.state.tensorInfo.set(n.dataId,{backend:e||this.backend,dtype:n.dtype,shape:n.shape,bytes:a,refCount:0}),this.state.numBytes+=a}this.state.tensorInfo.get(n.dataId).refCount++,n instanceof zs||this.track(n)},t.prototype.disposeTensor=function(n){if(this.state.tensorInfo.has(n.dataId)){this.state.numTensors--,n.dtype==="string"&&this.state.numStringTensors--;var e=this.state.tensorInfo.get(n.dataId);e.refCount<=1?(n.dtype!=="complex64"&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(n.dataId),this.state.tensorInfo.delete(n.dataId)):this.state.tensorInfo.get(n.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var n in this.state.registeredVariables){var e=this.state.registeredVariables[n];this.disposeVariable(e)}},t.prototype.disposeVariable=function(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]},t.prototype.memory=function(){var n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n},t.prototype.profile=function(n){return ke(this,void 0,void 0,function(){var e,r;return Ne(this,function(a){return this.state.profiling=!0,e=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(o){return o.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},t.prototype.addTapeNode=function(n,e,r,a,o){var s=this,l={id:this.state.nextTapeNodeId++,kernelName:n,inputs:e,outputs:r,saved:o},c=cP(n);c!=null&&(a=c.gradFunc),a!=null&&(l.gradient=function(f){return f=f.map(function(h,p){if(h==null){var v=r[p],g=Xl(v.size,v.dtype);return s.makeTensor(g,v.shape,v.dtype)}return h}),a(f.length>1?f:f[0],o)}),this.state.activeTape.push(l)},t.prototype.keep=function(n){return n.kept=!0,n},t.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(n){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(e.name=n),this.state.scopeStack.push(e),this.state.activeScope=e},t.prototype.endScope=function(n){for(var e=this,r=D_(n),a=new Set(r.map(function(c){return c.id})),o=0;o<this.state.activeScope.track.length;o++){var s=this.state.activeScope.track[o];s.kept||a.has(s.id)||s.dispose()}var l=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(c){c.kept||c.scopeId!==l.id||e.track(c)})},t.prototype.gradients=function(n,e,r,a){var o=this;if(a===void 0&&(a=!1),G(e.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var s=this.scopedRun(function(){return o.startTape()},function(){return o.endTape()},function(){return o.tidy("forward",n)});G(s instanceof Rt,function(){return"The result y returned by f() must be a tensor."});var l=function(c,f,h){for(var p={},v={},g=0;g<f.length;g++)p[f[g].id]=!0;for(g=0;g<c.length;g++){var y=(k=c[g]).inputs;for(var x in y){for(var S=y[x],w=!1,T=0;T<f.length;T++)if(p[S.id]){k.outputs.forEach(function(M){return p[M.id]=!0}),w=!0,v[k.id]=!0;break}if(w)break}}var A={};A[h.id]=!0;var C={};for(g=c.length-1;g>=0;g--)for(y=(k=c[g]).inputs,T=0;T<k.outputs.length;T++)if(A[k.outputs[T].id]){for(var x in y)A[y[x].id]=!0,C[k.id]=!0;break}var R=[];for(g=0;g<c.length;g++){var k;if(v[(k=c[g]).id]&&C[k.id]){var N={};for(var x in k.inputs){var O=k.inputs[x];p[O.id]&&(N[x]=O)}var D=Object.assign({},k);D.inputs=N,D.outputs=k.outputs,R.push(D)}}return R}(this.state.activeTape,e,s);if(!a&&l.length===0&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var c,f,h={};h[s.id]=r??(c=s.shape,f=A_(De(c),"float32"),te.makeTensor(f,c,"float32")),function(v,g,y){for(var x=function(w){var T=g[w],A=[];if(T.outputs.forEach(function(N){var O=v[N.id];O!=null?A.push(O):A.push(null)}),T.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+T.kernelName+".");var C=T.gradient(A),R=function(N){if(!(N in C))throw new Error("Cannot backprop through input "+N+". Available gradients found: "+Object.keys(C)+".");var O=y(function(){return C[N]()});if(O.dtype!=="float32")throw new Error("Error in gradient for op "+T.kernelName+". The gradient of input "+N+" must have 'float32' dtype, but has '"+O.dtype+"'");var D=T.inputs[N];if(!an(O.shape,D.shape))throw new Error("Error in gradient for op "+T.kernelName+". The gradient of input '"+N+"' has shape '"+O.shape+"', which does not match the shape of the input '"+D.shape+"'");if(v[D.id]==null)v[D.id]=O;else{var M=v[D.id];v[D.id]=M.add(O),M.dispose()}};for(var k in T.inputs)R(k)},S=g.length-1;S>=0;S--)x(S)}(h,l,function(v){return o.tidy(v)});var p=e.map(function(v){return h[v.id]});return o.state.gradientDepth===0&&(o.state.activeTape.forEach(function(v){for(var g=0,y=v.saved;g<y.length;g++)y[g].dispose()}),o.state.activeTape=null),{value:s,grads:p}})},t.prototype.customGrad=function(n){var e=this;return G(Cg(n),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];G(a.every(function(l){return l instanceof Rt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var s={};return a.forEach(function(l,c){s[c]=l}),e.runKernelFunc(function(l,c){return G((r=n.apply(void 0,a.concat([c]))).value instanceof Rt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),G(Cg(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},s,function(l,c){var f=r.gradFunc(l,c),h=Array.isArray(f)?f:[f];G(h.length===a.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),G(h.every(function(v){return v instanceof Rt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var p={};return h.forEach(function(v,g){p[g]=function(){return v}}),p})}},t.prototype.readSync=function(n){return this.state.tensorInfo.get(n).backend.readSync(n)},t.prototype.read=function(n){return this.state.tensorInfo.get(n).backend.read(n)},t.prototype.time=function(n){return ke(this,void 0,void 0,function(){var e,r;return Ne(this,function(a){switch(a.label){case 0:return e=Jr(),[4,this.backend.time(n)];case 1:return(r=a.sent()).wallMs=Jr()-e,[2,r]}})})},t.prototype.track=function(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var n in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new lS,this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}(),te=function(){var t=function(){if(kv==null){var e=void 0;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else{if(typeof self>"u")throw new Error("Could not find a global object");e=self}kv=e}return kv}();if(t._tfengine==null){var n=new uP(t);t._tfengine=new TP(n)}return function(e){w_=e}(t._tfengine.ENV),ea=function(){return t._tfengine},t._tfengine}();function O_(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Da=me();Da.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Da.registerFlag("IS_BROWSER",function(){return O_()}),Da.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Da.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Da.registerFlag("PROD",function(){return!1}),Da.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Da.getBool("DEBUG")}),Da.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Da.registerFlag("IS_TEST",function(){return!1});var Cl,rr,nr,ri={},Nv={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function kP(t,n){ri[t]=n}function ca(t){t in ri||(ri[t]=function(e){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(a){if(typeof OffscreenCanvas<"u"&&a===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return r.addEventListener("webglcontextlost",function(a){a.preventDefault(),delete ri[e]},!1),e===1?r.getContext("webgl",Nv)||r.getContext("experimental-webgl",Nv):r.getContext("webgl2",Nv)}(t));var n=ri[t];return n.isContextLost()?(delete ri[t],ca(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),ri[t])}function nh(t,n){return[n,t]}function fl(t){var n=De(t);return Eg(Math.ceil(n/4))}function Yl(t,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(t/2))]}function ky(t,n){var e,r,a,o,s,l,c,f,h,p=t;return me().getNumber("WEBGL_VERSION")===2?(e=p.R32F,r=p.R16F,a=p.RGBA16F,o=p.RGBA32F,s=p.RED,l=4,c=1,f=p.HALF_FLOAT,h=p.FLOAT):(e=t.RGBA,r=t.RGBA,a=t.RGBA,o=p.RGBA,s=t.RGBA,l=4,c=4,f=n!=null?n.HALF_FLOAT_OES:null,h=t.FLOAT),{internalFormatFloat:e,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:f,textureTypeFloat:h}}function Oe(t,n,e){var r=e();return n&&function(a){var o=a.getError();if(o!==a.NO_ERROR)throw new Error("WebGL Error: "+MP(a,o))}(t),r}(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Cl||(Cl={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(rr||(rr={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(nr||(nr={}));var NP=596e-10,DP=65504;function OP(t){return!!(me().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||NP<Math.abs(t)&&Math.abs(t)<DP)}function MP(t,n){switch(n){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+n}}function Cf(t,n,e){return ja(t,n,function(){return t.getExtension(e)},'Extension "'+e+'" not supported on this browser.')}function IP(t,n,e){var r=ja(t,n,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Oe(t,n,function(){return t.shaderSource(r,e)}),Oe(t,n,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function BP(t,n,e){var r=ja(t,n,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Oe(t,n,function(){return t.shaderSource(r,e)}),Oe(t,n,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw function(a,o){var s=FP.exec(o);if(s==null)return console.log("Couldn't parse line number in error: "+o),void console.log(a);for(var l=+s[1],c=a.split(`
`),f=c.length.toString().length+2,h=c.map(function(S,w){return As((w+1).toString(),f)+S}),p=0,v=0;v<h.length;v++)p=Math.max(h[v].length,p);var g=h.slice(0,l-1),y=h.slice(l-1,l),x=h.slice(l);console.log(g.join(`
`)),console.log(o.split(`
`)[0]),console.log("%c "+As(y[0],p),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(x.join(`
`))}(e,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Dv,Ov,FP=/ERROR: [0-9]+:([0-9]+):/g;function PP(t,n){return ja(t,n,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function LP(t,n,e){if(Oe(t,n,function(){return t.linkProgram(e)}),t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function Mv(t,n,e){if(Oe(t,n,function(){return t.validateProgram(e)}),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function jP(t,n,e){var r=ja(t,n,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Oe(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),Oe(t,n,function(){return t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)}),r}function zP(t,n,e){var r=ja(t,n,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Oe(t,n,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),Oe(t,n,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)}),r}function UP(t,n){return ja(t,n,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function qP(t,n){var e=me().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||n<=0){var r="["+t+"x"+n+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>e||n>e)throw r="["+t+"x"+n+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+e+"x"+e+"]")+".")}function HP(t,n){return ja(t,n,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function cS(t,n,e,r,a,o,s,l){var c=t.getAttribLocation(e,r);return c!==-1&&(Oe(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,a)}),Oe(t,n,function(){return t.vertexAttribPointer(c,o,t.FLOAT,!1,s,l)}),Oe(t,n,function(){return t.enableVertexAttribArray(c)}),!0)}function VP(t,n,e,r){KP(t,r),Oe(t,n,function(){return t.activeTexture(t.TEXTURE0+r)}),Oe(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)})}function WP(t,n,e,r){return ja(t,n,function(){return t.getUniformLocation(e,r)},'uniform "'+r+'" not present in program.')}function GP(t,n,e){return t.getUniformLocation(n,e)}function XP(t,n,e,r,a,o){Oe(t,n,function(){return VP(t,n,r,o)}),Oe(t,n,function(){return t.uniform1i(a,o)})}function Iv(t,n,e,r){Oe(t,n,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),Oe(t,n,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)})}function fS(t,n,e){Oe(t,n,function(){return t.bindFramebuffer(t.FRAMEBUFFER,e)}),Oe(t,n,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function _f(t){var n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+YP(t,n))}function YP(t,n){switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+n}}function ja(t,n,e,r){var a=Oe(t,n,function(){return e()});if(a==null)throw new Error(r);return a}function KP(t,n){var e=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=n+t.TEXTURE0;if(r<t.TEXTURE0||r>e)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+e+"]")+".")}function md(t,n){return n===void 0&&(n=2),De(t.slice(0,t.length-n))}function vd(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Bv(t){var n=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(n=[md(t)].concat(vd(t))),n}function $P(t,n){var e;n===void 0&&(n=!1);var r=me().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n&&(r*=2,(t=t.map(function(f,h){return h>=t.length-2?C_(t[h]):t[h]})).length===1&&(t=[2,t[0]])),t.length!==2){var a=oi(t);t=a.newShape}var o=De(t);if(t.length<=1&&o<=r)return[1,o];if(t.length===2&&t[0]<=r&&t[1]<=r)return t;if(t.length===3&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(n){var s=md(t),l=2,c=2;return t.length&&(l=(e=vd(t))[0],c=e[1]),Eg(o=s*(l/2)*(c/2)).map(function(f){return 2*f})}return Eg(o)}function Rf(t){return t%2==0}function Af(t,n){if(an(t=t.slice(-2),n=n.slice(-2))||!t.length||!n.length||t[0]===0||t[1]===0||n[0]===0||n[1]===0)return!0;if(t.length!==n.length){var e=t.slice(-1)[0],r=n.slice(-1)[0];if(e===r||Rf(e)&&Rf(r)&&(t[0]===1||n[0]===1))return!0}return t[1]===n[1]&&Rf(t[0])&&Rf(n[0])}function QP(t){if(Dv==null){var n=ca(t);Dv=n.getParameter(n.MAX_TEXTURE_SIZE)}return Dv}function ZP(t){if(Ov==null){var n=ca(t);Ov=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Ov)}function JP(t){if(t===0)return 0;var n=ca(t);return Cr(n,"EXT_disjoint_timer_query_webgl2")&&t===2?2:Cr(n,"EXT_disjoint_timer_query")?1:0}function Cr(t,n){return t.getExtension(n)!=null}function dS(t){try{if(ca(t)!=null)return!0}catch{return!1}return!1}function eL(t){if(t===0)return!1;var n=ca(t);if(t===1){if(!Cr(n,"OES_texture_float"))return!1}else if(!Cr(n,"EXT_color_buffer_float"))return!1;return Ng(n)}function tL(t){if(t===0)return!1;var n=ca(t);if(t!==1){if(Cr(n,"EXT_color_buffer_float"))return Ng(n);if(Cr(n,"EXT_color_buffer_half_float")){var e=n.getExtension("EXT_color_buffer_half_float");return function(r,a){var o=ky(r,a),s=r.createTexture();r.bindTexture(r.TEXTURE_2D,s),r.texImage2D(r.TEXTURE_2D,0,o.internalFormatHalfFloat,1,1,0,o.textureFormatFloat,o.textureTypeHalfFloat,null);var l=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,l),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,s,0);var c=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(s),r.deleteFramebuffer(l),c}(n,e)}return!1}return!!Cr(n,"OES_texture_float")&&!!Cr(n,"WEBGL_color_buffer_float")&&Ng(n)}function Ng(t){var n=ky(t),e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);var a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(r),a}function nL(t){return t===2&&ca(t).fenceSync!=null}var Ue=me();function M_(t){me().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Re(t,n){return te.tidy(t,n)}function Hn(t){D_(t).forEach(function(n){return n.dispose()})}function rL(t){return te.keep(t)}function gd(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];me().getBool("IS_TEST")||console.warn.apply(console,t)}function Oo(t,n){var e=t;if(ra(t))return n==="string"?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(e)||ra(e)&&n!=="string";)r.push(e.length),e=e[0];return Array.isArray(t)&&me().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function a(o,s,l){if(l=l||[],!Array.isArray(o)&&!ra(o))return void G(s.length===0,function(){return"Element arr["+l.join("][")+"] is a primitive, but should be an array/TypedArray of "+s[0]+" elements"});G(s.length>0,function(){return"Element arr["+l.join("][")+"] should be a primitive, but is an array of "+o.length+" elements"}),G(o.length===s[0],function(){return"Element arr["+l.join("][")+"] should have "+s[0]+" elements, but has "+o.length+" elements"});for(var c=s.slice(1),f=0;f<o.length;++f)a(o[f],c,l.concat(f))}(t,r,[]),r}function hS(t,n,e,r){if(t!=null&&(t!=="numeric"&&t!==n||t==="numeric"&&n==="string"))throw new Error("Argument '"+e+"' passed to '"+r+"' must be "+t+" tensor, but got "+n+" tensor")}function q(t,n,e,r){if(r===void 0&&(r="numeric"),t instanceof Rt)return hS(r,t.dtype,n,e),t;var a=Gl(t);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),hS(r,a,n,e),t==null||!ra(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var o=t==null?"null":t.constructor.name;throw new Error("Argument '"+n+"' passed to '"+e+"' must be a Tensor or TensorLike, but got '"+o+"'")}var s=Oo(t,a);ra(t)||Array.isArray(t)||(t=[t]);var l=a!=="string"?R_(t,a,me().getBool("DEBUG")):js(t,[],!0);return te.makeTensor(l,s,a)}function yd(t,n,e,r){if(r===void 0&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+n+" passed to "+e+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(a,o){return q(a,n+"["+o+"]",e)},r)}function I_(t,n){for(var e=0;e<t.length;++e)if(t[t.length-e-1]!==n-1-e)return!1;return!0}function aL(t,n,e){for(var r=t.length+n.length,a=[],o=0,s=0,l=0;l<r;l++)e.indexOf(l)===-1?a.push(t[o++]):a.push(n[s++]);return a}function xn(t,n){for(var e=[],r=t.length,a=0;a<r;a++)n.indexOf(a)===-1&&e.push(t[a]);return[e,n.map(function(o){return t[o]})]}function Wn(t,n){return aL(t,n.map(function(e){return 1}),n)}function tr(t,n,e){G(I_(n,e),function(){return t+" supports only inner-most axes for now. Got axes "+n+" and rank-"+e+" input."})}function fa(t,n){if(I_(t,n))return null;for(var e=[],r=0;r<n;++r)t.indexOf(r)===-1&&e.push(r);return t.forEach(function(a){return e.push(a)}),e}function Ny(t){return t.map(function(n,e){return[e,n]}).sort(function(n,e){return n[1]-e[1]}).map(function(n){return n[0]})}function da(t,n){for(var e=[],r=n-t;r<n;++r)e.push(r);return e}function oL(t,n){var e=t[0].length;t.forEach(function(a,o){G(a.length===e,function(){return"Error in concat"+e+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+e+")"})}),G(n>=0&&n<e,function(){return"Error in concat"+e+"D: axis must be between 0 and "+(e-1)+"."});var r=t[0];t.forEach(function(a,o){for(var s=0;s<e;s++)G(s===n||a[s]===r[s],function(){return"Error in concat"+e+"D: Shape of tensors["+o+"] ("+a+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."})})}function Us(t,n){for(var e=t[0].slice(),r=1;r<t.length;r++)e[n]+=t[r][n];return e}function Z(t){var n=Object.keys(t);if(n.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+n.length+" keys.");var e=n[0],r=t[e];e.endsWith("_")&&(e=e.substring(0,e.length-1));var a=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];te.startScope(e);try{var l=r.apply(void 0,o);return l instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),te.endScope(l),l}catch(c){throw te.endScope(null),c}};return Object.defineProperty(a,"name",{value:e,configurable:!0}),a}Ue.registerFlag("HAS_WEBGL",function(){return Ue.getNumber("WEBGL_VERSION")>0}),Ue.registerFlag("WEBGL_VERSION",function(){return dS(2)?2:dS(1)?1:0}),Ue.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Ue.get("WEBGL_VERSION")===2}),Ue.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Ue.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Ue.registerFlag("WEBGL_PACK",function(){return Ue.getBool("HAS_WEBGL")}),Ue.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_PACK_CLIP",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Ue.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_PACK_REDUCE",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_CONV_IM2COL",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return QP(Ue.getNumber("WEBGL_VERSION"))}),Ue.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return ZP(Ue.getNumber("WEBGL_VERSION"))}),Ue.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var t=Ue.getNumber("WEBGL_VERSION");return t===0?0:JP(t)}),Ue.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Ue.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t}),Ue.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return eL(Ue.getNumber("WEBGL_VERSION"))}),Ue.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Ue.getBool("WEBGL_FORCE_F16_TEXTURES")&&Ue.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Ue.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return tL(Ue.getNumber("WEBGL_VERSION"))}),Ue.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return nL(Ue.getNumber("WEBGL_VERSION"))}),Ue.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Ue.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),N_=M_;var pn=Z({complex_:function(t,n){var e=q(t,"real","complex"),r=q(n,"imag","complex");return dt(e.shape,r.shape,"real and imag shapes, "+e.shape+" and "+r.shape+", must match in call to tf.complex()."),te.runKernelFunc(function(a){return a.complex(e,r)},{$real:e,$imag:r})}}),Er=Z({real_:function(t){var n=q(t,"input","real");return te.runKernelFunc(function(e){return e.real(n)},{$input:n})}}),ta=Z({imag_:function(t){var n=q(t,"input","imag");return te.runKernelFunc(function(e){return e.imag(n)},{$input:n})}});function vn(t,n,e){return Mo(t,n,Oo(t,e),e)}function Mo(t,n,e,r){if(r==null&&(r=Gl(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!ra(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(n!=null){T_(n);var a=De(n),o=De(e);G(a===o,function(){return"Based on the provided shape, ["+n+"], the tensor should have "+a+" values but has "+o});for(var s=0;s<e.length;++s){var l=e[s],c=s!==e.length-1||l!==De(n.slice(s));G(e[s]===n[s]||!c,function(){return"Error creating a new Tensor. Inferred shape ("+e+") does not match the provided shape ("+n+"). "})}}return ra(t)||Array.isArray(t)||(t=[t]),n=n||e,t=r!=="string"?R_(t,r,me().getBool("DEBUG")):js(t,[],!0),te.makeTensor(t,n,r)}function _e(t,n){if((ra(t)&&n!=="string"||Array.isArray(t))&&n!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(n==="string"&&ra(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Mo(t,[],[],n)}function qt(t,n){$s(t);var e=Oo(t,n);if(e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Mo(t,null,e,n)}function Co(t,n,e){if($s(t),n!=null&&n.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Oo(t,e);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Mo(t,n,r,e)}function Dy(t,n,e){if($s(t),n!=null&&n.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Oo(t,e);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Mo(t,n,r,e)}function Ln(t,n,e){if($s(t),n!=null&&n.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Oo(t,e);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Mo(t,n,r,e)}function iL(t,n,e){if($s(t),n!=null&&n.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Oo(t,e);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Mo(t,n,r,e)}function sL(t,n,e){if($s(t),n!=null&&n.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Oo(t,e);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Mo(t,n=n||r,r,e)}function uL(t,n,e,r){return n===void 0&&(n=!0),te.makeVariable(t,n,e,r)}function Qs(t,n){if(n===void 0&&(n="float32"),n==="complex64"){var e=Qs(t,"float32"),r=St(t,"float32");return pn(e,r)}var a=A_(De(t),n);return te.makeTensor(a,t,n)}function St(t,n){if(n===void 0&&(n="float32"),n==="complex64"){var e=St(t,"float32"),r=St(t,"float32");return pn(e,r)}var a=Xl(De(t),n);return te.makeTensor(a,t,n)}function oa(t,n,e){return te.runKernelFunc(function(r){return r.fill(t,n,e)},{})}function lL(t,n,e){if(e<=0)throw new Error("The number of values should be positive.");return te.runKernelFunc(function(r){return r.linspace(t,n,e)},{})}function bd(t,n,e,r){if(e===void 0&&(e=1),r===void 0&&(r="float32"),e===0)throw new Error("Cannot have a step of zero");if(t===n||t<n&&e<0||n<t&&e>1)return St([0],r);var a=Xl(Math.abs(Math.ceil((n-t)/e)),r);n<t&&e===1&&(e=-1),a[0]=t;for(var o=1;o<a.length;o++)a[o]=a[o-1]+e;return qt(a,r)}var B_=Z({onesLike_:function(t){var n=q(t,"x","onesLike");if(n.dtype==="complex64"){var e=B_(Er(n)),r=at(ta(n));return pn(e,r)}return te.runKernelFunc(function(a){return a.onesLike(n)},{$x:n},function(a,o){return{$x:function(){return at(a)}}})}}),at=Z({zerosLike_:function(t){var n=q(t,"x","zerosLike");return te.runKernelFunc(function(e){return e.zerosLike(n)},{$x:n},function(e,r){return{$x:function(){return at(e)}}})}}),Xt=Z({concat_:function(t,n){n===void 0&&(n=0),G(t.length>=1,function(){return"Pass at least one tensor to concat"});var e=yd(t,"tensors","concat");e[0].dtype==="complex64"&&e.forEach(function(l){if(l.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+l.dtype+". ")}),n=Qt(n,e[0].shape)[0];var r=Us(e.map(function(l){return l.shape}),n);if(De(r)===0)return vn([],r);if((e=e.filter(function(l){return l.size>0})).length===1)return e[0];var a=e.map(function(l){return l.shape});oL(a,n);var o=e,s={axis:n};return te.runKernelFunc(function(l){return l.concat(e,n)},o,function(l){var c=a.map(function(f){return f[n]});return Oy(l,c,n).map(function(f){return function(){return f}})},"Concat",s)}}),cL=Z({concat1d_:function(t){return Xt(t,0)}}),fL=Z({concat2d_:function(t,n){return Xt(t,n)}}),dL=Z({concat3d_:function(t,n){return Xt(t,n)}}),hL=Z({concat4d_:function(t,n){return Xt(t,n)}}),Oy=Z({split_:function(t,n,e){e===void 0&&(e=0);var r,a=q(t,"x","split");return e=Qt(e,a.shape)[0],typeof n=="number"?(G(a.shape[e]%n==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(n).fill(a.shape[e]/n)):(G(a.shape[e]===n.reduce(function(o,s){return o+s}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=n),te.runKernelFunc(function(o){return o.split(a,r,e)},{$x:a},function(o){return{$x:function(){return Xt(o,e)}}})}});function Ci(t,n){return t(n={exports:{}},n.exports),n.exports}var pL=Ci(function(t){(function(n,e,r){function a(l){var c,f=this,h=(c=4022871197,function(p){p=p.toString();for(var v=0;v<p.length;v++){var g=.02519603282416938*(c+=p.charCodeAt(v));g-=c=g>>>0,c=(g*=c)>>>0,c+=4294967296*(g-=c)}return 23283064365386963e-26*(c>>>0)});f.next=function(){var p=2091639*f.s0+23283064365386963e-26*f.c;return f.s0=f.s1,f.s1=f.s2,f.s2=p-(f.c=0|p)},f.c=1,f.s0=h(" "),f.s1=h(" "),f.s2=h(" "),f.s0-=h(l),f.s0<0&&(f.s0+=1),f.s1-=h(l),f.s1<0&&(f.s1+=1),f.s2-=h(l),f.s2<0&&(f.s2+=1),h=null}function o(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function s(l,c){var f=new a(l),h=c&&c.state,p=f.next;return p.int32=function(){return 4294967296*f.next()|0},p.double=function(){return p()+11102230246251565e-32*(2097152*p()|0)},p.quick=p,h&&(typeof h=="object"&&o(h,f),p.state=function(){return o(f,{})}),p}e&&e.exports?e.exports=s:this.alea=s})(0,t)}),mL=Ci(function(t){(function(n,e,r){function a(l){var c=this,f="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var p=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^p^p>>>8},l===(0|l)?c.x=l:f+=l;for(var h=0;h<f.length+64;h++)c.x^=0|f.charCodeAt(h),c.next()}function o(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c}function s(l,c){var f=new a(l),h=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,h&&(typeof h=="object"&&o(h,f),p.state=function(){return o(f,{})}),p}e&&e.exports?e.exports=s:this.xor128=s})(0,t)}),vL=Ci(function(t){(function(n,e,r){function a(l){var c=this,f="";c.next=function(){var p=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^p^p<<1)|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,l===(0|l)?c.x=l:f+=l;for(var h=0;h<f.length+64;h++)c.x^=0|f.charCodeAt(h),h==f.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function o(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c.v=l.v,c.d=l.d,c}function s(l,c){var f=new a(l),h=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,h&&(typeof h=="object"&&o(h,f),p.state=function(){return o(f,{})}),p}e&&e.exports?e.exports=s:this.xorwow=s})(0,t)}),gL=Ci(function(t){(function(n,e,r){function a(l){var c=this;c.next=function(){var f,h,p=c.x,v=c.i;return f=p[v],h=(f^=f>>>7)^f<<24,h^=(f=p[v+1&7])^f>>>10,h^=(f=p[v+3&7])^f>>>3,h^=(f=p[v+4&7])^f<<7,f=p[v+7&7],h^=(f^=f<<13)^f<<9,p[v]=h,c.i=v+1&7,h},function(f,h){var p,v=[];if(h===(0|h))v[0]=h;else for(h=""+h,p=0;p<h.length;++p)v[7&p]=v[7&p]<<15^h.charCodeAt(p)+v[p+1&7]<<13;for(;v.length<8;)v.push(0);for(p=0;p<8&&v[p]===0;++p);for(p==8?v[7]=-1:v[p],f.x=v,f.i=0,p=256;p>0;--p)f.next()}(c,l)}function o(l,c){return c.x=l.x.slice(),c.i=l.i,c}function s(l,c){l==null&&(l=+new Date);var f=new a(l),h=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,h&&(h.x&&o(h,f),p.state=function(){return o(f,{})}),p}e&&e.exports?e.exports=s:this.xorshift7=s})(0,t)}),yL=Ci(function(t){(function(n,e,r){function a(l){var c=this;c.next=function(){var f,h,p=c.w,v=c.X,g=c.i;return c.w=p=p+1640531527|0,h=v[g+34&127],f=v[g=g+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,h=v[g]=h^f,c.i=g,h+(p^p>>>16)|0},function(f,h){var p,v,g,y,x,S=[],w=128;for(h===(0|h)?(v=h,h=null):(h+="\0",v=0,w=Math.max(w,h.length)),g=0,y=-32;y<w;++y)h&&(v^=h.charCodeAt((y+32)%h.length)),y===0&&(x=v),v^=v<<10,v^=v>>>15,v^=v<<4,v^=v>>>13,y>=0&&(x=x+1640531527|0,g=(p=S[127&y]^=v+x)==0?g+1:0);for(g>=128&&(S[127&(h&&h.length||0)]=-1),g=127,y=512;y>0;--y)v=S[g+34&127],p=S[g=g+1&127],v^=v<<13,p^=p<<17,v^=v>>>15,p^=p>>>12,S[g]=v^p;f.w=x,f.X=S,f.i=g}(c,l)}function o(l,c){return c.i=l.i,c.w=l.w,c.X=l.X.slice(),c}function s(l,c){l==null&&(l=+new Date);var f=new a(l),h=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,h&&(h.X&&o(h,f),p.state=function(){return o(f,{})}),p}e&&e.exports?e.exports=s:this.xor4096=s})(0,t)}),bL=Ci(function(t){(function(n,e,r){function a(l){var c=this,f="";c.next=function(){var p=c.b,v=c.c,g=c.d,y=c.a;return p=p<<25^p>>>7^v,v=v-g|0,g=g<<24^g>>>8^y,y=y-p|0,c.b=p=p<<20^p>>>12^v,c.c=v=v-g|0,c.d=g<<16^v>>>16^y,c.a=y-p|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,l===Math.floor(l)?(c.a=l/4294967296|0,c.b=0|l):f+=l;for(var h=0;h<f.length+20;h++)c.b^=0|f.charCodeAt(h),c.next()}function o(l,c){return c.a=l.a,c.b=l.b,c.c=l.c,c.d=l.d,c}function s(l,c){var f=new a(l),h=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,h&&(typeof h=="object"&&o(h,f),p.state=function(){return o(f,{})}),p}e&&e.exports?e.exports=s:this.tychei=s})(0,t)}),ai=Ci(function(t){(function(n,e){var r,a=this,o=256,s=6,l="random",c=e.pow(o,s),f=e.pow(2,52),h=2*f,p=o-1;function v(w,T,A){var C=[],R=x(function O(D,M){var P,F=[],U=typeof D;if(M&&U=="object")for(P in D)try{F.push(O(D[P],M-1))}catch{}return F.length?F:U=="string"?D:D+"\0"}((T=T==1?{entropy:!0}:T||{}).entropy?[w,S(n)]:w??function(){try{var O;return r&&(O=r.randomBytes)?O=O(o):(O=new Uint8Array(o),(a.crypto||a.msCrypto).getRandomValues(O)),S(O)}catch{var D=a.navigator,M=D&&D.plugins;return[+new Date,a,M,a.screen,S(n)]}}(),3),C),k=new g(C),N=function(){for(var O=k.g(s),D=c,M=0;O<f;)O=(O+M)*o,D*=o,M=k.g(1);for(;O>=h;)O/=2,D/=2,M>>>=1;return(O+M)/D};return N.int32=function(){return 0|k.g(4)},N.quick=function(){return k.g(4)/4294967296},N.double=N,x(S(k.S),n),(T.pass||A||function(O,D,M,P){return P&&(P.S&&y(P,k),O.state=function(){return y(k,{})}),M?(e[l]=O,D):O})(N,R,"global"in T?T.global:this==e,T.state)}function g(w){var T,A=w.length,C=this,R=0,k=C.i=C.j=0,N=C.S=[];for(A||(w=[A++]);R<o;)N[R]=R++;for(R=0;R<o;R++)N[R]=N[k=p&k+w[R%A]+(T=N[R])],N[k]=T;(C.g=function(O){for(var D,M=0,P=C.i,F=C.j,U=C.S;O--;)D=U[P=p&P+1],M=M*o+U[p&(U[P]=U[F=p&F+D])+(U[F]=D)];return C.i=P,C.j=F,M})(o)}function y(w,T){return T.i=w.i,T.j=w.j,T.S=w.S.slice(),T}function x(w,T){for(var A,C=w+"",R=0;R<C.length;)T[p&R]=p&(A^=19*T[p&R])+C.charCodeAt(R++);return S(T)}function S(w){return String.fromCharCode.apply(0,w)}if(e["seed"+l]=v,x(e.random(),n),t.exports){t.exports=v;try{r=require("crypto")}catch{}}})([],Math)});ai.alea=pL,ai.xor128=mL,ai.xorwow=vL,ai.xorshift7=gL,ai.xor4096=yL,ai.tychei=bL;var rh=ai.alea,My=function(){function t(n,e,r,a,o){this.mean=n,this.stdDev=e,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var s=o||Math.random();this.random=rh(s.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var n=this.nextVal;return this.nextVal=NaN,n}for(var e,r,a=!1;!a;){var o=void 0,s=void 0,l=void 0;do l=(o=2*this.random()-1)*o+(s=2*this.random()-1)*s;while(l>=1||l===0);var c=Math.sqrt(-2*Math.log(l)/l);e=this.mean+this.stdDev*o*c,r=this.mean+this.stdDev*s*c,this.truncated&&!this.isValidTruncated(e)||(a=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(e)},t.prototype.convertValue=function(n){return this.dtype==null||this.dtype==="float32"?n:Math.round(n)},t.prototype.isValidTruncated=function(n){return n<=this.upper&&n>=this.lower},t}(),wL=function(){function t(n,e,r,a){this.alpha=n,this.beta=1/e,this.dtype=r;var o=a||Math.random();this.randu=rh(o.toString()),this.randn=new My(0,1,r,!1,this.randu()),this.d=n<1?n+2/3:n-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var n,e,r,a,o,s;;){do a=this.randn.nextValue(),s=1+this.c*a;while(s<=0);if(s*=s*s,e=1-.331*(n=a*a)*n,r=.5*n+this.d*(1-s+Math.log(s)),(o=this.randu())<e||Math.log(o)<r)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)},t.prototype.convertValue=function(n){return this.dtype==="float32"?n:Math.round(n)},t}(),xL=function(){function t(n,e,r,a){var o=this;if(n===void 0&&(n=0),e===void 0&&(e=1),this.canReturnFloat=function(){return o.dtype==null||o.dtype==="float32"},this.min=n,this.range=e-n,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+n+" - "+e+" <= 1 and dtype is not float");this.random=rh(a)}return t.prototype.convertValue=function(n){return this.canReturnFloat()?n:Math.round(n)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();function Ve(t,n,e){return n===void 0&&(n="float32"),n=n||"float32",T_(t),new El(t,n,e)}function SL(t,n){n===void 0&&(n=!1),console.log(t.toString(n))}var F_=Z({batchToSpaceND_:function(t,n,e){var r=q(t,"x","batchToSpaceND"),a=n.reduce(function(o,s){return o*s});return G(r.rank>=1+n.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+n.length}),G(e.length===n.length,function(){return"crops.length is "+e.length+" but should be equal to blockShape.length  "+n.length}),G(r.shape[0]%a==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+n.join(" * ")+" === "+a}),te.runKernelFunc(function(o){return o.batchToSpaceND(r,n,e)},{$x:r},function(o){return{$x:function(){return o.spaceToBatchND(n,e)}}})}}),EL=Z({broadcastTo_:function(t,n){var e=q(t,"broadcastTo","x"),r=e.shape;if(n.some(function(c){return!(c>0)||c%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+n+"].");if(n.length<e.rank)throw new Error("broadcastTo(): shape.length="+n.length+" < input.rank="+e.rank+".");if(n.length>e.rank){for(var a=e.shape.slice();a.length<n.length;)a.unshift(1);e=e.reshape(a)}for(var o=Array.from(n),s=n.length-1;s>=0;s--)if(e.shape[s]===n[s])o[s]=1;else if(e.shape[s]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+n+"].");var l=o.map(function(c,f){return c>1?f:-1}).filter(function(c){return c>=0});return l.length===0?e.clone():te.runKernelFunc(function(c){return c.tile(e,o)},{input:e},function(c){return{input:function(){return c.sum(l,!0)}}})}}),CL=Z({cast_:function(t,n){var e=q(t,"x","cast");if(!vP(n))throw new Error("Failed to cast to unknown dtype "+n);if(n==="string"&&e.dtype!=="string"||n!=="string"&&e.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:n};return te.runKernelFunc(function(a){return a.cast(e,n)},{x:e},function(a){return{x:function(){return a.clone()}}},"Cast",r)}}),_L=Z({clone_:function(t){var n=q(t,"x","clone",null);return te.runKernelFunc(function(){return te.makeTensorFromDataId(n.dataId,n.shape,n.dtype)},{$x:n},function(e){return{$x:function(){return e.toFloat()}}})}}),RL=Z({cumsum_:function(t,n,e,r){n===void 0&&(n=0),e===void 0&&(e=!1),r===void 0&&(r=!1);var a=q(t,"x","cumsum"),o=fa([n|=0],a.rank),s=a;o!=null&&(s=a.transpose(o));var l=da(1,a.rank)[0],c=te.runKernelFunc(function(f){return f.cumsum(s,l,e,r)},{permutedX:s},function(f){return{permutedX:function(){return f.cumsum(n,e,!r)}}});return o!=null&&(c=c.transpose(o)),c}}),AL=Z({depthToSpace_:function(t,n,e){e===void 0&&(e="NHWC");var r=q(t,"x","depthToSpace"),a=e==="NHWC"?r.shape[1]:r.shape[2],o=e==="NHWC"?r.shape[2]:r.shape[3],s=e==="NHWC"?r.shape[3]:r.shape[1];return G(a*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+n+`  for depthToSpace with input shape
      `+r.shape}),G(o*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+n+` for depthToSpace with input shape
          `+r.shape}),G(s%(n*n)==0,function(){return"Dimension size must be evenly divisible by "+n*n+" but is "+s+" for depthToSpace with input shape "+r.shape}),te.runKernelFunc(function(l){return l.depthToSpace(r,n,e)},{$x:r})}}),Sr=Z({expandDims_:function(t,n){n===void 0&&(n=0);var e=q(t,"x","expandDims",null);G(n<=e.rank,function(){return"Axis must be <= rank of the tensor"});var r=e.shape.slice();return n<0&&(G(-(e.rank+1)<=n,function(){return"Axis must be in the interval ["+-(e.rank+1)+", "+e.rank+"]"}),n=e.rank+n+1),r.splice(n,0,1),Br(e,r)}}),P_=Z({eye_:function(t,n,e,r){r===void 0&&(r="float32"),n==null&&(n=t);for(var a=Ve([t,n],r),o=t<=n?t:n,s=0;s<o;++s)a.set(1,s,s);var l=a.toTensor().as2D(t,n);if(e==null)return l;if(e.length===1)return Ts(Sr(l,0),[e[0],1,1]);if(e.length===2)return Ts(Sr(Sr(l,0),0),[e[0],e[1],1,1]);if(e.length===3)return Ts(Sr(Sr(Sr(l,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+e.length+"D.")}}),TL=Z({multinomial_:function(t,n,e,r){r===void 0&&(r=!1);var a=q(t,"logits","multinomial"),o=a.size,s=a.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(s>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+s);e=e||Math.random();var l=s===1?a.as2D(1,-1):a,c=te.runKernelFunc(function(f){return f.multinomial(l,r,n,e)},{logits2D:l});return s===1?c.as1D():c}}),Dg=Z({oneHot_:function(t,n,e,r){if(e===void 0&&(e=1),r===void 0&&(r=0),n<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+n);var a=q(t,"indices","oneHot","int32"),o=a.shape.concat([n]);return a=a.flatten(),te.runKernelFunc(function(s){return s.oneHot(a,n,e,r)},{$indices:a},function(s){return{$indices:function(){return St(a.shape,"float32")}}}).reshape(o)}}),_i=Z({pad_:function(t,n,e){e===void 0&&(e=0);var r=q(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:n,constantValue:e};return te.runKernelFunc(function(o){return o.pad(r,n,e)},{x:r},function(o){var s=n.map(function(l){return l[0]});return{x:function(){return o.slice(s,r.shape)}}},"PadV2",a)}}),kL=Z({pad1d_:function(t,n,e){return e===void 0&&(e=0),G(n.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),_i(t,[n],e)}}),NL=Z({pad2d_:function(t,n,e){return e===void 0&&(e=0),G(n.length===2&&n[0].length===2&&n[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),_i(t,n,e)}}),DL=Z({pad3d_:function(t,n,e){return e===void 0&&(e=0),G(n.length===3&&n[0].length===2&&n[1].length===2&&n[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),_i(t,n,e)}}),OL=Z({pad4d_:function(t,n,e){return e===void 0&&(e=0),G(n.length===4&&n[0].length===2&&n[1].length===2&&n[2].length===2&&n[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),_i(t,n,e)}}),ML=Z({rand_:function(t,n,e){var r=De(t),a=null;if(e==null||e==="float32")a=new Float32Array(r);else if(e==="int32")a=new Int32Array(r);else{if(e!=="bool")throw new Error("Unknown data type "+e);a=new Uint8Array(r)}for(var o=0;o<r;o++)a[o]=n();return te.makeTensor(a,t,e)}}),IL=Z({randomNormal_:function(t,n,e,r,a){if(n===void 0&&(n=0),e===void 0&&(e=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new My(n,e,r,!1,a),s=Ve(t,r),l=0;l<s.values.length;l++)s.values[l]=o.nextValue();return s.toTensor()}}),BL=Z({randomGamma_:function(t,n,e,r,a){if(e===void 0&&(e=1),r===void 0&&(r="float32"),e==null&&(e=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var o=new wL(n,e,r,a),s=Ve(t,r),l=0;l<s.values.length;l++)s.values[l]=o.nextValue();return s.toTensor()}}),L_=Z({randomUniform_:function(t,n,e,r,a){n===void 0&&(n=0),e===void 0&&(e=1),r===void 0&&(r="float32");for(var o=Ve(t,r),s=new xL(n,e,null,a),l=0;l<o.values.length;l++)o.values[l]=s.nextValue();return o.toTensor()}}),Br=Z({reshape_:function(t,n){var e=q(t,"x","reshape",null);n=pP(n,e.size),G(e.size===De(n),function(){return"new shape and old shape must have the same number of elements."});var r={shape:n};return te.runKernelFunc(function(a){return a.reshape(e,n)},{x:e},function(a){return{x:function(){return a.reshape(e.shape)}}},"Reshape",r)}}),j_=Z({spaceToBatchND_:function(t,n,e){var r=q(t,"x","spaceToBatchND");return G(r.rank>=1+n.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+n.length}),G(e.length===n.length,function(){return"paddings.shape[0] "+e.length+" must be equal to [blockShape] "+n.length}),G(r.shape.reduce(function(a,o,s){return s>0&&s<=n.length?a&&(o+e[s-1][0]+e[s-1][1])%n[s-1]==0:a},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+e.toString()+" must be divisible by blockShapes "+n.toString()}),te.runKernelFunc(function(a){return a.spaceToBatchND(r,n,e)},{$x:r},function(a){return{$x:function(){return a.batchToSpaceND(n,e)}}})}}),z_=Z({squeeze_:function(t,n){var e=q(t,"x","squeeze");return Br(e,oi(e.shape,n).newShape)}}),ir=Z({stack_:function(t,n){n===void 0&&(n=0);var e=yd(t,"tensors","stack");if(G(e.length>=1,function(){return"Pass at least one tensor to tf.stack"}),e.length===1)return e[0].expandDims(n);var r=e[0].rank,a=e[0].shape,o=e[0].dtype;G(n<=r,function(){return"Axis must be <= rank of the tensor"}),e.forEach(function(l){dt(a,l.shape,"All tensors passed to stack must have matching shapes")}),e.forEach(function(l){G(o===l.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var s=e.map(function(l){return l.expandDims(n)});return Xt(s,n)}}),Ts=Z({tile_:function(t,n){var e=q(t,"x","tile",null);G(e.rank===n.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of reps "+n+"."});var r=[e],a={reps:n};return te.runKernelFunc(function(o,s){var l=o.tile(e,n);return s([e]),l},{x:e},function(o,s){var l=s[0];return{x:function(){var c=at(l);if(l.rank===1)for(var f=0;f<n[0];++f)c=c.add(o.slice([f*l.shape[0]],[l.shape[0]]));else if(l.rank===2)for(f=0;f<n[0];++f)for(var h=0;h<n[1];++h)c=c.add(o.slice([f*l.shape[0],h*l.shape[1]],[l.shape[0],l.shape[1]]));else if(l.rank===3)for(f=0;f<n[0];++f)for(h=0;h<n[1];++h)for(var p=0;p<n[2];++p)c=c.add(o.slice([f*l.shape[0],h*l.shape[1],p*l.shape[2]],[l.shape[0],l.shape[1],l.shape[2]]));else{if(l.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+l.rank+" tensors yet.");for(f=0;f<n[0];++f)for(h=0;h<n[1];++h)for(p=0;p<n[2];++p)for(var v=0;v<n[3];++v)c=c.add(o.slice([f*l.shape[0],h*l.shape[1],p*l.shape[2],v*l.shape[3]],[l.shape[0],l.shape[1],l.shape[2],l.shape[3]]))}return c}}},"Tile",a,r)}}),FL=Z({truncatedNormal_:function(t,n,e,r,a){if(n===void 0&&(n=0),e===void 0&&(e=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new My(n,e,r,!0,a),s=Ve(t,r),l=0;l<s.values.length;l++)s.values[l]=o.nextValue();return s.toTensor()}}),Yt=Z({unstack_:function(t,n){n===void 0&&(n=0),n=n||0;var e=q(t,"x","unstack");G(n>=-e.shape.length&&n<e.shape.length,function(){return"Axis = "+n+" is not in [-"+e.shape.length+", "+e.shape.length+")"}),n<0&&(n+=e.shape.length);var r={axis:n};return te.runKernelFunc(function(a){return a.unstack(e,n)},{x:e},function(a){return{x:function(){return ir(a,n)}}},"Unpack",r)}}),PL=function(t,n){return ke(this,void 0,void 0,function(){var e,r,a,o,s,l,c,f,h,p;return Ne(this,function(v){switch(v.label){case 0:return e=q(t,"x","setdiff1d"),r=q(n,"y","setdiff1d"),G(e.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+e.dtype+") and y ("+r.dtype+")."}),G(e.rank===1,function(){return"x should be 1D tensor, but got x ("+e.shape+")."}),G(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,e.data()];case 1:return a=v.sent(),[4,r.data()];case 2:for(o=v.sent(),s=new Set(o),l=0,h=0;h<a.length;h++)s.has(a[h])||l++;for(c=new El([l],e.dtype),f=new El([l],"int32"),h=0,p=0;h<a.length;h++)s.has(a[h])||(c.values[p]=a[h],f.values[p]=h,p++);return[2,[c.toTensor(),f.toTensor()]]}})})};function wd(t,n,e,r){r===void 0&&(r=!0);var a=[];if(r)(a=a.concat(n.slice(0))).push(t[0]/e),a=a.concat(t.slice(1));else{a=a.concat(t[0]);for(var o=n.length,s=0;s<o;++s)a=a.concat([t[s+1]/n[s],n[s]]);a=a.concat(t.slice(o+1))}return a}function xd(t,n,e){e===void 0&&(e=!0);var r=[];if(e){r.push(n);for(var a=n+1;a<t;++a)a<=2*n?(r.push(a),r.push(a-(n+1))):r.push(a)}else{var o=[],s=[];for(a=1;a<t;++a)a>=2*n+1||a%2==1?s.push(a):o.push(a);r.push.apply(r,o),r.push(0),r.push.apply(r,s)}return r}function Sd(t,n,e,r){r===void 0&&(r=!0);var a=[];r?a.push(t[0]/e):a.push(t[0]*e);for(var o=1;o<t.length;++o)o<=n.length?r?a.push(n[o-1]*t[o]):a.push(t[o]/n[o-1]):a.push(t[o]);return a}function U_(t,n){for(var e=[0],r=0;r<n;++r)e.push(t[r][0]);return e}function q_(t,n,e){for(var r=t.slice(0,1),a=0;a<e;++a)r.push(t[a+1]-n[a][0]-n[a][1]);return r}function H_(t,n){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(n.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(n.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+n.dtype+".");if(n.shape[n.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+n.shape[n.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var e=n.shape,r=e[e.length-1],a=1,o=0;o<e.length-1;++o)a*=e[o];var s=t.shape,l=e.slice();l.pop();var c=1;for(o=r;o<t.rank;++o)c*=s[o],l.push(s[o]);var f=aa(t.shape).map(function(h){return h/c}).concat([1]).slice(0,r);return[l,a,c,f]}var V_=30;function Fv(t){return t<=V_?t:_g(t,Math.floor(Math.sqrt(t)))}function LL(t,n,e){var r=n.rank>1?n.shape[n.rank-1]:1,a=n.rank>1?n.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+e.shape+", indices.shape: "+n.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+a+".";if(e.rank<a)throw new Error(o+" update.rank < "+a+". ");if(t.length<r+(e.rank-a))throw new Error(o+" Output shape length < "+(r+(e.rank-a)));if(e.rank!==a+t.length-r)throw new Error(o+" update.rank != "+(a+t.length-r));for(var s=0;s<a;++s)if(e.shape[s]!==n.shape[s])throw new Error(o+" updates.shape["+s+"] ("+e.shape[s]+") != indices.shape["+s+"] ("+n.shape[s]+").");for(s=0;s<e.rank-a;++s)if(e.shape[s+a]!==t[s+r])throw new Error(o+" updates.shape["+(s+a)+"] ("+e.shape[s+a]+") != shape["+(s+a)+"] ("+t[s+a]+")")}function jL(t,n,e){if(n.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(n.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+n.dtype);if(e.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+e);if(e.length===0){if(n.size===0)throw new Error("Indices specified for empty output. indices shape: "+n.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}LL(e,n,t)}function Ed(t,n,e){for(var r=n.shape.length,a=r>1?n.shape[r-1]:1,o=e.length,s=1,l=a;l<o;++l)s*=e[l];var c=a<1?1:a;return{sliceRank:a,numUpdates:De(n.shape)/c,sliceSize:s,strides:aa(e.slice(0,a)).concat([1]),outputSize:De(e)}}function zL(t,n,e){G(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+n+" must match the rank of the array ("+t.rank+")."}),G(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of size "+e+" must match the rank of the array ("+t.rank+")."});for(var r=function(o){G(n[o]+e[o]<=t.shape[o],function(){return"Error in slice"+t.rank+"D: begin["+o+"] + size["+o+"] ("+(n[o]+e[o])+") would overflow input.shape["+o+"] ("+t.shape[o]+")"})},a=0;a<t.rank;++a)r(a)}function pS(t){for(var n=[],e=0;t>0;)1&t&&n.push(e),t/=2,e++;return n}function Iy(t,n,e){for(var r=[],a=0;a<t.length;a++)r[a]=Math.ceil((n[a]-t[a])/e[a]);return r}function UL(t,n,e,r,a){var o=n[a],s=e[a]||1;(t&1<<a||o==null)&&(o=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var l=r[a];return o<0&&(o+=l),o=Sg(0,o,l-1)}function qL(t,n,e,r,a){var o=n[a],s=e[a]||1;(t&1<<a||o==null)&&(o=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var l=r[a];return o<0&&(o+=l),o=s>0?Sg(0,o,l):Sg(-1,o,l-1)}function W_(t,n,e){for(var r=e.length,a=0;a<e.length;a++)if(e[a]>1){r=a;break}for(a=r+1;a<e.length;a++)if(n[a]>0||e[a]!==t[a])return!1;return!0}function G_(t,n){for(var e=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)e+=t[r]*n[r];return e}function HL(t,n){G(Cg(t),function(){return"The f passed in variableGrads(f) must be a function"}),G(n==null||Array.isArray(n)&&n.every(function(h){return h instanceof zs}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var e=n!=null;if(!e)for(var r in n=[],te.registeredVariables)n.push(te.registeredVariables[r]);var a=e?n.filter(function(h){return!h.trainable}):null,o=n.length;G((n=n.filter(function(h){return h.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."});var s=te.gradients(t,n,null,!0),l=s.value,c=s.grads;G(c.some(function(h){return h!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),G(l.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+l.rank+" tensor"});var f={};return n.forEach(function(h,p){c[p]!=null&&(f[h.name]=c[p])}),a!=null&&a.forEach(function(h){return f[h.name]=null}),{value:l,grads:f}}function ah(t){return te.customGrad(t)}var za=Z({softmax_:function(t,n){n===void 0&&(n=-1);var e=q(t,"logits","softmax","float32");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and dim was "+n);return te.runKernelFunc(function(r,a){var o=r.softmax(e,n);return a([o]),o},{logits:e},function(r,a){var o=a[0],s=r.mul(o);return{logits:function(){return s.sub(s.sum([n],!0).mul(o))}}},"Softmax",{dim:n},[],[!0])}}),VL=Z({logSoftmax_:function(t,n){n===void 0&&(n=-1);var e=q(t,"logits","logSoftmax");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and axis was "+n);return ah(function(r,a){var o=r.max(n,!0),s=r.sub(o),l=s.toFloat().sub(s.exp().sum(n,!0).log());return a([l]),{value:l,gradFunc:function(c,f){var h=f[0].exp();return c.sub(c.sum(n,!0).mul(h))}}})(e)}}),X_=function(){function t(n,e){this.backend=n,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(n){return this.data.has(n)||this.dataMover.moveData(this.backend,n),this.data.get(n)},t.prototype.set=function(n,e){this.dataIdsCount++,this.data.set(n,e)},t.prototype.has=function(n){return this.data.has(n)},t.prototype.delete=function(n){return this.dataIdsCount--,this.data.delete(n)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),Y_=function(){function t(){}return t.prototype.time=function(n){return le("time")},t.prototype.read=function(n){return le("read")},t.prototype.readSync=function(n){return le("readSync")},t.prototype.numDataIds=function(){return le("numDataIds")},t.prototype.disposeData=function(n){return le("disposeData")},t.prototype.write=function(n,e,r){return le("write")},t.prototype.move=function(n,e,r,a){return le("move")},t.prototype.memory=function(){return le("memory")},t.prototype.floatPrecision=function(){return le("floatPrecision")},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.batchMatMul=function(n,e,r,a){return le("batchMatMul")},t.prototype.fusedBatchMatMul=function(n){return n.a,n.b,n.transposeA,n.transposeB,n.bias,n.activation,n.preluActivationWeights,le("fusedBatchMatMul")},t.prototype.slice=function(n,e,r){return le("slice")},t.prototype.stridedSlice=function(n,e,r,a){return le("stridedSlice")},t.prototype.unstack=function(n,e){return le("unstack")},t.prototype.reverse=function(n,e){return le("reverse")},t.prototype.concat=function(n,e){return le("concat")},t.prototype.neg=function(n){return le("neg")},t.prototype.add=function(n,e){return le("add")},t.prototype.addN=function(n){return le("addN")},t.prototype.subtract=function(n,e){return le("subtract")},t.prototype.multiply=function(n,e){return le("multiply")},t.prototype.realDivide=function(n,e){return le("realDivide")},t.prototype.floorDiv=function(n,e){return le("floorDiv")},t.prototype.sum=function(n,e){return le("sum")},t.prototype.prod=function(n,e){return le("prod")},t.prototype.unsortedSegmentSum=function(n,e,r){return le("unsortedSegmentSum")},t.prototype.argMin=function(n,e){return le("argMin")},t.prototype.argMax=function(n,e){return le("argMax")},t.prototype.equal=function(n,e){return le("equal")},t.prototype.notEqual=function(n,e){return le("notEqual")},t.prototype.less=function(n,e){return le("less")},t.prototype.lessEqual=function(n,e){return le("lessEqual")},t.prototype.greater=function(n,e){return le("greater")},t.prototype.greaterEqual=function(n,e){return le("greaterEqual")},t.prototype.logicalNot=function(n){return le("logicalNot")},t.prototype.logicalAnd=function(n,e){return le("logicalAnd")},t.prototype.logicalOr=function(n,e){return le("logicalOr")},t.prototype.where=function(n){return le("where")},t.prototype.select=function(n,e,r){return le("select")},t.prototype.topk=function(n,e,r){return le("topk")},t.prototype.min=function(n,e){return le("min")},t.prototype.minimum=function(n,e){return le("minimum")},t.prototype.mod=function(n,e){return le("mod")},t.prototype.max=function(n,e){return le("max")},t.prototype.maximum=function(n,e){return le("maximum")},t.prototype.all=function(n,e){return le("all")},t.prototype.any=function(n,e){return le("any")},t.prototype.squaredDifference=function(n,e){return le("squaredDifference")},t.prototype.ceil=function(n){return le("ceil")},t.prototype.floor=function(n){return le("floor")},t.prototype.round=function(n){return le("round")},t.prototype.sign=function(n){return le("sign")},t.prototype.isNaN=function(n){return le("isNaN")},t.prototype.isInf=function(n){return le("isInf")},t.prototype.isFinite=function(n){return le("isFinite")},t.prototype.pow=function(n,e){return le("pow")},t.prototype.exp=function(n){return le("exp")},t.prototype.expm1=function(n){return le("expm1")},t.prototype.softmax=function(n,e){return le("softmax")},t.prototype.log=function(n){return le("log")},t.prototype.log1p=function(n){return le("log1p")},t.prototype.sqrt=function(n){return le("sqrt")},t.prototype.rsqrt=function(n){return le("rsqrt")},t.prototype.square=function(n){return le("square")},t.prototype.reciprocal=function(n){return le("reciprocal")},t.prototype.relu=function(n){return le("relu")},t.prototype.relu6=function(n){return le("relu6")},t.prototype.prelu=function(n,e){return le("prelu")},t.prototype.elu=function(n){return le("elu")},t.prototype.eluDer=function(n,e){return le("eluDer")},t.prototype.selu=function(n){return le("selu")},t.prototype.int=function(n){return le("int")},t.prototype.clip=function(n,e,r){return le("clip")},t.prototype.abs=function(n){return le("abs")},t.prototype.complexAbs=function(n){return le("complexAbs")},t.prototype.sigmoid=function(n){return le("sigmoid")},t.prototype.softplus=function(n){return le("softplus")},t.prototype.sin=function(n){return le("sin")},t.prototype.cos=function(n){return le("cos")},t.prototype.tan=function(n){return le("tan")},t.prototype.asin=function(n){return le("asin")},t.prototype.acos=function(n){return le("acos")},t.prototype.atan=function(n){return le("atan")},t.prototype.atan2=function(n,e){return le("atan2")},t.prototype.sinh=function(n){return le("sinh")},t.prototype.cosh=function(n){return le("cosh")},t.prototype.tanh=function(n){return le("tanh")},t.prototype.asinh=function(n){return le("asinh")},t.prototype.acosh=function(n){return le("acosh")},t.prototype.atanh=function(n){return le("atanh")},t.prototype.erf=function(n){return le("erf")},t.prototype.step=function(n,e){return le("step")},t.prototype.fusedConv2d=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,le("fusedConv2d")},t.prototype.conv2d=function(n,e,r){return le("conv2d")},t.prototype.conv2dDerInput=function(n,e,r){return le("conv2dDerInput")},t.prototype.conv2dDerFilter=function(n,e,r){return le("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,le("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(n,e,r){return le("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(n,e,r){return le("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(n,e,r){return le("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(n,e,r){return le("conv3d")},t.prototype.conv3dDerInput=function(n,e,r){return le("conv3dDerInput")},t.prototype.conv3dDerFilter=function(n,e,r){return le("conv3dDerFilter")},t.prototype.maxPool=function(n,e){return le("maxPool")},t.prototype.maxPoolBackprop=function(n,e,r,a){return le("maxPoolBackprop")},t.prototype.avgPool=function(n,e){return le("avgPool")},t.prototype.avgPoolBackprop=function(n,e,r){return le("avgPoolBackprop")},t.prototype.avgPool3d=function(n,e){return le("avgPool3d")},t.prototype.avgPool3dBackprop=function(n,e,r){return le("avgPool3dBackprop")},t.prototype.maxPool3d=function(n,e){return le("maxPool3d")},t.prototype.maxPool3dBackprop=function(n,e,r,a){return le("maxPool3dBackprop")},t.prototype.reshape=function(n,e){return le("reshape")},t.prototype.cast=function(n,e){return le("cast")},t.prototype.tile=function(n,e){return le("tile")},t.prototype.pad=function(n,e,r){return le("pad")},t.prototype.transpose=function(n,e){return le("transpose")},t.prototype.gather=function(n,e,r){return le("gather")},t.prototype.gatherND=function(n,e){return le("gatherND")},t.prototype.scatterND=function(n,e,r){return le("scatterND")},t.prototype.batchToSpaceND=function(n,e,r){return le("batchToSpaceND")},t.prototype.spaceToBatchND=function(n,e,r){return le("spaceToBatchND")},t.prototype.resizeBilinear=function(n,e,r,a){return le("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(n,e,r){return le("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(n,e,r,a){return le("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(n,e,r){return le("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(n,e,r,a,o,s){return le("batchNormalization")},t.prototype.localResponseNormalization4D=function(n,e,r,a,o){return le("localResponseNormalization4D")},t.prototype.LRNGrad=function(n,e,r,a,o,s,l){return le("LRNGrad")},t.prototype.multinomial=function(n,e,r,a){return le("multinomial")},t.prototype.oneHot=function(n,e,r,a){return le("oneHot")},t.prototype.cumsum=function(n,e,r,a){return le("cumsum")},t.prototype.nonMaxSuppression=function(n,e,r,a,o){return le("nonMaxSuppression")},t.prototype.fft=function(n){return le("fft")},t.prototype.ifft=function(n){return le("ifft")},t.prototype.complex=function(n,e){return le("complex")},t.prototype.real=function(n){return le("real")},t.prototype.imag=function(n){return le("imag")},t.prototype.cropAndResize=function(n,e,r,a,o,s){return le("cropAndResize")},t.prototype.depthToSpace=function(n,e,r){return le("depthToSpace")},t.prototype.split=function(n,e,r){return le("split")},t.prototype.sparseToDense=function(n,e,r,a){return le("sparseToDense")},t.prototype.diag=function(n){return le("diag")},t.prototype.fill=function(n,e,r){return le("fill")},t.prototype.onesLike=function(n){return le("onesLike")},t.prototype.zerosLike=function(n){return le("zerosLike")},t.prototype.linspace=function(n,e,r){return le("linspace")},t.prototype.dispose=function(){return le("dispose")},t}();function le(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function So(t,n){for(var e=t.length,r=[],a=0;a<e;a++){var o=e-1-a,s=t[o]||1;(n[n.length-1-a]||1)>1&&s===1&&r.unshift(o)}return r}function Kt(t,n){for(var e=[],r=0;r<n.length;r++){var a=t[t.length-r-1],o=n.length-r-1,s=n[o];(a==null||a===1&&s>1)&&e.unshift(o)}return e}function tt(t,n){for(var e=[],r=Math.max(t.length,n.length),a=0;a<r;a++){var o=t[t.length-a-1];o==null&&(o=1);var s=n[n.length-a-1];if(s==null&&(s=1),o===1)e.unshift(s);else if(s===1)e.unshift(o);else{if(o!==s)throw Error("Operands could not be broadcast together with shapes "+t+" and "+n+".");e.unshift(o)}}return e}function _l(t,n,e,r,a,o,s){s===void 0&&(s="channelsLast");var l,c=Rd(n),f=c[0],h=c[1];if(s==="channelsLast")l=[f,h,t[3],t[3]];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=[f,h,t[1],t[1]]}return Ri(t,l,e,r,a,o,!1,s)}function Cd(t,n,e,r,a,o,s){s===void 0&&(s="NDHWC");var l,c,f=Og(n),h=f[0],p=f[1],v=f[2];if(s==="NDHWC")c="channelsLast",l=[h,p,v,t[4],t[4]];else{if(s!=="NCDHW")throw new Error("Unknown dataFormat "+s);c="channelsFirst",l=[h,p,v,t[1],t[1]]}return _d(t,l,e,r,a,!1,c,o)}function Ri(t,n,e,r,a,o,s,l){s===void 0&&(s=!1),l===void 0&&(l="channelsLast");var c=[-1,-1,-1,-1],f=c[0],h=c[1],p=c[2],v=c[3];if(l==="channelsLast")f=t[0],h=t[1],p=t[2],v=t[3];else{if(l!=="channelsFirst")throw new Error("Unknown dataFormat "+l);f=t[0],v=t[1],h=t[2],p=t[3]}var g,y=n[0],x=n[1],S=n[3],w=Rd(e),T=w[0],A=w[1],C=Rd(r),R=C[0],k=C[1],N=ks(y,R),O=ks(x,k),D=function(W,Y,z,X,K,V,I,H){var Q,J,re;if(typeof W=="number"){Q={top:W,bottom:W,left:W,right:W,type:W===0?"VALID":"NUMBER"};var ie=function(we,Ce,Ae,Fe,ot){Fe==null&&(Fe=K_(we,Ce,Ae));var Ye=we[0],it=we[1],Zt=dl((Ye-Ce+2*Fe)/Ae+1,ot);G(Ft(Zt),function(){return"The output # of rows ("+Zt+") must be an integer. Change the stride and/or zero pad parameters"});var Lt=dl((it-Ce+2*Fe)/Ae+1,ot);return G(Ft(Lt),function(){return"The output # of columns ("+Lt+") must be an integer. Change the stride and/or zero pad parameters"}),[Zt,Lt]}([Y,z],V,X,W,H);J=ie[0],re=ie[1]}else if(W==="same"){J=Math.ceil(Y/X),re=Math.ceil(z/K);var pe=Math.max(0,(J-1)*X+V-Y),Se=Math.max(0,(re-1)*K+I-z),xe=Math.floor(pe/2),Ee=pe-xe,de=Math.floor(Se/2);Q={top:xe,bottom:Ee,left:de,right:Se-de,type:"SAME"}}else{if(W!=="valid")throw Error("Unknown padding parameter: "+W);Q={top:0,bottom:0,left:0,right:0,type:"VALID"},J=Math.ceil((Y-V+1)/X),re=Math.ceil((z-I+1)/K)}return{padInfo:Q,outHeight:J,outWidth:re}}(a,h,p,T,A,N,O,o),M=D.padInfo,P=D.outHeight,F=D.outWidth,U=s?S*v:S;return l==="channelsFirst"?g=[f,U,P,F]:l==="channelsLast"&&(g=[f,P,F,U]),{batchSize:f,dataFormat:l,inHeight:h,inWidth:p,inChannels:v,outHeight:P,outWidth:F,outChannels:U,padInfo:M,strideHeight:T,strideWidth:A,filterHeight:y,filterWidth:x,effectiveFilterHeight:N,effectiveFilterWidth:O,dilationHeight:R,dilationWidth:k,inShape:t,outShape:g,filterShape:n}}function _d(t,n,e,r,a,o,s,l){o===void 0&&(o=!1),s===void 0&&(s="channelsLast");var c=[-1,-1,-1,-1,-1],f=c[0],h=c[1],p=c[2],v=c[3],g=c[4];if(s==="channelsLast")f=t[0],h=t[1],p=t[2],v=t[3],g=t[4];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);f=t[0],g=t[1],h=t[2],p=t[3],v=t[4]}var y,x=n[0],S=n[1],w=n[2],T=n[4],A=Og(e),C=A[0],R=A[1],k=A[2],N=Og(r),O=N[0],D=N[1],M=N[2],P=ks(x,O),F=ks(S,D),U=ks(w,M),W=function(I,H,Q,J,re,ie,pe,Se,xe,Ee,de){var we,Ce,Ae,Fe;if(typeof I=="number"){we={top:I,bottom:I,left:I,right:I,front:I,back:I,type:I===0?"VALID":"NUMBER"};var ot=function(Wa,Tr,pa,jt,Ht,ln){Ht==null&&(Ht=K_(Wa,Tr,jt));var yh=Wa[0],bh=Wa[1],wh=Wa[2],Ga=dl((yh-Tr+2*Ht)/jt+1,ln);G(Ft(Ga),function(){return"The output # of depths ("+Ga+") must be an integer. Change the stride and/or zero pad parameters"});var Xa=dl((bh-Tr+2*Ht)/jt+1,ln);G(Ft(Xa),function(){return"The output # of rows ("+Xa+") must be an integer. Change the stride and/or zero pad parameters"});var kr=dl((wh-Tr+2*Ht)/jt+1,ln);return G(Ft(kr),function(){return"The output # of columns ("+kr+") must be an integer. Change the stride and/or zero pad parameters"}),[Ga,Xa,kr,pa]}([H,Q,J,1],Se,1,re,I,de);Ce=ot[0],Ae=ot[1],Fe=ot[2]}else if(I==="same"){Ce=Math.ceil(H/re),Ae=Math.ceil(Q/ie),Fe=Math.ceil(J/pe);var Ye=(Ce-1)*re+Se-H,it=(Ae-1)*ie+xe-Q,Zt=(Fe-1)*pe+Ee-J,Lt=Math.floor(Ye/2),Ar=Ye-Lt,un=Math.floor(it/2),fr=it-un,dr=Math.floor(Zt/2);we={top:un,bottom:fr,left:dr,right:Zt-dr,front:Lt,back:Ar,type:"SAME"}}else{if(I!=="valid")throw Error("Unknown padding parameter: "+I);we={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Ce=Math.ceil((H-Se+1)/re),Ae=Math.ceil((Q-xe+1)/ie),Fe=Math.ceil((J-Ee+1)/pe)}return{padInfo:we,outDepth:Ce,outHeight:Ae,outWidth:Fe}}(a,h,p,v,C,R,k,P,F,U,l),Y=W.padInfo,z=W.outDepth,X=W.outHeight,K=W.outWidth,V=o?T*g:T;return s==="channelsFirst"?y=[f,V,z,X,K]:s==="channelsLast"&&(y=[f,z,X,K,V]),{batchSize:f,dataFormat:s,inDepth:h,inHeight:p,inWidth:v,inChannels:g,outDepth:z,outHeight:X,outWidth:K,outChannels:V,padInfo:Y,strideDepth:C,strideHeight:R,strideWidth:k,filterDepth:x,filterHeight:S,filterWidth:w,effectiveFilterDepth:P,effectiveFilterHeight:F,effectiveFilterWidth:U,dilationDepth:O,dilationHeight:D,dilationWidth:M,inShape:t,outShape:y,filterShape:n}}function K_(t,n,e,r){r===void 0&&(r=1);var a=ks(n,r);return Math.floor((t[0]*(e-1)-e+a)/2)}function Rd(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Og(t){return typeof t=="number"?[t,t,t]:t}function ks(t,n){return n<=1?t:t+(t-1)*(n-1)}function dl(t,n){if(!n)return t;switch(n){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+n)}}function qs(t){var n=Rd(t),e=n[0],r=n[1],a=n[2];return e===1&&r===1&&a===1}function Gn(t,n){return qs(t)||qs(n)}function By(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function $_(t,n,e){if(n==="complex64"){if(t.dtype==="complex64")return t.clone();var r=St(t.shape),a=t.toFloat(),o=e.complex(a,r);return r.dispose(),a.dispose(),o}if(!gP(t.dtype,n))return te.makeTensorFromDataId(t.dataId,t.shape,n);if(t.dtype==="complex64"){var s=e.real(t);return o=s.cast(n),s.dispose(),o}if(n==="int32")return e.int(t);if(n==="bool"){var l=_e(0,t.dtype);return o=e.notEqual(t,l),l.dispose(),o}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+n)}function Mg(t,n){return te.makeTensorFromDataId(t.dataId,n,t.dtype)}function Q_(t,n,e){var r=(n-t)/(e-1),a=Xl(e,"float32");a[0]=t;for(var o=1;o<a.length;o++)a[o]=a[o-1]+r;return qt(a,"float32")}function Ig(t,n){if(t.length!==n.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+n.length+".");for(var e=new Float32Array(2*t.length),r=0;r<e.length;r+=2)e[r]=t[r/2],e[r+1]=n[r/2];return e}function mS(t,n){return{real:t[2*n],imag:t[2*n+1]}}function WL(t,n,e,r){t[2*r]=n,t[2*r+1]=e}function GL(t,n,e){var r=(e?2:-2)*Math.PI*(t/n);return{real:Math.cos(r),imag:Math.sin(r)}}function XL(t,n,e){var r=function(o,s,l){return function(c,f,h){for(var p=0,v=c.length,g=0,y=!1;p<v;){var x=h(f,c[g=p+(v-p>>>1)]);x>0?p=g+1:(v=g,y=!x)}return y?p:-p-1}(o,s,l||YL)}(t,n,e),a=r<0?-(r+1):r;t.splice(a,0,n)}function YL(t,n){return t>n?1:t<n?-1:0}function Fy(t,n,e,r,a){return Z_(t,n,e,r,a,0).selectedIndices}function Py(t,n,e,r,a,o){var s=Z_(t,n,e,r,a,o);return s.numValidOutputs.dispose(),{selectedIndices:s.selectedIndices,selectedScores:s.selectedScores}}function Z_(t,n,e,r,a,o,s,l){l===void 0&&(l=!1);for(var c=Array.from(n).map(function(C,R){return{score:C,boxIndex:R,suppressBeginIndex:0}}).filter(function(C){return C.score>a}).sort(vS),f=o>0?-.5/o:0,h=[],p=[];h.length<e&&c.length>0;){var v=c.pop(),g=v.score,y=v.boxIndex,x=v.suppressBeginIndex;if(g<a)break;for(var S=!1,w=h.length-1;w>=x;--w){var T=KL(t,y,h[w]);if(T>=r){S=!0;break}if(v.score=v.score*$L(r,f,T),v.score<=a)break}v.suppressBeginIndex=h.length,S||(v.score===g?(h.push(y),p.push(v.score)):v.score>a&&XL(c,v,vS))}var A=h.length;return l&&(h.fill(0,A),p.fill(0,A)),{selectedIndices:qt(h,"int32"),selectedScores:qt(p,"float32"),numValidOutputs:_e(A,"int32")}}function KL(t,n,e){var r=t.subarray(4*n,4*n+4),a=t.subarray(4*e,4*e+4),o=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),l=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),f=Math.min(a[0],a[2]),h=Math.min(a[1],a[3]),p=Math.max(a[0],a[2]),v=Math.max(a[1],a[3]),g=(l-o)*(c-s),y=(p-f)*(v-h);if(g<=0||y<=0)return 0;var x=Math.max(o,f),S=Math.max(s,h),w=Math.min(l,p),T=Math.min(c,v),A=Math.max(w-x,0)*Math.max(T-S,0);return A/(g+y-A)}function $L(t,n,e){var r=Math.exp(n*e*e);return e<=t?r:0}function vS(t,n){return t.score-n.score||t.score===n.score&&n.boxIndex-t.boxIndex}function J_(t,n,e){var r=new Array(t.rank).fill(0),a=t.shape.slice();return n.map(function(o){a[e]=o;var s=t.slice(r,a);return r[e]+=o,s})}function eR(t,n){for(var e=new Array(t.rank),r=0;r<e.length;r++)e[r]=t.shape[r]*n[r];var a=Ve(e,t.dtype);for(r=0;r<a.values.length;++r){for(var o=a.indexToLoc(r),s=new Array(t.rank),l=0;l<s.length;l++)s[l]=o[l]%t.shape[l];var c=t.locToIndex(s);a.values[r]=t.values[c]}return a.toTensor()}function tR(t,n,e,r,a){for(var o=n[n.length-1],s=[t.length/o,o],l=s[0],c=s[1],f=Sl(e,l*r),h=Sl("int32",l*r),p=0;p<l;p++){for(var v=p*c,g=t.subarray(v,v+c),y=[],x=0;x<g.length;x++)y.push({value:g[x],index:x});y.sort(function(C,R){return R.value-C.value});var S=p*r,w=f.subarray(S,S+r),T=h.subarray(S,S+r);for(x=0;x<r;x++)w[x]=y[x].value,T[x]=y[x].index}var A=n.slice();return A[A.length-1]=r,[vn(f,A,e),vn(h,A,"int32")]}function Ly(t,n){for(var e=[],r=0;r<n.length;r++)n[r]&&e.push(r);var a=Ve(t,"int32"),o=Ve([e.length,t.length],"int32");for(r=0;r<e.length;r++){var s=a.indexToLoc(e[r]),l=r*t.length;o.values.set(s,l)}return o.toTensor()}var QL=function(t,n){this.outputShape=[],this.outputShape=t,this.variableNames=n.map(function(a,o){return"T"+o});var e=[];this.variableNames.forEach(function(a){e.push("float v"+a+" = get"+a+"AtOutCoords();")});var r=this.variableNames.map(function(a){return"v"+a}).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},ZL=function(t,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map(function(a,o){return"T"+o});var e=[];this.variableNames.forEach(function(a){e.push("vec4 v"+a+" = get"+a+"AtOutCoords();")});var r=this.variableNames.map(function(a){return"v"+a}).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},JL=function(t,n,e){this.variableNames=["A"];var r=t.windowSize,a=t.batchSize,o=t.inSize,s=Math.ceil(o/r);e||this.variableNames.push("bestIndicesA"),this.outputShape=[a,s];var l=n==="max"?">":"<",c=e?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+c+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+l+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function nR(t,n){return["x","y","z","w","u","v"].slice(0,n).map(function(e){return t+"."+e})}function jn(t,n){return n===1?[t]:nR(t,n)}function Cn(){var t,n,e,r,a,o,s,l,c,f;return me().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",n="in",e="out",r="in",a="texture",o="outputColor",s="out vec4 outputColor;",l=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,c="",f=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",n="attribute",e="varying",r="varying",a="texture2D",o="gl_FragColor",s="",l=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,f=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:n,varyingVs:e,varyingFs:r,texture2D:a,output:o,defineOutput:s,defineSpecialNaN:l,defineSpecialInf:c,defineRound:f}}function si(t,n,e){e===void 0&&(e="index");var r=aa(n);return r.map(function(a,o){return"int "+t[o]+" = "+e+" / "+a+"; "+(o===r.length-1?"int "+t[o+1]+" = "+e+" - "+t[o]+" * "+a:"index -= "+t[o]+" * "+a)+";"}).join("")}function jy(t){var n=aa(t).map(function(e){return e.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+n[0]+" + coords.y * "+n[1]+` + coords.z;
  }
`}var rR=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function ej(t,n,e,r){var a=[];t.forEach(function(g){var y=De(g.shapeInfo.logicalShape);g.shapeInfo.isUniform?a.push("uniform float "+g.name+(y>1?"["+y+"]":"")+";"):(a.push("uniform sampler2D "+g.name+";"),a.push("uniform int offset"+g.name+";"))});var o,s,l=a.join(`
`),c=t.map(function(g){return function(y,x,S){S===void 0&&(S=!1);var w="";w+=S?aR(y):ws(y);var T=y.shapeInfo.logicalShape,A=x.logicalShape;return T.length<=A.length&&(w+=S?function(C,R){var k,N=C.name,O=N.charAt(0).toUpperCase()+N.slice(1),D="get"+O+"AtOutCoords",M=C.shapeInfo.logicalShape.length,P=R.logicalShape.length,F=So(C.shapeInfo.logicalShape,R.logicalShape),U=xt(P),W=P-M,Y=["x","y","z","w","u","v"];k=M===0?"":P<2&&F.length>=1?"coords = 0;":F.map(function(Q){return"coords."+Y[Q+W]+" = 0;"}).join(`
`);var z="";z=P<2&&M>0?"coords":C.shapeInfo.logicalShape.map(function(Q,J){return"coords."+Y[J+W]}).join(", ");var X="return outputValue;",K=De(C.shapeInfo.logicalShape)===1,V=De(R.logicalShape)===1;if(M!==1||K||V){if(K&&!V)X=P===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(F.length){var I=M-2,H=M-1;F.indexOf(I)>-1&&F.indexOf(H)>-1?X="return vec4(outputValue.x);":F.indexOf(I)>-1?X="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":F.indexOf(H)>-1&&(X="return vec4(outputValue.xx, outputValue.zz);")}}else X=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+D+`() {
      `+U+` coords = getOutputCoords();
      `+k+`
      vec4 outputValue = get`+O+"("+z+`);
      `+X+`
    }
  `}(y,x):function(C,R){var k=C.name,N=k.charAt(0).toUpperCase()+k.slice(1),O="get"+N+"AtOutCoords",D=R.texShape,M=C.shapeInfo.texShape,P=C.shapeInfo.logicalShape.length,F=R.logicalShape.length;if(!C.shapeInfo.isUniform&&P===F&&C.shapeInfo.flatOffset==null&&an(M,D))return`
      float `+O+`() {
        return sampleTexture(`+k+`, resultUV);
      }
    `;var U,W=xt(F),Y=So(C.shapeInfo.logicalShape,R.logicalShape),z=F-P,X=["x","y","z","w","u","v"];U=P===0?"":F<2&&Y.length>=1?"coords = 0;":Y.map(function(V){return"coords."+X[V+z]+" = 0;"}).join(`
`);var K="";return K=F<2&&P>0?"coords":C.shapeInfo.logicalShape.map(function(V,I){return"coords."+X[I+z]}).join(", "),`
    float `+O+`() {
      `+W+` coords = getOutputCoords();
      `+U+`
      return get`+N+"("+K+`);
    }
  `}(y,x)),w}(g,n,r)}).join(`
`),f=n.texShape,h=Cn(),p=function(g){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+g.texture2D+`(textureSampler, uv).r;
    }
  `}(h),v=function(g){return g.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+g.varyingFs+` vec2 resultUV;
    `+g.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+g.defineSpecialNaN+`
    `+g.defineSpecialInf+`
    `+g.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+tj+`
    `+nj+`
    `+rj+`
  `}(h);return n.isPacked?(o=function(g,y){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(C,R){var k=[Math.ceil(R[0]/2),Math.ceil(R[1]/2)];return k[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+k[1]+`.0);
      }
    `:k[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+k[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+k[0]+", "+k[1]+`));
      return 2 * (resTexRC.x * `+k[1]+` + resTexRC.y);
    }
  `}(0,y);case 2:return function(C,R){var k=[Math.ceil(R[0]/2),Math.ceil(R[1]/2)];if(an(C,R))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+k[0]+", "+k[1]+`));
      }
    `;var N=Math.ceil(C[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+k[0]+", "+k[1]+`));

      int index = resTexRC.x * `+k[1]+` + resTexRC.y;
      int r = 2 * (index / `+N+`);
      int c = imod(index, `+N+`) * 2;

      return ivec2(r, c);
    }
  `}(g,y);case 3:return x=g,S=y,w=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)],T=Math.ceil(x[2]/2),A=T*Math.ceil(x[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+w[0]+", "+w[1]+`));
      int index = resTexRC.x * `+w[1]+` + resTexRC.y;

      int b = index / `+A+`;
      index -= b * `+A+`;

      int r = 2 * (index / `+T+`);
      int c = imod(index, `+T+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(C,R){for(var k=[Math.ceil(R[0]/2),Math.ceil(R[1]/2)],N=Math.ceil(C[C.length-1]/2),O=N*Math.ceil(C[C.length-2]/2),D=O,M="",P="b, r, c",F=2;F<C.length-1;F++)D*=C[C.length-F-1],M=`
      int b`+F+" = index / "+D+`;
      index -= b`+F+" * "+D+`;
    `+M,P="b"+F+", "+P;return`
    ivec`+C.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+k[0]+", "+k[1]+`));
      int index = resTexRC.x * `+k[1]+` + resTexRC.y;

      `+M+`

      int b = index / `+O+`;
      index -= b * `+O+`;

      int r = 2 * (index / `+N+`);
      int c = imod(index, `+N+`) * 2;

      return ivec`+C.length+"("+P+`);
    }
  `}(g,y)}var x,S,w,T,A}(n.logicalShape,f),s=function(g){return`
    void setOutput(vec4 val) {
      `+g.output+` = val;
    }
  `}(h)):(o=function(g,y){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(w,T){return T[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+T[1]+`.0);
      }
    `:T[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+T[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+T[0]+", "+T[1]+`));
      return resTexRC.x * `+T[1]+` + resTexRC.y;
    }
  `}(0,y);case 2:return function(w,T){return an(w,T)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+T[0]+", "+T[1]+`));
      }
    `:w[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+T[0]+", "+T[1]+`));
        int index = resTexRC.x * `+T[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:w[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+T[0]+", "+T[1]+`));
        int index = resTexRC.x * `+T[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+T[0]+", "+T[1]+`));
      int index = resTexRC.x * `+T[1]+` + resTexRC.y;
      int r = index / `+w[1]+`;
      int c = index - r * `+w[1]+`;
      return ivec2(r, c);
    }
  `}(g,y);case 3:return x=y,S=si(["r","c","d"],g),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      `+S+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(w,T){var A=si(["r","c","d","d2"],w);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+T[0]+", "+T[1]+`));
      int index = resTexRC.x * `+T[1]+` + resTexRC.y;
      `+A+`
      return ivec4(r, c, d, d2);
    }
  `}(g,y);case 5:return function(w,T){var A=si(["r","c","d","d2","d3"],w);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+T[0]+`,
                             `+T[1]+`));

      int index = resTexRC.x * `+T[1]+` + resTexRC.y;

      `+A+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(g,y);case 6:return function(w,T){var A=si(["r","c","d","d2","d3","d4"],w);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+T[0]+", "+T[1]+`));
      int index = resTexRC.x * `+T[1]+` + resTexRC.y;

      `+A+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(g,y);default:throw new Error(g.length+"-D output sampling is not yet supported")}var x,S}(n.logicalShape,f),s=function(g){return`
    void setOutput(float val) {
      `+g.output+` = vec4(val, 0, 0, 0);
    }
  `}(h)),r&&(v+=aj),[v,p,s,l,o,c,e].join(`
`)}function ws(t){var n=t.shapeInfo.logicalShape;switch(n.length){case 0:return function(e){var r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return"float "+a+"() {return "+r+";}";var o=e.shapeInfo.texShape,s=o[0],l=o[1];if(s===1&&l===1)return`
      float `+a+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=e.shapeInfo.texShape,f=c[0],h=c[1],p=ei(r);return`
    float `+a+`() {
      vec2 uv = uvFromFlat(`+f+", "+h+", "+p+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 1:return function(e){var r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return`
      float `+a+`(int index) {
        `+vs(e)+`
      }
    `;var o=e.shapeInfo.texShape,s=o[0],l=o[1];if(l===1&&s===1)return`
      float `+a+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=ei(r);return l===1?`
      float `+a+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+c+") + 0.5) / "+s+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:s===1?`
      float `+a+`(int index) {
        vec2 uv = vec2((float(index + `+c+") + 0.5) / "+l+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+a+`(int index) {
      vec2 uv = uvFromFlat(`+s+", "+l+", index + "+c+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 2:return function(e){var r=e.shapeInfo.logicalShape,a=e.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),s=e.shapeInfo.texShape;if(s!=null&&an(r,s)){var l=s[0],c=s[1];return`
    float `+o+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `}var f=oi(r),h=f.newShape,p=f.keptDims,v=h;if(v.length<r.length){var g=xs(e,v);return`
      `+ws(g)+`
      float `+o+`(int row, int col) {
        return `+o+"("+Ss(["row","col"],p)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+vs(e)+`
      }
    `;var y=s[0],x=s[1],S=ei(a);return x===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+S+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+y+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `:y===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+S+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+x+`.0, 0.5);
      return sampleTexture(`+a+`, uv);
    }
  `:`
  float `+o+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+S+`;
    vec2 uv = uvFromFlat(`+y+", "+x+`, index);
    return sampleTexture(`+a+`, uv);
  }
`}(t);case 3:return function(e){var r=e.shapeInfo.logicalShape,a=e.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),s=r[1]*r[2],l=r[2],c=oi(r),f=c.newShape,h=c.keptDims,p=f;if(p.length<r.length){var v=xs(e,p);return`
        `+ws(v)+`
        float `+o+`(int row, int col, int depth) {
          return `+o+"("+Ss(["row","col","depth"],h)+`);
        }
      `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+s+", "+l+`, 1)));
        `+vs(e)+`
      }
    `;var g=e.shapeInfo.texShape,y=g[0],x=g[1],S=e.shapeInfo.flatOffset;if(x===s&&S==null)return`
        float `+o+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+l+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+x+".0, "+y+`.0);
          return sampleTexture(`+a+`, uv);
        }
      `;if(x===l&&S==null)return`
    float `+o+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+x+".0, "+y+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `;var w=ei(a);return`
      float `+o+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+s+" + col * "+l+" + depth + "+w+`;
        vec2 uv = uvFromFlat(`+y+", "+x+`, index);
        return sampleTexture(`+a+`, uv);
      }
  `}(t);case 4:return function(e){var r=e.shapeInfo.logicalShape,a=e.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),s=r[3],l=r[2]*s,c=r[1]*l,f=oi(r),h=f.newShape,p=f.keptDims;if(h.length<r.length){var v=xs(e,h);return`
      `+ws(v)+`
      float `+o+`(int row, int col, int depth, int depth2) {
        return `+o+"("+Ss(["row","col","depth","depth2"],p)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+c+", "+l+", "+s+`, 1)));
        `+vs(e)+`
      }
    `;var g=e.shapeInfo.flatOffset,y=e.shapeInfo.texShape,x=y[0],S=y[1];if(S===c&&g==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+l+", "+s+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+S+".0, "+x+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(S===s&&g==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+S+".0, "+x+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var w=ei(a);return`
    float `+o+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+l+` +
          depth * `+s+` + depth2;
      vec2 uv = uvFromFlat(`+x+", "+S+", index + "+w+`);
      return sampleTexture(`+a+`, uv);
    }
  `}(t);case 5:return function(e){var r=e.shapeInfo.logicalShape,a=e.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),s=r[4],l=r[3]*s,c=r[2]*l,f=r[1]*c,h=oi(r),p=h.newShape,v=h.keptDims;if(p.length<r.length){var g=xs(e,p);return`
      `+ws(g)+`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        return `+o+"("+Ss(["row","col","depth","depth2","depth3"],v)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+f+", "+c+", "+l+", "+s+`)) +
          depth3;
        `+vs(e)+`
      }
    `;var y=e.shapeInfo.flatOffset,x=e.shapeInfo.texShape,S=x[0],w=x[1];if(w===f&&y==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+c+", "+l+", "+s+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+w+".0, "+S+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(w===s&&y==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+w+".0, "+S+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var T=ei(a);return`
    float `+o+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+f+" + col * "+c+" + depth * "+l+` +
          depth2 * `+s+" + depth3 + "+T+`;
      vec2 uv = uvFromFlat(`+S+", "+w+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `}(t);case 6:return function(e){var r=e.shapeInfo.logicalShape,a=e.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),s=oi(r),l=s.newShape,c=s.keptDims;if(l.length<r.length){var f=xs(e,l);return`
      `+ws(f)+`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+o+"("+Ss(["row","col","depth","depth2","depth3","depth4"],c)+`);
      }
    `}var h=r[5],p=r[4]*h,v=r[3]*p,g=r[2]*v,y=r[1]*g;if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+y+", "+g+", "+v+", "+p+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+h+`, 1)));
        `+vs(e)+`
      }
    `;var x=e.shapeInfo.flatOffset,S=e.shapeInfo.texShape,w=S[0],T=S[1];if(T===y&&x==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+g+", "+v+", "+p+", "+h+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+T+".0, "+w+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(T===h&&x==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+T+".0, "+w+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var A=ei(a);return`
    float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+y+" + col * "+g+" + depth * "+v+` +
          depth2 * `+p+" + depth3 * "+h+" + depth4 + "+A+`;
      vec2 uv = uvFromFlat(`+w+", "+T+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `}(t);default:throw new Error(n.length+"-D input sampling is not yet supported")}}function aR(t){var n,e,r;switch(t.shapeInfo.logicalShape.length){case 0:return n=t.name,e="get"+n.charAt(0).toUpperCase()+n.slice(1),r=Cn(),`
    vec4 `+e+`() {
      return `+r.texture2D+"("+n+`, halfCR);
    }
  `;case 1:return function(a){var o=a.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),l=a.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],f=Cn();return`
    vec4 `+s+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+c[0]+", "+c[1]+`, index);
      return `+f.texture2D+"("+o+`, uv);
    }
  `}(t);case 2:return function(a){var o=a.shapeInfo.logicalShape,s=a.name,l="get"+s.charAt(0).toUpperCase()+s.slice(1),c=a.shapeInfo.texShape,f=c[0],h=c[1],p=Cn();if(c!=null&&an(o,c))return`
      vec4 `+l+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+h+".0, "+f+`.0);

        return `+p.texture2D+"("+s+`, uv);
      }
    `;var v=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],g=Math.ceil(o[1]/2);return`
    vec4 `+l+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+g+", "+v[0]+", "+v[1]+`, row, col);
      return `+p.texture2D+"("+s+`, uv);
    }
  `}(t);case 3:return function(a){var o=a.shapeInfo.logicalShape,s=a.name,l="get"+s.charAt(0).toUpperCase()+s.slice(1),c=a.shapeInfo.texShape,f=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];if(o[0]===1){var h=o.slice(1),p=xs(a,h);return`
        `+aR(p)+`
        vec4 `+l+`(int b, int row, int col) {
          return `+l+"("+Ss(["b","row","col"],[1,2])+`);
        }
      `}var v=f[0],g=f[1],y=Math.ceil(o[2]/2),x=y*Math.ceil(o[1]/2),S=Cn();return`
    vec4 `+l+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+v+", "+g+", "+x+", "+y+`, b, row, col);
      return `+S.texture2D+"("+s+`, uv);
    }
  `}(t);default:return function(a){for(var o=a.shapeInfo.logicalShape,s=o.length,l=a.name,c="get"+l.charAt(0).toUpperCase()+l.slice(1),f=a.shapeInfo.texShape,h=[Math.ceil(f[0]/2),Math.ceil(f[1]/2)],p=h[0],v=h[1],g=Math.ceil(o[s-1]/2),y=g*Math.ceil(o[s-2]/2),x="int b, int row, int col",S="b * "+y+" + (row / 2) * "+g+" + (col / 2)",w=2;w<s-1;w++)x="int b"+w+", "+x,y*=o[s-w-1],S="b"+w+" * "+y+" + "+S;var T=Cn();return`
    vec4 `+c+"("+x+`) {
      int index = `+S+`;
      int texR = index / `+v+`;
      int texC = index - texR * `+v+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+v+", "+p+`);
      return `+T.texture2D+"("+l+`, uv);
    }
  `}(t)}}var tj=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,nj=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,rj=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,aj=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function ei(t){return"offset"+t}function vs(t){var n=t.name,e=De(t.shapeInfo.logicalShape);return e<2?"return "+n+";":`
    for (int i = 0; i < `+e+`; i++) {
      if (i == index) {
        return `+n+`[i];
      }
    }
  `}function xt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function xs(t,n){var e=JSON.parse(JSON.stringify(t));return e.shapeInfo.logicalShape=n,e}function Ss(t,n){return n.map(function(e){return t[e]}).join(", ")}var oj=function(t,n,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,G(t.length>2,function(){return"Packed arg"+(e.charAt(0).toUpperCase()+e.slice(1))+" supports only inputs with rank above 2."});var a=t[t.length-1],o=Math.ceil(a/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var s,l,c=this.outputShape,f=c.length,h=xt(f),p=jn("coords",f);if(o===1){var v=xt(l=f+1);s=`
        `+v+" sourceLocR = "+v+"("+p.join()+`, 0);
        ++`+p[f-1]+`;
        `+v+" sourceLocG = "+v+"("+p.join()+`, 0);
        ++`+p[f-2]+`;
        `+v+" sourceLocA = "+v+"("+p.join()+`, 0);
        --`+p[f-1]+`;
        `+v+" sourceLocB = "+v+"("+p.join()+`, 0);
        --`+p[f-2]+";"}else l=f,s=`
        `+h+` sourceLocR = coords;
        ++`+p[f-1]+`;
        `+h+` sourceLocG = coords;
        ++`+p[f-2]+`;
        `+h+` sourceLocA = coords;
        --`+p[f-1]+`;
        `+h+` sourceLocB = coords;
        --`+p[f-2]+";";var g=["x","y","z","w","u","v"].slice(0,l),y="."+g[l-1],x=g.map(function(O){return"int "+O}),S=jn("sourceLocR",l-1).concat("inIdx.r"),w=jn("sourceLocG",l-1).concat("inIdx.g"),T=jn("sourceLocB",l-1).concat("inIdx.b"),A=jn("sourceLocA",l-1).concat("inIdx.a"),C=e==="max"?"greaterThan":"lessThan",R=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+S.join()+`),
                             getBestIndicesAChannel(`+w.join()+`),
                             getBestIndicesAChannel(`+T.join()+`),
                             getBestIndicesAChannel(`+A.join()+")));",k=`vec4(
            getAChannel(`+S.join()+`),
            hasNextCol ? getAChannel(`+w.join()+`) : 0.,
            hasNextRow ? getAChannel(`+T.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+A.join()+") : 0.)",N=r?"":`
      float getBestIndicesAChannel(`+x.join()+`) {
        return getChannel(getBestIndicesA(`+g.join()+`),
                                          vec2(`+g.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+x.join()+`) {
        return getChannel(getA(`+g.join()+`),
                               vec2(`+g.slice(-2).join()+`));
      }
      `+N+`
      void main() {
        `+h+` coords = getOutputCoords();
        bool hasNextCol = `+p[f-1]+" < "+(c[f-1]-1)+`;
        bool hasNextRow = `+p[f-2]+" < "+(c[f-2]-1)+`;
        `+s+`
        ivec4 srcIdx = ivec4(sourceLocR`+y+", sourceLocG"+y+`,
          sourceLocB`+y+", sourceLocA"+y+") * "+n+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+k+`;

        for (int i = 0; i < `+n+`; i++) {
          inIdx = srcIdx;
          `+R+`
          vec4 candidate = `+k+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+C+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},ij=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,a=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,l=t.effectiveFilterHeight,c=t.effectiveFilterWidth,f=l-1-t.padInfo.top,h=c-1-t.padInfo.left,p=1/(n*e);this.userCode=`
      const ivec2 pads = ivec2(`+f+", "+h+`);
      const float avgMultiplier = float(`+p+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+l+`;
            wR += `+o+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+c+`;
            wC+= `+s+`) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},sj=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,e=t.filterHeight,r=t.filterWidth,a=t.strideDepth,o=t.strideHeight,s=t.strideWidth,l=t.dilationDepth,c=t.dilationHeight,f=t.dilationWidth,h=t.effectiveFilterDepth,p=t.effectiveFilterHeight,v=t.effectiveFilterWidth,g=h-1-t.padInfo.front,y=p-1-t.padInfo.top,x=v-1-t.padInfo.left,S=1/(n*e*r);this.userCode=`
      const ivec3 pads = ivec3(`+g+", "+y+", "+x+`);
      const float avgMultiplier = float(`+S+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+h+`;
            wD += `+l+`) {
          float dyD = float(dyDCorner + wD) / `+a+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+p+`;
              wR += `+c+`) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+v+`;
                wC += `+f+`) {
              float dyC = float(dyCCorner + wC) / `+s+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},uj=function(t,n,e,r,a,o){this.outputShape=[],this.variableNames=["x","mean","variance"],tt(t,n),tt(t,e);var s="0.0";r!=null&&(tt(t,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var l="1.0";a!=null&&(tt(t,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+s+`;
        float scale = `+l+`;
        float inv = scale * inversesqrt(variance + float(`+o+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},lj=function(t,n,e,r,a,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],tt(t,n),tt(t,e);var s="vec4(0.0)";r!=null&&(tt(t,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var l="vec4(1.0)";a!=null&&(tt(t,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `+s+`;
        vec4 scale = `+l+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+o+`));

        setOutput((x - mean) * inv + offset);
      }
    `},cj="return areal * breal - aimag * bimag;",fj="return areal * bimag + aimag * breal;",gS=function(t,n,e){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=tt(n,e),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+t+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},Pv="return a + b;",Lv="return a - b;",yS="return a * b;",oR="return (a < 0.) ? b * a : a;",Ot=function(t,n,e){this.variableNames=["A","B"],this.outputShape=tt(n,e),this.userCode=`
      float binaryOperation(float a, float b) {
        `+t+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},iR=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Oa=function(t,n,e,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=tt(n,e);var a=this.outputShape.length,o="";if(r)if(a===0||De(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          `+xt(a)+` coords = getOutputCoords();
        `,a===1)o+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var s=jn("coords",a);o+=`
            bool nextRowOutOfBounds =
              (`+s[a-2]+" + 1) >= "+this.outputShape[a-2]+`;
            bool nextColOutOfBounds =
              (`+s[a-1]+" + 1) >= "+this.outputShape[a-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+t+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+o+`

        setOutput(result);
      }
    `},dj=function(){function t(n){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return t.prototype.getCustomSetupFunc=function(n,e){var r=this;return function(a,o){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(o,"maxVal")),a.gl.uniform1f(r.minLoc,n),a.gl.uniform1f(r.maxLoc,e)}},t}(),hj=function(){function t(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return t.prototype.getCustomSetupFunc=function(n,e){var r=this;return function(a,o){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(o,"maxVal")),a.gl.uniform1f(r.minLoc,n),a.gl.uniform1f(r.maxLoc,e)}},t}(),pj=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},mj=function(t){this.outputShape=[],this.outputShape=Us(t,1),this.variableNames=t.map(function(l,c){return"T"+c});var n=new Array(t.length-1);n[0]=t[0][1];for(var e=1;e<n.length;e++)n[e]=n[e-1]+t[e][1];var r=["if (yC < "+n[0]+") setOutput(getT0(yR, yC));"];for(e=1;e<n.length;e++){var a=n[e-1];r.push("else if (yC < "+n[e]+") setOutput(getT"+e+"(yR, yC-"+a+"));")}var o=n.length,s=n[n.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+s+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},vj=function(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Us(t,n);var e=this.outputShape,r=e.length,a=xt(r),o=jn("coords",r),s=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(S,w){return"T"+w});var l=new Array(t.length-1);l[0]=t[0][n];for(var c=1;c<l.length;c++)l[c]=l[c-1]+t[c][n];var f=s[n],h=s.slice(-2),p=s.join(),v="if ("+f+" < "+l[0]+`) {
        return getChannel(
            getT0(`+p+"), vec2("+h.join()+`));
        }`;for(c=1;c<l.length;c++){var g=l[c-1];v+=`
        if (`+f+" < "+l[c]+"  && "+f+" >= "+l[c-1]+`) {
          return getChannel(
            getT`+c+"("+Tf(s,f,g)+`),
            vec2(`+Tf(h,f,g)+`));
        }`}var y=l.length,x=l[l.length-1];v+=`
        return getChannel(
          getT`+y+"("+Tf(s,f,x)+`),
          vec2(`+Tf(h,f,x)+"));",this.userCode=`
      float getValue(`+s.map(function(S){return"int "+S})+`) {
        `+v+`
      }

      void main() {
        `+a+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+o+`), 0., 0., 0.);

        `+o[r-1]+" = "+o[r-1]+` + 1;
        if (`+o[r-1]+" < "+e[r-1]+`) {
          result.g = getValue(`+o+`);
        }

        `+o[r-2]+" = "+o[r-2]+` + 1;
        if (`+o[r-2]+" < "+e[r-2]+`) {
          result.a = getValue(`+o+`);
        }

        `+o[r-1]+" = "+o[r-1]+` - 1;
        if (`+o[r-2]+" < "+e[r-2]+` &&
            `+o[r-1]+" < "+e[r-1]+`) {
          result.b = getValue(`+o+`);
        }
        setOutput(result);
      }
    `};function Tf(t,n,e){var r=t.indexOf(n);return t.map(function(a,o){return o===r?a+" - "+e:a}).join()}var gj=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,e=t.strideWidth,r=t.padInfo.top,a=t.padInfo.left,o=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+a+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              if (`+o+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},yj=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,a=t.strideWidth,o=t.dataFormat==="channelsLast",s=n-1-t.padInfo.top,l=e-1-t.padInfo.left,c=o?1:2,f=o?2:3,h=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+s+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+h+`];

        ivec2 dyCorner = ivec2(coords[`+c+"], coords["+f+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {

              if (`+o+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},bj=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,e=t.strideHeight,r=t.strideWidth,a=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yF = 0; yF < `+t.outDepth+`; yF++) {
            int xF = wF + yF * `+n+" - "+a+`;

            if (xF < 0 || xF >= `+t.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+t.outHeight+`; yR++) {
              int xR = wR + yR * `+e+" - "+o+`;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+t.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+s+`;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},wj=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,e=t.filterHeight,r=t.filterWidth,a=t.strideDepth,o=t.strideHeight,s=t.strideWidth,l=n-1-t.padInfo.front,c=e-1-t.padInfo.top,f=r-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+l+", "+c+", "+f+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+n+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+a+`.0;

          if (dyF < 0.0 || dyF >= `+t.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+n+` - 1 - wF;

          for (int wR = 0; wR < `+e+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+e+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+s+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},xj=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,e=t.strideWidth,r=t.padInfo.top,a=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+o+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+a+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},Sj=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,a=t.strideWidth,o=n-1-t.padInfo.top,s=e-1-t.padInfo.left,l=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+l+`; dm++) {
              int d2 = d1 * `+l+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},bS=function(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var a=t.padInfo.top,o=t.padInfo.left,s=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,f=t.dilationWidth,h=t.filterHeight,p=t.filterWidth,v=4*Math.floor(t.inChannels/4),g=t.inChannels%4,y=t.dataFormat==="channelsLast",x=y?1:2,S=y?2:3,w=y?3:1,T="",A="";e&&(T=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,A="result = activation(result);");var C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+T+`

      const ivec2 strides = ivec2(`+s+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+w+`];

        ivec2 xRCCorner =
            ivec2(coords[`+x+"], coords["+S+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+h+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+f+`;

            if (xC < 0 || xC >= `+t.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+v+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+y+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(g===1)+`) {

              if (`+y+`) {
                dotProd +=
                    getX(batch, xR, xC, `+v+`) *
                    getW(wR, wC, `+v+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+v+`, xR, xC) *
                    getW(wR, wC, `+v+`, d2);
              }

            } else if (`+(g===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+v+`, d2),
                getW(wR, wC, `+v+` + 1, d2)
              );

              if (`+y+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+v+`),
                  getX(batch, xR, xC, `+v+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+v+`, xR, xC),
                  getX(batch, `+v+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(g===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+v+`, d2),
                getW(wR, wC, `+v+` + 1, d2),
                getW(wR, wC, `+v+` + 2, d2)
              );

              if (`+y+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+v+`),
                  getX(batch, xR, xC, `+v+` + 1),
                  getX(batch, xR, xC, `+v+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+v+`, xR, xC),
                  getX(batch, `+v+` + 1, xR, xC),
                  getX(batch, `+v+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+C+`
        `+A+`
        setOutput(result);
      }
    `},Ej=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,e=t.padInfo.top,r=t.padInfo.left,a=t.strideDepth,o=t.strideHeight,s=t.strideWidth,l=t.dilationDepth,c=t.dilationHeight,f=t.dilationWidth,h=t.filterDepth,p=t.filterHeight,v=t.filterWidth,g=4*Math.floor(t.inChannels/4),y=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+a+", "+o+", "+s+`);
      const ivec3 pads = ivec3(`+n+", "+e+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+h+`; wF++) {
          int xF = xFCorner + wF * `+l+`;

          if (xF < 0 || xF >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`; wR++) {
            int xR = xRCorner + wR * `+c+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+v+`; wC++) {
              int xC = xCCorner + wC * `+f+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+g+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(y===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+g+`) *
                  getW(wF, wR, wC, `+g+`, d2);
              } else if (`+(y===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(y===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1),
                  getX(batch, xF, xR, xC, `+g+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2),
                  getW(wF, wR, wC, `+g+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},wS=function(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var a=t.inHeight,o=t.inWidth,s=t.padInfo.top,l=t.padInfo.left,c=t.strideHeight,f=t.strideWidth,h=t.dilationHeight,p=t.dilationWidth,v=t.filterHeight,g=t.filterWidth,y=t.outChannels/t.inChannels,x="",S="";e&&(x=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,S="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+x+`

      const ivec2 strides = ivec2(`+c+", "+f+`);
      const ivec2 pads = ivec2(`+s+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+y+`;
        int q = d2 - d1 * `+y+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+v+`; wR++) {
          int xR = xRCorner + wR * `+h+`;

          if (xR < 0 || xR >= `+a+`) {
            continue;
          }

          for (int wC = 0; wC < `+g+`; wC++) {
            int xC = xCCorner + wC * `+p+`;

            if (xC < 0 || xC >= `+o+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+w+`
        `+S+`
        setOutput(result);
      }
    `},xS=function(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var a=t.inHeight,o=t.inWidth,s=t.padInfo.top,l=t.padInfo.left,c=t.strideHeight,f=t.strideWidth,h=t.dilationHeight,p=t.dilationWidth,v=t.filterHeight,g=t.filterWidth,y=g,x="int xR; int xC; int xCOffset;",S=0;S<v;S++)for(var w=0;w<g;w++)x+=`
          vec4 xTexelR`+S+"C"+2*w+` = vec4(0.);
          vec4 wR`+S+"C"+w+` = vec4(0.);
          vec4 xR`+S+"C"+w+" = vec4(0.);";for(S=0;S<v;S++)for(var T=0;T<y;T++){if(x+=`
          xR = xRCorner + `+S*h+`;
          xC = xCCorner + `+(w=2*T)*p+`;
        `,f===1){if(w<g&&(x+=l%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  xTexelR`+S+"C"+w+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    xTexelR`+S+"C"+w+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+S+"C"+w+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+S+"C"+w+" = vec4(previous.zw, xTexelR"+S+"C"+w+`.xy);
                } else {
                  xR`+S+"C"+w+" = vec4(0, 0, xTexelR"+S+"C"+w+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+a+" && xC >= 0 && xC < "+o+`) {
                  xTexelR`+S+"C"+w+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+S+"C"+w+` = vec4(0.);
                }

                xR`+S+"C"+w+" = xTexelR"+S+"C"+w+`;
              `,w+1<g)){var A=l%2==0?C_(p):p;p%2==0&&l%2==1||p%2!=0&&l%2!=1?(x+=`
                  xCOffset = xC + `+l%2+" + "+A+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+S+"C"+(w+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,p>1&&(x+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+a+` &&
                      xCOffset >= 0 && xCOffset < `+o+`) {
                      xTexelR`+S+"C"+w+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+S+"C"+w+` = vec4(0.);
                    }
                  `),x+=`
                  xR`+S+"C"+(w+1)+` = vec4(
                    xTexelR`+S+"C"+w+".zw, xTexelR"+S+"C"+(w+2)+`.xy);
                `):x+=`
                  xCOffset = xC + `+A+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+S+"C"+(w+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+S+"C"+(w+1)+" = xTexelR"+S+"C"+(w+2)+`;
                `}}else w<g&&(x+=`
              if(xR >= 0 && xR < `+a+`) {
            `,l%2==1?(x+=`
                xCOffset = xC + 1 - `+f+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+S+"C"+w+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+S+"C"+w+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+o+`) {
                  xTexelR`+S+"C"+(w+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+S+"C"+(w+2)+` = vec4(0.);
                }

                xR`+S+"C"+w+` = vec4(
                  xTexelR`+S+"C"+w+".zw, xTexelR"+S+"C"+(w+2)+`.zw);
              `,w+1<g&&(x+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+f+`;
                  if(xCOffset >= 0 && xCOffset < `+o+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+S+"C"+(w+1)+" = vec4(xTexelR"+S+"C"+(w+2)+`.xy, final.xy);
                `)):(x+=`
                if(xC >= 0 && xC < `+o+`) {
                  xTexelR`+S+"C"+w+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+S+"C"+w+` = vec4(0.);
                }

                xCOffset = xC + `+f+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+S+"C"+(w+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+S+"C"+(w+2)+` = vec4(0.);
                }

                xR`+S+"C"+w+` = vec4(
                  xTexelR`+S+"C"+w+".xy, xTexelR"+S+"C"+(w+2)+`.xy);
              `,w+1<g&&(x+=`
                  xR`+S+"C"+(w+1)+` = vec4(
                    xTexelR`+S+"C"+w+".zw, xTexelR"+S+"C"+(w+2)+`.zw);
                `)),x+="}");w<g&&(x+=`
            vec4 wTexelR`+S+"C"+w+" = getW("+S+", "+w+`, d1, q);
            wR`+S+"C"+w+" = vec4(wTexelR"+S+"C"+w+".xz, wTexelR"+S+"C"+w+`.xz);
          `,w+1<g&&(x+=`
              vec4 wTexelR`+S+"C"+(w+1)+" = getW("+S+", "+(w+1)+`, d1, q);
              wR`+S+"C"+(w+1)+` =
                vec4(wTexelR`+S+"C"+(w+1)+".xz, wTexelR"+S+"C"+(w+1)+".xz);"))}for(S=0;S<v;S++)for(w=0;w<g;w++)x+="dotProd += xR"+S+"C"+w+" * wR"+S+"C"+w+";";var C="",R="";e&&(C=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`vec4 activation(vec4 x) {
          `+e+`
        }`,R="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+C+`

      const ivec2 strides = ivec2(`+c+", "+f+`);
      const ivec2 pads = ivec2(`+s+", "+l+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+x+`

        vec4 result = dotProd;
        `+k+`
        `+R+`
        setOutput(result);
      }
    `},Cj=function(t,n,e,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=t[0],s=t[1],l=t[2],c=t[3],f=n[0],h=e[0],p=e[1];this.outputShape=[f,h,p,c];var v=r==="bilinear"?1:0,g=[s-1+".0",l-1+".0"],y=g[0],x=g[1],S=h>1?[""+(s-1)/(h-1),"(y2-y1) * height_ratio","y1*"+y+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+y],w=S[0],T=S[1],A=S[2],C=p>1?[""+(l-1)/(p-1),"(x2-x1) * width_ratio","x1*"+x+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+x],R=C[0],k=C[1],N=C[2];this.userCode=`
      const float height_ratio = float(`+w+`);
      const float width_ratio = float(`+R+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+o+`) {
          return;
        }

        float height_scale = `+T+`;
        float width_scale = `+k+`;

        float in_y = `+A+`;
        if( in_y < 0.0 || in_y > `+y+` ) {
          setOutput(float(`+a+`));
          return;
        }
        float in_x = `+N+`;
        if( in_x < 0.0 || in_x > `+x+` ) {
          setOutput(float(`+a+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+v+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},_j=function(t,n,e){this.variableNames=["x"],this.outputShape=t;var r=t.length,a=t[t.length-1],o=e?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(e?"return "+a+" -i - 1;":"return i;")+`
      }

      void main() {
        `+xt(r)+` coords = getOutputCoords();
        int end = `+SS(r,"coords")+`;
        float val = 0.0;
        for (int i = `+a+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+o+` end) {
            continue;
          }
          if (idx == end && `+n+`) {
            continue;
          }
          `+SS(r,"coords")+` = idx;
          val += getX(`+function(s,l){if(s===1)return""+l;if(s===2)return l+".x, "+l+".y";if(s===3)return l+".x, "+l+".y, "+l+".z";if(s===4)return l+".x, "+l+".y, "+l+".z, "+l+".w";throw Error("Cumulative sum for rank "+s+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function SS(t,n){if(t===1)return""+n;if(t===2)return n+".y";if(t===3)return n+".z";if(t===4)return n+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var Rj=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Cl.DENSE;var n=fl(t),e=Cn();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+si(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+e.output+` = result;
      }
    `},Aj=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Cl.DENSE;var n=fl(t),e=Cn();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+si(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+e.output+` = result;
      }
    `},Tj=function(){function t(n,e,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=e,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+e+`;
      int offset_h = imod(h, `+e+`);
      int in_w = w / `+e+`;
      int offset_w = imod(w, `+e+`);
      int offset_d = (offset_h * `+e+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),kj=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},Nj=function(t){this.variableNames=["A"],this.outTexUsage=rr.DOWNLOAD;var n=Cn();this.outputShape=t,this.userCode=`
      `+rR+`

      void main() {
        float x = getAAtOutCoords();
        `+n.output+` = encode_float(x);
      }
    `},Dj=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=rr.DOWNLOAD;var n=Cn();this.outputShape=t,this.userCode=`
      `+rR+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+n.output+` = encode_float(x);
      }
    `},Oj=function(t,n,e){e===void 0&&(e=!1),this.variableNames=["A"];var r=Cn(),a=n[0],o=n[1];this.outputShape=t;var s="result";e&&(s="floor(result * 255. + 0.5)"),this.userCode=`
      `+jy(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+o+`;
        int c = imod(flatIndex, `+o+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+a+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+s+`, 0., 0., 0.);
      }
    `},Mj=function(t,n,e){e===void 0&&(e=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Cn(),a=n[0],o=n[1];this.outputShape=t;var s="",l="result";e&&(l="floor(result * 255. + 0.5)");for(var c=0;c<=1;c++)for(var f=0;f<=1;f++){var h=2*c+f;s+=`
          localCoords = coords;
          if(localCoords[2] + `+f+" < "+t[2]+`) {
            localCoords[2] += `+f+`;
            if(localCoords[1] + `+c+" < "+t[1]+`) {
              localCoords[1] += `+c+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+o+`;
              c = imod(flatIndex, `+o+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+a+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+h+`] = values[0];
              } else if(offset == 1) {
                result[`+h+`] = values[1];
              } else if(offset == 2) {
                result[`+h+`] = values[2];
              } else {
                result[`+h+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+jy(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+s+`

        `+r.output+" = "+l+`;
      }
    `},Ij="return real * expR - imag * expI;",Bj="return real * expI + imag * expR;",ES=function(t,n,e){this.variableNames=["real","imag"];var r=n[1];this.outputShape=n;var a=e?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=e?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+a+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+t+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+o+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},Fj=function(){function t(n,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=n,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;return function(r,a){e.valueLoc==null&&(e.valueLoc=r.getUniformLocationNoThrow(a,"value")),r.gl.uniform1f(e.valueLoc,n)}},t}(),Pj=function(t,n,e){this.variableNames=["A","indices"];var r=t.slice();r[e]=n,this.outputShape=r,this.rank=r.length;var a=xt(this.rank),o=function(s,l){var c=s.length;if(c>4)throw Error("Gather for rank "+c+" is not yet supported");if(c===1)return"int(getIndices(resRC))";for(var f=["resRC.x","resRC.y","resRC.z","resRC.w"],h=[],p=0;p<s.length;p++)p===l?h.push("int(getIndices("+f[p]+"))"):h.push(""+f[p]);return h.join()}(t,e);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},Lj=function(t,n,e){this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=e;var r=xt(n.length),a=xt(e.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+a+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+o+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function jj(t,n){var e=Cn();return IP(t,n,e.version+`
    precision highp float;
    `+e.attribute+` vec3 clipSpacePos;
    `+e.attribute+` vec2 uv;
    `+e.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function zj(t,n){return jP(t,n,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Uj(t,n){return zP(t,n,new Uint16Array([0,1,2,2,1,3]))}function Kl(t,n,e,r,a,o,s){qP(e,r);var l=UP(t,n),c=t.TEXTURE_2D;return Oe(t,n,function(){return t.bindTexture(c,l)}),Oe(t,n,function(){return t.texParameteri(c,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),Oe(t,n,function(){return t.texParameteri(c,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),Oe(t,n,function(){return t.texParameteri(c,t.TEXTURE_MIN_FILTER,t.NEAREST)}),Oe(t,n,function(){return t.texParameteri(c,t.TEXTURE_MAG_FILTER,t.NEAREST)}),Oe(t,n,function(){return t.texImage2D(c,0,a,e,r,0,o,s,null)}),Oe(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)}),l}function qj(t,n,e,r,a){var o=nh(e,r);return Kl(t,n,o[0],o[1],a.internalFormatFloat,a.textureFormatFloat,t.FLOAT)}function Hj(t,n,e,r,a){var o=nh(e,r);return Kl(t,n,o[0],o[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}function Vj(t,n,e,r,a){var o=nh(e,r);return Kl(t,n,o[0],o[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function Wj(t,n,e,r,a){var o=Yl(e,r);return Kl(t,n,o[0],o[1],a.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function Gj(t,n,e,r,a){var o=Yl(e,r);return Kl(t,n,o[0],o[1],a.internalFormatPackedHalfFloat,t.RGBA,a.textureTypeHalfFloat)}function Xj(t,n,e,r){return Oe(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),cS(t,n,e,"clipSpacePos",r,3,20,0)&&cS(t,n,e,"uv",r,2,20,12)}function Yj(t,n,e,r,a,o,s){var l,c,f;Oe(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)}),o instanceof Uint8Array?(l=new Uint8Array(r*a*4),c=t.UNSIGNED_BYTE,f=t.RGBA):(l=new Float32Array(r*a*4),c=t.FLOAT,f=s.internalFormatPackedFloat),l.set(o),Oe(t,n,function(){return t.texImage2D(t.TEXTURE_2D,0,f,r,a,0,t.RGBA,c,l)}),Oe(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function Kj(t,n,e,r){Oe(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)}),r.data instanceof Uint8Array?Oe(t,n,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)}):Oe(t,n,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),Oe(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function $j(t,n,e,r,a){var o=t.createBuffer();Oe(t,n,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,o)});var s=16*e*r;return Oe(t,n,function(){return t.bufferData(t.PIXEL_PACK_BUFFER,s,t.STREAM_READ)}),Oe(t,n,function(){return t.readPixels(0,0,r,e,t.RGBA,t.FLOAT,0)}),Oe(t,n,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}),o}function Qj(t,n,e){var r=t,a=new Float32Array(e);return r.bindBuffer(r.PIXEL_PACK_BUFFER,n),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function Zj(t,n,e,r,a){var o=nh(e,r),s=o[0],l=o[1],c=new Uint8Array(e*r*4);return Oe(t,n,function(){return t.readPixels(0,0,s,l,a.downloadTextureFormat,t.UNSIGNED_BYTE,c)}),new Float32Array(c.buffer)}function Jj(t,n,e,r,a,o,s,l){var c=t,f=new Float32Array(function(h,p){var v=Yl(h,p);return v[0]*v[1]*4}(o,s));return c.bindBuffer(c.PIXEL_PACK_BUFFER,n),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,f),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),f}function ez(t,n,e,r){var a=new Float32Array(e*r*4);return Oe(t,n,function(){return t.readPixels(0,0,r,e,t.RGBA,t.FLOAT,a)}),a}var tz=function(){function t(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e=me().getNumber("WEBGL_VERSION");n!=null?(this.gl=n,kP(e,n)):this.gl=ca(e);var r="WEBGL_color_buffer_float";if(me().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Cf(this.gl,this.debug,"OES_texture_float"),Cr(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Cf(this.gl,this.debug,"OES_texture_half_float");else if(me().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Cr(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Cf(this.gl,this.debug,"EXT_color_buffer_half_float");else if(me().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Cr(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Cr(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=zj(this.gl,this.debug),this.indexBuffer=Uj(this.gl,this.debug),this.framebuffer=HP(this.gl,this.debug),this.textureConfig=ky(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return me().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var n=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;Oe(e,this.debug,function(){return e.finish()}),Oe(e,this.debug,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),Oe(e,this.debug,function(){return e.deleteFramebuffer(n.framebuffer)}),Oe(e,this.debug,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),Oe(e,this.debug,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),Oe(e,this.debug,function(){return e.deleteBuffer(n.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(n,e){return this.throwIfDisposed(),qj(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(n,e){return this.throwIfDisposed(),Hj(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(n,e){return this.throwIfDisposed(),Vj(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(n,e){this.throwIfDisposed(),Kj(this.gl,this.debug,n,e)},t.prototype.uploadDenseMatrixToTexture=function(n,e,r,a){this.throwIfDisposed(),Yj(this.gl,this.debug,n,e,r,a,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(n,e){return this.throwIfDisposed(),Gj(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(n,e){return this.throwIfDisposed(),Wj(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.deleteMatrixTexture=function(n){var e=this;this.throwIfDisposed(),this.outputTexture===n&&(fS(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Oe(this.gl,this.debug,function(){return e.gl.deleteTexture(n)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(n,e,r){var a=this;return this.downloadMatrixDriver(n,function(){return Zj(a.gl,a.debug,e,r,a.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(n,e,r,a,o,s){return Jj(this.gl,n,0,0,0,o,s,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(n,e){return Qj(this.gl,n,e)},t.prototype.createBufferFromTexture=function(n,e,r){this.bindTextureToFrameBuffer(n);var a=$j(this.gl,this.debug,e,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a},t.prototype.createAndWaitForFence=function(){var n=this.createFence(this.gl);return this.pollFence(n)},t.prototype.createFence=function(n){var e,r,a=this;if(me().getBool("WEBGL_FENCE_API_ENABLED")){var o=n,s=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),r=function(){var l=o.clientWaitSync(s,0,0);return l===o.ALREADY_SIGNALED||l===o.CONDITION_SATISFIED},e=s}else me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),r=function(){return a.isQueryAvailable(e,me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:e,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(n,e,r){var a=this;return this.downloadMatrixDriver(n,function(){return ez(a.gl,a.debug,e,r)})},t.prototype.createProgram=function(n){this.throwIfDisposed();var e=this.gl,r=BP(e,this.debug,n),a=jj(e,this.debug),o=PP(e,this.debug);return Oe(e,this.debug,function(){return e.attachShader(o,a)}),Oe(e,this.debug,function(){return e.attachShader(o,r)}),LP(e,this.debug,o),this.debug&&Mv(e,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=Xj(e,this.debug,this.program,this.vertexBuffer)),o},t.prototype.deleteProgram=function(n){var e=this;this.throwIfDisposed(),n===this.program&&(this.program=null),n!=null&&Oe(this.gl,this.debug,function(){return e.gl.deleteProgram(n)})},t.prototype.setProgram=function(n){var e=this;this.throwIfDisposed(),this.program=n,this.program!=null&&this.debug&&Mv(this.gl,this.debug,this.program),Oe(this.gl,this.debug,function(){return e.gl.useProgram(n)})},t.prototype.getUniformLocation=function(n,e,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?WP(this.gl,this.debug,n,e):GP(this.gl,n,e)},t.prototype.getAttributeLocation=function(n,e){var r=this;return this.throwIfDisposed(),Oe(this.gl,this.debug,function(){return r.gl.getAttribLocation(n,e)})},t.prototype.getUniformLocationNoThrow=function(n,e){return this.throwIfDisposed(),this.gl.getUniformLocation(n,e)},t.prototype.setInputMatrixTexture=function(n,e,r){this.throwIfDisposed(),this.throwIfNoProgram(),XP(this.gl,this.debug,this.program,n,e,r)},t.prototype.setOutputMatrixTexture=function(n,e,r){this.setOutputMatrixTextureDriver(n,r,e)},t.prototype.setOutputPackedMatrixTexture=function(n,e,r){this.throwIfDisposed();var a=Yl(e,r),o=a[0],s=a[1];this.setOutputMatrixTextureDriver(n,o,s)},t.prototype.setOutputMatrixWriteRegion=function(n,e,r,a){this.setOutputMatrixWriteRegionDriver(r,n,a,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(n,e,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&Mv(this.gl,this.debug,this.program),_f(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var n=this.gl;this.debug&&this.debugValidate(),Oe(n,this.debug,function(){return n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var n=this;this.throwIfDisposed(),Oe(this.gl,this.debug,function(){return n.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Cf(this.gl,this.debug,me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var n=this.gl,e=this.getQueryTimerExtensionWebGL2(),r=n.createQuery();return n.beginQuery(e.TIME_ELAPSED_EXT,r),r}var a=this.getQueryTimerExtensionWebGL1(),o=a.createQueryEXT();return a.beginQueryEXT(a.TIME_ELAPSED_EXT,o),o},t.prototype.endQuery=function(){if(me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}else{var e=this.gl,r=this.getQueryTimerExtensionWebGL2();e.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(n){return ke(this,void 0,void 0,function(){var e=this;return Ne(this,function(r){switch(r.label){case 0:return[4,aS(function(){return e.disposed||e.isQueryAvailable(n,me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(n,me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(n,e){if(e===0)return null;if(e===2){var r=this.gl;return r.getQueryParameter(n,r.QUERY_RESULT)/1e6}var a=this.getQueryTimerExtensionWebGL1();return a.getQueryObjectEXT(n,a.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(n,e){if(e===0)return!0;if(e===2){var r=this.gl,a=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(n,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(a=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(n,a.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),o&&!this.disjoint},t.prototype.pollFence=function(n){var e=this;return new Promise(function(r){e.addItemToPoll(function(){return n.isFencePassed()},function(){return r()})})},t.prototype.pollItems=function(){for(var n=function(r){for(var a=0;a<r.length&&r[a]();++a);return a-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),e=0;e<=n;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(n+1)},t.prototype.addItemToPoll=function(n,e){var r=this;this.itemsToPoll.push({isDoneFn:n,resolveFn:e}),this.itemsToPoll.length>1||aS(function(){return r.pollItems(),r.itemsToPoll.length===0})},t.prototype.bindTextureToFrameBuffer=function(n){this.throwIfDisposed(),Iv(this.gl,this.debug,n,this.framebuffer),this.debug&&_f(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(Iv(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&_f(this.gl)):fS(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(n,e){this.bindTextureToFrameBuffer(n);var r=e();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(n,e,r){this.throwIfDisposed();var a=this.gl;Iv(a,this.debug,n,this.framebuffer),this.debug&&_f(a),this.outputTexture=n,Oe(a,this.debug,function(){return a.viewport(0,0,e,r)}),Oe(a,this.debug,function(){return a.scissor(0,0,e,r)})},t.prototype.setOutputMatrixWriteRegionDriver=function(n,e,r,a){var o=this;this.throwIfDisposed(),Oe(this.gl,this.debug,function(){return o.gl.scissor(n,e,r,a)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t}();function CS(t,n){if(t.length!==n.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+n.length+" inputs");t.forEach(function(e,r){var a=e.logicalShape,o=n[r],s=o.shape;if(!an(a,s))throw Error("Binary was compiled with different shapes than the current args. Shapes "+a+" and "+s+" must match");if(!e.isUniform||!o.isUniform){var l=e.texShape,c=o.isUniform?null:o.texData.texShape;if(!an(l,c))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+l+" and "+c+" must match")}})}var nz=function(t,n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=e.filterWidth,a=e.inChannels,o=e.strideWidth,s=e.strideHeight,l=e.padInfo,c=e.outWidth,f=e.dilationWidth,h=e.dilationHeight,p=e.dataFormat,v=l.left,g=l.top,y=a*r,x=Cn(),S=p==="channelsLast",w=S?0:1,T=S?1:2,A="",C=0;C<=1;C++)for(var R=0;R<=1;R++)A+=`
          blockIndex = rc.y + `+R+`;
          pos = rc.x + `+C+`;

          if(blockIndex < `+t[1]+" && pos < "+t[0]+`) {
            offsetY = int(blockIndex / (`+c+")) * "+s+" - "+g+`;
            d0 = offsetY + `+h+" * (pos / "+y+`);

            if(d0 < `+n[w]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+c+".) * "+o+". - "+v+`.);
              d1 = offsetX + `+f+" * (int(mod(float(pos), "+y+".) / "+a+`.));

              if(d1 < `+n[T]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+a+`.));

                if (`+S+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*C+R)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*C+R)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+A+`

        `+x.output+` = result;
      }
    `},rz=function(t,n,e,r,a){this.variableNames=["x"],this.outputShape=[];var o,s=n,l=t[3]-1;this.outputShape=t;var c="float("+e+") + float("+r+") * sum";o=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+s+"; j <= "+s+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+l+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+o+`;
        setOutput(val);
      }
    `},az=function(t,n,e,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=e,this.alpha=r,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+n+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+n+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+e+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+a+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+a+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},oz=function(t,n,e,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=n,l=t[3]-1;this.outputShape=t;var c="float("+e+") + float("+r+") * sum";o=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+s+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+s+"; j <= "+s+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+l+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+o+`;
        setOutput(result);
      }
    `},iz=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,e=t.strideWidth,r=t.dilationHeight,a=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=a-1-t.padInfo.top,l=o-1-t.padInfo.left,c=a*o-1;this.userCode=`
      const ivec2 pads = ivec2(`+s+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+a+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+o+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+e+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+c+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+o+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},sz=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,e=t.strideHeight,r=t.strideWidth,a=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=l-1-t.padInfo.front,p=c-1-t.padInfo.top,v=f-1-t.padInfo.left,g=l*c*f-1;this.userCode=`
      const ivec3 pads = ivec3(`+h+", "+p+", "+v+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+l+`;
           wD += `+a+`) {
          float dyD = float(dyDCorner + wD) / `+n+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+c+`;
              wR += `+o+`) {
            float dyR = float(dyRCorner + wR) / `+e+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+f+`;
                wC += `+s+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+g+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+c+" * "+f+` +
                  wR * `+f+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},jv=function(t,n,e,r,a,o,s){e===void 0&&(e=!1),r===void 0&&(r=!1),a===void 0&&(a=!1),o===void 0&&(o=null),s===void 0&&(s=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;var l=e?t[1]:t[2],c=Math.ceil(l/2),f=e?"i * 2, rc.y":"rc.y, i * 2",h=r?"rc.z, i * 2":"i * 2, rc.z",p=e?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",y="";o&&(g=s?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+o+`
        }`:`vec4 activation(vec4 x) {
          `+o+`
        }`,y="result = activation(result);");var x=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+g+`

      const float sharedDimension = `+c+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+c+`; i++) {
          vec4 a = getMatrixA(rc.x, `+f+`);
          vec4 b = getMatrixB(rc.x, `+h+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+p[0]+" * "+v[0]+`);
          result += (`+p[1]+" * "+v[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+x+`

        `+y+`

        setOutput(result);
      }
    `},uz=function(){function t(n,e,r){this.variableNames=["probs"],this.outputShape=[n,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(e-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(e-1)+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;return function(r,a){e.seedLoc==null&&(e.seedLoc=r.getUniformLocation(a,"seed")),r.gl.uniform1f(e.seedLoc,n)}},t}(),lz=function(t,n,e,r){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+e+`),
                      float(index == coords.y)));
      }
    `},cz=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var n=t.length;if(n===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var e=jn("rc",n),r=xt(n),a=function(l,c,f){if(l===1)return"rc > "+c[0];for(var h="",p=l-2;p<l;p++)h+=f[p]+" >= "+c[p],p<l-1&&(h+="||");return h}(n,t,e),o=function(l,c,f,h){if(l===1)return"";var p=h.slice(-2);return`
    int r = `+p[0]+`;
    int c = `+p[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+c+`;
    bool rEdge = rp1 >= `+f+`;
  `}(n,t[t.length-1],t[t.length-2],e),s=function(l,c){var f=l.length,h=function(p,v){for(var g=[],y=0;y<=1;y++)for(var x=0;x<=1;x++){for(var S=(y===0?"r":"rp1")+", "+(x===0?"c":"cp1"),w=2;w<p;w++)S=v[v.length-1-w]+","+S;g.push(S)}return g}(f,c);return f===1?`getA(rc),
            rc + 1 >= `+l[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+h[0]+`),
          cEdge ? 0. : getA(`+h[1]+`),
          rEdge ? 0. : getA(`+h[2]+`),
          rEdge || cEdge ? 0. : getA(`+h[3]+")"}(t,e);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+a+`) {
            setOutput(vec4(0));
          } else {
            `+o+`

            setOutput(vec4(`+s+`));
          }
        }
      `}},fz=function(t,n,e){this.variableNames=["x"],this.outputShape=n.map(function(c,f){return c[0]+t[f]+c[1]});var r=t.length,a=xt(r),o=n.map(function(c){return c[0]}).join(","),s=n.map(function(c,f){return c[0]+t[f]}).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+a+" start = "+a+"("+o+`);
      `+a+" end = "+a+"("+s+`);

      void main() {
        `+a+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+e+`));
        } else {
          `+a+` coords = outC - start;
          setOutput(getX(`+l+`));
        }
      }
    `:`
        int start = `+o+`;
        int end = `+s+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+e+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},dz=function(t,n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map(function(S,w){return S[0]+t[w]+S[1]});for(var r=t.length,a=xt(r),o=n.map(function(S){return S[0]}).join(","),s=n.map(function(S,w){return S[0]+t[w]}).join(","),l=jn("rc",r),c=jn("source",r),f=l[r-1]+" < "+this.outputShape[r-1],h=r===1?"source":"vec2("+c.slice(-2).join()+")",p=[a+" rc = outputLoc;",l[r-1]+` += 1;
       if(`+f+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+l[r-2]+` += 1;
       if(`+l[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+l[r-1]+` += 1;
         if(`+f+") {"],v=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",g="",y=0,x=r===1?2:4;y<x;y++)g+=`
        `+p[y]+`
        if (`+v+`) {
          result[`+y+"] = float("+e+`);
        } else {
          `+a+` source = rc - start;
          result[`+y+"] = getChannel(getX("+c.join()+"), "+h+`);
        }
      `;g+=r===1?"} ":"}}",this.userCode=`
      const `+a+" start = "+a+"("+o+`);
      const `+a+" end = "+a+"("+s+`);

      void main() {
        `+a+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+g+`
        setOutput(result);
      }
    `},zv=function(t,n,e){if(this.variableNames=["x"],n==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,s=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var v=n==="avg",g="0.0";if(v||(g="-1.0 / 1e-20"),e)this.userCode=`
        const ivec2 strides = ivec2(`+a+", "+o+`);
        const ivec2 pads = ivec2(`+h+", "+p+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+c+`;
              wR += `+s+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`;
                wC += `+l+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+f+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var y=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(y="avgValue / count");var x=4*Math.floor(r/4),S=r%4,w=`
      if (`+v+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+a+", "+o+`);
      const ivec2 pads = ivec2(`+h+", "+p+`);
      const float initializationValue = `+g+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+g+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+c+`;
            wR += `+s+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+x+`; wC += 4) {
            int xC = xCCorner + wC * `+l+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              getValue(batch, xR, xC + 3 * `+l+`, d)
            );

            `+w+`
          }

          int xC = xCCorner + `+x+`;
          if (`+(S===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+w+`
          } else if (`+(S===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              initializationValue,
              initializationValue
            );

            `+w+`
          } else if (`+(S===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              initializationValue
            );

            `+w+`
          }
        }
        setOutput(`+y+`);
      }
    `}},Uv=function(t,n,e){if(this.variableNames=["x"],n==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,a=t.strideDepth,o=t.strideHeight,s=t.strideWidth,l=t.dilationDepth,c=t.dilationHeight,f=t.dilationWidth,h=t.effectiveFilterDepth,p=t.effectiveFilterHeight,v=t.effectiveFilterWidth,g=t.padInfo.front,y=t.padInfo.top,x=t.padInfo.left;this.outputShape=t.outShape;var S=n==="avg",w="0.0";if(S||(w="-1.0 / 1e-20"),e)this.userCode=`
        const ivec3 strides =
            ivec3(`+a+", "+o+", "+s+`);
        const ivec3 pads = ivec3(`+g+", "+y+", "+x+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+h+`;
              wD += `+l+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+t.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+p+`;
                wR += `+c+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+v+`;
                  wC += `+f+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+p+" * "+v+` +
                      wR * `+v+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var T=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(T="avgValue / count");var A=4*Math.floor(r/4),C=r%4,R=`
      if (`+S+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+a+", "+o+", "+s+`);
      const ivec3 pads = ivec3(`+g+", "+y+", "+x+`);
      const float initializationValue = `+w+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+w+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+h+`;
            wD += `+l+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`;
            wR += `+c+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+A+`; wC += 4) {
              int xC = xCCorner + wC * `+f+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+f+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+f+`, ch)
              );

              `+R+`
            }

            int xC = xCCorner + `+A+`;
            if (`+(C===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+R+`
            } else if (`+(C===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                initializationValue,
                initializationValue
              );

              `+R+`
            } else if (`+(C===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+f+`, ch),
                initializationValue
              );

              `+R+`
            }
          }
          setOutput(`+T+`);
        }
      }
    `}},hz=function(t,n){this.variableNames=["x"];var e=t.windowSize,r=t.batchSize,a=t.inSize,o=Math.ceil(a/e);this.outputShape=[r,o];var s="0.0",l="";n==="prod"?s="1.0":n==="min"?(s="1.0 / 1e-20",l="min"):n==="max"&&(s="-1.0 / 1e-20",l="max");var c=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");var f=4*Math.floor(e/4),h=e%4,p=`
      if (`+(n==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(n==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+l+`(values, minMaxValue);
      }
    `,v="vec4";n==="all"?(s="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,v="bvec4"):n==="any"&&(s="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,v="bvec4");var g="";a%e>0&&(g=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+s+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+g+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+e+`;

        vec4 minMaxValue = vec4(`+s+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+f+`; i += 4) {
          int inIdx = inOffset + i;
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+p+`
        }

        int inIdx = inOffset + `+f+`;
        if (`+(h===1)+`) {
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(h===2)+`) {
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(h===3)+`) {
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+p+`
        }
        setOutput(`+c+`);
      }
    `},pz=function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var e="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),e+=`
        `+a+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+si(["r","c","d"],n)+`
      return ivec3(r, c, d);
    }
  
      `+jy(t)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+t[1]+`;
        int cols = `+t[2]+`;

        `+e+`

        setOutput(result);
      }
    `},mz=function(t,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,a=r[1],o=r[2],s=t.shape,l=s[1],c=s[2],f=[e&&l>1?a-1:a,e&&c>1?o-1:o],h=[e&&l>1?l-1:l,e&&c>1?c-1:c],p=f[0]/h[0],v=f[1]/h[1],g=1/p,y=1/v,x=2*Math.ceil(g)+2,S=2*Math.ceil(y)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+v+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+y+`);

        const int winHeight = int(`+x+`);
        const int winWidth = int(`+S+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+l+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(a-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(o-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},vz=function(t,n,e,r){this.variableNames=["A"],this.outputShape=[];var a=t[0],o=t[1],s=t[2],l=t[3];this.outputShape=[a,n,e,l];var c=[r&&n>1?o-1:o,r&&e>1?s-1:s],f=[r&&n>1?n-1:n,r&&e>1?e-1:e];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+s+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},gz=function(t,n,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var a=t[0],o=t[1],s=t[2],l=t[3];this.outputShape=[a,n,e,l];var c=[r&&n>1?o-1:o,r&&e>1?s-1:s],f=[r&&n>1?n-1:n,r&&e>1?e-1:e];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`,
          `+c[1]/f[1]+`);
      const vec3 inputShapeRC = vec3(`+o+".0, "+s+`.0,
                                     `+s+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(l-1)+`;
        bool hasNextRow = coords.z < `+(e-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},yz=function(t,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,a=r[1],o=r[2],s=t.shape,l=s[1],c=s[2],f=[e&&l>1?a-1:a,e&&c>1?o-1:o],h=[e&&l>1?l-1:l,e&&c>1?c-1:c],p=f[0]/h[0],v=f[1]/h[1],g=1/p,y=1/v,x=2*Math.ceil(g)+2,S=2*Math.ceil(y)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+v+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+y+`);

        const int winHeight = int(`+x+`);
        const int winWidth = int(`+S+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+l+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float sourceFracRow =
              float(`+f[0]+`) *
                (float(dyR) / float(`+h[0]+`));

            float sourceFracCol =
                float(`+f[1]+`) *
                  (float(dyC) / float(`+h[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+a+`) - 1),
                `+e+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+o+`) - 1),
                `+e+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},bz=function(t,n,e,r){this.variableNames=["A"],this.outputShape=[];var a=t[0],o=t[1],s=t[2],l=t[3];this.outputShape=[a,n,e,l];var c=[r&&n>1?o-1:o,r&&e>1?s-1:s],f=[r&&n>1?n-1:n,r&&e>1?e-1:e],h=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+s+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+h+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},wz=function(t,n){this.variableNames=["x"];var e=t.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");if(this.outputShape=t,e!==1){var r=t.map(function(o,s){return function(l){return n.indexOf(l)!==-1&&t[l]!==1?t[l]+" - coords["+l+"] - 1":"coords["+l+"]"}(s)}).join(","),a=xt(e);this.userCode=`
      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+t[0]+` - coord - 1));
        }
      `},xz=function(t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var e=t.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");this.outputShape=t;var r=jn("rc",e),a=r[e-1]+" + 1 < "+this.outputShape[e-1],o=r[e-2]+" + 1 < "+this.outputShape[e-2],s=xt(e);function l(c){var f=t.map(function(h,p){return function(v,g){return n.indexOf(v)!==-1&&t[v]!==1?t[v]+" - "+g[v]+" - 1":""+g[v]}(p,c)});return"getChannel(getX("+f.join(",")+"), vec2("+f.slice(-2).join(",")+"))"}this.userCode=e===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+t[0]+` - rc - 1),
            `+t[0]+` - rc - 1);
          if(`+a+`){
              result.g = getChannel(getX(`+t[0]+` - (rc  + 1) - 1),
                `+t[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+s+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(c){return l(c)}(r.slice())+`;
          if(`+a+`){
            result.g = `+function(c){return c[e-1]="("+c[e-1]+" + 1)",l(c)}(r.slice())+`;
          }
          if(`+o+`) {
            result.b = `+function(c){return c[e-2]="("+c[e-2]+" + 1)",l(c)}(r.slice())+`;
            if(`+a+`) {
              result.a = `+function(c){return c[e-1]="("+c[e-1]+" + 1)",c[e-2]="("+c[e-2]+" + 1)",l(c)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},_S=function(t,n,e,r,a,o,s){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var l=xt(a.length),c=xt(o.length),f="";e===1?f="i":e===2&&(f="i, j");var h="getIndices("+f+")",p="";r===1?p="i":r===2&&(p="i, coords[1]");var v="getUpdates("+p+")",g=n>1?"strides[j]":"strides";this.userCode=`
        `+l+" strides = "+l+"("+a+`);

        void main() {
          `+c+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+t+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+n+`; j++) {
              int index = round(`+h+`);
              flattenedIndex += index * `+g+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+v+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},Sz=function(t,n){this.variableNames=["x","segmentIds"];var e=t.windowSize,r=t.batchSize,a=t.inSize,o=t.numSegments,s=o*Math.ceil(a/e);this.outputShape=[r,s];var l=4*Math.floor(e/4),c=e%4,f=`
        sumValue += dot(values, segFilter);
    `,h="";a%e>0&&(h=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `);var p="";a%e>0&&(p=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+h+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+p+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+o+")) * float("+e+`));
        int currentSeg = int(mod(float(outIdx), float(`+o+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+f+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+f+`
        } else if (`+(c===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+f+`
        } else if (`+(c===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+f+`
        }
        setOutput(sumValue);
      }
    `},Ez=function(t,n,e){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=n,e>4)throw Error("Where for rank "+e+" is not yet supported");if(e===1)a="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],l=[],c=0;c<n.length;c++)l.push(""+o[c]),c<t&&s.push(""+o[c]);r=s.join(),a=l.join()}var f=xt(e);this.userCode=`
      void main() {
        `+f+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+a+`));
        } else {
          setOutput(getB(`+a+`));
        }
      }
    `},Cz=function(){function t(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;var e,r=xt(this.rank),a="uniform int start["+this.rank+"];",o=function(s){if(s===1)return"sourceLoc";if(s<=6)return qv.slice(0,s).map(function(l){return"sourceLoc."+l}).join(",");throw Error("Slicing for rank "+s+" is not yet supported")}(this.rank);e=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+n.map(function(s,l){return"sourceLoc."+qv[l]+" = start["+l+"] + coords."+qv[l]+";"}).join(`
`)+`
      `,this.userCode=`
      `+a+`
      void main() {
        `+e+`
        setOutput(getSource(`+o+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,a){e.startLoc==null&&(e.startLoc=r.getUniformLocationNoThrow(a,"start"),e.startLoc==null)||r.gl.uniform1iv(e.startLoc,n)}},t}(),qv=["x","y","z","w","u","v"],_z=function(){function t(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length;var e=xt(this.rank),r=jn("coords",this.rank),a=jn("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":"vec2("+a.slice(-2).join()+")",s="getChannel(getSource("+a.join()+"), "+o+")",l=`
      result.x = `+s+`;
      if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
        ++`+a[this.rank-1]+`;
        result.y = `+s+`;
        --`+a[this.rank-1]+`;
      }
    `,c=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+n[this.rank-2]+`) {
        ++`+a[this.rank-2]+`;
        result.z = `+s+`;
        if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
          ++`+a[this.rank-1]+`;
          result.w = `+s+`;
        }
      }
    `,f=this.rank<=4?`sourceLoc = coords +
            `+e+"("+n.map(function(h,p){return"start["+p+"]"}).join()+");":n.map(function(h,p){return a[p]+" = "+r[p]+" + start["+p+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+e+` coords = getOutputCoords();
        `+e+` sourceLoc;
        `+f+`
        vec4 result = vec4(0.);
        `+l+`
        `+c+`
        setOutput(result);
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,a){e.startLoc==null&&(e.startLoc=r.getUniformLocationNoThrow(a,"start"),e.startLoc==null)||r.gl.uniform1iv(e.startLoc,n)}},t}(),Rz=function(t,n,e){this.variableNames=["x"],this.outputShape=e;var r=e.length,a=xt(e.length),o=xt(e.length),s="";if(r===1)s="coords * strides + begin";else{var l=0;s=e.map(function(c,f){return l++,e.length===1?"coords * strides["+f+"] + begin["+f+"]":"coords["+(l-1)+"] * strides["+f+"] + begin["+f+"]"}).join(",")}this.userCode=`
      `+a+" begin = "+a+"("+t+`);
      `+a+" strides = "+a+"("+n+`);

      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+s+`));
      }
    `},Az=function(){function t(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(n,e,r){var a,o=RS(e,r),s=AS(n,o,r);if(s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]),this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var l=this.freeTextures[s].shift();return this.usedTextures[s].push(l),l}return this.numUsedTextures++,this.log(),o===nr.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):o===nr.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):o===nr.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):o===nr.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):o===nr.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[s].push(a),a},t.prototype.releaseTexture=function(n,e,r,a){if(this.freeTextures!=null){var o=AS(e,RS(r,a),a);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(n),this.numFreeTextures++,this.numUsedTextures--;var s=this.usedTextures[o],l=s.indexOf(n);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");s.splice(l,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var n=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+n+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var n=this;if(this.freeTextures!=null){for(var e in this.freeTextures)this.freeTextures[e].forEach(function(r){n.gpgpu.deleteMatrixTexture(r)});for(var e in this.usedTextures)this.usedTextures[e].forEach(function(a){n.gpgpu.deleteMatrixTexture(a)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function RS(t,n){if(t===rr.UPLOAD)return nr.PACKED_2X2_FLOAT32;if(t===rr.RENDER||t==null)return function(e){return me().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?nr.PACKED_2X2_FLOAT32:nr.UNPACKED_FLOAT32:e?nr.PACKED_2X2_FLOAT16:nr.UNPACKED_FLOAT16}(n);if(t===rr.DOWNLOAD||t===rr.PIXELS)return nr.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function AS(t,n,e){return t[0]+"_"+t[1]+"_"+n+"_"+e}var Tz=function(t,n){this.variableNames=["A"];for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[r]*n[r];this.outputShape=e,this.rank=e.length;var a=xt(this.rank),o=function(s){var l=s.length;if(l>5)throw Error("Tile for rank "+l+" is not yet supported");if(l===1)return"imod(resRC, "+s[0]+")";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],f=[],h=0;h<s.length;h++)f.push("imod("+c[h]+", "+s[h]+")");return f.join()}(t);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},kz=function(t,n){this.variableNames=["A"];for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[n[r]];this.outputShape=e,this.rank=e.length;var a=xt(this.rank),o=function(s){var l=s.length;if(l>6)throw Error("Transpose for rank "+l+" is not yet supported");for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],f=new Array(l),h=0;h<s.length;h++)f[s[h]]=c[h];return f.join()}(n);this.userCode=`
    void main() {
      `+a+` resRC = getOutputCoords();
      setOutput(getA(`+o+`));
    }
    `},Nz=function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[n[r]];if(this.outputShape=e,this.rank=e.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var a=xt(this.rank),o=nR("rc",this.rank),s=new Array(this.rank);for(r=0;r<n.length;r++)s[n[r]]=o[r];var l="vec2("+s.slice(-2).join()+")",c="++"+o[this.rank-1]+" < "+e[this.rank-1],f="getChannel(getA("+s.join()+"), "+l+")";this.userCode=`
    void main() {
      `+a+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+f+`;
      if(`+c+`) {
        result[1] = `+f+`;
      }
      --`+o[this.rank-1]+`;
      if(++`+o[this.rank-2]+" < "+e[this.rank-2]+`) {
        result[2] = `+f+`;
        if(`+c+`) {
          result[3] = `+f+`;
        }
      }
      setOutput(result);
    }
    `},zy=1.7580993408473768,Uy=1.0507009873554805,Xe=function(t,n){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        `+n+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Hr="if (isnan(x)) return x;",Dz="return x;",TS="return abs(x);",sR=Hr+`
  return (x < 0.0) ? 0.0 : x;
`,uR=Hr+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,lR="return (x >= 0.0) ? x : (exp(x) - 1.0);",Oz=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+zy+`;
  float scale = `+Uy+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,kS="return -x;",NS="return ceil(x);",DS="return floor(x);",OS="return exp(x);",MS="return exp(x) - 1.0;",Mz=Hr+`
  return sin(x);
`,Iz=Hr+`
  return cos(x);
`,Bz=Hr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Fz=Hr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Pz=Hr+`
  return atan(x);
`,Lz=Hr+"return log(x + sqrt(x * x + 1.0));",jz=Hr+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,zz=Hr+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,kf="return x;",Uz="return x;",cR=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,fR=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,dR=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,il=function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+n+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},qz=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var n=t.length,e=jn("rc",n),r=xt(n),a=function(l,c){if(l===1)return"rc";for(var f="",h=0;h<l;h++)f+=c[h],h<l-1&&(f+=",");return f}(n,e),o=e.slice(-2),s=n<=1?"rc":"vec2("+o.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+a+`);

        setOutput(getChannel(packedInput, `+s+`));
      }
    `},Nf={};function Df(t,n){if(n===void 0&&(n=!1),t==="linear")return n?Uz:Dz;if(t==="relu")return n?cR:sR;if(t==="elu")return n?dR:lR;if(t==="relu6")return n?fR:uR;if(t==="prelu")return n?iR:oR;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var Hz=600,Vz=function(t){function n(e){var r,a=t.call(this)||this;if(a.pendingRead=new WeakMap,a.pendingDisposal=new WeakSet,a.dataRefCount=new WeakMap,a.numBytesInGPU=0,a.uploadWaitMs=0,a.downloadWaitMs=0,a.warnedAboutMemory=!1,a.pendingDeletes=0,a.disposed=!1,!me().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(e==null){var o=ca(me().getNumber("WEBGL_VERSION"));a.binaryCache=((r=me().getNumber("WEBGL_VERSION"))in Nf||(Nf[r]={}),Nf[r]),a.gpgpu=new tz(o),a.canvas=o.canvas,a.gpgpuCreatedLocally=!0}else a.gpgpu=e,a.binaryCache={},a.gpgpuCreatedLocally=!1,a.canvas=e.gl.canvas;return a.textureManager=new Az(a.gpgpu),a.numMBBeforeWarning=me().global.screen==null?1024:me().global.screen.height*me().global.screen.width*window.devicePixelRatio*Hz/1024/1024,a.texData=new X_(a,te),a}return qr(n,t),n.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},n.prototype.write=function(e,r,a){if(me().getBool("DEBUG")&&this.checkNumericalProblems(e),a==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var o={};return this.texData.set(o,{shape:r,dtype:a,values:e,usage:rr.UPLOAD}),o},n.prototype.move=function(e,r,a,o){if(me().getBool("DEBUG")&&this.checkNumericalProblems(r),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:a,dtype:o,values:r,usage:rr.UPLOAD})},n.prototype.readSync=function(e){var r=this.texData.get(e),a=r.values,o=r.dtype,s=r.complexTensors,l=r.slice,c=r.shape,f=r.isPacked;if(l!=null){var h=void 0;h=f?new il(c,kf):new Xe(c,kf);var p=this.runWebGLProgram(h,[{dataId:e,shape:c,dtype:o}],o),v=this.readSync(p.dataId);return this.disposeData(p.dataId),v}if(a!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return a;var g,y,x=this.activeTimers!=null;return x&&(g=Jr()),o==="complex64"?y=Ig(s.real.dataSync(),s.imag.dataSync()):y=this.getValuesFromTexture(e),x&&(this.downloadWaitMs+=Jr()-g),this.convertAndCacheOnCPU(e,y)},n.prototype.read=function(e){return ke(this,void 0,void 0,function(){var r,a,o,s,l,c,f,h,p,v,g,y,x,S,w,T,A,C,R,k,N,O;return Ne(this,function(D){switch(D.label){case 0:if(this.pendingRead.has(e))return r=this.pendingRead.get(e),[2,new Promise(function(M){return r.push(M)})];if(a=this.texData.get(e),o=a.values,s=a.shape,l=a.slice,c=a.dtype,f=a.complexTensors,h=a.isPacked,l!=null)return p=void 0,p=h?new il(s,kf):new Xe(s,kf),v=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:c}],c),g=this.read(v.dataId),this.disposeData(v.dataId),[2,g];if(o!=null)return[2,this.convertAndCacheOnCPU(e)];if(!me().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&me().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return y=null,c!=="complex64"&&me().get("WEBGL_BUFFER_SUPPORTED")&&(x=this.decode(e),S=this.texData.get(x.dataId),y=(O=this.gpgpu).createBufferFromTexture.apply(O,[S.texture].concat(fl(s)))),this.pendingRead.set(e,[]),c==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:D.sent(),D.label=2;case 2:return c!=="complex64"?[3,4]:[4,Promise.all([f.real.data(),f.imag.data()])];case 3:return T=D.sent(),A=T[0],C=T[1],w=Ig(A,C),[3,5];case 4:y==null?w=this.getValuesFromTexture(e):(R=De(s),w=this.gpgpu.downloadFloat32MatrixFromBuffer(y,R)),D.label=5;case 5:return x!=null&&this.disposeData(x.dataId),k=this.convertAndCacheOnCPU(e,w),N=this.pendingRead.get(e),this.pendingRead.delete(e),N.forEach(function(M){return M(k)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,k]}})})},n.prototype.checkNumericalProblems=function(e){if(e!=null)for(var r=0;r<e.length;r++){var a=e[r];if(!OP(a))throw me().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+a+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+a+" cannot be represented on this device.")}},n.prototype.getValuesFromTexture=function(e){var r,a=this.texData.get(e),o=a.shape,s=a.dtype,l=a.isPacked,c=De(o);if(me().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var f=this.decode(e),h=this.texData.get(f.dataId),p=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[h.texture].concat(fl(o))).subarray(0,c);return this.disposeData(f.dataId),p}var v=me().getBool("WEBGL_PACK")&&l===!0,g=v?Bv(o):o,y=v?new Dj(g):new Nj(g),x=this.runWebGLProgram(y,[{shape:g,dtype:s,dataId:e}],"float32"),S=this.texData.get(x.dataId),w=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(S.texture,S.texShape[0],S.texShape[1]).subarray(0,c);return this.disposeData(x.dataId),w},n.prototype.time=function(e){return ke(this,void 0,void 0,function(){var r,a,o,s,l,c,f;return Ne(this,function(h){switch(h.label){case 0:return r=this.activeTimers,a=[],o=!1,this.programTimersStack==null?(this.programTimersStack=a,o=!0):this.activeTimers.push(a),this.activeTimers=a,e(),s=js(this.activeTimers.map(function(p){return p.query})).filter(function(p){return p!=null}),l=js(this.activeTimers.map(function(p){return p.name})).filter(function(p){return p!=null}),this.activeTimers=r,o&&(this.programTimersStack=null),c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(s)]:[3,2];case 1:return f=h.sent(),c.kernelMs=dP(f),c.getExtraProfileInfo=function(){return f.map(function(p,v){return{name:l[v],ms:p}}).map(function(p){return p.name+": "+p.ms}).join(", ")},[3,3];case 2:c.kernelMs={error:"WebGL query timers are not supported in this environment."},h.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,c]}})})},n.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},n.prototype.startTimer=function(){return me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Jr(),endMs:null}},n.prototype.endTimer=function(e){return me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Jr(),e)},n.prototype.getQueryTime=function(e){return ke(this,void 0,void 0,function(){var r;return Ne(this,function(a){return me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(r=e).endMs-r.startMs]})})},n.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var r=this.texData.get(e).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(e)}}},n.prototype.releaseGPUData=function(e){var r=this.texData.get(e),a=r.texture,o=r.dtype,s=r.texShape,l=r.usage,c=r.isPacked,f=r.slice,h=f&&f.origDataId||e,p=this.dataRefCount.get(h);p>1?this.dataRefCount.set(h,p-1):(this.dataRefCount.delete(h),a!=null&&(this.numBytesInGPU-=this.computeBytes(s,o),this.textureManager.releaseTexture(a,s,l,c)));var v=this.texData.get(e);v.texture=null,v.texShape=null,v.isPacked=!1,v.slice=null},n.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},n.prototype.getDataInfo=function(e){return this.texData.get(e)},n.prototype.getCPUBackend=function(){return me().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=te.findBackend("cpu")),this.cpuBackend):null},n.prototype.shouldExecuteOnCPU=function(e,r){var a=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&e.every(function(o){return a.texData.get(o.dataId).texture==null&&o.size<r})},n.prototype.getGPGPUContext=function(){return this.gpgpu},n.prototype.complex=function(e,r){var a=this.makeOutput(e.shape,"complex64");return this.texData.get(a.dataId).complexTensors={real:te.keep(e.clone()),imag:te.keep(r.clone())},a},n.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},n.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},n.prototype.slice=function(e,r,a){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,r,a);if(De(a)===0)return vn([],a,e.dtype);var o=this.texData.get(e.dataId).isPacked,s=W_(e.shape,r,a);if(o||!s){var l=me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _z(a):new Cz(a),c=l.getCustomSetupFunc(r);return this.compileAndRun(l,[e],null,c)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,r,a)},n.prototype.shallowSlice=function(e,r,a){var o=this.texData.get(e.dataId),s=this.makeOutput(a,e.dtype),l=this.texData.get(s.dataId);Object.assign(l,o),l.shape=a,l.dtype=e.dtype;var c=G_(r,e.strides);o.slice&&(c+=o.slice.flatOffset),l.slice={flatOffset:c,origDataId:o.slice&&o.slice.origDataId||e.dataId};var f=this.dataRefCount.get(l.slice.origDataId)||1;return this.dataRefCount.set(l.slice.origDataId,f+1),s},n.prototype.stridedSlice=function(e,r,a,o){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,r,a,o);var s=Iy(r,a,o);if(s.some(function(c){return c===0}))return vn([],s);var l=new Rz(r,o,s);return this.compileAndRun(l,[e])},n.prototype.reverse=function(e,r){var a=me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xz(e.shape,r):new wz(e.shape,r);return this.compileAndRun(a,[e])},n.prototype.concat=function(e,r){if(e[0].dtype==="complex64"){var a=e.map(function(g){return Er(g)}),o=e.map(function(g){return ta(g)});return pn(this.concat(a,r),this.concat(o,r))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,r);if(e.length===1)return e[0];if(e.length>me().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var s=Math.floor(e.length/2),l=this.concat(e.slice(0,s),r),c=this.concat(e.slice(s),r);return this.concat([l,c],r)}if(me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var f=new vj(e.map(function(g){return g.shape}),r);return this.compileAndRun(f,e)}var h=Us(e.map(function(g){return g.shape}),r),p=e.map(function(g){return g.as2D(-1,De(g.shape.slice(r)))}),v=new mj(p.map(function(g){return g.shape}));return this.compileAndRun(v,p).reshape(h)},n.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,kS,e.dtype);var r=new Xe(e.shape,kS);return this.compileAndRun(r,[e])},n.prototype.batchMatMul=function(e,r,a,o){var s=a?e.shape[2]:e.shape[1],l=o?r.shape[1]:r.shape[2],c=a?e.shape[1]:e.shape[2],f=e.shape[0];if((s===1||l===1)&&c>1e3){a&&(e=e.transpose([0,2,1])),o&&(r=r.transpose([0,2,1]));var h=l===1?e:e.as3D(f,c,1),p=l===1?2:1,v=l===1?r.as3D(f,1,c):r;return this.multiply(h,v).sum(p,!0)}var g=mn(e.dtype,r.dtype),y=new jv(e.shape,[f,s,l],a,o);return this.compileAndRun(y,[e,r],g)},n.prototype.fusedBatchMatMul=function(e){var r=e.a,a=e.b,o=e.transposeA,s=e.transposeB,l=e.bias,c=e.activation,f=e.preluActivationWeights,h=o?r.shape[2]:r.shape[1],p=s?a.shape[1]:a.shape[2],v=r.shape[0],g=mn(r.dtype,a.dtype),y=l!=null,x=f!=null,S=c?Df(c,!0):null,w=new jv(r.shape,[v,h,p],o,s,y,S,x),T=[r,a];return l&&T.push(l),f&&T.push(f),this.compileAndRun(w,T,g)},n.prototype.multiply=function(e,r){if(e.dtype==="complex64"){var a=this.texData.get(e.dataId),o=this.texData.get(r.dataId),s=new gS(cj,e.shape,r.shape),l=new gS(fj,e.shape,r.shape),c=[this.makeComplexComponentTensorInfo(e,a.complexTensors.real),this.makeComplexComponentTensorInfo(e,a.complexTensors.imag),this.makeComplexComponentTensorInfo(r,o.complexTensors.real),this.makeComplexComponentTensorInfo(r,o.complexTensors.imag)],f=this.compileAndRun(s,c),h=this.compileAndRun(l,c),p=this.complex(f,h);return f.dispose(),h.dispose(),p}if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.multiply(e,r);if(me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,yS,e.dtype);var v=new Ot(yS,e.shape,r.shape);return this.compileAndRun(v,[e,r],e.dtype)},n.prototype.batchNormalization=function(e,r,a,o,s,l){var c=[e,r,a],f=null;l!=null&&(f=l.shape,c.push(l));var h=null;if(s!=null&&(h=s.shape,c.push(s)),me().getBool("WEBGL_PACK_NORMALIZATION")){var p=new lj(e.shape,r.shape,a.shape,f,h,o);return this.compileAndRun(p,c)}var v=new uj(e.shape,r.shape,a.shape,f,h,o);return this.compileAndRun(v,c)},n.prototype.localResponseNormalization4D=function(e,r,a,o,s){var l=me().getBool("WEBGL_PACK_NORMALIZATION")?new oz(e.shape,r,a,o,s):new rz(e.shape,r,a,o,s);return this.compileAndRun(l,[e])},n.prototype.LRNGrad=function(e,r,a,o,s,l,c){var f=new az(r.shape,o,s,l,c);return this.compileAndRun(f,[r,a,e])},n.prototype.tile=function(e,r){if(e.dtype==="string"){var a=this.readSync(e.dataId).map(function(s){return pd(s)});return eR(Ve(e.shape,e.dtype,a),r)}var o=new Tz(e.shape,r);return this.compileAndRun(o,[e])},n.prototype.pad=function(e,r,a){var o=me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dz(e.shape,r,a):new fz(e.shape,r,a);return this.compileAndRun(o,[e])},n.prototype.transpose=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,r);var a=me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Nz(e.shape,r):new kz(e.shape,r);return this.compileAndRun(a,[e])},n.prototype.gather=function(e,r,a){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.gather(e,r,a);var o=new Pj(e.shape,r.size,a);return this.compileAndRun(o,[e,r])},n.prototype.batchToSpaceND=function(e,r,a){G(e.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(p,v){return p*v}),s=wd(e.shape,r,o),l=xd(s.length,r.length),c=Sd(e.shape,r,o),f=U_(a,r.length),h=q_(c,a,r.length);return e.reshape(s).transpose(l).reshape(c).slice(f,h)},n.prototype.spaceToBatchND=function(e,r,a){G(e.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(v,g){return v*g}),s=[[0,0]];s.push.apply(s,a);for(var l=1+r.length;l<e.shape.length;++l)s.push([0,0]);var c=e.pad(s),f=wd(c.shape,r,o,!1),h=xd(f.length,r.length,!1),p=Sd(c.shape,r,o,!1);return c.reshape(f).transpose(h).reshape(p)},n.prototype.reduce=function(e,r,a){var o=e.shape[0],s=e.shape[1],l=Fv(s),c=new hz({windowSize:l,inSize:s,batchSize:o},r),f=this.compileAndRun(c,[e],a);return f.shape[1]===1?f:this.reduce(f,r,a)},n.prototype.argReduce=function(e,r,a){a===void 0&&(a=null);var o=e.shape[0],s=e.shape[1];a!=null&&(o=a.shape[0],s=a.shape[1]);var l=Fv(s),c=new JL({windowSize:l,inSize:s,batchSize:o},r,a==null),f=[e];a!=null&&f.push(a);var h=this.compileAndRun(c,f,"int32");return h.shape[1]===1?h:this.argReduce(e,r,h)},n.prototype.argReducePacked=function(e,r,a){a===void 0&&(a=null);var o=a!=null?a.shape:e.shape,s=Fv(o[o.length-1]),l=new oj(o,s,r,a==null),c=a==null?[e]:[e,a],f=this.compileAndRun(l,c,"int32");return f.rank===e.rank?this.argReducePacked(e,r,f):f},n.prototype.sum=function(e,r){tr("sum",r,e.rank);var a=xn(e.shape,r),o=a[0],s=De(a[1]),l=e.as2D(-1,s),c=Tv(e.dtype);return this.reduce(l,"sum",c).reshape(o)},n.prototype.prod=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,r);var a=xn(e.shape,r),o=a[0],s=De(a[1]),l=e.as2D(-1,s),c=Tv(e.dtype);return this.reduce(l,"prod",c).reshape(o)},n.prototype.unsortedSegmentSum=function(e,r,a){var o=0,s=fa([o],e.rank),l=e;s!=null&&(l=e.transpose(s),o=da(1,e.rank)[0]);var c=function(g,y,x){for(var S=[],w=g.length,T=0;T<w;T++)T!==y?S.push(g[T]):S.push(x);return S}(l.shape,o,a),f=De([l.shape[o]]),h=l.as2D(-1,f),p=Tv(e.dtype),v=this.segOpCompute(h,"unsortedSegmentSum",r,p,a).reshape(c);return s!=null&&(v=v.transpose(Ny(s))),v},n.prototype.segOpCompute=function(e,r,a,o,s){var l=e.shape[0],c=e.shape[1],f=function(v,g){var y,x=!1;for(v<=V_?(y=v,x=!0):y=_g(v,Math.floor(Math.sqrt(v)));!x;)y>g||y===v?x=!0:y=_g(v,y+1);return y}(c,s),h=new Sz({windowSize:f,inSize:c,batchSize:l,numSegments:s}),p=this.compileAndRun(h,[e,a],o);return p.shape[1]===s?p:(a=bd(0,s).tile([c/f]),this.segOpCompute(p,r,a,o,s))},n.prototype.argMinMaxReduce=function(e,r,a){var o=[r];if(tr("arg"+a.charAt(0).toUpperCase()+a.slice(1),o,e.rank),!me().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var s=xn(e.shape,o),l=s[0],c=De(s[1]),f=e.as2D(-1,c);return this.argReduce(f,a).reshape(l)}return this.argReducePacked(e,a)},n.prototype.argMin=function(e,r){return this.argMinMaxReduce(e,r,"min")},n.prototype.argMax=function(e,r){return this.argMinMaxReduce(e,r,"max")},n.prototype.cumsum=function(e,r,a,o){if(r!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+r);var s=new _j(e.shape,a,o);return this.compileAndRun(s,[e])},n.prototype.equal=function(e,r){if(me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(equal(a, b));
`,"bool");var a=new Ot("return float(a == b);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.notEqual=function(e,r){if(me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(notEqual(a, b));
`,"bool");var a=new Ot("return float(a != b);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.less=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.less(e,r);if(me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(lessThan(a, b));
`,"bool");var a=new Ot("return float(a < b);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.lessEqual=function(e,r){if(me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var a=new Ot("return float(a <= b);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.greater=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.greater(e,r);if(me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(greaterThan(a, b));
`,"bool");var a=new Ot("return float(a > b);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.greaterEqual=function(e,r){if(me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var a=new Ot("return float(a >= b);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.logicalNot=function(e){var r=new Xe(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[e])},n.prototype.logicalAnd=function(e,r){if(me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var a=new Ot("return float(a >= 1.0 && b >= 1.0);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.logicalOr=function(e,r){if(me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var a=new Ot("return float(a >= 1.0 || b >= 1.0);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.select=function(e,r,a){var o=new Ez(e.rank,r.shape,r.rank);return this.compileAndRun(o,[e,r,a],mn(r.dtype,a.dtype))},n.prototype.where=function(e){gd("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=e.dataSync();return Ly(e.shape,r)},n.prototype.topk=function(e,r,a){return tR(e.dataSync(),e.shape,e.dtype,r)},n.prototype.min=function(e,r){tr("min",r,e.rank);var a=xn(e.shape,r),o=a[0],s=De(a[1]),l=e.as2D(-1,s);return this.reduce(l,"min",l.dtype).reshape(o)},n.prototype.minimum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.minimum(e,r);var a=me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oa(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new Ot(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,e.shape,r.shape);return this.compileAndRun(a,[e,r])},n.prototype.mod=function(e,r){var a=me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oa(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new Ot(`if (b == 0.0) return NAN;
  return mod(a, b);`,e.shape,r.shape);return this.compileAndRun(a,[e,r])},n.prototype.max=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,r);tr("max",r,e.rank);var a=xn(e.shape,r),o=a[0],s=De(a[1]),l=e.as2D(-1,s);return this.reduce(l,"max",l.dtype).reshape(o)},n.prototype.maximum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.maximum(e,r);var a=me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oa(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new Ot(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,e.shape,r.shape);return this.compileAndRun(a,[e,r])},n.prototype.all=function(e,r){tr("all",r,e.rank);var a=xn(e.shape,r),o=a[0],s=De(a[1]),l=e.as2D(-1,s);return this.reduce(l,"all",l.dtype).reshape(o)},n.prototype.any=function(e,r){tr("any",r,e.rank);var a=xn(e.shape,r),o=a[0],s=De(a[1]),l=e.as2D(-1,s);return this.reduce(l,"any",l.dtype).reshape(o)},n.prototype.realDivide=function(e,r){if(me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var a=new Ot(`
if (a == b) {
  return 1.0;
};
return a / b;`,e.shape,r.shape);return this.compileAndRun(a,[e,r],"float32")},n.prototype.floorDiv=function(e,r){if(me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var a=new Ot(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,e.shape,r.shape);return this.compileAndRun(a,[e,r],"int32")},n.prototype.add=function(e,r){if(e.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(e,r,Pv);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.add(e,r);var a=mn(e.dtype,r.dtype);if(me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,Pv,a);var o=new Ot(Pv,e.shape,r.shape);return this.compileAndRun(o,[e,r],a)},n.prototype.packedUnaryOp=function(e,r,a){var o=new il(e.shape,r);return this.compileAndRun(o,[e],a)},n.prototype.packedBinaryOp=function(e,r,a,o,s){s===void 0&&(s=!1);var l=new Oa(a,e.shape,r.shape,s);return this.compileAndRun(l,[e,r],o)},n.prototype.complexSeparableBinaryOp=function(e,r,a){var o=this,s=this.texData.get(e.dataId),l=this.texData.get(r.dataId),c=[[s.complexTensors.real,l.complexTensors.real],[s.complexTensors.imag,l.complexTensors.imag]].map(function(v){var g=v[0],y=v[1],x=o.makeComplexComponentTensorInfo(e,g),S=o.makeComplexComponentTensorInfo(r,y),w=new Ot(a,e.shape,r.shape);return o.compileAndRun(w,[x,S],mn(g.dtype,y.dtype))}),f=c[0],h=c[1],p=this.complex(f,h);return f.dispose(),h.dispose(),p},n.prototype.makeComplexComponentTensorInfo=function(e,r){return{dataId:r.dataId,dtype:r.dtype,shape:e.shape}},n.prototype.addN=function(e){if(e.length===1)return e[0];if(e.length>me().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(e.length/2),a=this.addN(e.slice(0,r)),o=this.addN(e.slice(r));return this.addN([a,o])}var s=e.map(function(f){return f.dtype}).reduce(function(f,h){return mn(f,h)}),l=e.map(function(f){return f.shape}),c=me().getBool("WEBGL_PACK")?new ZL(e[0].shape,l):new QL(e[0].shape,l);return this.compileAndRun(c,e,s)},n.prototype.subtract=function(e,r){if(e.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(e,r,Lv);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.subtract(e,r);var a=mn(e.dtype,r.dtype);if(me().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,Lv,e.dtype);var o=new Ot(Lv,e.shape,r.shape);return this.compileAndRun(o,[e,r],a)},n.prototype.pow=function(e,r){var a=me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oa(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new Ot(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,e.shape,r.shape),o=mn(e.dtype,r.dtype);return this.compileAndRun(a,[e,r],o)},n.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,NS,e.dtype);var r=new Xe(e.shape,NS);return this.compileAndRun(r,[e])},n.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,DS,e.dtype);var r=new Xe(e.shape,DS);return this.compileAndRun(r,[e])},n.prototype.sign=function(e){var r=new Xe(e.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[e])},n.prototype.isNaN=function(e){var r=new Xe(e.shape,"return float(isnan(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.isInf=function(e){var r=new Xe(e.shape,"return float(isinf(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.isFinite=function(e){var r=new Xe(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.round=function(e){var r=new Xe(e.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[e])},n.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,OS,e.dtype);var r=new Xe(e.shape,OS);return this.compileAndRun(r,[e])},n.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,MS,e.dtype);var r=new Xe(e.shape,MS);return this.compileAndRun(r,[e])},n.prototype.softmax=function(e,r){var a=Qt([r],e.shape),o=this.max(e,a),s=Wn(o.shape,a),l=this.subtract(e,o.reshape(s)),c=this.exp(l),f=this.sum(c,a).reshape(s);return this.realDivide(c,f)},n.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,e.dtype);var r=new Xe(e.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[e])},n.prototype.log1p=function(e){var r=new Xe(e.shape,"return log(1.0 + x);");return this.compileAndRun(r,[e])},n.prototype.sqrt=function(e){var r=new Xe(e.shape,"return sqrt(x);");return this.compileAndRun(r,[e])},n.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var r=new Xe(e.shape,"return inversesqrt(x);");return this.compileAndRun(r,[e])},n.prototype.reciprocal=function(e){var r=new Xe(e.shape,"return 1.0 / x;");return this.compileAndRun(r,[e])},n.prototype.relu=function(e){var r;return r=me().getBool("WEBGL_PACK")?new il(e.shape,cR):new Xe(e.shape,sR),this.compileAndRun(r,[e])},n.prototype.relu6=function(e){var r;return r=me().getBool("WEBGL_PACK")?new il(e.shape,fR):new Xe(e.shape,uR),this.compileAndRun(r,[e])},n.prototype.prelu=function(e,r){var a=me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oa(iR,e.shape,r.shape):new Ot(oR,e.shape,r.shape);return this.compileAndRun(a,[e,r])},n.prototype.elu=function(e){if(me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,dR,e.dtype);var r=new Xe(e.shape,lR);return this.compileAndRun(r,[e])},n.prototype.eluDer=function(e,r){var a=me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oa(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,e.shape,r.shape):new Ot("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,r.shape);return this.compileAndRun(a,[e,r])},n.prototype.selu=function(e){var r=new Xe(e.shape,Oz);return this.compileAndRun(r,[e])},n.prototype.int=function(e){var r=new Xe(e.shape,"return float(int(x));");return this.compileAndRun(r,[e],"int32")},n.prototype.clip=function(e,r,a){var o,s=(o=me().getBool("WEBGL_PACK_CLIP")?new hj(e.shape):new dj(e.shape)).getCustomSetupFunc(r,a);return this.compileAndRun(o,[e],null,s)},n.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,TS,e.dtype);var r=new Xe(e.shape,TS);return this.compileAndRun(r,[e])},n.prototype.complexAbs=function(e){var r=this.texData.get(e.dataId),a=new pj(e.shape),o=[this.makeComplexComponentTensorInfo(e,r.complexTensors.real),this.makeComplexComponentTensorInfo(e,r.complexTensors.imag)];return this.compileAndRun(a,o)},n.prototype.sigmoid=function(e){var r=new Xe(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[e])},n.prototype.softplus=function(e){var r=new Xe(e.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[e])},n.prototype.sin=function(e){var r=new Xe(e.shape,Mz);return this.compileAndRun(r,[e])},n.prototype.cos=function(e){var r=new Xe(e.shape,Iz);return this.compileAndRun(r,[e])},n.prototype.tan=function(e){var r=new Xe(e.shape,"return tan(x);");return this.compileAndRun(r,[e])},n.prototype.asin=function(e){var r=new Xe(e.shape,Bz);return this.compileAndRun(r,[e])},n.prototype.acos=function(e){var r=new Xe(e.shape,Fz);return this.compileAndRun(r,[e])},n.prototype.atan=function(e){var r=new Xe(e.shape,Pz);return this.compileAndRun(r,[e])},n.prototype.atan2=function(e,r){var a=me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oa(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new Ot(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,e.shape,r.shape);return this.compileAndRun(a,[e,r])},n.prototype.sinh=function(e){var r=new Xe(e.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[e])},n.prototype.cosh=function(e){var r=new Xe(e.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[e])},n.prototype.tanh=function(e){var r=new Xe(e.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[e])},n.prototype.asinh=function(e){var r=new Xe(e.shape,Lz);return this.compileAndRun(r,[e])},n.prototype.acosh=function(e){var r=new Xe(e.shape,jz);return this.compileAndRun(r,[e])},n.prototype.atanh=function(e){var r=new Xe(e.shape,zz);return this.compileAndRun(r,[e])},n.prototype.erf=function(e){var r=new Xe(e.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[e])},n.prototype.step=function(e,r){var a=new Xe(e.shape,function(o){return o===void 0&&(o=0),Hr+`
    return x > 0.0 ? 1.0 : float(`+o+`);
  `}(r));return this.compileAndRun(a,[e])},n.prototype.conv2dByMatMul=function(e,r,a,o,s,l){var c=e.shape,f=this.texData.get(e.dataId),h=a.inChannels,p=c[0]*c[1]*c[2],v=a.outChannels,g=a.dataFormat==="channelsLast",y=(p===1||v===1)&&h>1e3,x=c[2]%2!=0&&!!f.isPacked;if(y||!me().getBool("WEBGL_LAZILY_UNPACK")||!me().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!x){var S=g?c[0]*c[1]*c[2]:c[0]*c[2]*c[3],w=this.reshape(e,[1,S,a.inChannels]),T=this.reshape(r,[1,a.inChannels,a.outChannels]);return this.reshape(this.fusedBatchMatMul({a:w,b:T,transposeA:!1,transposeB:!1,bias:o,activation:s,preluActivationWeights:l}),a.outShape)}var A=g?c[0]*c[1]*(c[2]+1):c[0]*c[2]*(c[3]+1),C={dataId:e.dataId,shape:[1,A,a.inChannels],dtype:e.dtype},R=f.shape;f.shape=f.shape.slice(),f.shape[f.shape.length-2]++,G(Af(f.shape,C.shape),function(){return"packed reshape "+f.shape+" to "+C.shape+" isn't free"});var k=this.reshape(r,[1,a.inChannels,a.outChannels]),N=this.fusedBatchMatMul({a:C,b:k,transposeA:!1,transposeB:!1,bias:o,activation:s,preluActivationWeights:l}),O=this.texData.get(N.dataId);return G(O.isPacked,function(){return"batchMatMul result is expected to be packed"}),f.shape=R,O.shape=a.outShape,te.makeTensorFromDataId(N.dataId,a.outShape,N.dtype)},n.prototype.conv2dWithIm2Row=function(e,r,a,o,s,l){var c=a.filterWidth,f=a.filterHeight,h=a.inChannels,p=a.outWidth,v=a.outHeight,g=a.dataFormat==="channelsLast",y=c*f*h,x=v*p,S=[y,x],w=e.squeeze([0]),T=r.reshape([1,y,-1]),A=new nz(S,w.shape,a),C=this.compileAndRun(A,[w]).reshape([1,S[0],S[1]]),R=o!=null,k=l!=null,N=s?Df(s,!0):null,O=new jv(C.shape,[1,x,a.outChannels],!0,!1,R,N,k),D=[C,T];o&&D.push(o),k&&D.push(l);var M=this.compileAndRun(O,D);return g?M.reshape([1,v,p,a.outChannels]):M.reshape([1,a.outChannels,v,p])},n.prototype.fusedConv2d=function(e){var r=e.input,a=e.filter,o=e.convInfo,s=e.bias,l=e.activation,c=e.preluActivationWeights;if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(r,a,o,s,l,c);if(me().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,a,o,s,l,c);var f=s!=null,h=c!=null,p=l?Df(l,!1):null,v=new bS(o,f,p,h),g=[r,a];return s&&g.push(s),c&&g.push(c),this.compileAndRun(v,g)},n.prototype.conv2d=function(e,r,a){if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(e,r,a);if(me().getBool("WEBGL_CONV_IM2COL")&&e.shape[0]===1)return this.conv2dWithIm2Row(e,r,a);var o=new bS(a);return this.compileAndRun(o,[e,r])},n.prototype.conv2dDerInput=function(e,r,a){var o=new yj(a);return this.compileAndRun(o,[e,r])},n.prototype.conv2dDerFilter=function(e,r,a){var o=new gj(a);return this.compileAndRun(o,[e,r])},n.prototype.fusedDepthwiseConv2D=function(e){var r,a=e.input,o=e.filter,s=e.convInfo,l=e.bias,c=e.activation,f=e.preluActivationWeights,h=me().getBool("WEBGL_PACK_DEPTHWISECONV")&&s.strideWidth<=2&&s.outChannels/s.inChannels==1,p=c?Df(c,h):null,v=[a,o],g=l!=null,y=f!=null;return g&&v.push(l),y&&v.push(f),h?(r=new xS(s,g,p,y),this.compileAndRun(r,v)):(r=new wS(s,g,p,y),this.compileAndRun(r,v))},n.prototype.depthwiseConv2D=function(e,r,a){var o;return me().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1?(o=new xS(a),this.compileAndRun(o,[e,r])):(o=new wS(a),this.compileAndRun(o,[e,r]))},n.prototype.depthwiseConv2DDerInput=function(e,r,a){var o=new Sj(a);return this.compileAndRun(o,[e,r])},n.prototype.depthwiseConv2DDerFilter=function(e,r,a){var o=new xj(a);return this.compileAndRun(o,[e,r])},n.prototype.conv3d=function(e,r,a){var o=new Ej(a);return this.compileAndRun(o,[e,r])},n.prototype.conv3dDerInput=function(e,r,a){var o=new wj(a);return this.compileAndRun(o,[e,r])},n.prototype.conv3dDerFilter=function(e,r,a){var o=new bj(a);return this.compileAndRun(o,[e,r])},n.prototype.maxPool=function(e,r){var a=new zv(r,"max",!1);return this.compileAndRun(a,[e])},n.prototype.avgPool=function(e,r){var a=new zv(r,"avg",!1);return this.compileAndRun(a,[e],"float32")},n.prototype.maxPoolBackprop=function(e,r,a,o){var s=new zv(o,"max",!0),l=this.compileAndRun(s,[r]),c=new iz(o),f=this.compileAndRun(c,[e,l],r.dtype);return l.dispose(),f},n.prototype.avgPoolBackprop=function(e,r,a){var o=new ij(a);return this.compileAndRun(o,[e],r.dtype)},n.prototype.cast=function(e,r){return $_(e,r,this)},n.prototype.unstack=function(e,r){for(var a=e.shape[r],o=new Array(e.rank-1),s=0,l=0;l<e.rank;l++)l!==r&&(o[s++]=e.shape[l]);var c=new Array(e.rank).fill(0),f=e.shape.slice();f[r]=1;var h=new Array(a);for(l=0;l<h.length;l++)c[r]=l,h[l]=this.slice(e,c,f).reshape(o);return h},n.prototype.avgPool3d=function(e,r){var a=new Uv(r,"avg",!1);return this.compileAndRun(a,[e],"float32")},n.prototype.avgPool3dBackprop=function(e,r,a){var o=new sj(a);return this.compileAndRun(o,[e],r.dtype)},n.prototype.maxPool3d=function(e,r){var a=new Uv(r,"max",!1);return this.compileAndRun(a,[e],"float32")},n.prototype.maxPool3dBackprop=function(e,r,a,o){var s=new Uv(o,"max",!0),l=this.compileAndRun(s,[r]),c=new sz(o),f=this.compileAndRun(c,[e,l],r.dtype);return l.dispose(),f},n.prototype.reshape=function(e,r){var a=this.texData.get(e.dataId);if(a.isPacked&&!Af(e.shape,r)&&(a.texture===null||!Af(a.shape,r))){var o=this.packedReshape(e,r);return te.makeTensorFromDataId(o.dataId,o.shape,o.dtype)}return Mg(e,r)},n.prototype.resizeBilinear=function(e,r,a,o){var s=me().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new gz(e.shape,r,a,o):new vz(e.shape,r,a,o);return this.compileAndRun(s,[e],"float32")},n.prototype.resizeBilinearBackprop=function(e,r,a){var o=new mz(e,r,a);return this.compileAndRun(o,[e])},n.prototype.resizeNearestNeighbor=function(e,r,a,o){var s=new bz(e.shape,r,a,o);return this.compileAndRun(s,[e])},n.prototype.resizeNearestNeighborBackprop=function(e,r,a){var o=new yz(e,r,a);return this.compileAndRun(o,[e])},n.prototype.multinomial=function(e,r,a,o){var s=r?e:za(e),l=s.shape[0],c=s.shape[1],f=new uz(l,c,a),h=f.getCustomSetupFunc(o);return this.compileAndRun(f,[s],"int32",h)},n.prototype.oneHot=function(e,r,a,o){var s=new lz(e.size,r,a,o);return this.compileAndRun(s,[e])},n.prototype.diag=function(e){var r=new kj(e.size);return this.compileAndRun(r,[e])},n.prototype.nonMaxSuppression=function(e,r,a,o,s){return gd("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Fy(e.dataSync(),r.dataSync(),a,o,s)},n.prototype.cropAndResize=function(e,r,a,o,s,l){var c=new Cj(e.shape,r.shape,o,s,l);return this.compileAndRun(c,[e,r,a],"float32")},n.prototype.depthToSpace=function(e,r,a){G(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var o=e.shape[0],s=a==="NHWC"?e.shape[1]:e.shape[2],l=a==="NHWC"?e.shape[2]:e.shape[3],c=a==="NHWC"?e.shape[3]:e.shape[1],f=s*r,h=l*r,p=c/(r*r),v=new Tj(a==="NHWC"?[o,f,h,p]:[o,p,f,h],r,a);return this.compileAndRun(v,[e])},n.prototype.split=function(e,r,a){return J_(e,r,a)},n.prototype.scatterND=function(e,r,a){var o=Ed(0,e,a),s=o.sliceRank,l=o.numUpdates,c=o.sliceSize,f=o.strides,h=o.outputSize,p=[h/c,c],v=e.reshape([l,s]),g=r.reshape([l,c]);if(h===0)return Mg(vn([]),a);var y=_e(0),x=new _S(l,s,v.rank,g.rank,f,p);return this.compileAndRun(x,[g,v,y]).reshape(a)},n.prototype.sparseToDense=function(e,r,a,o){var s=Ed(0,e,a),l=s.sliceRank,c=s.numUpdates,f=s.strides,h=s.outputSize,p=new _S(c,l,e.rank,r.rank,f,[h,1]);return this.compileAndRun(p,[r,e,o]).reshape(a)},n.prototype.fft=function(e){return this.fftImpl(e,!1)},n.prototype.ifft=function(e){return this.fftImpl(e,!0)},n.prototype.fftImpl=function(e,r){var a=this.texData.get(e.dataId),o=new ES(Ij,e.shape,r),s=new ES(Bj,e.shape,r),l=[this.makeComplexComponentTensorInfo(e,a.complexTensors.real),this.makeComplexComponentTensorInfo(e,a.complexTensors.imag)],c=this.compileAndRun(o,l),f=this.compileAndRun(s,l),h=this.complex(c,f).as2D(e.shape[0],e.shape[1]);return c.dispose(),f.dispose(),h},n.prototype.gatherND=function(e,r){var a=r.shape,o=a[a.length-1],s=H_(e,r),l=s[0],c=s[1],f=s[2],h=s[3],p=r.reshape([c,o]),v=e.reshape([e.size/f,f]),g=new Lj(o,h,[c,f]);return this.compileAndRun(g,[v,p]).reshape(l)},n.prototype.fill=function(e,r,a){if((a=a||Gl(r))==="string"){var o=hd(a,De(e));return o.fill(r),te.makeTensor(o,e,a,this)}var s=new Fj(e,r),l=s.getCustomSetupFunc(r);return this.compileAndRun(s,[],a,l)},n.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},n.prototype.zerosLike=function(e){return this.fill(e.shape,e.dtype==="string"?"":0,e.dtype)},n.prototype.linspace=function(e,r,a){return Q_(e,r,a)},n.prototype.makeTensorInfo=function(e,r){var a=this.write(null,e,r);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:r}},n.prototype.makeOutput=function(e,r){var a=this.makeTensorInfo(e,r).dataId;return te.makeTensorFromDataId(a,e,r,this)},n.prototype.unpackTensor=function(e){var r=new qz(e.shape);return this.runWebGLProgram(r,[e],e.dtype)},n.prototype.packTensor=function(e){var r=new cz(e.shape);return this.runWebGLProgram(r,[e],e.dtype,null,!0)},n.prototype.packedReshape=function(e,r){var a=[md(e.shape)].concat(vd(e.shape)),o={dtype:e.dtype,shape:a,dataId:e.dataId},s=[md(r)].concat(vd(r)),l=new pz(s,a),c=this.runWebGLProgram(l,[o],e.dtype,null,!0);return{dataId:c.dataId,shape:r,dtype:c.dtype}},n.prototype.decode=function(e){var r,a=this.texData.get(e),o=a.isPacked,s=a.shape,l=a.dtype,c=Bv(s);return r=o?new Aj(c):new Rj(c),{dtype:l,shape:s,dataId:this.runWebGLProgram(r,[{shape:c,dtype:l,dataId:e}],l,null,!0).dataId}},n.prototype.runWebGLProgram=function(e,r,a,o,s){var l=this;s===void 0&&(s=!1);var c=this.makeTensorInfo(e.outputShape,a),f=this.texData.get(c.dataId);if(e.packedOutput&&(f.isPacked=!0),e.outPackingScheme===Cl.DENSE){var h=fl(e.outputShape);f.texShape=h.map(function(A){return 2*A})}if(e.outTexUsage!=null&&(f.usage=e.outTexUsage),De(c.shape)===0)return f.values=Sl(c.dtype,0),c;var p=[],v=r.map(function(A){if(A.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var C=l.texData.get(A.dataId);if(C.texture==null){if(!e.packedInputs&&De(A.shape)<=me().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:A.shape,texData:null,isUniform:!0,uniformValues:C.values};e.packedInputs&&(C.isPacked=!0,C.shape=A.shape)}else if(!!C.isPacked!=!!e.packedInputs)A=C.isPacked?l.unpackTensor(A):l.packTensor(A),p.push(A),C=l.texData.get(A.dataId);else if(C.isPacked&&!Af(C.shape,A.shape)){var R=A,k=A.shape;A.shape=C.shape,A=l.packedReshape(A,k),p.push(A),C=l.texData.get(A.dataId),R.shape=k}return l.uploadToGPU(A.dataId),{shape:A.shape,texData:C,isUniform:!1}});this.uploadToGPU(c.dataId);var g,y={shape:c.shape,texData:f,isUniform:!1},x=function(A,C,R){var k="";C.concat(R).forEach(function(D){var M=D.texData!=null&&D.texData.slice!=null&&D.texData.slice.flatOffset>0,P=D.isUniform?"uniform":D.texData.texShape;k+=D.shape+"_"+P+"_"+M});var N=A.userCode,O=A.constructor.name;return O+="_"+k+"_"+N}(e,v,y),S=this.getAndSaveBinary(x,function(){return function(A,C,R,k){var N=C.userCode,O=R.map(function(K,V){var I={logicalShape:K.shape,texShape:K.isUniform?null:K.texData.texShape,isUniform:K.isUniform,isPacked:!K.isUniform&&K.texData.isPacked,flatOffset:null};return K.texData!=null&&K.texData.slice!=null&&K.texData.slice.flatOffset>0&&(I.flatOffset=K.texData.slice.flatOffset),{name:C.variableNames[V],shapeInfo:I}}),D=O.map(function(K){return K.shapeInfo}),M={logicalShape:k.shape,texShape:k.texData.texShape,isUniform:!1,isPacked:k.texData.isPacked,flatOffset:null},P=ej(O,M,N,C.packedInputs),F=A.createProgram(P),U=null,W=A.getUniformLocation(F,"NAN",!1);me().getNumber("WEBGL_VERSION")===1&&(U=A.getUniformLocation(F,"INFINITY",!1));for(var Y={},z=0;z<C.variableNames.length;z++){var X=C.variableNames[z];Y[X]=A.getUniformLocation(F,X,!1),Y["offset"+X]=A.getUniformLocation(F,"offset"+X,!1)}return{program:C,source:P,webGLProgram:F,uniformLocations:Y,inShapeInfos:D,outShapeInfo:M,infLoc:U,nanLoc:W}}(l.gpgpu,e,v,y)}),w=this.activeTimers!=null;if(w&&(g=this.startTimer()),function(A,C,R,k,N){CS(C.inShapeInfos,R),CS([C.outShapeInfo],[k]);var O=k.texData.texture,D=k.texData.texShape;k.texData.isPacked?A.setOutputPackedMatrixTexture(O,D[0],D[1]):A.setOutputMatrixTexture(O,D[0],D[1]),A.setProgram(C.webGLProgram),me().getNumber("WEBGL_VERSION")===1&&C.infLoc!==null&&A.gl.uniform1f(C.infLoc,1/0),C.nanLoc!==null&&A.gl.uniform1f(C.nanLoc,NaN),R.forEach(function(M,P){var F=C.program.variableNames[P],U=C.uniformLocations[F],W=C.uniformLocations["offset"+F];if(U!=null)if(M.isUniform)if(De(M.shape)<2)A.gl.uniform1f(U,M.uniformValues[0]);else{var Y=M.uniformValues;Y instanceof Float32Array||(Y=new Float32Array(Y)),A.gl.uniform1fv(U,Y)}else M.texData.slice!=null&&W!=null&&A.gl.uniform1i(W,M.texData.slice.flatOffset),A.setInputMatrixTexture(M.texData.texture,U,P)}),N!=null&&N(A,C.webGLProgram),A.executeProgram()}(this.gpgpu,S,v,y,o),p.forEach(function(A){return l.disposeData(A.dataId)}),w&&(g=this.endTimer(g),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(g)})),!me().getBool("WEBGL_LAZILY_UNPACK")&&f.isPacked&&s===!1){var T=this.unpackTensor(c);return this.disposeData(c.dataId),T}return c},n.prototype.compileAndRun=function(e,r,a,o,s){s===void 0&&(s=!1),a=a||r[0].dtype;var l=this.runWebGLProgram(e,r,a,o,s);return te.makeTensorFromDataId(l.dataId,l.shape,l.dtype)},n.prototype.getAndSaveBinary=function(e,r){return e in this.binaryCache||(this.binaryCache[e]=r()),this.binaryCache[e]},n.prototype.getTextureManager=function(){return this.textureManager},n.prototype.dispose=function(){var e=this;this.disposed||(me().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){e.gpgpu.deleteProgram(e.binaryCache[r].webGLProgram),delete e.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},n.prototype.floatPrecision=function(){var e=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Re(function(){if(!me().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=me().getBool("DEBUG");me().set("DEBUG",!1);var a=e.abs(_e(1e-8)).dataSync()[0];if(me().set("DEBUG",r),a>0)return 32}return 16})),this.floatPrecisionValue},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.uploadToGPU=function(e){var r,a=this.texData.get(e),o=a.shape,s=a.dtype,l=a.values,c=a.texture,f=a.usage,h=a.isPacked;if(c==null){var p,v=this.activeTimers!=null;v&&(p=Jr());var g=a.texShape;if(g==null&&(g=$P(o,h),a.texShape=g),l!=null){var y=Bv(o),x=void 0,S=g[1],w=g[0],T=l instanceof Uint8Array;h?(S=(r=Yl(g[0],g[1]))[0],w=r[1],x=new Mj(y,[w,S],T)):x=new Oj(y,[w,S],T);var A=this.makeTensorInfo([w,S],s);this.texData.get(A.dataId).usage=T?rr.PIXELS:rr.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(A.dataId),S,w,l);var C=this.runWebGLProgram(x,[A],s,null,!0),R=this.texData.get(C.dataId);a.texture=R.texture,a.texShape=R.texShape,a.isPacked=R.isPacked,a.usage=R.usage,this.disposeData(A.dataId),this.texData.delete(C.dataId),a.values=null,v&&(this.uploadWaitMs+=Jr()-p)}else{var k=this.acquireTexture(g,f,s,h);a.texture=k}}},n.prototype.convertAndCacheOnCPU=function(e,r){var a=this.texData.get(e),o=a.dtype;return this.releaseGPUData(e),r!=null&&(a.values=function(s,l){if(l==="float32"||l==="complex64")return s;if(l==="int32"||l==="bool"){for(var c=l==="int32"?new Int32Array(s.length):new Uint8Array(s.length),f=0;f<c.length;++f)c[f]=Math.round(s[f]);return c}throw new Error("Unknown dtype "+l)}(r,o)),a.values},n.prototype.acquireTexture=function(e,r,a,o){if(this.numBytesInGPU+=this.computeBytes(e,a),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+s+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,r,o)},n.prototype.computeBytes=function(e,r){return e[0]*e[1]*__(r)},n}(Y_);O_()&&te.registerBackend("webgl",function(){return new Vz},2);var Wz=Z({square_:function(t){var n=q(t,"x","square"),e=[n];return te.runKernelFunc(function(r,a){return a([n]),r.square(n)},{x:n},null,"Square",{},e,[])}}),Rl="SquaredDifference",hR=Z({squaredDifference_:function(t,n){var e,r=q(t,"a","squaredDifference"),a=q(n,"b","squaredDifference");e=kt(r,a),r=e[0],a=e[1],tt(r.shape,a.shape);var o={a:r,b:a},s=[r,a];return te.runKernelFunc(function(l,c){var f=l.squaredDifference(r,a);return c([r,a]),f},o,function(l,c){var f=c[0],h=c[1],p=_e(2);return{a:function(){return l.mul(f.sub(h).mul(p))},b:function(){return l.mul(h.sub(f).mul(p))}}},Rl,{},s,[])}}),Gz=Z({abs_:function(t){var n=q(t,"x","abs");return n.dtype==="complex64"?te.runKernelFunc(function(e){return e.complexAbs(n)},{$x:n}):te.runKernelFunc(function(e,r){var a=e.abs(n);return r([n]),a},{x:n},function(e,r){var a=r[0];return{x:function(){return e.mul(a.toFloat().step(-1))}}},"Abs")}}),Xz=Z({acos_:function(t){var n=q(t,"x","acos");return te.runKernelFunc(function(e,r){var a=e.acos(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.divStrict(_e(1).sub(a.toFloat().square()).sqrt()).neg()}}})}}),Yz=Z({acosh_:function(t){var n=q(t,"x","acosh");return te.runKernelFunc(function(e,r){var a=e.acosh(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.divStrict(a.toFloat().square().sub(1).sqrt())}}})}}),Kz=Z({asin_:function(t){var n=q(t,"x","asin");return te.runKernelFunc(function(e,r){var a=e.asin(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.divStrict(_e(1).sub(a.toFloat().square()).sqrt())}}})}}),$z=Z({asinh_:function(t){var n=q(t,"x","asinh");return te.runKernelFunc(function(e,r){var a=e.asinh(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.divStrict(_e(1).add(a.toFloat().square()).sqrt())}}})}}),Qz=Z({atan_:function(t){var n=q(t,"x","atan");return te.runKernelFunc(function(e,r){var a=e.atan(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.div(a.toFloat().square().add(1))}}})}}),Zz=Z({atanh_:function(t){var n=q(t,"x","atanh");return te.runKernelFunc(function(e,r){var a=e.atanh(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.div(_e(1).sub(a.toFloat().square()))}}})}}),Jz=Z({ceil_:function(t){var n=q(t,"x","ceil");return te.runKernelFunc(function(e){return e.ceil(n)},{$x:n},function(e){return{$x:function(){return at(e)}}})}}),qy=Z({clipByValue_:function(t,n,e){var r=q(t,"x","clipByValue");G(n<=e,function(){return"Error in clip: min ("+n+") must be less than or equal to max ("+e+")."});var a=[r],o={min:n,max:e};return te.runKernelFunc(function(s,l){var c=s.clip(r,n,e);return l([r]),c},{x:r},function(s,l){var c=l[0];return{x:function(){return s.where(c.greaterEqual(n).logicalAnd(c.lessEqual(e)),at(s))}}},"ClipByValue",o,a)}}),eU=Z({cos_:function(t){var n=q(t,"x","cos"),e=[n];return te.runKernelFunc(function(r,a){var o=r.cos(n);return a([n]),o},{x:n},function(r,a){var o=a[0];return{x:function(){return o.toFloat().sin().neg().mul(r)}}},"Cos",{},e)}}),tU=Z({cosh_:function(t){var n=q(t,"x","cosh");return te.runKernelFunc(function(e,r){var a=e.cosh(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return a.toFloat().sinh().mulStrict(e)}}})}}),nU=Z({erf_:function(t){var n=q(t,"x","erf");return G(n.dtype==="int32"||n.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),n.dtype==="int32"&&(n=n.toFloat()),te.runKernelFunc(function(e,r){var a=e.erf(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.mul(a.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),Bg=Z({exp_:function(t){var n=q(t,"x","exp");return te.runKernelFunc(function(e,r){var a=e.exp(n);return r([a]),a},{x:n},function(e,r){return{x:function(){return e.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),rU=Z({expm1_:function(t){var n=q(t,"x","expm1");return te.runKernelFunc(function(e,r){var a=e.expm1(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.mul(a.exp())}}})}}),aU=Z({floor_:function(t){var n=q(t,"x","floor");return te.runKernelFunc(function(e){return e.floor(n)},{$x:n},function(e){return{$x:function(){return at(e)}}})}}),oU=Z({log_:function(t){var n=q(t,"x","log"),e=[n];return te.runKernelFunc(function(r,a){var o=r.log(n);return a([n]),o},{x:n},function(r,a){var o=a[0];return{x:function(){return r.div(o.toFloat())}}},"Log",{},e)}}),iU=Z({log1p_:function(t){var n=q(t,"x","log1p");return te.runKernelFunc(function(e,r){var a=e.log1p(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.div(a.add(1))}}})}}),sU=Z({logSigmoid_:function(t){var n=q(t,"x","logSigmoid");return te.runKernelFunc(function(e,r){var a=e.softplus(n.neg()).neg();return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.mul(a.neg().sigmoid())}}})}}),Ad=Z({neg_:function(t){var n=q(t,"x","neg"),e=[n];return te.runKernelFunc(function(r){return r.neg(n)},{x:n},function(r){return{x:function(){return r.neg()}}},"Neg",{},e)}}),uU=Z({reciprocal_:function(t){var n=q(t,"x","reciprocal");return te.runKernelFunc(function(e,r){var a=e.reciprocal(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.div(a.square().neg())}}})}}),lU=Z({round_:function(t){var n=q(t,"x","round");return te.runKernelFunc(function(e){return e.round(n)},{$x:n},function(e){return{$x:function(){return at(e)}}})}}),pR=Z({rsqrt_:function(t){var n=q(t,"x","rsqrt"),e=[n];return te.runKernelFunc(function(r,a){var o=r.rsqrt(n);return a([n]),o},{x:n},function(r,a){var o=a[0];return{x:function(){return r.div(o.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},e)}}),mR=Z({sigmoid_:function(t){var n=q(t,"x","sigmoid");return te.runKernelFunc(function(e,r){var a=e.sigmoid(n);return r([a]),a},{x:n},function(e,r){var a=r[0];return{x:function(){return e.mul(a.mul(_e(1).sub(a)))}}},"Sigmoid")}}),cU=Z({sign_:function(t){var n=q(t,"x","sign");return te.runKernelFunc(function(e){return e.sign(n)},{$x:n},function(e){return{$x:function(){return at(e)}}})}}),fU=Z({isNaN_:function(t){var n=q(t,"x","isNaN");return te.runKernelFunc(function(e){return e.isNaN(n)},{$x:n},function(e){return{$x:function(){return at(e)}}})}}),dU=Z({isInf_:function(t){var n=q(t,"x","isInf");return te.runKernelFunc(function(e){return e.isInf(n)},{$x:n},function(e){return{$x:function(){return at(e)}}})}}),hU=Z({isFinite_:function(t){var n=q(t,"x","isFinite");return te.runKernelFunc(function(e){return e.isFinite(n)},{$x:n},function(e){return{$x:function(){return at(e)}}})}}),pU=Z({sin_:function(t){var n=q(t,"x","sin"),e=[n];return te.runKernelFunc(function(r,a){var o=r.sin(n);return a([n]),o},{x:n},function(r,a){var o=a[0];return{x:function(){return o.toFloat().cos().mul(r)}}},"Sin",{},e)}}),mU=Z({sinh_:function(t){var n=q(t,"x","sinh");return te.runKernelFunc(function(e,r){var a=e.sinh(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return a.toFloat().cosh().mulStrict(e)}}})}}),vU=Z({softplus_:function(t){var n=q(t,"x","softplus");return te.runKernelFunc(function(e,r){var a=e.softplus(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.mul(a.sigmoid())}}})}}),gU=Z({sqrt_:function(t){var n=q(t,"x","sqrt");return te.runKernelFunc(function(e,r){var a=e.sqrt(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.div(a.toFloat().sqrt().mul(2))}}})}}),yU=Z({step_:function(t,n){n===void 0&&(n=0);var e=q(t,"x","step");return te.runKernelFunc(function(r){return r.step(e,n)},{$x:e},function(r){return{$x:function(){return at(r)}}})}}),bU=Z({tan_:function(t){var n=q(t,"x","tan");return te.runKernelFunc(function(e,r){var a=e.tan(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return e.div(a.cos().square())}}})}}),wU=Z({tanh_:function(t){var n=q(t,"x","tanh");return te.runKernelFunc(function(e,r){var a=e.tanh(n);return r([a]),a},{x:n},function(e,r){var a=r[0];return{x:function(){return _e(1).sub(a.square()).mulStrict(e)}}},"Tanh",{},null,[!0])}});function vR(t,n,e,r,a,o){var s,l,c=q(t,"x","batchNorm"),f=q(n,"mean","batchNorm"),h=q(e,"variance","batchNorm");return a!=null&&(s=q(a,"scale","batchNorm")),r!=null&&(l=q(r,"offset","batchNorm")),G(c.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),G(f.rank===2||f.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+f.rank+"."}),G(h.rank===2||h.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+h.rank+"."}),s!=null&&G(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+s.rank+"."}),l!=null&&G(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+l.rank+"."}),$l(c,f,h,l,s,o)}function gR(t,n,e,r,a,o){var s,l,c=q(t,"x","batchNorm"),f=q(n,"mean","batchNorm"),h=q(e,"variance","batchNorm");return a!=null&&(s=q(a,"scale","batchNorm")),r!=null&&(l=q(r,"offset","batchNorm")),G(c.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),G(f.rank===3||f.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+f.rank+"."}),G(h.rank===3||h.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+h.rank+"."}),s!=null&&G(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+s.rank+"."}),l!=null&&G(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+l.rank+"."}),$l(c,f,h,l,s,o)}function yR(t,n,e,r,a,o){var s,l,c=q(t,"x","batchNorm"),f=q(n,"mean","batchNorm"),h=q(e,"variance","batchNorm");return a!=null&&(s=q(a,"scale","batchNorm")),r!=null&&(l=q(r,"offset","batchNorm")),G(c.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+c.rank+"."}),G(f.rank===4||f.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+f.rank+"."}),G(h.rank===4||h.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+h.rank+"."}),s!=null&&G(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+s.rank+"."}),l!=null&&G(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+l.rank+"."}),$l(c,f,h,l,s,o)}function $l(t,n,e,r,a,o){o==null&&(o=.001);var s,l,c,f=q(t,"x","batchNorm"),h=q(n,"mean","batchNorm"),p=q(e,"variance","batchNorm");a!=null&&(s=q(a,"scale","batchNorm")),r!=null&&(l=q(r,"offset","batchNorm")),G(h.rank===p.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),G(l==null||h.rank===l.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),G(s==null||h.rank===s.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),c=f.rank===0||f.rank===1?f.as4D(1,1,1,f.size):f.rank===2?f.as4D(1,1,f.shape[0],f.shape[1]):f.rank===3?f.as4D(1,f.shape[0],f.shape[1],f.shape[2]):f;var v=[f,h,p,s];return te.runKernelFunc(function(g,y){var x=g.batchNormalization(c,Of(h),Of(p),o,Of(s),Of(l));return y([f,h,p,s]),x},{x:f,mean:h,variance:p,scale:s,offset:l},function(g,y){var x=y,S=x[0],w=x[1],T=x[2],A=x[3],C=A??_e(1),R=Kt(w.shape,c.shape),k=[];if(w.rank===1){for(var N=0;N<c.shape.length-1;++N)k.push(c.shape[N]);k.push(1)}var O=S.sub(w),D=g.mul(C),M=pR(T.add(_e(o))),P=M.mul(M).mul(M).mul(_e(-.5));return{x:function(){return w.rank===1?g.mul(Ts(M.as4D(1,1,1,w.shape[0]),k)).mul(C).reshape(S.shape):g.mul(M).mul(C).reshape(S.shape)},mean:function(){var F=M.mul(_e(-1)).mul(D);return w.rank===1&&(F=F.sum(R)),F.reshape(w.shape)},variance:function(){var F=P.mul(O).mul(D);return w.rank===1&&(F=F.sum(R)),F.reshape(w.shape)},scale:function(){var F=O.mul(M),U=g.mul(F);return w.rank===1&&(U=U.sum(R)),U.reshape(w.shape)},offset:function(){var F=g;return w.rank===1&&(F=F.sum(R)),F.reshape(w.shape)}}},"BatchNormalization",{varianceEpsilon:o},v).reshape(f.shape)}function Of(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function oh(){M_("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var xU=Z({batchNormalization2d_:function(t,n,e,r,a,o){return r===void 0&&(r=.001),oh(),vR(t,n,e,o,a,r)}}),SU=Z({batchNormalization3d_:function(t,n,e,r,a,o){return r===void 0&&(r=.001),oh(),gR(t,n,e,o,a,r)}}),EU=Z({batchNormalization4d_:function(t,n,e,r,a,o){return r===void 0&&(r=.001),oh(),yR(t,n,e,o,a,r)}}),CU=Z({batchNormalization_:function(t,n,e,r,a,o){return r===void 0&&(r=.001),oh(),$l(t,n,e,o,a,r)}}),bR=Z({batchNorm_:$l}),_U=Z({batchNorm2d_:vR}),RU=Z({batchNorm3d_:gR}),AU=Z({batchNorm4d_:yR}),ih=Z({logicalAnd_:function(t,n){var e=q(t,"a","logicalAnd","bool"),r=q(n,"b","logicalAnd","bool");return tt(e.shape,r.shape),te.runKernelFunc(function(a){return a.logicalAnd(e,r)},{a:e,b:r},null,"LogicalAnd")}}),TU=Z({logicalNot_:function(t){var n=q(t,"x","logicalNot","bool");return te.runKernelFunc(function(e){return e.logicalNot(n)},{$x:n})}}),wR=Z({logicalOr_:function(t,n){var e=q(t,"a","logicalOr","bool"),r=q(n,"b","logicalOr","bool");return tt(e.shape,r.shape),te.runKernelFunc(function(a){return a.logicalOr(e,r)},{$a:e,$b:r})}}),kU=Z({logicalXor_:function(t,n){var e=q(t,"a","logicalXor","bool"),r=q(n,"b","logicalXor","bool");return tt(e.shape,r.shape),wR(t,n).logicalAnd(ih(t,n).logicalNot())}}),yi=Z({where_:function(t,n,e){var r=q(n,"a","where"),a=q(e,"b","where"),o=q(t,"condition","where","bool");return dt(r.shape,a.shape,"Error in where: "),o.rank===1?G(o.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):dt(o.shape,a.shape,"Error in where: "),te.runKernelFunc(function(s,l){var c=s.select(o,r,a);return l([o]),c},{$condition:o,$a:r,$b:a},function(s,l){var c=l[0];return{$condition:function(){return at(c).toFloat()},$a:function(){return s.mul(c.cast(s.dtype))},$b:function(){return s.mul(c.logicalNot().cast(s.dtype))}}})}}),xR=function(t){return ke(this,void 0,void 0,function(){var n,e,r;return Ne(this,function(a){switch(a.label){case 0:return[4,(n=q(t,"condition","whereAsync","bool")).data()];case 1:return e=a.sent(),r=Ly(n.shape,e),t!==n&&n.dispose(),[2,r]}})})},Ze=Z({add_:function(t,n){var e,r=q(t,"a","add"),a=q(n,"b","add");e=kt(r,a),r=e[0],a=e[1];var o=tt(r.shape,a.shape);return te.runKernelFunc(function(s){return s.add(r,a)},{a:r,b:a},function(s){return{a:function(){var l=s,c=Kt(r.shape,o);return c.length>0&&(l=l.sum(c)),l.reshape(r.shape)},b:function(){var l=s,c=Kt(a.shape,o);return c.length>0&&(l=l.sum(c)),l.reshape(a.shape)}}},"Add")}}),NU=Z({addN_:function(t){G(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),G(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var n=t.map(function(a,o){return q(a,"tensors"+o,"addN")}),e=n[0];n.forEach(function(a){if(a.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),n.forEach(function(a){if(!an(a.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=n;return te.runKernelFunc(function(a){return a.addN(n)},r,function(a){var o={};return n.forEach(function(s,l){o[l]=function(){return a.clone()}}),o},"AddN")}}),DU=Z({addStrict_:function(t,n){var e=q(t,"a","addStrict"),r=q(n,"b","addStrict");return dt(e.shape,r.shape,"Error in addStrict: "),e.add(r)}}),OU=Z({atan2_:function(t,n){var e,r=q(t,"a","atan2"),a=q(n,"b","atan2");e=kt(r,a),r=e[0],a=e[1];var o=tt(r.shape,a.shape);return te.runKernelFunc(function(s,l){var c=s.atan2(r,a);return l([r,a]),c},{$a:r,$b:a},function(s,l){var c=l[0],f=l[1];return{$a:function(){var h=Ze(c.square(),f.square()),p=s.mul(f.div(h)),v=Kt(c.shape,o);return v.length>0&&(p=p.sum(v)),p.reshape(c.shape)},$b:function(){var h=Ze(c.square(),f.square()),p=Ad(s.mul(c.div(h))),v=Kt(f.shape,o);return v.length>0&&(p=p.sum(v)),p.reshape(f.shape)}}})}}),Ir=Z({div_:function(t,n){var e,r=q(t,"a","div"),a=q(n,"b","div");if(e=kt(r,a),r=e[0],a=e[1],r.dtype==="int32"&&a.dtype==="int32")return SR(r,a);var o=tt(r.shape,a.shape);return te.runKernelFunc(function(s,l){var c=s.realDivide(r,a);return l([r,a]),c},{a:r,b:a},function(s,l){var c=l[0],f=l[1];return{a:function(){var h=s.div(f.toFloat()),p=Kt(c.shape,o);return p.length>0?h.sum(p).reshape(c.shape):h},b:function(){var h=s.mul(c.toFloat()),p=Kt(f.shape,o);p.length>0&&(h=h.sum(p).reshape(f.shape));var v=f.square();return h.div(v.toFloat()).neg()}}},"Div")}}),MU=Z({divNoNan_:function(t,n){var e,r=q(t,"a","div"),a=q(n,"b","div");r=(e=kt(r,a))[0],a=e[1];var o=Ir(r,a),s=at(o),l=a.equal(s);return yi(l,s,o)}}),IU=Z({divStrict_:function(t,n){var e=q(t,"a","div"),r=q(n,"b","div");return dt(e.shape,r.shape,"Error in divideStrict: "),e.div(r)}}),SR=Z({floorDiv_:function(t,n){var e,r=q(t,"a","floorDiv"),a=q(n,"b","floorDiv");e=kt(r,a),r=e[0],a=e[1];var o=tt(r.shape,a.shape);return te.runKernelFunc(function(s,l){var c=s.floorDiv(r,a);return l([r,a]),c},{a:r,b:a},function(s,l){var c=l[0],f=l[1];return{a:function(){var h=s.div(f.toFloat()),p=Kt(c.shape,o);return p.length>0?h.sum(p).reshape(c.shape):h},b:function(){var h=s.mul(c.toFloat()),p=Kt(f.shape,o);p.length>0&&(h=h.sum(p).reshape(f.shape));var v=f.square();return h.div(v.toFloat()).neg()}}},"FloorDiv")}}),Hy=Z({maximum_:function(t,n){var e,r=q(t,"a","maximum"),a=q(n,"b","maximum");return e=kt(r,a),r=e[0],a=e[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),tt(r.shape,a.shape),te.runKernelFunc(function(o,s){var l=o.maximum(r,a);return s([r,a]),l},{a:r,b:a},function(o,s){var l=s[0],c=s[1];return{a:function(){return o.mul(l.greaterEqual(c).toFloat())},b:function(){return o.mul(l.less(c).toFloat())}}},"Maximum")}}),BU=Z({maximumStrict_:function(t,n){var e=q(t,"a","maximumStrict"),r=q(n,"b","maximumStrict");return dt(e.shape,r.shape,"Error in maximumStrict: "),e.maximum(r)}}),ER=Z({minimum_:function(t,n){var e,r=q(t,"a","minimum"),a=q(n,"b","minimum");return e=kt(r,a),r=e[0],a=e[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),tt(r.shape,a.shape),te.runKernelFunc(function(o,s){var l=o.minimum(r,a);return s([r,a]),l},{a:r,b:a},function(o,s){var l=s[0],c=s[1];return{a:function(){return o.mul(l.lessEqual(c).toFloat())},b:function(){return o.mul(l.greater(c).toFloat())}}},"Minimum")}}),FU=Z({minimumStrict_:function(t,n){var e=q(t,"a","minimumStrict"),r=q(n,"b","minimumStrict");return dt(e.shape,r.shape,"Error in minimumStrict: "),e.minimum(r)}}),PU=Z({mod_:function(t,n){var e,r=q(t,"a","mod"),a=q(n,"b","mod");e=kt(r,a),r=e[0],a=e[1];var o=tt(r.shape,a.shape);return te.runKernelFunc(function(s,l){var c=s.mod(r,a);return l([r,a]),c},{$a:r,$b:a},function(s,l){var c=l[0],f=l[1];return{$a:function(){var h=Kt(c.shape,o);return h.length>0?s.sum(h).reshape(c.shape):s},$b:function(){var h=s.mul(c.div(f).floor().neg()),p=Kt(f.shape,o);return p.length>0?h.sum(p).reshape(f.shape):h}}})}}),LU=Z({modStrict_:function(t,n){var e=q(t,"a","modStrict"),r=q(n,"b","modStrict");return dt(e.shape,r.shape,"Error in modStrict: "),e.mod(r)}}),Rn=Z({mul_:function(t,n){var e,r=q(t,"a","mul"),a=q(n,"b","mul");e=kt(r,a),r=e[0],a=e[1];var o=tt(r.shape,a.shape);return te.runKernelFunc(function(s,l){var c=s.multiply(r,a);return l([r,a]),c},{a:r,b:a},function(s,l){var c=l[0],f=l[1];return{a:function(){var h=s.mul(f.toFloat()),p=Kt(c.shape,o);return p.length>0?h.sum(p).reshape(c.shape):h},b:function(){var h=s.mul(c.toFloat()),p=Kt(f.shape,o);return p.length>0?h.sum(p).reshape(f.shape):h}}},"Mul")}}),jU=Z({mulStrict_:function(t,n){var e=q(t,"a","mul"),r=q(n,"b","mul");return dt(e.shape,r.shape,"Error in multiplyStrict: "),e.mul(r)}}),Td=Z({pow_:function(t,n){var e,r=q(t,"base","pow"),a=q(n,"exp","pow");e=kt(r,a),r=e[0],a=e[1];var o=tt(r.shape,a.shape),s=[r,a];return te.runKernelFunc(function(l,c){var f=l.pow(r,a);return c([r,a,f]),f},{a:r,b:a},function(l,c){var f=c[0],h=c[1],p=c[2];return{a:function(){var v=h.toFloat(),g=l.mul(v.mul(f.pow(v.sub(_e(1))))),y=Kt(f.shape,o);return y.length>0&&(g=g.sum(y)),g.reshape(f.shape)},b:function(){var v=f.greater(0),g=f.log().where(v,at(f)),y=l.mul(p.mul(g)),x=Kt(h.shape,o);return x.length>0&&(y=y.sum(x)),y.reshape(h.shape)}}},"Pow",{},s,[!0])}}),zU=Z({powStrict_:function(t,n){return dt(t.shape,n.shape,"Error in powStrict: "),t.pow(n)}}),UU=Z({squaredDifferenceStrict_:function(t,n){var e=q(t,"a","squaredDifferenceStrict"),r=q(n,"b","squaredDifferenceStrict");return dt(e.shape,r.shape,"Error in squaredDifferenceStrict: "),e.squaredDifference(r)}}),$t=Z({sub_:function(t,n){var e,r=q(t,"a","sub"),a=q(n,"b","sub");e=kt(r,a),r=e[0],a=e[1];var o=tt(r.shape,a.shape);return te.runKernelFunc(function(s){return s.subtract(r,a)},{a:r,b:a},function(s){return{a:function(){var l=s,c=Kt(r.shape,o);return c.length>0&&(l=l.sum(c)),l.reshape(r.shape)},b:function(){var l=s,c=Kt(a.shape,o);return c.length>0&&(l=l.sum(c)),l.neg().reshape(a.shape)}}},"Sub")}}),qU=Z({subStrict_:function(t,n){var e=q(t,"a","subStrict"),r=q(n,"b","subStrict");return dt(e.shape,r.shape,"Error in subStrict: "),e.sub(r)}}),CR=Z({equal_:function(t,n){var e,r=q(t,"a","equal"),a=q(n,"b","equal");return e=kt(r,a),r=e[0],a=e[1],tt(r.shape,a.shape),te.runKernelFunc(function(o){return o.equal(r,a)},{$a:r,$b:a})}}),HU=Z({equalStrict_:function(t,n){var e=q(t,"a","equalStrict"),r=q(n,"b","equalStrict");return dt(e.shape,r.shape,"Error in equalStrict: "),e.equal(r)}}),VU=Z({greater_:function(t,n){var e,r=q(t,"a","greater"),a=q(n,"b","greater");return e=kt(r,a),r=e[0],a=e[1],tt(r.shape,a.shape),te.runKernelFunc(function(o){return o.greater(r,a)},{a:r,b:a},null,"Greater")}}),_R=Z({greaterEqual_:function(t,n){var e,r=q(t,"a","greaterEqual"),a=q(n,"b","greaterEqual");return e=kt(r,a),r=e[0],a=e[1],tt(r.shape,a.shape),te.runKernelFunc(function(o,s){var l=o.greaterEqual(r,a);return s([r,a]),l},{a:r,b:a},function(o,s){var l=s[0],c=s[1];return{a:function(){return at(l)},b:function(){return at(c)}}},"GreaterEqual")}}),WU=Z({greaterEqualStrict_:function(t,n){var e=q(t,"a","greaterEqualStrict"),r=q(n,"b","greaterEqualStrict");return dt(e.shape,r.shape,"Error in greaterEqualStrict: "),e.greaterEqual(r)}}),GU=Z({greaterStrict_:function(t,n){var e=q(t,"a","greaterStrict"),r=q(n,"b","greaterStrict");return dt(e.shape,r.shape,"Error in greaterStrict: "),e.greater(r)}}),XU=Z({less_:function(t,n){var e,r=q(t,"a","less"),a=q(n,"b","less");return e=kt(r,a),r=e[0],a=e[1],tt(r.shape,a.shape),te.runKernelFunc(function(o){return o.less(r,a)},{a:r,b:a},null,"Less")}}),YU=Z({lessEqual_:function(t,n){var e,r=q(t,"a","lessEqual"),a=q(n,"b","lessEqual");return e=kt(r,a),r=e[0],a=e[1],tt(r.shape,a.shape),te.runKernelFunc(function(o,s){var l=o.lessEqual(r,a);return s([r,a]),l},{a:r,b:a},null,"LessEqual")}}),KU=Z({lessEqualStrict_:function(t,n){var e=q(t,"a","lessEqualStrict"),r=q(n,"b","lessEqualStrict");return dt(e.shape,r.shape,"Error in lessEqualStrict: "),e.lessEqual(r)}}),$U=Z({lessStrict_:function(t,n){var e=q(t,"a","lessStrict"),r=q(n,"b","lessStrict");return dt(e.shape,r.shape,"Error in lessStrict: "),e.less(r)}}),QU=Z({notEqual_:function(t,n){var e,r=q(t,"a","notEqual"),a=q(n,"b","notEqual");return e=kt(r,a),r=e[0],a=e[1],tt(r.shape,a.shape),te.runKernelFunc(function(o){return o.notEqual(r,a)},{a:r,b:a},null,"NotEqual")}}),ZU=Z({notEqualStrict_:function(t,n){var e=q(t,"a","notEqualStrict"),r=q(n,"b","notEqualStrict");return dt(e.shape,r.shape,"Error in notEqualStrict: "),e.notEqual(r)}});function IS(t,n){for(var e=[],r=t;r<n;++r)e.push(r);return e}function BS(t){for(var n=[],e=0;e<t.length;++e)for(var r=0;r<t[e].length;++r)n.push(t[e][r]);return n}var Vy=Z({gather_:function(t,n,e){e===void 0&&(e=0);var r=q(t,"x","gather"),a=q(n,"indices","gather","int32");e=Qt(e,r.shape)[0];var o=function(s,l,c){for(var f=s.shape[c],h=[],p=1,v=1,g=0;g<c;g++)h.push(s.shape[g]),p*=s.shape[g];for(g=0;g<l.rank;g++)h.push(l.shape[g]);for(g=c+1;g<s.rank;g++)h.push(s.shape[g]),v*=s.shape[g];return{batchSize:p,sliceSize:v,dimSize:f,outputShape:h}}(r,a,e);return te.runKernelFunc(function(s,l){var c=s.gather(r,a.flatten(),e);return l([a]),c},{x:r,indices:a},function(s,l){var c=l[0];return{x:function(){var f=r.shape,h=c.size,p=f.slice(0,e),v=p.length,g=f.slice(e,f.length).slice(1),y=g.length,x=IS(0,v),S=IS(v+1,v+1+y),w=BS([p,[h],g]),T=s.reshape(w),A=c.reshape([h]),C=BS([[v],x,S]),R=T.transpose(C),k=RR(R,A,r.shape[e]),N=Ny(C);return k=k.transpose(N)},indices:function(){return c}}},"Gather",{axis:e}).reshape(o.outputShape)}}),RR=Z({unsortedSegmentSum_:function(t,n,e){var r=q(t,"x","unsortedSegmentSum"),a=q(n,"segmentIds","unsortedSegmentSum","int32");return G(Ft(e),function(){return"numSegments must be of dtype int"}),te.runKernelFunc(function(o,s){var l=o.unsortedSegmentSum(r,a,e);return s([a]),l},{$x:r},function(o,s){var l=s[0];return{$x:function(){return function(c,f){for(var h=Hy(f,at(f)),p=Vy(c,h),v=_R(f,_e(0,"int32")),g=p.rank-v.rank,y=0;y<g;++y)v=Sr(v,y+1);v=ih(v,Qs(p.shape,"bool"));var x=at(p);return yi(v,p,x)}(o,l)}}})}}),JU=function(t,n,e){return ke(this,void 0,void 0,function(){var r,a,o,s,l,c,f,h,p,v,g,y,x;return Ne(this,function(S){switch(S.label){case 0:for(r=q(t,"tensor","boolMask"),a=q(n,"mask","boolMask","bool"),o=e??0,s=a.rank,l=r.shape,G(s>0,function(){return"mask cannot be scalar"}),dt(l.slice(o,o+s),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,f=o;f<o+s;f++)c*=l[f];return h=l.slice(0,o).concat([c],l.slice(o+s)),p=r.reshape(h),v=a.reshape([-1]),[4,xR(v)];case 1:return g=S.sent(),y=g.squeeze([1]),x=Vy(p,y,o),t!==r&&r.dispose(),n!==a&&a.dispose(),y.dispose(),p.dispose(),v.dispose(),g.dispose(),[2,x]}})})};function AR(t,n,e,r,a,o,s){o===void 0&&(o="NHWC"),G(t.length===n.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+n.rank+") must match"});var l=t,c=n,f=!1;n.rank===3&&(f=!0,c=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]),l=[1,t[0],t[1],t[2]]),G(l.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+l.length+"."}),G(c.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+c.rank}),G(e.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+e.rank});var h=o==="NHWC"?l[3]:l[1],p=o==="NHWC"?c.shape[3]:c.shape[1];G(h===e.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+h+") must match input depth for filter "+e.shape[2]+"."}),G(p===e.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+p+") must match output depth for filter "+e.shape[3]+"."}),s!=null&&G(Ft(a),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+a+"."});var v=By(o),g=Ri(l,e.shape,r,1,a,s,!1,v),y=te.runKernelFunc(function(x,S){var w=x.conv2dDerInput(c,e,g);return S([e,c]),w},{dy4D:c,filter:e},function(x,S){var w=S[0],T=S[1];return{dy4D:function(){return Rr(x,w,r,a,o,1,s)},filter:function(){return Wy(x,T,w.shape,r,a,o,s)}}});return f?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}function Hv(t){var n=function(o){return typeof o=="number"?[o,o,o]:o.length===2?[o[0],o[1],1]:o}(t),e=n[0],r=n[1],a=n[2];return e===1&&r===1&&a===1}function TR(t,n,e,r,a){G(t.length===n.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+n.rank+") must match"});var o=t,s=n,l=!1;n.rank===4&&(l=!0,s=n.as5D(1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]),o=[1,t[0],t[1],t[2],t[3]]);var c=o[4],f=s.shape[4];G(o.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."}),G(s.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+s.rank}),G(e.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+e.rank}),G(c===e.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+c+") must match input depth for filter "+e.shape[3]+"."}),G(f===e.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+f+") must match output depth for filter "+e.shape[4]+"."});var h=_d(o,e.shape,r,1,a),p=te.runKernelFunc(function(v){return v.conv3dDerInput(s,e,h)},{dy5D:s});return l?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}var e5=Z({conv1d_:function(t,n,e,r,a,o,s){a===void 0&&(a="NWC"),o===void 0&&(o=1);var l=q(t,"x","conv1d"),c=q(n,"filter","conv1d"),f=l,h=!1;l.rank===2&&(h=!0,f=l.as3D(1,l.shape[0],l.shape[1])),G(f.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+f.rank+"."}),G(c.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+c.rank+"."}),s!=null&&G(Ft(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."}),G(f.shape[2]===c.shape[1],function(){return"Error in conv1d: depth of input ("+f.shape[2]+") must match input depth for filter "+c.shape[1]+"."}),G(Gn(e,o),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+e+" and dilation '"+o+"'"}),G(a==="NWC",function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."});var p=c.as4D(1,c.shape[0],c.shape[1],c.shape[2]),v=f.as4D(f.shape[0],1,f.shape[1],f.shape[2]),g=Rr(v,p,[1,e],r,"NHWC",[1,o],s);return h?g.as2D(g.shape[2],g.shape[3]):g.as3D(g.shape[0],g.shape[2],g.shape[3])}}),Rr=Z({conv2d_:function(t,n,e,r,a,o,s){a===void 0&&(a="NHWC"),o===void 0&&(o=[1,1]);var l=q(t,"x","conv2d"),c=q(n,"filter","conv2d"),f=l,h=!1;l.rank===3&&(h=!0,f=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),G(f.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+f.rank+"."}),G(c.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+c.rank+"."}),s!=null&&G(Ft(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."});var p=a==="NHWC"?f.shape[3]:f.shape[1];G(p===c.shape[2],function(){return"Error in conv2d: depth of input ("+p+") must match input depth for filter "+c.shape[2]+"."}),G(Gn(e,o),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"});var v=By(a),g=Ri(f.shape,c.shape,e,o,r,s,!1,v),y=[c,f],x=te.runKernelFunc(function(S,w){var T=S.conv2d(f,c,g);return w([c,f]),T},{x:f,filter:c},function(S,w){var T=w,A=T[0],C=T[1];return G(qs(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}),{x:function(){return kR(C.shape,S,A,e,r,a)},filter:function(){return Wy(C,S,A.shape,e,r,a)}}},"Conv2D",g,y);return h?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),t5=Z({conv3d_:function(t,n,e,r,a,o){a===void 0&&(a="NDHWC"),o===void 0&&(o=[1,1,1]);var s=q(t,"x","conv3d"),l=q(n,"filter","conv3d"),c=s,f=!1;s.rank===4&&(f=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),G(c.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+c.rank+"."}),G(l.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+l.rank+"."}),G(c.shape[4]===l.shape[3],function(){return"Error in conv3d: depth of input ("+c.shape[4]+") must match input depth for filter "+l.shape[3]+"."}),G(function(v,g){return Hv(v)||Hv(g)}(e,o),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),G(a==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."});var h=_d(c.shape,l.shape,e,o,r),p=te.runKernelFunc(function(v,g){var y=v.conv3d(c,l,h);return g([c,l]),y},{x:c,$filter:l},function(v,g){G(Hv(o),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"});var y=g[0],x=g[1];return{x:function(){return TR(y.shape,v,x,e,r)},$filter:function(){return function(S,w,T,A,C){var R=S;S.rank===4&&(R=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3]));var k=w;k.rank===4&&(k=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3])),G(R.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+R.shape+"."}),G(k.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+k.shape+"."}),G(T.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+T+"."}),G(R.shape[4]===T[3],function(){return"Error in conv3dDerFilter: depth of input "+R.shape[4]+") must match input depth in filter ("+T[3]+"."}),G(k.shape[4]===T[4],function(){return"Error in conv3dDerFilter: depth of dy ("+k.shape[4]+") must match output depth for filter ("+T[4]+")."});var N=_d(R.shape,T,A,1,C);return te.runKernelFunc(function(O){return O.conv3dDerFilter(R,k,N)},{x5D:R,dy5D:k})}(y,v,x.shape,e,r)}}});return f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),Wy=Z({conv2dDerFilter_:function(t,n,e,r,a,o,s){o===void 0&&(o="NHWC");var l=t;t.rank===3&&(l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var c=n;c.rank===3&&(c=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),G(l.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+l.shape+"."}),G(c.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+c.shape+"."}),G(e.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+e+"."});var f=o==="NHWC"?l.shape[3]:l.shape[1],h=o==="NHWC"?c.shape[3]:c.shape[1];G(f===e[2],function(){return"Error in conv2dDerFilter: depth of input "+f+") must match input depth in filter ("+e[2]+"."}),G(h===e[3],function(){return"Error in conv2dDerFilter: depth of dy ("+h+") must match output depth for filter ("+e[3]+")."}),s!=null&&G(Ft(a),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+a+"."});var p=By(o),v=Ri(l.shape,e,r,1,a,s,!1,p);return te.runKernelFunc(function(g){return g.conv2dDerFilter(l,c,v)},{x4D:l,dy4D:c})}}),kR=Z({conv2dDerInput_:AR}),sh=Z({depthwiseConv2d_:function(t,n,e,r,a,o,s){o===void 0&&(o=[1,1]);var l=q(t,"x","depthwiseConv2d"),c=q(n,"filter","depthwiseConv2d"),f=l,h=!1;l.rank===3&&(h=!0,f=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),G(f.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+f.rank+"."}),G(c.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+c.rank+"."}),G(f.shape[3]===c.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+f.shape[3]+") must match the inChannels dimension in filter "+c.shape[2]+"."}),o==null&&(o=[1,1]),G(Gn(e,o),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),s!=null&&G(Ft(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."});var p=Ri(f.shape,c.shape,e,o,r,s,!0),v=[f,c],g=te.runKernelFunc(function(y,x){var S=y.depthwiseConv2D(f,c,p);return x([f,c]),S},{x:f,filter:c},function(y,x){G(qs(o),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"});var S=x[0],w=x[1];return{x:function(){return NR(S.shape,y,w,p)},filter:function(){return DR(S,y,w.shape,p)}}},"DepthwiseConv2dNative",p,v);return h?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),NR=Z({depthwiseConv2dDerInput_:function(t,n,e,r){var a=n,o=!1;n.rank===3&&(o=!0,a=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var s=te.runKernelFunc(function(l){return l.depthwiseConv2DDerInput(a,e,r)},{dy4D:a});return o?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),DR=Z({depthwiseConv2dDerFilter_:function(t,n,e,r){var a=t;t.rank===3&&(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=n;return o.rank===3&&(o=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),te.runKernelFunc(function(s){return s.depthwiseConv2DDerFilter(a,o,r)},{x4D:a,dy4D:o})}}),Gy=Z({separableConv2d_:function(t,n,e,r,a,o,s){o===void 0&&(o=[1,1]),s===void 0&&(s="NHWC");var l=q(t,"x","separableConv2d"),c=q(n,"depthwiseFilter","separableConv2d"),f=q(e,"pointwiseFilter","separableConv2d"),h=l,p=!1;if(l.rank===3&&(p=!0,h=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");G(h.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+h.rank+"."}),G(c.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+c.rank+"."}),G(f.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+c.rank+"."}),G(f.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+f.shape[0]+"."}),G(f.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+f.shape[1]+"."});var v=c.shape[2],g=c.shape[3];G(f.shape[2]===v*g,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+v*g+", but got "+f.shape[2]+"."});var y=sh(h,c,r,a,s,o),x=Rr(y,f,1,"valid",s);return p?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),n5=Z({conv2dTranspose_:function(t,n,e,r,a,o){return AR(e,q(t,"x","conv2dTranspose"),q(n,"filter","conv2dTranspose"),r,a,"NHWC",o)}}),r5=Z({conv3dTranspose_:function(t,n,e,r,a){return TR(e,q(t,"x","conv3dTranspose"),q(n,"filter","conv3dTranspose"),r,a)}}),uh=Z({matMul_:function(t,n,e,r){var a;e===void 0&&(e=!1),r===void 0&&(r=!1);var o=q(t,"a","matMul"),s=q(n,"b","matMul");a=kt(o,s),o=a[0],s=a[1];var l=e?o.shape[o.rank-2]:o.shape[o.rank-1],c=r?s.shape[s.rank-1]:s.shape[s.rank-2],f=e?o.shape[o.rank-1]:o.shape[o.rank-2],h=r?s.shape[s.rank-2]:s.shape[s.rank-1],p=o.shape.slice(0,-2),v=s.shape.slice(0,-2),g=De(p),y=De(v);G(o.rank>=2&&s.rank>=2&&o.rank===s.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+s.rank+"."}),G(an(p,v),function(){return"Error in matMul: outer dimensions ("+p+") and ("+v+") of Tensors with shapes "+o.shape+" and "+s.shape+" must match."}),G(l===c,function(){return"Error in matMul: inner shapes ("+l+") and ("+c+") of Tensors with shapes "+o.shape+" and "+s.shape+" and transposeA="+e+" and transposeB="+r+" must match."});var x=o.shape.slice(0,-2).concat([f,h]),S=e?o.as3D(g,l,f):o.as3D(g,f,l),w=r?s.as3D(y,h,c):s.as3D(y,c,h),T={transposeA:e,transposeB:r};return te.runKernelFunc(function(A,C){var R=A.batchMatMul(S,w,e,r);return C([S,w]),R},{a:S,b:w},function(A,C){var R=C,k=R[0],N=R[1];return e||r?!e&&r?{a:function(){return A.matMul(N,!1,!1)},b:function(){return A.matMul(k,!0,!1)}}:e&&!r?{a:function(){return N.matMul(A,!1,!0)},b:function(){return k.matMul(A,!1,!1)}}:{a:function(){return N.matMul(A,!0,!0)},b:function(){return A.matMul(k,!0,!0)}}:{a:function(){return A.matMul(N,!1,!0)},b:function(){return k.matMul(A,!0,!1)}}},"BatchMatMul",T).reshape(x)}}),a5=Z({dot_:function(t,n){var e=q(t,"t1","dot"),r=q(n,"t2","dot");G(!(e.rank!==1&&e.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+e.rank+" and "+r.rank+"."});var a=e.rank===1?e.size:e.shape[1],o=r.rank===1?r.size:r.shape[0];return G(a===o,function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+o+"."}),e.rank===1&&r.rank===1?e.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():e.rank===1&&r.rank===2?e.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():e.rank===2&&r.rank===1?e.matMul(r.as2D(-1,1)).as1D():e.matMul(r.as2D(r.shape[0],r.shape[1]))}}),o5=Z({outerProduct_:function(t,n){var e=q(t,"v1","outerProduct"),r=q(n,"v2","outerProduct");return G(e.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+e.rank+" and "+r.rank+"."}),e.as2D(-1,1).matMul(r.as2D(1,-1))}}),Ql=Z({reverse_:function(t,n){var e=q(t,"x","reverse");if(e.rank===0)return e.clone();var r=Qt(n,e.shape);return te.runKernelFunc(function(a){return a.reverse(e,r)},{$x:e},function(a){return{$x:function(){return a.reverse(r)}}}).reshapeAs(e)}}),i5=Z({reverse1d_:function(t){var n=q(t,"x","reverse");return G(n.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+n.rank+"."}),Ql(n,0)}}),s5=Z({reverse2d_:function(t,n){var e=q(t,"x","reverse");return G(e.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+e.rank+"."}),Ql(e,n)}}),u5=Z({reverse3d_:function(t,n){var e=q(t,"x","reverse");return G(e.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+e.rank+"."}),Ql(e,n)}}),l5=Z({reverse4d_:function(t,n){var e=q(t,"x","reverse");return G(e.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+e.rank+"."}),Ql(e,n)}});function OR(t,n,e,r,a,o){var s=q(t,"x","maxPool"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),G(l.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+l.rank+"."}),G(Gn(e,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"}),o!=null&&G(Ft(a),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var f=_l(l.shape,n,e,r,a,o);if(f.filterWidth===1&&f.filterHeight===1&&an(f.inShape,f.outShape))return s.clone();var h=[l],p=te.runKernelFunc(function(v,g){var y=v.maxPool(l,f);return g([l,y]),y},{x:l},function(v,g){var y=g[0],x=g[1];return{x:function(){return function(S,w,T,A,C,R,k,N){var O=q(S,"dy","maxPoolBackprop"),D=q(w,"input","maxPoolBackprop"),M=q(T,"output","maxPoolBackprop");G(D.rank===O.rank,function(){return"Rank of input ("+D.rank+") does not match rank of dy ("+O.rank+")"}),G(Gn(C,R),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+C+" and dilations '"+R+"'"}),G(O.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+O.rank+"."}),G(D.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+D.rank+"."});var P=_l(D.shape,A,C,R,k,N);return te.runKernelFunc(function(F){return F.maxPoolBackprop(O,D,M,P)},{$dy:O,$input:D})}(v,y,x,n,e,r,a)}}},"MaxPool",f,h);return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function MR(t,n,e,r,a,o){var s=q(t,"x","avgPool","float32");G(Gn(e,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"});var l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),G(l.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+l.rank+"."}),o!=null&&G(Ft(a),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var f=_l(l.shape,n,e,r,a,o);if(f.filterWidth===1&&f.filterHeight===1&&an(f.inShape,f.outShape))return s.clone();var h=te.runKernelFunc(function(p){return p.avgPool(l,f)},{x:l},function(p){return{x:function(){return function(v,g,y,x,S,w){var T=q(v,"dy","avgPoolBackprop"),A=q(g,"input","avgPoolBackprop");G(A.rank===T.rank,function(){return"Rank of input ("+A.rank+") does not match rank of dy ("+T.rank+")"}),G(Gn(x,S),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+x+" and dilations '"+S+"'"});var C=A,R=T,k=!1;A.rank===3&&(k=!0,C=A.as4D(1,A.shape[0],A.shape[1],A.shape[2]),R=T.as4D(1,T.shape[0],T.shape[1],T.shape[2])),G(R.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+R.rank+"."}),G(C.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+C.rank+"."});var N=_l(C.shape,y,x,S,w),O=te.runKernelFunc(function(D){return D.avgPoolBackprop(R,C,N)},{dy4D:R,input4D:C});return k?O.as3D(O.shape[1],O.shape[2],O.shape[3]):O}(p,l,n,e,r,a)}}},"AvgPool",f);return h=h.cast(s.dtype),c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}var rn=Z({maxPool_:function(t,n,e,r,a){return OR(t,n,e,1,r,a)}}),Zl=Z({avgPool_:function(t,n,e,r,a){return MR(t,n,e,1,r,a)}}),c5=Z({pool_:function(t,n,e,r,a,o){a==null&&(a=[1,1]),o==null&&(o=1),r===0&&(r="valid");var s=q(t,"x","maxPool"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),G(Gn(o,a),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+a+"'"});var f,h=_l(l.shape,n,o,a,r),p=[h.dilationHeight,h.dilationWidth];f=r==="same"?function(C,R){var k=C.map(function(D,M){return D+(D-1)*(R[M]-1)}).map(function(D){return D-1}),N=k.map(function(D){return Math.floor(D/2)}),O=k.map(function(D,M){return D-N[M]});return k.map(function(D,M){return[N[M],O[M]]})}([h.filterHeight,h.filterWidth],p):[[0,0],[0,0]];var v=p[0]===1&&p[1]===1,g=function(C,R,k){var N=k.map(function(W){return W[0]}),O=k.map(function(W){return W[1]}),D=C.concat(N,O),M=R.map(function(W,Y){return(W-D[Y]%W)%W}),P=O.map(function(W,Y){return W+M[Y]}),F=R.map(function(W,Y){return[N[Y],P[Y]]}),U=R.map(function(W,Y){return[0,M[Y]]});return[F,U]}([h.inHeight,h.inWidth],p,f),y=g[0],x=g[1],S=v?r:"valid",w=v?l:j_(l,p,y),T=(e==="avg"?function(){return MR(w,n,o,1,S)}:function(){return OR(w,n,o,1,S)})(),A=v?T:F_(T,p,x);return c?A.as3D(A.shape[1],A.shape[2],A.shape[3]):A}}),f5=Z({maxPool3d_:function(t,n,e,r,a,o,s){o===void 0&&(o="NDHWC");var l=q(t,"x","maxPool3d"),c=l,f=!1;l.rank===4&&(f=!0,c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),s==null&&(s=[1,1,1]),G(c.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+c.rank+"."}),G(o==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),G(Gn(e,s),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+s+"'"}),a!=null&&G(Ft(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var h=Cd(c.shape,n,e,s,r,a,o),p=te.runKernelFunc(function(v,g){var y=v.maxPool3d(c,h);return g([c,y]),y},{x:c},function(v,g){var y=g[0],x=g[1];return{x:function(){return function(S,w,T,A,C,R,k,N){var O=q(S,"dy","maxPool3dBackprop"),D=q(w,"input","maxPool3dBackprop"),M=q(T,"output","maxPool3dBackprop"),P=O,F=D,U=M,W=!1;D.rank===4&&(W=!0,P=O.as5D(1,O.shape[0],O.shape[1],O.shape[2],O.shape[3]),F=D.as5D(1,D.shape[0],D.shape[1],D.shape[2],D.shape[3]),U=M.as5D(1,M.shape[0],M.shape[1],M.shape[2],M.shape[3])),G(P.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+P.rank+"."}),G(F.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+F.rank+"."}),G(U.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+U.rank+"."}),R==null&&(R=[1,1,1]),G(Gn(C,R),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+C+" and dilations '"+R+"'"}),N!=null&&G(Ft(k),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+N+" but got pad "+k+"."});var Y=Cd(F.shape,A,C,R,k,N),z=te.runKernelFunc(function(X){return X.maxPool3dBackprop(P,F,U,Y)},{dy5D:P,input5D:F});return W?z.as4D(z.shape[1],z.shape[2],z.shape[3],z.shape[4]):z}(v,y,x,n,e,s,r,a)}}});return f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),d5=Z({avgPool3d_:function(t,n,e,r,a,o,s){o===void 0&&(o="NDHWC");var l=q(t,"x","avgPool3d","float32"),c=l,f=!1;l.rank===4&&(f=!0,c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),s==null&&(s=[1,1,1]),G(c.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+c.rank+"."}),G(o==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),G(Gn(e,s),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+s+"'"}),a!=null&&G(Ft(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var h=Cd(c.shape,n,e,s,r,a,o),p=te.runKernelFunc(function(v){return v.avgPool3d(c,h)},{x:c},function(v){return{x:function(){return function(g,y,x,S,w,T,A){var C=q(g,"dy","avgPool3dBackprop"),R=q(y,"input","avgPool3dBackprop"),k=C,N=R,O=!1;R.rank===4&&(O=!0,k=C.as5D(1,C.shape[0],C.shape[1],C.shape[2],C.shape[3]),N=R.as5D(1,R.shape[0],R.shape[1],R.shape[2],R.shape[3])),G(k.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+k.rank+"."}),G(N.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+N.rank+"."}),w==null&&(w=[1,1,1]),G(Gn(S,w),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+S+" and dilations '"+w+"'"}),A!=null&&G(Ft(T),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+A+" but got pad "+T+"."});var D=Cd(N.shape,x,S,w,T,A),M=te.runKernelFunc(function(P){return P.avgPool3dBackprop(k,N,D)},{dy5D:k,input5D:N});return O?M.as4D(M.shape[1],M.shape[2],M.shape[3],M.shape[4]):M}(v,c,n,e,s,r,a)}}});return p=p.cast(c.dtype),f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),ua=Z({slice_:function(t,n,e){var r,a,o=q(t,"x","slice");if(o.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof n=="number"?[n].concat(new Array(o.rank-1).fill(0)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(0)):n.slice()).forEach(function(c){G(c!==-1,function(){return"slice() does not support negative begin indexing."})}),a=(a=e==null?new Array(o.rank).fill(-1):typeof e=="number"?[e].concat(new Array(o.rank-1).fill(-1)):e.length<o.rank?e.concat(new Array(o.rank-e.length).fill(-1)):e).map(function(c,f){return c>=0?c:(G(c===-1,function(){return"Negative size values should be exactly -1 but got "+c+" for the slice() size at index "+f+"."}),o.shape[f]-r[f])}),zL(o,r,a);var s=o.shape,l={begin:r,size:a};return te.runKernelFunc(function(c){return c.slice(o,r,a)},{x:o},function(c){for(var f=[],h=0;h<c.rank;h++)f.push([r[h],s[h]-r[h]-a[h]]);return{x:function(){return c.pad(f)}}},"Slice",l)}}),h5=Z({slice1d_:function(t,n,e){var r=q(t,"x","slice1d");return G(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),ua(r,[n],[e])}}),p5=Z({slice2d_:function(t,n,e){var r=q(t,"x","slice2d");return G(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),ua(r,n,e)}}),IR=Z({slice3d_:function(t,n,e){var r=q(t,"x","slice3d");return G(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),ua(r,n,e)}}),m5=Z({slice4d_:function(t,n,e){var r=q(t,"x","slice4d");return G(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),ua(r,n,e)}});function BR(t,n,e,r,a){return n.rank<e.rank&&(n=n.reshape(Wn(n.shape,r))),t.rank<e.rank&&(t=t.reshape(Wn(t.shape,r))),{x:function(){var o=t.mul(e.equal(n).cast(t.dtype));return a==null?o:o.transpose(a)}}}var v5=Z({all_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=q(t,"x","all","bool"),a=Qt(n,r.shape),o=a,s=fa(o,r.rank);s!=null&&(r=r.transpose(s),o=da(o.length,r.rank));var l=te.runKernelFunc(function(f){return f.all(r,o)},{$x:r});if(e){var c=Wn(l.shape,a);return l.reshape(c)}return l}}),g5=Z({any_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=q(t,"x","any","bool"),a=Qt(n,r.shape),o=a,s=fa(o,r.rank);s!=null&&(r=r.transpose(s),o=da(o.length,r.rank));var l=te.runKernelFunc(function(f){return f.any(r,o)},{$x:r});if(e){var c=Wn(l.shape,a);return l.reshape(c)}return l}}),y5=Z({argMax_:function(t,n){n===void 0&&(n=0);var e=q(t,"x","argMax");n==null&&(n=0);var r=Qt(n,e.shape),a=fa(r,e.rank);a!=null&&(e=e.transpose(a),r=da(r.length,e.rank));var o={axis:r[0]},s=[e];return te.runKernelFunc(function(l,c){var f=l.argMax(e,r[0]);return c([e]),f},{x:e},function(l,c){var f=c[0];return{x:function(){return at(f)}}},"ArgMax",o,s)}}),b5=Z({argMin_:function(t,n){n===void 0&&(n=0);var e=q(t,"x","argMin");n==null&&(n=0);var r=Qt(n,e.shape),a=fa(r,e.rank);return a!=null&&(e=e.transpose(a),r=da(r.length,e.rank)),te.runKernelFunc(function(o,s){var l=o.argMin(e,r[0]);return s([e]),l},{$x:e},function(o,s){var l=s[0];return{$x:function(){return at(l)}}})}}),w5=Z({logSumExp_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=q(t,"x","logSumExp"),a=Qt(n,r.shape),o=r.max(a,!0),s=r.sub(o).exp().sum(a).log(),l=o.reshape(s.shape).add(s);if(e){var c=Wn(l.shape,a);return l.reshape(c)}return l}}),lh=Z({max_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=q(t,"x","max"),a=r,o=Qt(n,r.shape),s=o,l=fa(s,r.rank);l!=null&&(r=r.transpose(l),s=da(s.length,r.rank));var c=[r],f=te.runKernelFunc(function(p,v){var g=p.max(r,s);return v([a,g]),g},{x:r},function(p,v){return BR(p,v[1],v[0],o,l)},"Max",{axes:s},c,[!0]);if(e){var h=Wn(f.shape,o);f=f.reshape(h)}return f}}),x5=Z({mean_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=q(t,"x","mean"),a=Qt(n,r.shape),o=De(xn(r.shape,a)[1]);return ah(function(s){var l=_e(o);return{value:(l.dtype===s.dtype?s:s.cast(l.dtype)).div(l).sum(n,e),gradFunc:function(c){var f=s.shape.slice();return a.forEach(function(h){f[h]=1}),c.reshape(f).mul(Qs(s.shape,"float32")).div(o)}}})(r)}}),S5=Z({min_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=q(t,"x","min"),a=r,o=Qt(n,r.shape),s=o,l=fa(s,r.rank);l!=null&&(r=r.transpose(l),s=da(s.length,r.rank));var c=[r],f=te.runKernelFunc(function(p,v){var g=p.min(r,s);return v([a,g]),g},{x:r},function(p,v){return BR(p,v[1],v[0],o,l)},"Min",{axes:s},c,[!0]);if(e){var h=Wn(f.shape,o);f=f.reshape(h)}return f}}),E5=Z({moments_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=Qt(n,(t=q(t,"x","moments")).shape),a=t.mean(r,e),o=a.shape;e||(o=Wn(a.shape,r));var s=t.toFloat().sub(a.reshape(o)).square();return{mean:a,variance:s.mean(r,e)}}}),FR=Z({sum_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=q(t,"x","sum");r.dtype==="bool"&&(r=r.toInt());var a=Qt(n,r.shape);return ah(function(o){var s=fa(a,o.rank),l=a,c=o;s!=null&&(c=o.transpose(s),l=da(l.length,o.rank));var f=function(g){var y=o.shape.slice();return a.forEach(function(x){y[x]=1}),g.reshape(y).mul(Qs(o.shape,"float32"))},h={axes:l},p=te.runKernelFunc(function(g){return g.sum(c,l)},{x:c},function(g){return{x:function(){return f(g)}}},"Sum",h);if(e){var v=Wn(p.shape,a);p=p.reshape(v)}return{value:p,gradFunc:f}})(r)}}),C5=Z({prod_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=q(t,"x","prod");r.dtype==="bool"&&(r=r.toInt());var a=Qt(n,r.shape),o=fa(a,r.rank),s=a,l=r;o!=null&&(l=r.transpose(o),s=da(s.length,r.rank));var c=te.runKernelFunc(function(h){return h.prod(l,s)},{permutedX:l});if(e){var f=Wn(c.shape,a);c=c.reshape(f)}return c}}),PR=Z({elu_:function(t){var n=q(t,"x","elu");return te.runKernelFunc(function(e,r){var a=e.elu(n);return r([a]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){return te.runKernelFunc(function(o){return o.eluDer(e,a)},{dy:e,y:a})}}})}}),_5=Z({leakyRelu_:function(t,n){n===void 0&&(n=.2);var e=q(t,"x","leakyRelu");return Hy(_e(n).mul(e),e)}}),LR=Z({prelu_:function(t,n){var e=q(t,"x","prelu"),r=q(n,"alpha","prelu");return te.runKernelFunc(function(a,o){var s=a.prelu(e,r);return o([e,r]),s},{x:e,alpha:r},function(a,o){var s=o[0],l=o[1],c=s.greater(0);return{x:function(){return yi(c,a,a.mul(l))},alpha:function(){var f=yi(c,at(a),a.mul(s)),h=Kt(l.shape,a.shape);return h.length>0&&(f=f.sum(h)),f.reshape(l.shape)}}},"Prelu")}}),At=Z({relu_:function(t){var n=q(t,"x","relu");return n.dtype==="bool"?n.toInt():te.runKernelFunc(function(e,r){var a=e.relu(n);return r([n]),a},{x:n},function(e,r){var a=r[0];return{x:function(){return e.mulStrict(a.step().toFloat())}}},"Relu")}}),jR=Z({relu6_:function(t){var n=q(t,"x","relu6");return n.dtype==="bool"?n.toInt():te.runKernelFunc(function(e,r){var a=e.relu6(n);return r([n]),a},{x:n},function(e,r){var a=r[0],o=a.lessEqual(6).mul(a.step());return{x:function(){return e.mulStrict(o.toFloat())}}},"Relu6")}}),R5=Z({selu_:function(t){var n=q(t,"x","selu");return te.runKernelFunc(function(e,r){var a=e.selu(n);return r([n]),a},{$x:n},function(e,r){var a=r[0];return{$x:function(){var o=a.greater(_e(0)),s=_e(zy),l=_e(Uy),c=e.mul(l),f=e.mul(s).mul(a.toFloat().exp());return yi(o,c,f)}}})}}),No=Z({transpose_:function(t,n){var e=q(t,"x","transpose");if(n==null&&(n=e.shape.map(function(a,o){return o}).reverse()),G(e.rank===n.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of perm "+n+"."}),n.forEach(function(a){G(a>=0&&a<e.rank,function(){return"All entries in 'perm' must be between 0 and "+(e.rank-1)+" but got "+n})}),e.rank<=1)return e.clone();var r={perm:n};return te.runKernelFunc(function(a){return a.transpose(e,n)},{x:e},function(a){var o=Ny(n);return{x:function(){return a.transpose(o)}}},"Transpose",r)}}),A5=Z({localResponseNormalization_:function(t,n,e,r,a){n===void 0&&(n=5),e===void 0&&(e=1),r===void 0&&(r=1),a===void 0&&(a=.5);var o=q(t,"x","localResponseNormalization");G(o.rank===4||o.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+o.rank+"."}),G(Ft(n),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+n+"."});var s=o,l=!1;o.rank===3&&(l=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var c=te.runKernelFunc(function(f,h){var p=f.localResponseNormalization4D(s,n,e,r,a);return h([s,p]),p},{x4D:s},function(f,h){var p=h[0],v=h[1];return{x4D:function(){return te.runKernelFunc(function(g){return g.LRNGrad(f,p,v,n,e,r,a)},{})}}});return l?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),zR=Z({norm_:function(t,n,e,r){n===void 0&&(n="euclidean"),e===void 0&&(e=null),r===void 0&&(r=!1);var a=function l(c,f,h){if(h===void 0&&(h=null),c.rank===0)return c.abs();if(c.rank!==1&&h===null)return l(c.reshape([-1]),f,h);if(c.rank===1||typeof h=="number"||Array.isArray(h)&&h.length===1){if(f===1)return c.abs().sum(h);if(f===1/0)return c.abs().max(h);if(f===-1/0)return c.abs().min(h);if(f==="euclidean"||f===2)return c.abs().pow(_e(2,"int32")).sum(h).sqrt();throw new Error("Error in norm: invalid ord value: "+f)}if(Array.isArray(h)&&h.length===2){if(f===1)return c.abs().sum(h[0]).max(h[1]-1);if(f===1/0)return c.abs().sum(h[1]).max(h[0]);if(f===-1/0)return c.abs().sum(h[1]).min(h[0]);if(f==="fro"||f==="euclidean")return c.square().sum(h).sqrt();throw new Error("Error in norm: invalid ord value: "+f)}throw new Error("Error in norm: invalid axis: "+h)}(t=q(t,"x","norm"),n,e),o=a.shape;if(r){var s=Qt(e,t.shape);o=Wn(a.shape,s)}return a.reshape(o)}}),T5=Z({basicLSTMCell_:function(t,n,e,r,a,o){var s=q(t,"forgetBias","basicLSTMCell"),l=q(n,"lstmKernel","basicLSTMCell"),c=q(e,"lstmBias","basicLSTMCell"),f=q(r,"data","basicLSTMCell"),h=q(a,"c","basicLSTMCell"),p=q(o,"h","basicLSTMCell"),v=f.concat(p,1).matMul(l).add(c),g=v.shape[0],y=v.shape[1]/4,x=[g,y],S=v.slice([0,0],x),w=v.slice([0,y],x),T=v.slice([0,2*y],x),A=v.slice([0,3*y],x),C=S.sigmoid().mulStrict(w.tanh()).addStrict(h.mulStrict(s.add(T).sigmoid())),R=C.tanh().mulStrict(A.sigmoid());return[C,R]}}),k5=Z({multiRNNCell_:function(t,n,e,r){for(var a=q(n,"data","multiRNNCell"),o=yd(e,"c","multiRNNCell"),s=yd(r,"h","multiRNNCell"),l=a,c=[],f=0;f<t.length;f++){var h=t[f](l,o[f],s[f]);c.push(h[0]),c.push(h[1]),l=h[1]}var p=[],v=[];for(f=0;f<c.length;f+=2)p.push(c[f]),v.push(c[f+1]);return[p,v]}}),N5=Z({movingAverage_:function(t,n,e,r,a){a===void 0&&(a=!0);var o=q(t,"v","movingAverage"),s=q(n,"x","movingAverage"),l=q(e,"decay","movingAverage");AP(o,s),G(an(o.shape,s.shape),function(){return"Shape mismatch in v and x"});var c=_e(1),f=c.sub(l),h=s.sub(o).mul(f);if(a){G(r!=null,function(){return"When using zeroDebias: true, step is required."});var p=q(r,"step","movingAverage");h=h.div(c.sub(Td(l,p)))}return o.add(h)}}),D5=Z({stridedSlice_:function(t,n,e,r,a,o,s,l,c){if(a===void 0&&(a=0),o===void 0&&(o=0),s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=0),r==null&&(r=new Array(n.length)),s!==0)throw new Error("ellipsis mask is not yet supported");var f=q(t,"x","stridedSlice"),h=pS(l),p=f.shape.slice();h.forEach(function(S){n[S]=0,e[S]=1,p.splice(S,0,1)}),f=f.reshape(p);for(var v=0;v<f.rank;v++)n[v]=UL(a,n,r,f.shape,v),e[v]=qL(o,e,r,f.shape,v),r[v]=r[v]||1;var g=pS(c);g.forEach(function(S){e[S]=n[S]+1,r[S]=1});var y=Iy(n,e,r),x=y.filter(function(S,w){return g.indexOf(w)===-1});return r.every(function(S){return S===1})?ua(f,n,y).reshape(x):te.runKernelFunc(function(S){return S.stridedSlice(f,n,e,r)},{$x:f}).reshape(x)}}),O5=Z({topk_:function(t,n,e){n===void 0&&(n=1),e===void 0&&(e=!0);var r=q(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(n>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+n);var o=te.runKernelFunc(function(s){return s.topk(r,n,e)},{$x:r});return{values:o[0],indices:o[1]}}}),M5=Z({scatterND_:function(t,n,e){var r=q(t,"indices","scatterND","int32"),a=q(n,"updates","scatterND");return jL(a,r,e),te.runKernelFunc(function(o){return o.scatterND(r,a,e)},{indices:r,updates:a},null,"ScatterNd",{shape:e})}}),Xy=Z({fft_:function(t){G(t.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var n=t.shape[t.shape.length-1],e=t.size/n,r=t.as2D(e,n);return te.runKernelFunc(function(a){return a.fft(r)},{input:t}).reshape(t.shape)}}),kd=Z({ifft_:function(t){G(t.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var n=t.shape[t.shape.length-1],e=t.size/n,r=t.as2D(e,n);return te.runKernelFunc(function(a){return a.ifft(r)},{input:t}).reshape(t.shape)}}),Yy=Z({rfft_:function(t,n){G(t.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+t.dtype});var e,r=t.shape[t.shape.length-1],a=t.size/r;if(n!=null&&n<r){var o=t.shape.map(function(w){return 0}),s=t.shape.map(function(w){return w});s[t.shape.length-1]=n,e=t.slice(o,s),r=n}else if(n!=null&&n>r){var l=t.shape.map(function(w){return w});l[t.shape.length-1]=n-r,e=t.concat(St(l),t.shape.length-1),r=n}else e=t;var c=e.zerosLike(),f=pn(e,c).as2D(a,r),h=Xy(f),p=Math.floor(r/2)+1,v=Er(h),g=ta(h),y=v.split([p,r-p],v.shape.length-1),x=g.split([p,r-p],g.shape.length-1),S=e.shape.slice();return S[e.shape.length-1]=p,pn(y[0],x[0]).reshape(S)}}),UR=Z({irfft_:function(t){var n=t.shape[t.shape.length-1],e=t.size/n;if(n<=2){var r=t.as2D(e,n),a=kd(r);return Er(a)}var o=[e,2*(n-1)],s=Er(t).as2D(e,n),l=ta(t).as2D(e,n),c=s.slice([0,1],[e,n-2]).reverse(1),f=l.slice([0,1],[e,n-2]).reverse(1).mul(_e(-1)),h=s.concat(c,1),p=l.concat(f,1);return r=pn(h,p).as2D(o[0],o[1]),a=kd(r),Er(a)}}),I5=Object.freeze({fft:Xy,ifft:kd,rfft:Yy,irfft:UR}),B5=Z({sparseToDense_:function(t,n,e,r){r===void 0&&(r=0);var a=q(t,"sparseIndices","sparseToDense","int32"),o=q(n,"sparseValues","sparseToDense"),s=q(r,"defaultValue","sparseToDense",o.dtype);return function(l,c,f,h){if(l.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+l.dtype+".");if(l.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+l.shape+".");var p=l.rank>0?l.shape[0]:1,v=l.rank>1?l.shape[1]:1;if(f.length!==v)throw new Error("outputShape has incorrect number of elements:, "+f.length+", should be: "+v+".");var g=c.size;if(c.rank!==0&&(c.rank!==1||g!==p))throw new Error("sparseValues has incorrect shape "+c.shape+", should be [] or ["+p+"]");if(c.dtype!==h.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,o,e,s),te.runKernelFunc(function(l){return l.sparseToDense(a,o,e,s)},{$sparseIndices:a,$sparseValues:o,$defaultValue:s})}}),F5=Z({gatherND_:function(t,n){var e=q(n,"indices","gatherND","int32"),r=q(t,"x","gatherND");return te.runKernelFunc(function(a){return a.gatherND(r,e)},{x:r,indices:e},null,"GatherNd")}}),P5=Z({diag_:function(t){var n=q(t,"x","diag").flatten(),e=t.shape.concat(t.shape);return te.runKernelFunc(function(r){return r.diag(n)},{$x:n}).reshape(e)}}),L5=Z({dropout_:function(t,n,e,r){var a=q(t,"x","dropout");if(G(a.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+a.dtype+" tensor instead."}),G(n>=0&&n<1,function(){return"rate must be a float in the range [0, 1), but got "+n+"."}),n===0)return t instanceof Rt?a.clone():a;var o=function(c,f){if(f==null)return c.shape.slice();if(an(c.shape,f))return f;if(c.shape.length===f.length){for(var h=[],p=0;p<c.shape.length;p++)f[p]==null&&c.shape[p]!=null?h.push(c.shape[p]):h.push(f[p]);return h}return f}(a,e),s=1-n,l=L_(o,0,1,"float32",r).add(s).floor().div(s);return a.mul(l)}});function qR(t,n,e){for(var r=1-t%2,a=new Float32Array(t),o=0;o<t;++o){var s=2*Math.PI*o/(t+r-1);a[o]=n-e*Math.cos(s)}return qt(a,"float32")}var Ky=Z({hannWindow_:function(t){return qR(t,.5,.5)}}),HR=Z({hammingWindow_:function(t){return qR(t,.54,.46)}}),$y=Z({frame_:function(t,n,e,r,a){r===void 0&&(r=!1),a===void 0&&(a=0);for(var o=0,s=[];o+n<=t.size;)s.push(ua(t,o,n)),o+=e;if(r)for(;o<t.size;){var l=o+n-t.size,c=Xt([ua(t,o,n-l),oa([l],a)]);s.push(c),o+=e}return s.length===0?Co([],[0,n]):Xt(s).as2D(s.length,n)}}),VR=Z({stft_:function(t,n,e,r,a){var o;a===void 0&&(a=Ky),r==null&&(o=n,r=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var s=$y(t,n,e),l=Rn(s,a(n)),c=[],f=0;f<s.shape[0];f++)c.push(Yy(l.slice([f,0],[1,n]),r));return Xt(c)}}),j5=Object.freeze({hannWindow:Ky,hammingWindow:HR,frame:$y,stft:VR}),_n,z5=function(t,n,e){return e===void 0&&(e=1),ke(this,void 0,void 0,function(){var r,a,o,s,l,c,f,h,p,v,g,y,x,S;return Ne(this,function(w){switch(w.label){case 0:return r=q(t,"predictions","inTopK"),a=q(n,"targets","inTopK"),G(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),G(r.rank-1===a.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+a.rank}),dt(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],G(e>0&&e<=o,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+e}),[4,r.data()];case 1:return s=w.sent(),[4,a.data()];case 2:for(l=w.sent(),c=[s.length/o,o],h=c[1],p=Sl("bool",f=c[0]),v=0;v<f;v++){for(g=v*h,y=s.subarray(g,g+h),x=[],S=0;S<y.length;S++)x.push({value:y[S],index:S});for(x.sort(function(T,A){return A.value-T.value}),p[v]=0,S=0;S<e;S++)if(x[S].index===l[v]){p[v]=1;break}}return t!==r&&r.dispose(),n!==a&&a.dispose(),[2,vn(p,a.shape,"bool")]}})})};(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(_n||(_n={}));var U5=Z({absoluteDifference_:function(t,n,e,r){r===void 0&&(r=_n.SUM_BY_NONZERO_WEIGHTS);var a=q(t,"labels","absoluteDifference"),o=q(n,"predictions","absoluteDifference"),s=null;e!=null&&(s=q(e,"weights","absoluteDifference")),dt(a.shape,o.shape,"Error in absoluteDifference: ");var l=a.sub(o).abs();return Ua(l,s,r)}}),Ua=Z({computeWeightedLoss_:function(t,n,e){e===void 0&&(e=_n.SUM_BY_NONZERO_WEIGHTS);var r=q(t,"losses","computeWeightedLoss"),a=null;n!=null&&(a=q(n,"weights","computeWeightedLoss"));var o=a==null?r:r.mul(a);if(e===_n.NONE)return o;if(e===_n.SUM)return o.sum();if(e===_n.MEAN){if(a==null)return o.mean();var s=r.size/a.size,l=o.sum().div(a.sum());return s>1?l.div(_e(s)):l}if(e===_n.SUM_BY_NONZERO_WEIGHTS){if(a==null)return o.sum().div(_e(r.size));var c=a.mul(Qs(r.shape)).notEqual(_e(0)).sum().toFloat();return o.sum().div(c)}throw Error("Unknown reduction: "+e)}}),q5=Z({cosineDistance_:function(t,n,e,r,a){a===void 0&&(a=_n.SUM_BY_NONZERO_WEIGHTS);var o=q(t,"labels","cosineDistance"),s=q(n,"predictions","cosineDistance"),l=null;r!=null&&(l=q(r,"weights","cosineDistance")),dt(o.shape,s.shape,"Error in cosineDistance: ");var c=_e(1).sub(o.mul(s).sum(e,!0));return Ua(c,l,a)}}),H5=Z({hingeLoss_:function(t,n,e,r){r===void 0&&(r=_n.SUM_BY_NONZERO_WEIGHTS);var a=q(t,"labels","hingeLoss"),o=q(n,"predictions","hingeLoss"),s=null;e!=null&&(s=q(e,"weights","hingeLoss")),dt(a.shape,o.shape,"Error in hingeLoss: ");var l=_e(1);a=_e(2).mul(a).sub(l);var c=l.sub(a.mul(o)).relu();return Ua(c,s,r)}}),V5=Z({huberLoss_:function(t,n,e,r,a){r===void 0&&(r=1),a===void 0&&(a=_n.SUM_BY_NONZERO_WEIGHTS);var o=q(t,"labels","huberLoss"),s=q(n,"predictions","huberLoss"),l=null;e!=null&&(l=q(e,"weights","huberLoss")),dt(o.shape,s.shape,"Error in huberLoss: ");var c=_e(r),f=s.sub(o).abs(),h=ER(f,c),p=f.sub(h),v=_e(.5).mul(h.square()).add(c.mul(p));return Ua(v,l,a)}}),W5=Z({logLoss_:function(t,n,e,r,a){r===void 0&&(r=1e-7),a===void 0&&(a=_n.SUM_BY_NONZERO_WEIGHTS);var o=q(t,"labels","logLoss"),s=q(n,"predictions","logLoss"),l=null;e!=null&&(l=q(e,"weights","logLoss")),dt(o.shape,s.shape,"Error in logLoss: ");var c=_e(1),f=_e(r),h=o.mul(s.add(f).log()).neg().sub(c.sub(o).mul(c.sub(s).add(f).log()));return Ua(h,l,a)}}),G5=Z({meanSquaredError_:function(t,n,e,r){r===void 0&&(r=_n.SUM_BY_NONZERO_WEIGHTS);var a=q(t,"labels","meanSquaredError"),o=q(n,"predictions","meanSquaredError"),s=null;e!=null&&(s=q(e,"weights","meanSquaredError")),dt(a.shape,o.shape,"Error in meanSquaredError: ");var l=a.squaredDifference(o);return Ua(l,s,r)}}),X5=Z({sigmoidCrossEntropy_:function(t,n,e,r,a){r===void 0&&(r=0),a===void 0&&(a=_n.SUM_BY_NONZERO_WEIGHTS);var o=q(t,"multiClassLabels","sigmoidCrossEntropy"),s=q(n,"logits","sigmoidCrossEntropy"),l=null;if(e!=null&&(l=q(e,"weights","sigmoidCrossEntropy")),dt(o.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=_e(r),f=_e(1),h=_e(.5);o=o.mul(f.sub(c)).add(h.mul(c))}var p=function(v,g){var y=q(v,"labels","sigmoidCrossEntropyWithLogits"),x=q(g,"logits","sigmoidCrossEntropyWithLogits");dt(y.shape,x.shape,"Error in sigmoidCrossEntropyWithLogits: ");var S=x.relu(),w=x.mul(y),T=x.abs().neg().exp().log1p();return S.sub(w).add(T)}(o,s);return Ua(p,l,a)}}),Y5=Z({softmaxCrossEntropy_:function(t,n,e,r,a){r===void 0&&(r=0),a===void 0&&(a=_n.SUM_BY_NONZERO_WEIGHTS);var o=q(t,"onehotLabels","softmaxCrossEntropy"),s=q(n,"logits","softmaxCrossEntropy"),l=null;if(e!=null&&(l=q(e,"weights","softmaxCrossEntropy")),dt(o.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){var c=_e(r),f=_e(1),h=_e(o.shape[1]);o=o.mul(f.sub(c)).add(c.div(h))}var p=function(v,g,y){if(y===void 0&&(y=-1),y===-1&&(y=g.rank-1),y!==g.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+g.rank+" and dim was "+y);return ah(function(x,S,w){var T=S.logSumExp([y],!0),A=S.toFloat().sub(T);return w([x,A]),{value:A.mul(x).neg().sum([y]),gradFunc:function(C,R){var k=R[0],N=R[1],O=Wn(C.shape,[y]);return[C.reshape(O).mul(k.toFloat().sub(N.exp())),C.reshape(O).mul(N.exp().sub(k.toFloat()))]}}})(v,g)}(o,s);return Ua(p,l,a)}}),K5=Object.freeze({get Reduction(){return _n},absoluteDifference:U5,computeWeightedLoss:Ua,cosineDistance:q5,hingeLoss:H5,huberLoss:V5,logLoss:W5,meanSquaredError:G5,sigmoidCrossEntropy:X5,softmaxCrossEntropy:Y5});function FS(t,n){return n===void 0&&(n=!1),te.tidy(function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var e=t.shape[0],r=t.shape[1],a=P_(e),o=t.clone(),s=Co([[1]],[1,1]),l=s.clone(),c=e>=r?r:e,f=function(p){var v,g=o,y=l,x=a;v=te.tidy(function(){var S=o.slice([p,p],[e-p,1]),w=S.norm(),T=o.slice([p,p],[1,1]),A=Co([[-1]]).where(T.greater(0),Co([[1]])),C=T.sub(A.mul(w)),R=S.div(C);l=R.shape[0]===1?s.clone():s.concat(R.slice([1,0],[R.shape[0]-1,R.shape[1]]),0);var k=A.matMul(C).div(w).neg(),N=o.slice([p,0],[e-p,r]),O=k.mul(l);if(p===0)o=N.sub(O.matMul(l.transpose().matMul(N)));else{var D=N.sub(O.matMul(l.transpose().matMul(N)));o=o.slice([0,0],[p,r]).concat(D,0)}var M=a.slice([0,p],[e,a.shape[1]-p]);if(p===0)a=M.sub(M.matMul(l).matMul(O.transpose()));else{var P=M.sub(M.matMul(l).matMul(O.transpose()));a=a.slice([0,0],[e,p]).concat(P,1)}return[l,o,a]}),l=v[0],o=v[1],a=v[2],Hn([g,y,x])},h=0;h<c;++h)f(h);return!n&&e>r&&(a=a.slice([0,0],[e,r]),o=o.slice([0,0],[r,r])),[a,o]})}var $5=Z({bandPart_:function(t,n,e){if(n%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+n+".");if(e%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+e+".");var r=q(t,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var a=r.shape,o=r.shape.slice(-2),s=o[0],l=o[1];if(!(n<=s))throw new Error("bandPart(): numLower ("+n+") must not be greater than the number of rows ("+s+").");if(!(e<=l))throw new Error("bandPart(): numUpper ("+e+") must not be greater than the number of columns ("+l+").");n<0&&(n=s),e<0&&(e=l);var c=bd(0,s,1,"int32").reshape([-1,1]),f=bd(0,l,1,"int32"),h=$t(c,f),p=ih(h.lessEqual(_e(+n,"int32")),h.greaterEqual(_e(-e,"int32"))),v=St([s,l],r.dtype);return ir(Yt(r.reshape([-1,s,l])).map(function(g){return yi(p,g,v)})).reshape(a)}}),Q5=Z({gramSchmidt_:function(t){var n;if(Array.isArray(t)){n=!1,G(t!=null&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var e=t[0].shape[0],r=function(c){G(t[c].shape[0]===e,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[c].shape[0]+" vs. "+e+")"})},a=1;a<t.length;++a)r(a)}else n=!0,t=Oy(t,t.shape[0],0).map(function(c){return z_(c,[0])});G(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var o=[],s=t,l=function(c){o.push(te.tidy(function(){var f=s[c];if(c>0)for(var h=0;h<c;++h){var p=FR(o[h].mulStrict(f)).mul(o[h]);f=f.sub(p)}return f.div(zR(f,"euclidean"))}))};for(a=0;a<t.length;++a)l(a);return n?ir(o,0):o}}),Z5=Z({qr_:function(t,n){if(n===void 0&&(n=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return FS(t,n);var e=t.shape.slice(0,t.shape.length-2).reduce(function(s,l){return s*l}),r=Yt(t.reshape([e,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),a=[],o=[];return r.forEach(function(s){var l=FS(s,n),c=l[0],f=l[1];a.push(c),o.push(f)}),[ir(a,0).reshape(t.shape),ir(o,0).reshape(t.shape)]}}),J5=Object.freeze({bandPart:$5,gramSchmidt:Q5,qr:Z5});function ch(t,n,e,r,a,o){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),o==null&&(o=0);var s=t.shape[0];return e=Math.min(e,s),G(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),G(t.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),G(t.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),G(n.rank===1,function(){return"scores must be a 1D tensor"}),G(n.shape[0]===s,function(){return"scores has incompatible shape with boxes. Expected "+s+", but was "+n.shape[0]}),G(0<=o&&o<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+o+"'"}),{maxOutputSize:e,iouThreshold:r,scoreThreshold:a,softNmsSigma:o}}var e6=Z({resizeBilinear_:function(t,n,e){e===void 0&&(e=!1);var r=q(t,"images","resizeBilinear");G(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),G(n.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+n+"."});var a=r,o=!1;r.rank===3&&(o=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var s=n[0],l=n[1],c=te.runKernelFunc(function(f,h){return h([a]),f.resizeBilinear(a,s,l,e)},{x:a},function(f,h){return{x:function(){return te.runKernelFunc(function(p){return p.resizeBilinearBackprop(f,h[0],e)},{})}}},"ResizeBilinear",{alignCorners:e,newHeight:s,newWidth:l});return o?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),t6=Z({resizeNearestNeighbor_:function(t,n,e){e===void 0&&(e=!1);var r=q(t,"images","resizeNearestNeighbor");G(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),G(n.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+n+"."}),G(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var a=r,o=!1;r.rank===3&&(o=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var s=n[0],l=n[1],c=te.runKernelFunc(function(f,h){return h([a]),f.resizeNearestNeighbor(a,s,l,e)},{batchImages:a},function(f,h){return{batchImages:function(){return te.runKernelFunc(function(p){return p.resizeNearestNeighborBackprop(f,h[0],e)},{})}}});return o?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),n6=Z({nonMaxSuppression_:function(t,n,e,r,a){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY);var o=q(t,"boxes","nonMaxSuppression"),s=q(n,"scores","nonMaxSuppression"),l=ch(o,s,e,r,a);e=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold;var c={maxOutputSize:e,iouThreshold:r,scoreThreshold:a};return te.runKernelFunc(function(f){return f.nonMaxSuppression(o,s,e,r,a)},{boxes:o,scores:s},null,"NonMaxSuppressionV3",c)}}),r6=function(t,n,e,r,a){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),ke(this,void 0,void 0,function(){var o,s,l,c,f,h,p;return Ne(this,function(v){switch(v.label){case 0:return o=q(t,"boxes","nonMaxSuppressionAsync"),s=q(n,"scores","nonMaxSuppressionAsync"),l=ch(o,s,e,r,a),e=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,[4,Promise.all([o.data(),s.data()])];case 1:return c=v.sent(),f=c[0],h=c[1],p=Fy(f,h,e,r,a),o!==t&&o.dispose(),s!==n&&s.dispose(),[2,p]}})})},a6=Z({nonMaxSuppressionWithScore_:function(t,n,e,r,a,o){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),o===void 0&&(o=0);var s=q(t,"boxes","nonMaxSuppression"),l=q(n,"scores","nonMaxSuppression"),c=ch(s,l,e,r,a,o),f={maxOutputSize:e=c.maxOutputSize,iouThreshold:r=c.iouThreshold,scoreThreshold:a=c.scoreThreshold,softNmsSigma:o=c.softNmsSigma},h=te.runKernel("NonMaxSuppressionV5",{boxes:s,scores:l},f);return{selectedIndices:h[0],selectedScores:h[1]}}}),o6=function(t,n,e,r,a,o){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),o===void 0&&(o=0),ke(this,void 0,void 0,function(){var s,l,c,f,h,p,v;return Ne(this,function(g){switch(g.label){case 0:return s=q(t,"boxes","nonMaxSuppressionAsync"),l=q(n,"scores","nonMaxSuppressionAsync"),c=ch(s,l,e,r,a,o),e=c.maxOutputSize,r=c.iouThreshold,a=c.scoreThreshold,o=c.softNmsSigma,[4,Promise.all([s.data(),l.data()])];case 1:return f=g.sent(),h=f[0],p=f[1],v=Py(h,p,e,r,a,o),s!==t&&s.dispose(),l!==n&&l.dispose(),[2,v]}})})},i6=Z({cropAndResize_:function(t,n,e,r,a,o){var s=q(t,"image","cropAndResize"),l=q(n,"boxes","cropAndResize","float32"),c=q(e,"boxInd","cropAndResize","int32");a=a||"bilinear",o=o||0;var f=l.shape[0];return G(s.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+s.rank+"."}),G(l.rank===2&&l.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+f+",4] but had shape "+l.shape+"."}),G(c.rank===1&&c.shape[0]===f,function(){return"Error in cropAndResize: boxInd must be have size ["+f+"] but had shape "+l.shape+"."}),G(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),G(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),G(a==="bilinear"||a==="nearest",function(){return"method must be bilinear or nearest, but was "+a}),te.runKernelFunc(function(h,p){return h.cropAndResize(s,l,c,r,a,o)},{images:s,boxes:l,boxInd:c},null,"CropAndResize",{method:a,extrapolationValue:o,cropSize:r})}}),Qy=Object.freeze({resizeBilinear:e6,resizeNearestNeighbor:t6,nonMaxSuppression:n6,nonMaxSuppressionAsync:r6,nonMaxSuppressionWithScore:a6,nonMaxSuppressionWithScoreAsync:o6,cropAndResize:i6}),Zy=function(t,n){return!(t>0)||n==="linear"},Jy=function(t,n,e){if(e==null||e==="linear")return t;if(e==="relu")return t.mul(n.step());throw new Error("Gradient for activation "+e+" has not been implemented yet.")},e0=function(t,n){var e=n,r=Kt(t.shape,n.shape);return r.length>0&&(e=e.sum(r)),e.reshape(t.shape)},t0=function(t,n,e){if(n==="linear")return t;if(n==="relu")return At(t);if(n==="elu")return PR(t);if(n==="relu6")return jR(t);if(n==="prelu")return LR(t,e);throw new Error("Unknown fused activation "+n+".")},s6=Z({fusedMatMul_:function(t){var n,e=t.a,r=t.b,a=t.transposeA,o=a!==void 0&&a,s=t.transposeB,l=s!==void 0&&s,c=t.bias,f=t.activation,h=f===void 0?"linear":f,p=t.preluActivationWeights;if(Zy(te.state.gradientDepth,h)===!1){var v=uh(e,r,o,l);return c!=null&&(v=Ze(v,c)),t0(v,h,p)}var g=q(e,"a","fused matMul"),y=q(r,"b","fused matMul");n=kt(g,y),g=n[0],y=n[1];var x=o?g.shape[g.rank-2]:g.shape[g.rank-1],S=l?y.shape[y.rank-1]:y.shape[y.rank-2],w=o?g.shape[g.rank-1]:g.shape[g.rank-2],T=l?y.shape[y.rank-2]:y.shape[y.rank-1],A=g.shape.slice(0,-2),C=y.shape.slice(0,-2),R=De(A),k=De(C);G(g.rank>=2&&y.rank>=2&&g.rank===y.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+g.rank+" and "+y.rank+"."}),G(an(A,C),function(){return"Error in fused matMul: outer dimensions ("+A+") and ("+C+") of Tensors with shapes "+g.shape+" and "+y.shape+" must match."}),G(x===S,function(){return"Error in fused matMul: inner shapes ("+x+") and ("+S+") of Tensors with shapes "+g.shape+" and "+y.shape+" and transposeA="+o+" and transposeB="+l+" must match."});var N,O,D=g.shape.slice(0,-2).concat([w,T]),M=o?g.as3D(R,x,w):g.as3D(R,w,x),P=l?y.as3D(k,T,S):y.as3D(k,S,T);c!=null&&tt(D,(N=kt(N=q(c,"bias","fused matMul"),g)[0]).shape),p!=null&&(O=q(p,"prelu weights","fused matMul"));var F={a:M,b:P};c!=null&&(F.bias=N),p!=null&&(F.preluActivationWeights=O);var U=[M,P];return te.runKernelFunc(function(W,Y){var z=W.fusedBatchMatMul({a:M,b:P,transposeA:o,transposeB:l,bias:N,activation:h,preluActivationWeights:O});return Y([M,P,z]),z},F,function(W,Y){var z=Y[0],X=Y[1],K=Y[2],V=Jy(W,K,h),I={};return c!=null&&(I={bias:function(){return e0(N,V)}}),Object.assign(o||l?!o&&l?{a:function(){return V.matMul(X,!1,!1)},b:function(){return V.matMul(z,!0,!1)}}:o&&!l?{a:function(){return X.matMul(V,!1,!0)},b:function(){return z.matMul(V,!1,!1)}}:{a:function(){return X.matMul(V,!0,!0)},b:function(){return V.matMul(z,!0,!0)}}:{a:function(){return V.matMul(X,!1,!0)},b:function(){return z.matMul(V,!0,!1)}},I)},"_FusedMatMul",{transposeA:o,transposeB:l,activation:h},U,[!0]).reshape(D)}}),u6=Z({fusedConv2d_:function(t){var n=t.x,e=t.filter,r=t.strides,a=t.pad,o=t.dataFormat,s=o===void 0?"NHWC":o,l=t.dilations,c=l===void 0?[1,1]:l,f=t.dimRoundingMode,h=t.bias,p=t.activation,v=p===void 0?"linear":p,g=t.preluActivationWeights;if(v=v||"linear",Zy(te.state.gradientDepth,v)===!1){var y=Rr(n,e,r,a,s,c,f);return h!=null&&(y=Ze(y,h)),t0(y,v,g)}var x=q(n,"x","conv2d"),S=q(e,"filter","conv2d"),w=x,T=!1;x.rank===3&&(T=!0,w=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),G(w.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+w.rank+"."}),G(S.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+S.rank+"."}),f!=null&&G(Ft(a),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+f+" but got pad "+a+"."}),G(w.shape[3]===S.shape[2],function(){return"Error in conv2d: depth of input ("+w.shape[3]+") must match input depth for filter "+S.shape[2]+"."}),G(Gn(r,c),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"}),G(s==="NHWC",function(){return"Error in conv2d: got dataFormat of "+s+" but only NHWC is currently supported."});var A,C,R=Ri(w.shape,S.shape,r,c,a,f);h!=null&&(A=kt(A=q(h,"bias","fused conv2d"),x)[0],tt(R.outShape,A.shape)),g!=null&&(C=q(g,"prelu weights","fused conv2d"));var k={x:w,filter:S};h!=null&&(k.bias=A),g!=null&&(k.preluActivationWeights=C);var N=[S,w],O=te.runKernelFunc(function(D,M){var P=D.fusedConv2d({input:w,filter:S,convInfo:R,bias:A,activation:v,preluActivationWeights:C});return M([S,w,P]),P},k,function(D,M){var P=M,F=P[0],U=P[1],W=P[2],Y=Jy(D,W,v);G(qs(c),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+c+"'"});var z={};return h!=null&&(z={bias:function(){return e0(A,Y)}}),Object.assign({x:function(){return kR(U.shape,Y,F,r,a)},filter:function(){return Wy(U,Y,F.shape,r,a)}},z)},"FusedConv2D",{convInfo:R,activation:v},N,[!0]);return T?O.as3D(O.shape[1],O.shape[2],O.shape[3]):O}}),l6=Z({fusedDepthwiseConv2d_:function(t){var n=t.x,e=t.filter,r=t.strides,a=t.pad,o=t.dataFormat,s=o===void 0?"NHWC":o,l=t.dilations,c=l===void 0?[1,1]:l,f=t.dimRoundingMode,h=t.bias,p=t.activation,v=p===void 0?"linear":p,g=t.preluActivationWeights;if(Zy(te.state.gradientDepth,v)===!1){var y=sh(n,e,r,a,s,c,f);return h!=null&&(y=Ze(y,h)),t0(y,v,g)}var x=q(n,"x","depthwiseConv2d"),S=q(e,"filter","depthwiseConv2d"),w=x,T=!1;x.rank===3&&(T=!0,w=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),G(w.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+w.rank+"."}),G(S.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+S.rank+"."}),G(w.shape[3]===S.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+w.shape[3]+") must match the inChannels dimension in filter "+S.shape[2]+"."}),c==null&&(c=[1,1]),G(Gn(r,c),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"}),f!=null&&G(Ft(a),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+f+" but got pad "+a+"."});var A,C,R=Ri(w.shape,S.shape,r,c,a,f,!0);h!=null&&(A=kt(A=q(h,"bias","fused conv2d"),x)[0],tt(R.outShape,A.shape)),g!=null&&(C=q(g,"prelu weights","fused depthwiseConv2d"));var k={x:w,filter:S};h!=null&&(k.bias=A),g!=null&&(k.preluActivationWeights=C);var N=[S,w],O=te.runKernelFunc(function(D,M){var P=D.fusedDepthwiseConv2D({input:w,filter:S,convInfo:R,bias:A,activation:v,preluActivationWeights:C});return M([S,w,P]),P},k,function(D,M){G(qs(c),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+c+"'"});var P=M[0],F=M[1],U=M[2],W=Jy(D,U,v),Y={};return h!=null&&(Y={bias:function(){return e0(A,W)}}),Object.assign({x:function(){return NR(F.shape,W,P,R)},filter:function(){return DR(F,W,P.shape,R)}},Y)},"FusedDepthwiseConv2D",{convInfo:R,activation:v},N,[!0]);return T?O.as3D(O.shape[1],O.shape[2],O.shape[3]):O}}),c6=Object.freeze({matMul:s6,conv2d:u6,depthwiseConv2d:l6}),f6=Object.freeze({image:Qy,linalg:J5,losses:K5,spectral:I5,fused:c6,signal:j5,square:Wz,squaredDifference:hR,conv1d:e5,conv2d:Rr,conv3d:t5,depthwiseConv2d:sh,separableConv2d:Gy,conv2dTranspose:n5,conv3dTranspose:r5,op:Z,batchNormalization2d:xU,batchNormalization3d:SU,batchNormalization4d:EU,batchNormalization:CU,batchNorm:bR,batchNorm2d:_U,batchNorm3d:RU,batchNorm4d:AU,booleanMaskAsync:JU,complex:pn,real:Er,imag:ta,concat:Xt,concat1d:cL,concat2d:fL,concat3d:dL,concat4d:hL,split:Oy,matMul:uh,dot:a5,outerProduct:o5,reverse:Ql,reverse1d:i5,reverse2d:s5,reverse3d:u5,reverse4d:l5,maxPool:rn,avgPool:Zl,pool:c5,maxPool3d:f5,avgPool3d:d5,slice:ua,slice1d:h5,slice2d:p5,slice3d:IR,slice4d:m5,abs:Gz,acos:Xz,acosh:Yz,asin:Kz,asinh:$z,atan:Qz,atanh:Zz,ceil:Jz,clipByValue:qy,cos:eU,cosh:tU,erf:nU,exp:Bg,expm1:rU,floor:aU,log:oU,log1p:iU,logSigmoid:sU,neg:Ad,reciprocal:uU,round:lU,rsqrt:pR,sigmoid:mR,sign:cU,isNaN:fU,isInf:dU,isFinite:hU,sin:pU,sinh:mU,softplus:vU,sqrt:gU,step:yU,tan:bU,tanh:wU,all:v5,any:g5,argMax:y5,argMin:b5,logSumExp:w5,max:lh,mean:x5,min:S5,moments:E5,sum:FR,prod:C5,equal:CR,equalStrict:HU,greater:VU,greaterEqual:_R,greaterEqualStrict:WU,greaterStrict:GU,less:XU,lessEqual:YU,lessEqualStrict:KU,lessStrict:$U,notEqual:QU,notEqualStrict:ZU,add:Ze,addN:NU,addStrict:DU,atan2:OU,div:Ir,divNoNan:MU,divStrict:IU,floorDiv:SR,maximum:Hy,maximumStrict:BU,minimum:ER,minimumStrict:FU,mod:PU,modStrict:LU,mul:Rn,mulStrict:jU,pow:Td,powStrict:zU,squaredDifferenceStrict:UU,sub:$t,subStrict:qU,elu:PR,leakyRelu:_5,prelu:LR,relu:At,relu6:jR,selu:R5,logicalAnd:ih,logicalNot:TU,logicalOr:wR,logicalXor:kU,where:yi,whereAsync:xR,buffer:Ve,print:SL,batchToSpaceND:F_,broadcastTo:EL,cast:CL,clone:_L,cumsum:RL,depthToSpace:AL,expandDims:Sr,eye:P_,multinomial:TL,oneHot:Dg,pad:_i,pad1d:kL,pad2d:NL,pad3d:DL,pad4d:OL,rand:ML,randomNormal:IL,randomGamma:BL,randomUniform:L_,reshape:Br,spaceToBatchND:j_,squeeze:z_,stack:ir,tile:Ts,truncatedNormal:FL,unstack:Yt,setdiff1dAsync:PL,fill:oa,linspace:lL,ones:Qs,range:bd,scalar:_e,tensor:vn,tensor1d:qt,tensor2d:Co,tensor3d:Dy,tensor4d:Ln,tensor5d:iL,tensor6d:sL,variable:uL,zeros:St,onesLike:B_,zerosLike:at,transpose:No,softmax:za,logSoftmax:VL,localResponseNormalization:A5,norm:zR,gather:Vy,unsortedSegmentSum:RR,basicLSTMCell:T5,multiRNNCell:k5,movingAverage:N5,stridedSlice:D5,topk:O5,scatterND:M5,fft:Xy,ifft:kd,rfft:Yy,irfft:UR,sparseToDense:B5,gatherND:F5,diag:P5,dropout:L5,hannWindow:Ky,hammingWindow:HR,frame:$y,stft:VR,inTopKAsync:z5});function be(t,n){Array.isArray(t)||(t=[t]),t.forEach(function(e){e!=null&&G(e.dtype!=="complex64",function(){return n+" does not support complex64 tensors."})})}function Vv(t,n,e,r){if(e==="linear")return t.linear(n);if(e==="relu")return t.relu(n);if(e==="elu")return t.elu(n);if(e==="relu6")return t.relu6(n);if(e==="prelu")return t.prelu(n,r);throw new Error("Activation "+e+" has not been implemented for the CPU backend.")}var d6=function(t){function n(){var e=t.call(this)||this;return e.blockSize=48,e.firstUse=!0,e.data=new X_(e,te),e}return qr(n,t),n.prototype.write=function(e,r,a){this.firstUse&&(this.firstUse=!1,me().get("IS_NODE")&&gd(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var o={};return this.data.set(o,{values:e,dtype:a}),o},n.prototype.move=function(e,r,a,o){this.data.set(e,{values:r,dtype:o})},n.prototype.numDataIds=function(){return this.data.numDataIds()},n.prototype.read=function(e){return ke(this,void 0,void 0,function(){return Ne(this,function(r){return[2,this.readSync(e)]})})},n.prototype.readSync=function(e){var r=this.data.get(e),a=r.dtype,o=r.complexTensors;return a==="complex64"?Ig(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.data.get(e).values},n.prototype.bufferSync=function(e){var r=this.readSync(e.dataId),a=r;if(e.dtype==="string")try{a=r.map(function(o){return pd(o)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ve(e.shape,e.dtype,a)},n.prototype.makeOutput=function(e,r,a){var o=this.write(e,r,a);return te.makeTensorFromDataId(o,r,a,this)},n.prototype.disposeData=function(e){if(this.data.has(e)){var r=this.data.get(e).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(e)}},n.prototype.time=function(e){return ke(this,void 0,void 0,function(){var r;return Ne(this,function(a){return r=Jr(),e(),[2,{kernelMs:Jr()-r}]})})},n.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},n.prototype.complex=function(e,r){var a=this.makeOutput(null,e.shape,"complex64");return this.data.get(a.dataId).complexTensors={real:te.keep(e.clone()),imag:te.keep(r.clone())},a},n.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},n.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},n.prototype.slice=function(e,r,a){if(be(e,"slice"),W_(e.shape,r,a)){var o=G_(r,e.strides),s=De(a);return vn(this.readSync(e.dataId).subarray(o,o+s),a,e.dtype)}for(var l=Ve(a,e.dtype),c=this.bufferSync(e),f=0;f<l.size;++f){var h=l.indexToLoc(f).map(function(p,v){return p+r[v]});l.values[f]=c.get.apply(c,h)}return l.toTensor()},n.prototype.stridedSlice=function(e,r,a,o){be(e,"stridedSlice");var s=Iy(r,a,o);if(s.some(function(g){return g===0}))return vn([],s);for(var l=Ve(s,e.dtype),c=this.bufferSync(e),f=0;f<l.size;f++){for(var h=l.indexToLoc(f),p=new Array(h.length),v=0;v<p.length;v++)p[v]=h[v]*o[v]+r[v];l.set.apply(l,[c.get.apply(c,p)].concat(h))}return l.toTensor()},n.prototype.diag=function(e){for(var r=this.readSync(e.dataId),a=Ve([e.size,e.size],e.dtype),o=a.values,s=0;s<r.length;s++)o[s*e.size+s]=r[s];return a.toTensor()},n.prototype.unstack=function(e,r){for(var a=e.shape[r],o=new Array(e.rank-1),s=0,l=0;l<e.rank;l++)l!==r&&(o[s++]=e.shape[l]);var c=new Array(e.rank).fill(0),f=e.shape.slice();f[r]=1;var h=new Array(a);for(l=0;l<h.length;l++)c[r]=l,h[l]=this.slice(e,c,f).reshape(o);return h},n.prototype.reverse=function(e,r){be(e,"reverse");for(var a=Ve(e.shape,e.dtype),o=this.bufferSync(e),s=function(c){var f=a.indexToLoc(c),h=f.slice();r.forEach(function(p){return h[p]=e.shape[p]-1-h[p]}),a.set.apply(a,[o.get.apply(o,h)].concat(f))},l=0;l<a.size;l++)s(l);return a.toTensor()},n.prototype.concat=function(e,r){var a=this;if(e[0].dtype==="complex64"){var o=e.map(function(g){return Er(g)}),s=e.map(function(g){return ta(g)});return pn(this.concat(o,r),this.concat(s,r))}var l=e.map(function(g){var y=De(g.shape.slice(r));return g.as2D(-1,y)}),c=Us(l.map(function(g){return g.shape}),1),f=Ve(c,e[0].dtype).values;if(l[0].shape[0]===1){var h=0;l.forEach(function(g){f.set(a.readSync(g.dataId),h),h+=g.size})}else{var p=0;l.forEach(function(g){for(var y=a.readSync(g.dataId),x=0,S=0;S<g.shape[0];++S)for(var w=S*c[1]+p,T=0;T<g.shape[1];++T)f[w+T]=y[x++];p+=g.shape[1]})}var v=Us(e.map(function(g){return g.shape}),r);return vn(f,v,e[0].dtype)},n.prototype.neg=function(e){return be(e,"neg"),this.multiply(_e(-1),e)},n.prototype.add=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(a,o,s,l){return{real:a+s,imag:o+l}}):this.broadcastedBinaryOp(e,r,mn(e.dtype,r.dtype),function(a,o){return a+o})},n.prototype.addN=function(e){var r=this;be(e,"addN");for(var a=e.map(function(h){return r.readSync(h.dataId)}),o=Ve(e[0].shape,e[0].dtype),s=o.values,l=0;l<e.length;l++)for(var c=a[l],f=0;f<s.length;f++)s[f]+=c[f];return o.toTensor()},n.prototype.softmax=function(e,r){var a=Qt([r],e.shape),o=this.max(e,a),s=Wn(o.shape,a),l=this.subtract(e,o.reshape(s)),c=this.exp(l),f=this.sum(c,a).reshape(s);return this.realDivide(c,f)},n.prototype.subtract=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(a,o,s,l){return{real:a-s,imag:o-l}}):this.broadcastedBinaryOp(e,r,mn(e.dtype,r.dtype),function(a,o){return a-o})},n.prototype.pow=function(e,r){return be([e,r],"pow"),this.broadcastedBinaryOp(e,r,e.dtype,function(a,o){return Math.pow(a,o)})},n.prototype.batchMatMul=function(e,r,a,o){be([e,r],"matMul");for(var s=a?e.shape[1]:e.shape[2],l=a?e.shape[2]:e.shape[1],c=o?r.shape[1]:r.shape[2],f=e.shape[0],h=this.readSync(e.dataId),p=this.readSync(r.dataId),v=a?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],g=v[0],y=v[1],x=v[2],S=o?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],w=S[0],T=S[1],A=S[2],C=l*c,R=Ve([f,l,c],e.dtype),k=R.values,N=this.blockSize,O=0;O<f;O++)for(var D=0;D<l;D+=N)for(var M=0;M<c;M+=N)for(var P=0;P<s;P+=N)for(var F=Math.min(D+N,l),U=Math.min(M+N,c),W=Math.min(P+N,s),Y=D;Y<F;Y++)for(var z=M;z<U;z++){for(var X=0,K=P;K<W;K++)X+=h[O*g+Y*y+K*x]*p[K*w+z*T+O*A];k[O*C+(Y*c+z)]+=X}return R.toTensor()},n.prototype.fusedBatchMatMul=function(e){var r=e.a,a=e.b,o=e.transposeA,s=e.transposeB,l=e.bias,c=e.activation,f=e.preluActivationWeights,h=this.batchMatMul(r,a,o,s);return l&&(h=this.add(h,l)),c&&(h=Vv(this,h,c,f)),h},n.prototype.multiply=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(a,o,s,l){return{real:a*s-o*l,imag:a*l+o*s}}):this.broadcastedBinaryOp(e,r,mn(e.dtype,r.dtype),function(a,o){return a*o})},n.prototype.realDivide=function(e,r){return be([e,r],"realDivide"),this.broadcastedBinaryOp(e,r,"float32",function(a,o){return a/o})},n.prototype.floorDiv=function(e,r){return be([e,r],"floorDiv"),this.broadcastedBinaryOp(e,r,"int32",function(a,o){return Math.floor(a/o)})},n.prototype.sum=function(e,r){be(e,"sum"),tr("sum",r,e.rank);for(var a=xn(e.shape,r),o=a[0],s=a[1],l=St(o,mn(e.dtype,"int32")),c=De(s),f=this.readSync(l.dataId),h=this.readSync(e.dataId),p=0;p<f.length;++p){for(var v=p*c,g=0,y=0;y<c;++y)g+=h[v+y];f[p]=g}return l},n.prototype.prod=function(e,r){be(e,"sum");for(var a=xn(e.shape,r),o=a[0],s=a[1],l=St(o,mn(e.dtype,"int32")),c=De(s),f=this.readSync(l.dataId),h=this.readSync(e.dataId),p=0;p<f.length;++p){for(var v=p*c,g=1,y=0;y<c;++y)g*=h[v+y];f[p]=g}return l},n.prototype.unsortedSegmentSum=function(e,r,a){be(e,"unsortedSegmentSum");for(var o=[],s=e.rank-r.rank,l=0;l<s;++l)r=r.expandDims(l+1);for(l=0;l<a;++l){var c=_e(l,"int32"),f=CR(c,r).asType("float32").mul(e).sum(0);o.push(f)}return ir(o)},n.prototype.argMin=function(e,r){be(e,"argMin");var a=[r];tr("argMin",a,e.rank);for(var o=xn(e.shape,a),s=o[0],l=o[1],c=St(s,"int32"),f=De(l),h=this.readSync(c.dataId),p=this.readSync(e.dataId),v=0;v<h.length;++v){for(var g=v*f,y=p[g],x=0,S=0;S<f;++S){var w=p[g+S];w<y&&(y=w,x=S)}h[v]=x}return c},n.prototype.argMax=function(e,r){be(e,"argMax");var a=[r];tr("argMax",a,e.rank);for(var o=xn(e.shape,a),s=o[0],l=o[1],c=St(s,"int32"),f=De(l),h=this.readSync(c.dataId),p=this.readSync(e.dataId),v=0;v<h.length;++v){for(var g=v*f,y=p[g],x=0,S=0;S<f;++S){var w=p[g+S];w>y&&(y=w,x=S)}h[v]=x}return c},n.prototype.cumsum=function(e,r,a,o){if(be(e,"cumsum"),r!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+r);for(var s=mn(e.dtype,"int32"),l=St(e.shape,s),c=this.readSync(l.dataId),f=this.readSync(e.dataId),h=e.shape[e.rank-1],p=o?function(S,w){return S+h-w-1}:function(S,w){return S+w},v=0;v<f.length;v+=h)for(var g=0;g<h;g++){var y=p(v,g);if(g===0)c[y]=a?0:f[y];else{var x=p(v,g-1);c[y]=a?f[x]+c[x]:f[y]+c[x]}}return l},n.prototype.equal=function(e,r){return be([e,r],"equal"),this.broadcastedBinaryOp(e,r,"bool",function(a,o){return a===o?1:0})},n.prototype.notEqual=function(e,r){return be([e,r],"notEqual"),this.broadcastedBinaryOp(e,r,"bool",function(a,o){return a!==o?1:0})},n.prototype.less=function(e,r){return be([e,r],"less"),this.broadcastedBinaryOp(e,r,"bool",function(a,o){return a<o?1:0})},n.prototype.lessEqual=function(e,r){return be([e,r],"lessEqual"),this.broadcastedBinaryOp(e,r,"bool",function(a,o){return a<=o?1:0})},n.prototype.greater=function(e,r){return be([e,r],"greater"),this.broadcastedBinaryOp(e,r,"bool",function(a,o){return a>o?1:0})},n.prototype.greaterEqual=function(e,r){return be([e,r],"greaterEqual"),this.broadcastedBinaryOp(e,r,"bool",function(a,o){return a>=o?1:0})},n.prototype.logicalNot=function(e){be(e,"logicalNot");for(var r=this.readSync(e.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)a[o]=r[o]?0:1;return this.makeOutput(a,e.shape,"bool")},n.prototype.logicalAnd=function(e,r){return be([e,r],"logicalAnd"),this.broadcastedBinaryOp(e,r,"bool",function(a,o){return a&&o})},n.prototype.logicalOr=function(e,r){return be([e,r],"logicalOr"),this.broadcastedBinaryOp(e,r,"bool",function(a,o){return a||o})},n.prototype.select=function(e,r,a){be([e,r,a],"select");for(var o=this.readSync(e.dataId),s=this.readSync(r.dataId),l=this.readSync(a.dataId),c=St(r.shape,mn(r.dtype,a.dtype)),f=this.readSync(c.dataId),h=0,p=e.rank===0||e.rank>1||r.rank===1?1:De(r.shape.slice(1)),v=0;v<o.length;v++)for(var g=0;g<p;g++)o[v]===1?f[h++]=s[v]:f[h++]=l[v];return c},n.prototype.where=function(e){be([e],"where");var r=this.readSync(e.dataId);return Ly(e.shape,r)},n.prototype.topk=function(e,r,a){return be(e,"topk"),tR(this.readSync(e.dataId),e.shape,e.dtype,r)},n.prototype.min=function(e,r){be(e,"min"),tr("min",r,e.rank);for(var a=xn(e.shape,r),o=a[0],s=a[1],l=St(o,e.dtype),c=De(s),f=this.readSync(l.dataId),h=this.readSync(e.dataId),p=0;p<f.length;++p){for(var v=p*c,g=h[v],y=0;y<c;++y){var x=h[v+y];x<g&&(g=x)}f[p]=g}return l},n.prototype.minimum=function(e,r){return be([e,r],"minimum"),this.broadcastedBinaryOp(e,r,e.dtype,function(a,o){return Math.min(a,o)})},n.prototype.mod=function(e,r){return be([e,r],"mod"),this.broadcastedBinaryOp(e,r,e.dtype,function(a,o){var s=a%o;return a<0&&o<0||a>=0&&o>=0?s:(s+o)%o})},n.prototype.max=function(e,r){be(e,"max"),tr("max",r,e.rank);for(var a=xn(e.shape,r),o=a[0],s=a[1],l=St(o,e.dtype),c=De(s),f=this.readSync(l.dataId),h=this.readSync(e.dataId),p=0;p<f.length;++p){for(var v=p*c,g=h[v],y=0;y<c;++y){var x=h[v+y];x>g&&(g=x)}f[p]=g}return l},n.prototype.maximum=function(e,r){return be([e,r],"maximum"),this.broadcastedBinaryOp(e,r,e.dtype,function(a,o){return Math.max(a,o)})},n.prototype.all=function(e,r){be(e,"all"),tr("all",r,e.rank);for(var a=xn(e.shape,r),o=a[0],s=a[1],l=St(o,e.dtype),c=De(s),f=this.readSync(l.dataId),h=this.readSync(e.dataId),p=0;p<f.length;++p){for(var v=p*c,g=h[v],y=0;y<c;++y){var x=h[v+y];g=g&&x}f[p]=g}return l},n.prototype.any=function(e,r){be(e,"any"),tr("any",r,e.rank);for(var a=xn(e.shape,r),o=a[0],s=a[1],l=St(o,e.dtype),c=De(s),f=this.readSync(l.dataId),h=this.readSync(e.dataId),p=0;p<f.length;++p){for(var v=p*c,g=h[v],y=0;y<c;++y){var x=h[v+y];g=g||x}f[p]=g}return l},n.prototype.squaredDifference=function(e,r){return be([e,r],"squaredDifference"),this.broadcastedBinaryOp(e,r,e.dtype,function(a,o){var s=a-o;return s*s})},n.prototype.ceil=function(e){be(e,"ceil");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.ceil(r[o]);return this.makeOutput(a,e.shape,"float32")},n.prototype.floor=function(e){be(e,"floor");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.floor(r[o]);return this.makeOutput(a,e.shape,"float32")},n.prototype.sign=function(e){be(e,"x");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)r[o]<0?a[o]=-1:r[o]>0?a[o]=1:a[o]=0;return this.makeOutput(a,e.shape,"float32")},n.prototype.isNaN=function(e){be(e,"x");for(var r=this.readSync(e.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isNaN(r[o])&&(a[o]=1);return this.makeOutput(a,e.shape,"bool")},n.prototype.isInf=function(e){be(e,"x");for(var r=this.readSync(e.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)Math.abs(r[o])===1/0&&(a[o]=1);return this.makeOutput(a,e.shape,"bool")},n.prototype.isFinite=function(e){be(e,"x");for(var r=this.readSync(e.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isFinite(r[o])&&(a[o]=1);return this.makeOutput(a,e.shape,"bool")},n.prototype.round=function(e){be(e,"round");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var s=Math.floor(r[o]);r[o]-s<.5?a[o]=Math.floor(r[o]):r[o]-s>.5?a[o]=Math.ceil(r[o]):a[o]=s%2==0?s:s+1}return this.makeOutput(a,e.shape,"float32")},n.prototype.exp=function(e){be(e,"exp");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.exp(r[o]);return this.makeOutput(a,e.shape,"float32")},n.prototype.expm1=function(e){be(e,"expm1");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.expm1(r[o]);return this.makeOutput(a,e.shape,"float32")},n.prototype.log=function(e){be(e,"log");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var s=r[o];a[o]=Math.log(s)}return this.makeOutput(a,e.shape,"float32")},n.prototype.log1p=function(e){be(e,"log1p");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var s=r[o];a[o]=Math.log1p(s)}return this.makeOutput(a,e.shape,"float32")},n.prototype.sqrt=function(e){be(e,"sqrt");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var s=r[o];a[o]=Math.sqrt(s)}return this.makeOutput(a,e.shape,"float32")},n.prototype.rsqrt=function(e){be(e,"rsqrt");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var s=r[o];a[o]=1/Math.sqrt(s)}return this.makeOutput(a,e.shape,"float32")},n.prototype.reciprocal=function(e){be(e,"reciprocal");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=1/r[o];return this.makeOutput(a,e.shape,"float32")},n.prototype.linear=function(e){return e},n.prototype.relu=function(e){be(e,"relu");for(var r=St(e.shape,e.dtype),a=this.readSync(r.dataId),o=this.readSync(e.dataId),s=0;s<o.length;++s)a[s]=Math.max(0,o[s]);return r},n.prototype.relu6=function(e){be(e,"relu");for(var r=St(e.shape,e.dtype),a=this.readSync(r.dataId),o=this.readSync(e.dataId),s=0;s<o.length;++s)a[s]=Math.min(Math.max(0,o[s]),6);return r},n.prototype.prelu=function(e,r){return be([e,r],"prelu"),this.broadcastedBinaryOp(e,r,e.dtype,function(a,o){return a<0?o*a:a})},n.prototype.elu=function(e){be(e,"elu");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o){var s=a[o];r[o]=s>=0?s:Math.exp(s)-1}return this.makeOutput(r,e.shape,"float32")},n.prototype.eluDer=function(e,r){be([e,r],"eluDer");for(var a=new Float32Array(r.size),o=this.readSync(r.dataId),s=this.readSync(e.dataId),l=0;l<o.length;++l){var c=o[l];a[l]=c>=1?s[l]:s[l]*(c+1)}return this.makeOutput(a,r.shape,"float32")},n.prototype.selu=function(e){be(e,"selu");for(var r=zy,a=Uy,o=new Float32Array(e.size),s=this.readSync(e.dataId),l=0;l<s.length;++l){var c=s[l];o[l]=c>=0?a*c:r*(Math.exp(c)-1)}return this.makeOutput(o,e.shape,"float32")},n.prototype.clip=function(e,r,a){be(e,"clip");for(var o=new Float32Array(e.size),s=this.readSync(e.dataId),l=0;l<s.length;++l){var c=s[l];o[l]=c>a?a:c<r?r:c}return this.makeOutput(o,e.shape,"float32")},n.prototype.abs=function(e){for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.abs(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.complexAbs=function(e){for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<e.size;++o){var s=a[2*o],l=a[2*o+1];r[o]=Math.hypot(s,l)}return this.makeOutput(r,e.shape,"float32")},n.prototype.int=function(e){be(e,"int");for(var r=new Int32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=a[o];return this.makeOutput(r,e.shape,"int32")},n.prototype.sigmoid=function(e){be(e,"sigmoid");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=1/(1+Math.exp(-a[o]));return this.makeOutput(r,e.shape,"float32")},n.prototype.softplus=function(e){be(e,"softplus");for(var r=Math.log(11920928955078125e-23)+2,a=new Float32Array(e.size),o=this.readSync(e.dataId),s=0;s<o.length;++s){var l=o[s]>-r,c=o[s]<r,f=Math.exp(o[s]),h=void 0;h=c?f:l?o[s]:Math.log(1+f),a[s]=h}return this.makeOutput(a,e.shape,"float32")},n.prototype.sin=function(e){be(e,"sin");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.sin(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.cos=function(e){be(e,"cos");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.cos(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.tan=function(e){be(e,"tan");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.tan(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.asin=function(e){be(e,"asin");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.asin(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.acos=function(e){be(e,"acos");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.acos(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atan=function(e){be(e,"atan");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.atan(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atan2=function(e,r){return be([e,r],"atan2"),this.broadcastedBinaryOp(e,r,e.dtype,function(a,o){return Math.atan2(a,o)})},n.prototype.sinh=function(e){be(e,"sinh");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.sinh(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.cosh=function(e){be(e,"cosh");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.cosh(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.tanh=function(e){be(e,"tanh");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=hP(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.asinh=function(e){be(e,"asinh");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.asinh(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.acosh=function(e){be(e,"acosh");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.acosh(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atanh=function(e){be(e,"atanh");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.atanh(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.erf=function(e){be(e,"erf");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o){var s=Math.sign(a[o]),l=Math.abs(a[o]),c=1/(1+.3275911*l);r[o]=s*(1-((((1.061405429*c-1.453152027)*c+1.421413741)*c-.284496736)*c+.254829592)*c*Math.exp(-l*l))}return this.makeOutput(r,e.shape,"float32")},n.prototype.step=function(e,r){r===void 0&&(r=0),be(e,"step");for(var a=new Float32Array(e.size),o=this.readSync(e.dataId),s=0;s<o.length;++s){var l=o[s];isNaN(l)?a[s]=NaN:a[s]=l>0?1:r}return this.makeOutput(a,e.shape,"float32")},n.prototype.fusedConv2d=function(e){var r=e.input,a=e.filter,o=e.convInfo,s=e.bias,l=e.activation,c=e.preluActivationWeights,f=this.conv2d(r,a,o);return s&&(f=this.add(f,s)),l&&(f=Vv(this,f,l,c)),f},n.prototype.conv2d=function(e,r,a){be([e,r],"conv2d");for(var o=a.filterHeight,s=a.filterWidth,l=a.dilationHeight,c=a.dilationWidth,f=a.padInfo.left,h=a.padInfo.top,p=a.dataFormat==="channelsLast",v=Ve(a.outShape,e.dtype),g=e.strides[0],y=p?e.strides[1]:e.strides[2],x=p?e.strides[2]:1,S=p?1:e.strides[1],w=v.strides[0],T=p?v.strides[1]:v.strides[2],A=p?v.strides[2]:1,C=p?1:v.strides[1],R=this.readSync(e.dataId),k=this.readSync(r.dataId),N=v.values,O=0;O<a.batchSize;++O)for(var D=O*g,M=O*w,P=0;P<a.outHeight;++P)for(var F=M+P*T,U=P*a.strideHeight-h,W=0;W<o;W++){var Y=U+W*l;if(!(Y<0||Y>=a.inHeight))for(var z=W*r.strides[0],X=D+Y*y,K=0;K<a.outWidth;++K)for(var V=F+K*A,I=K*a.strideWidth-f,H=0;H<s;H++){var Q=I+H*c;if(!(Q<0||Q>=a.inWidth))for(var J=X+Q*x,re=z+H*r.strides[1],ie=0;ie<a.inChannels;++ie){for(var pe=R[J+ie*S],Se=0;Se<a.outChannels;++Se)N[V+Se*C]+=pe*k[re+Se];re+=a.outChannels}}}return v.toTensor()},n.prototype.conv3d=function(e,r,a){for(var o=a.filterDepth,s=a.filterHeight,l=a.filterWidth,c=a.dilationDepth,f=a.dilationHeight,h=a.dilationWidth,p=a.padInfo.front,v=a.padInfo.left,g=a.padInfo.top,y=Ve(a.outShape,e.dtype),x=this.readSync(e.dataId),S=this.readSync(r.dataId),w=y.values,T=0;T<a.batchSize;++T)for(var A=T*e.strides[0],C=T*y.strides[0],R=0;R<a.outDepth;++R)for(var k=C+R*y.strides[1],N=R*a.strideDepth-p,O=0;O<o;O++){var D=N+O*c;if(!(D<0||D>=a.inDepth))for(var M=O*r.strides[0],P=A+D*e.strides[1],F=0;F<a.outHeight;++F)for(var U=k+F*y.strides[2],W=F*a.strideHeight-g,Y=0;Y<s;Y++){var z=W+Y*f;if(!(z<0||z>=a.inHeight))for(var X=M+Y*r.strides[1],K=P+z*e.strides[2],V=0;V<a.outWidth;++V)for(var I=U+V*a.outChannels,H=V*a.strideWidth-v,Q=0;Q<l;Q++){var J=H+Q*h;if(!(J<0||J>=a.inWidth))for(var re=X+Q*r.strides[2],ie=K+J*a.inChannels,pe=re,Se=0;Se<a.inChannels;++Se){for(var xe=x[ie+Se],Ee=0;Ee<a.outChannels;++Ee)w[I+Ee]+=xe*S[pe+Ee];pe+=a.outChannels}}}}return y.toTensor()},n.prototype.conv2dDerInput=function(e,r,a){be([e,r],"conv2dDerInput");for(var o=Ve(a.inShape,"float32"),s=o.values,l=this.readSync(e.dataId),c=this.readSync(r.dataId),f=r.strides,h=f[0],p=f[1],v=f[2],g=a.batchSize,y=a.filterHeight,x=a.filterWidth,S=a.inChannels,w=a.inHeight,T=a.inWidth,A=a.outChannels,C=a.outHeight,R=a.outWidth,k=a.strideHeight,N=a.strideWidth,O=a.dataFormat,D=y-1-a.padInfo.top,M=x-1-a.padInfo.left,P=O==="channelsLast",F=o.strides[0],U=P?o.strides[1]:o.strides[2],W=P?o.strides[2]:1,Y=P?1:o.strides[1],z=e.strides[0],X=P?e.strides[1]:e.strides[2],K=P?e.strides[2]:1,V=P?1:e.strides[1],I=0;I<g;++I)for(var H=0;H<S;++H)for(var Q=0;Q<w;++Q)for(var J=Q-D,re=Math.max(0,Math.ceil(J/k)),ie=Math.min(C,(y+J)/k),pe=0;pe<T;++pe){for(var Se=pe-M,xe=Math.max(0,Math.ceil(Se/N)),Ee=Math.min(R,(x+Se)/N),de=0,we=re;we<ie;++we)for(var Ce=we*k-J,Ae=xe;Ae<Ee;++Ae)for(var Fe=z*I+X*we+K*Ae,ot=h*(y-1-Ce)+p*(x-1-(Ae*N-Se))+v*H,Ye=0;Ye<A;++Ye)de+=l[Fe+V*Ye]*c[ot+Ye];s[F*I+U*Q+W*pe+Y*H]=de}return o.toTensor()},n.prototype.conv3dDerInput=function(e,r,a){for(var o=Ve(a.inShape,"float32"),s=o.values,l=o.strides,c=l[0],f=l[1],h=l[2],p=l[3],v=this.readSync(e.dataId),g=e.strides,y=g[0],x=g[1],S=g[2],w=g[3],T=this.readSync(r.dataId),A=r.strides,C=A[0],R=A[1],k=A[2],N=A[3],O=a.batchSize,D=a.filterDepth,M=a.filterHeight,P=a.filterWidth,F=a.inChannels,U=a.inDepth,W=a.inHeight,Y=a.inWidth,z=a.outChannels,X=a.outDepth,K=a.outHeight,V=a.outWidth,I=a.strideDepth,H=a.strideHeight,Q=a.strideWidth,J=D-1-a.padInfo.front,re=M-1-a.padInfo.top,ie=P-1-a.padInfo.left,pe=0;pe<O;++pe)for(var Se=0;Se<F;++Se)for(var xe=0;xe<U;++xe)for(var Ee=xe-J,de=Math.max(0,Math.ceil(Ee/I)),we=Math.min(X,(D+Ee)/I),Ce=0;Ce<W;++Ce)for(var Ae=Ce-re,Fe=Math.max(0,Math.ceil(Ae/H)),ot=Math.min(K,(M+Ae)/H),Ye=0;Ye<Y;++Ye){for(var it=Ye-ie,Zt=Math.max(0,Math.ceil(it/Q)),Lt=Math.min(V,(P+it)/Q),Ar=0,un=de;un<we;++un)for(var fr=un*I-Ee,dr=Fe;dr<ot;++dr)for(var Wa=dr*H-Ae,Tr=Zt;Tr<Lt;++Tr)for(var pa=y*pe+x*un+S*dr+w*Tr,jt=C*(D-1-fr)+R*(M-1-Wa)+k*(P-1-(Tr*Q-it))+N*Se,Ht=0;Ht<z;++Ht)Ar+=v[pa+Ht]*T[jt+Ht];s[c*pe+f*xe+h*Ce+p*Ye+Se]=Ar}return o.toTensor()},n.prototype.conv2dDerFilter=function(e,r,a){be([e,r],"conv2dDerFilter");for(var o=a.strideHeight,s=a.strideWidth,l=a.filterHeight,c=a.filterWidth,f=a.dataFormat==="channelsLast",h=Ve(a.filterShape,"float32"),p=a.padInfo.left,v=a.padInfo.top,g=this.bufferSync(e),y=this.bufferSync(r),x=0;x<l;++x)for(var S=Math.max(0,Math.ceil((v-x)/o)),w=Math.min(a.outHeight,(a.inHeight+v-x)/o),T=0;T<c;++T)for(var A=Math.max(0,Math.ceil((p-T)/s)),C=Math.min(a.outWidth,(a.inWidth+p-T)/s),R=0;R<a.inChannels;++R)for(var k=0;k<a.outChannels;++k){for(var N=0,O=0;O<a.batchSize;++O)for(var D=S;D<w;++D)for(var M=x+D*o-v,P=A;P<C;++P){var F=T+P*s-p;N+=f?g.get(O,M,F,R)*y.get(O,D,P,k):g.get(O,R,M,F)*y.get(O,k,D,P)}h.set(N,x,T,R,k)}return h.toTensor()},n.prototype.conv3dDerFilter=function(e,r,a){for(var o=a.strideDepth,s=a.strideHeight,l=a.strideWidth,c=a.filterDepth,f=a.filterHeight,h=a.filterWidth,p=Ve(a.filterShape,"float32"),v=p.values,g=p.strides,y=g[0],x=g[1],S=g[2],w=g[3],T=this.readSync(r.dataId),A=r.strides,C=A[0],R=A[1],k=A[2],N=A[3],O=this.readSync(e.dataId),D=e.strides,M=D[0],P=D[1],F=D[2],U=D[3],W=a.padInfo.front,Y=a.padInfo.left,z=a.padInfo.top,X=0;X<c;++X)for(var K=Math.max(0,Math.ceil((W-X)/o)),V=Math.min(a.outDepth,(a.inDepth+W-X)/o),I=X*y,H=0;H<f;++H)for(var Q=Math.max(0,Math.ceil((z-H)/s)),J=Math.min(a.outHeight,(a.inHeight+z-H)/s),re=H*x+I,ie=0;ie<h;++ie)for(var pe=Math.max(0,Math.ceil((Y-ie)/l)),Se=Math.min(a.outWidth,(a.inWidth+Y-ie)/l),xe=ie*S+re,Ee=0;Ee<a.inChannels;++Ee)for(var de=Ee*w+xe,we=0;we<a.outChannels;++we){for(var Ce=0,Ae=0;Ae<a.batchSize;++Ae)for(var Fe=Ae*M,ot=Ae*C,Ye=K;Ye<V;++Ye)for(var it=(X+Ye*o-W)*P+Fe,Zt=Ye*R+ot,Lt=Q;Lt<J;++Lt)for(var Ar=(H+Lt*s-z)*F+it,un=Lt*k+Zt,fr=pe;fr<Se;++fr){var dr=fr*N+un;Ce+=O[(ie+fr*l-Y)*U+Ar+Ee]*T[dr+we]}v[de+we]=Ce}return p.toTensor()},n.prototype.fusedDepthwiseConv2D=function(e){var r=e.input,a=e.filter,o=e.convInfo,s=e.bias,l=e.activation,c=e.preluActivationWeights,f=this.depthwiseConv2D(r,a,o);return s&&(f=this.add(f,s)),l&&(f=Vv(this,f,l,c)),f},n.prototype.depthwiseConv2D=function(e,r,a){be([e,r],"depthwiseConv2D");for(var o=a.filterHeight,s=a.filterWidth,l=a.dilationHeight,c=a.dilationWidth,f=a.padInfo.left,h=a.padInfo.top,p=a.outChannels/a.inChannels,v=Ve(a.outShape,e.dtype),g=this.readSync(e.dataId),y=this.readSync(r.dataId),x=v.values,S=0;S<a.batchSize;++S)for(var w=S*e.strides[0],T=S*v.strides[0],A=0;A<a.outHeight;++A)for(var C=T+A*v.strides[1],R=A*a.strideHeight-f,k=0;k<o;++k){var N=R+k*l;if(!(N<0||N>=a.inHeight))for(var O=k*r.strides[0],D=w+N*e.strides[1],M=0;M<a.outWidth;++M)for(var P=C+M*v.strides[2],F=M*a.strideWidth-h,U=0;U<s;++U){var W=F+U*c;if(!(W<0||W>=a.inWidth))for(var Y=O+U*r.strides[1],z=D+W*a.inChannels,X=P,K=Y,V=0;V<a.inChannels;++V){for(var I=g[z+V],H=0;H<p;++H)x[X+H]+=I*y[K+H];X+=p,K+=p}}}return v.toTensor()},n.prototype.depthwiseConv2DDerInput=function(e,r,a){be([e,r],"depthwiseConv2DDerInput");for(var o=Ve(a.inShape,"float32"),s=o.values,l=o.strides,c=l[0],f=l[1],h=l[2],p=this.readSync(e.dataId),v=e.strides,g=v[0],y=v[1],x=v[2],S=this.readSync(r.dataId),w=r.strides,T=w[0],A=w[1],C=w[2],R=a.batchSize,k=a.filterHeight,N=a.filterWidth,O=a.inChannels,D=a.inHeight,M=a.inWidth,P=a.outChannels,F=a.outHeight,U=a.outWidth,W=a.strideHeight,Y=a.strideWidth,z=k-1-a.padInfo.top,X=N-1-a.padInfo.left,K=P/O,V=0;V<R;++V)for(var I=0;I<O;++I)for(var H=0;H<D;++H)for(var Q=H-z,J=Math.max(0,Math.ceil(Q/W)),re=Math.min(F,(k+Q)/W),ie=0;ie<M;++ie){for(var pe=ie-X,Se=Math.max(0,Math.ceil(pe/Y)),xe=Math.min(U,(N+pe)/Y),Ee=0,de=J;de<re;++de)for(var we=de*W-Q,Ce=Se;Ce<xe;++Ce)for(var Ae=g*V+y*de+x*Ce,Fe=T*(k-1-we)+A*(N-1-(Ce*Y-pe))+C*I,ot=0;ot<K;++ot)Ee+=p[Ae+(I*K+ot)]*S[Fe+ot];s[c*V+f*H+h*ie+I]=Ee}return o.toTensor()},n.prototype.depthwiseConv2DDerFilter=function(e,r,a){be([e,r],"depthwiseConv2DDerFilter");for(var o=a.strideHeight,s=a.strideWidth,l=a.filterHeight,c=a.filterWidth,f=Ve(a.filterShape,"float32"),h=a.padInfo.left,p=a.padInfo.top,v=a.outChannels/a.inChannels,g=this.bufferSync(e),y=this.bufferSync(r),x=0;x<l;++x)for(var S=Math.max(0,Math.ceil((p-x)/o)),w=Math.min(a.outHeight,(a.inHeight+p-x)/o),T=0;T<c;++T)for(var A=Math.max(0,Math.ceil((h-T)/s)),C=Math.min(a.outWidth,(a.inWidth+h-T)/s),R=0;R<a.outChannels;++R){for(var k=Math.trunc(R/v),N=R%v,O=0,D=0;D<a.batchSize;++D)for(var M=S;M<w;++M)for(var P=x+M*o-p,F=A;F<C;++F){var U=T+F*s-h;O+=g.get(D,P,U,k)*y.get(D,M,F,R)}f.set(O,x,T,k,N)}return f.toTensor()},n.prototype.tile=function(e,r){return be(e,"tile"),eR(this.bufferSync(e),r)},n.prototype.pad=function(e,r,a){be(e,"pad");var o=r.map(function(v,g){return v[0]+e.shape[g]+v[1]}),s=r.map(function(v){return v[0]}),l=this.bufferSync(e),c=Ve(o,e.dtype);a!==0&&c.values.fill(a);for(var f=0;f<e.size;f++){var h=l.indexToLoc(f),p=h.map(function(v,g){return v+s[g]});c.set.apply(c,[l.get.apply(l,h)].concat(p))}return c.toTensor()},n.prototype.transpose=function(e,r){be(e,"transpose");for(var a=new Array(e.rank),o=0;o<a.length;o++)a[o]=e.shape[r[o]];var s=this.readSync(e.dataId),l=Ve(a,e.dtype),c=this.bufferSync(e);for(o=0;o<e.size;++o){for(var f=c.indexToLoc(o),h=new Array(f.length),p=0;p<h.length;p++)h[p]=f[r[p]];var v=l.locToIndex(h);l.values[v]=s[o]}return l.toTensor()},n.prototype.gather=function(e,r,a){be([e,r],"gather");var o=e.shape.slice(),s=this.readSync(r.dataId);o[a]=s.length;for(var l=Ve(o,e.dtype),c=this.bufferSync(e),f=0;f<l.size;++f){var h=l.indexToLoc(f),p=h.slice();p[a]=s[h[a]];var v=c.locToIndex(p);l.values[f]=c.values[v]}return l.toTensor()},n.prototype.batchToSpaceND=function(e,r,a){be([e],"batchToSpaceND");var o=r.reduce(function(p,v){return p*v}),s=wd(e.shape,r,o),l=xd(s.length,r.length),c=Sd(e.shape,r,o),f=U_(a,r.length),h=q_(c,a,r.length);return e.reshape(s).transpose(l).reshape(c).slice(f,h)},n.prototype.spaceToBatchND=function(e,r,a){be([e],"spaceToBatchND");var o=r.reduce(function(v,g){return v*g}),s=[[0,0]];s.push.apply(s,a);for(var l=1+r.length;l<e.shape.length;++l)s.push([0,0]);var c=e.pad(s),f=wd(c.shape,r,o,!1),h=xd(f.length,r.length,!1),p=Sd(c.shape,r,o,!1);return c.reshape(f).transpose(h).reshape(p)},n.prototype.pool=function(e,r,a){be(e,"pool");for(var o=r.strideHeight,s=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,v=r.padInfo.left,g=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=this.readSync(e.dataId),x=Ve(r.outShape,e.dtype),S=x.values,w=r.outShape[1]*r.outShape[2]*r.outShape[3],T=r.outShape[2]*r.outShape[3],A=r.outShape[3],C=0;C<r.batchSize;++C)for(var R=C*w,k=C*e.strides[0],N=0;N<r.inChannels;++N)for(var O=0;O<r.outHeight;++O)for(var D=O*o-p,M=Math.max(0,D),P=Math.min(r.inHeight,f+D),F=R+O*T,U=0;U<r.outWidth;++U){for(var W=U*s-v,Y=Math.max(0,W),z=Math.min(r.inWidth,h+W),X=g,K=0,V=0,I=M;I<P;I+=l){for(var H=k+I*e.strides[1],Q=Y;Q<z;Q+=c){var J=y[H+Q*e.strides[2]+N];a==="max"&&J>X?X=J:a==="avg"&&(K+=J,V++)}if(isNaN(X))break}S[F+U*A+N]=a==="avg"?K/V:X}return x.toTensor()},n.prototype.maxPool=function(e,r){return this.pool(e,r,"max")},n.prototype.maxPoolPositions=function(e,r){for(var a=Ve(r.outShape,"int32"),o=r.strideHeight,s=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,v=r.padInfo.left,g=this.bufferSync(e),y=0;y<r.batchSize;++y)for(var x=0;x<r.inChannels;++x)for(var S=0;S<r.outHeight;++S){for(var w=S*o-p,T=w;T<0;)T+=l;for(var A=Math.min(r.inHeight,f+w),C=0;C<r.outWidth;++C){for(var R=C*s-v,k=R;k<0;)k+=c;for(var N=Math.min(r.inWidth,h+R),O=Number.NEGATIVE_INFINITY,D=-1,M=T;M<A;M+=l)for(var P=M-w,F=k;F<N;F+=c){var U=F-R,W=g.get(y,M,F,x);W>O&&(O=W,D=P*h+U)}a.set(D,y,S,C,x)}}return a.toTensor()},n.prototype.maxPoolBackprop=function(e,r,a,o){be([r,a],"maxPoolBackprop");for(var s=this.maxPoolPositions(r,o),l=o.strideHeight,c=o.strideWidth,f=o.dilationHeight,h=o.dilationWidth,p=o.effectiveFilterHeight,v=o.effectiveFilterWidth,g=v-1-o.padInfo.left,y=p-1-o.padInfo.top,x=Ve(r.shape,"float32"),S=this.bufferSync(s),w=this.bufferSync(e),T=0;T<o.batchSize;++T)for(var A=0;A<o.inChannels;++A)for(var C=0;C<o.inHeight;++C)for(var R=0;R<o.inWidth;++R){for(var k=C-y,N=R-g,O=0,D=0;D<p;D+=f){var M=(k+D)/l;if(!(M<0||M>=o.outHeight||Math.floor(M)!==M))for(var P=0;P<v;P+=h){var F=(N+P)/c;if(!(F<0||F>=o.outWidth||Math.floor(F)!==F)){var U=p*v-1-S.get(T,M,F,A)===D*v+P?1:0;U!==0&&(O+=w.get(T,M,F,A)*U)}}}x.set(O,T,C,R,A)}return x.toTensor()},n.prototype.avgPoolBackprop=function(e,r,a){be([e,r],"avgPoolBackprop");for(var o=a.strideHeight,s=a.strideWidth,l=a.filterHeight,c=a.filterWidth,f=a.dilationHeight,h=a.dilationWidth,p=a.effectiveFilterHeight,v=a.effectiveFilterWidth,g=v-1-a.padInfo.left,y=p-1-a.padInfo.top,x=Ve(r.shape,"float32"),S=1/(l*c),w=this.bufferSync(e),T=0;T<a.batchSize;++T)for(var A=0;A<a.inChannels;++A)for(var C=0;C<a.inHeight;++C)for(var R=0;R<a.inWidth;++R){for(var k=C-y,N=R-g,O=0,D=0;D<p;D+=f){var M=(k+D)/o;if(!(M<0||M>=a.outHeight||Math.floor(M)!==M))for(var P=0;P<v;P+=h){var F=(N+P)/s;F<0||F>=a.outWidth||Math.floor(F)!==F||(O+=w.get(T,M,F,A))}}x.set(O*S,T,C,R,A)}return x.toTensor()},n.prototype.pool3d=function(e,r,a){be(e,"pool3d");for(var o=r.strideDepth,s=r.strideHeight,l=r.strideWidth,c=r.dilationDepth,f=r.dilationHeight,h=r.dilationWidth,p=r.effectiveFilterDepth,v=r.effectiveFilterHeight,g=r.effectiveFilterWidth,y=r.padInfo.front,x=r.padInfo.top,S=r.padInfo.left,w=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,T=this.readSync(e.dataId),A=Ve(r.outShape,e.dtype),C=A.values,R=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],k=r.outShape[2]*r.outShape[3]*r.outShape[4],N=r.outShape[3]*r.outShape[4],O=r.outShape[4],D=0;D<r.batchSize;++D)for(var M=D*R,P=D*e.strides[0],F=0;F<r.inChannels;++F)for(var U=0;U<r.outDepth;++U){for(var W=U*o-y,Y=W;Y<0;)Y+=c;for(var z=Math.min(r.inDepth,p+W),X=M+U*k,K=0;K<r.outHeight;++K){for(var V=K*s-x,I=V;I<0;)I+=f;for(var H=Math.min(r.inHeight,v+V),Q=X+K*N,J=0;J<r.outWidth;++J){for(var re=J*l-S,ie=re;ie<0;)ie+=h;for(var pe=Math.min(r.inWidth,g+re),Se=Q+J*O,xe=w,Ee=0,de=0,we=Y;we<z;we+=c){for(var Ce=P+we*e.strides[1],Ae=I;Ae<H;Ae+=f){for(var Fe=Ce+Ae*e.strides[2],ot=ie;ot<pe;ot+=h){var Ye=T[Fe+ot*e.strides[3]+F];if(a==="max"&&Ye>xe?xe=Ye:a==="avg"&&(Ee+=Ye,de++),isNaN(xe))break}if(isNaN(xe))break}if(isNaN(xe))break}C[Se+F]=a==="avg"?Ee/de:xe}}}return A.toTensor()},n.prototype.avgPool3d=function(e,r){return be(e,"avgPool3d"),this.pool3d(e,r,"avg").toFloat()},n.prototype.avgPool3dBackprop=function(e,r,a){be([e,r],"avgPool3dBackprop");for(var o=a.strideDepth,s=a.strideHeight,l=a.strideWidth,c=a.filterDepth,f=a.filterHeight,h=a.filterWidth,p=a.dilationDepth,v=a.dilationHeight,g=a.dilationWidth,y=a.effectiveFilterDepth,x=a.effectiveFilterHeight,S=a.effectiveFilterWidth,w=y-1-a.padInfo.front,T=S-1-a.padInfo.left,A=x-1-a.padInfo.top,C=Ve(r.shape,"float32"),R=1/(c*f*h),k=this.bufferSync(e),N=0;N<a.batchSize;++N)for(var O=0;O<a.inChannels;++O)for(var D=0;D<a.inDepth;++D)for(var M=0;M<a.inHeight;++M)for(var P=0;P<a.inWidth;++P){for(var F=D-w,U=M-A,W=P-T,Y=0,z=0;z<y;z+=p){var X=(F+z)/o;if(!(X<0||X>=a.outDepth||Math.floor(X)!==X))for(var K=0;K<x;K+=v){var V=(U+K)/s;if(!(V<0||V>=a.outHeight||Math.floor(V)!==V))for(var I=0;I<S;I+=g){var H=(W+I)/l;H<0||H>=a.outWidth||Math.floor(H)!==H||(Y+=k.get(N,X,V,H,O))}}}C.set(Y*R,N,D,M,P,O)}return C.toTensor()},n.prototype.maxPool3d=function(e,r){return be(e,"maxPool3d"),this.pool3d(e,r,"max").toFloat()},n.prototype.maxPool3dPositions=function(e,r){for(var a=Ve(r.outShape,"int32"),o=r.strideDepth,s=r.strideHeight,l=r.strideWidth,c=r.dilationDepth,f=r.dilationHeight,h=r.dilationWidth,p=r.effectiveFilterDepth,v=r.effectiveFilterHeight,g=r.effectiveFilterWidth,y=r.padInfo.front,x=r.padInfo.top,S=r.padInfo.left,w=this.bufferSync(e),T=0;T<r.batchSize;++T)for(var A=0;A<r.inChannels;++A)for(var C=0;C<r.outDepth;++C){for(var R=C*o-y,k=R;k<0;)k+=c;for(var N=Math.min(r.inDepth,p+R),O=0;O<r.outHeight;++O){for(var D=O*s-x,M=D;M<0;)M+=f;for(var P=Math.min(r.inHeight,v+D),F=0;F<r.outWidth;++F){for(var U=F*l-S,W=U;W<0;)W+=h;for(var Y=Math.min(r.inWidth,g+U),z=Number.NEGATIVE_INFINITY,X=-1,K=k;K<N;K+=c)for(var V=K-R,I=M;I<P;I+=f)for(var H=I-D,Q=W;Q<Y;Q+=h){var J=Q-U,re=w.get(T,K,I,Q,A);re>=z&&(z=re,X=V*v*g+H*v+J)}a.set(X,T,C,O,F,A)}}}return a.toTensor()},n.prototype.maxPool3dBackprop=function(e,r,a,o){be([r,a],"maxPool3dBackprop");for(var s=this.maxPool3dPositions(r,o),l=o.strideDepth,c=o.strideHeight,f=o.strideWidth,h=o.dilationDepth,p=o.dilationHeight,v=o.dilationWidth,g=o.effectiveFilterDepth,y=o.effectiveFilterHeight,x=o.effectiveFilterWidth,S=g-1-o.padInfo.front,w=x-1-o.padInfo.left,T=y-1-o.padInfo.top,A=Ve(r.shape,"float32"),C=this.bufferSync(s),R=this.bufferSync(e),k=0;k<o.batchSize;++k)for(var N=0;N<o.inChannels;++N)for(var O=0;O<o.inDepth;++O)for(var D=0;D<o.inHeight;++D)for(var M=0;M<o.inWidth;++M){for(var P=O-S,F=D-T,U=M-w,W=0,Y=0;Y<g;Y+=h){var z=(P+Y)/l;if(!(z<0||z>=o.outDepth||Math.floor(z)!==z))for(var X=0;X<y;X+=p){var K=(F+X)/c;if(!(K<0||K>=o.outHeight||Math.floor(K)!==K))for(var V=0;V<x;V+=v){var I=(U+V)/f;if(!(I<0||I>=o.outWidth||Math.floor(I)!==I)){var H=g*y*x-1-C.get(k,z,K,I,N)===Y*y*x+X*x+V?1:0;H!==0&&(W+=R.get(k,z,K,I,N)*H)}}}}A.set(W,k,O,D,M,N)}return A.toTensor()},n.prototype.cast=function(e,r){return $_(e,r,this)},n.prototype.reshape=function(e,r){return Mg(e,r)},n.prototype.avgPool=function(e,r){return be(e,"avgPool"),this.pool(e,r,"avg").toFloat()},n.prototype.resizeBilinear=function(e,r,a,o){be(e,"resizeBilinear");for(var s=e.shape,l=s[0],c=s[1],f=s[2],h=s[3],p=this.readSync(e.dataId),v=new Float32Array(De([l,r,a,h])),g=[o&&r>1?c-1:c,o&&a>1?f-1:f],y=[o&&r>1?r-1:r,o&&a>1?a-1:a],x=0,S=g[0]/y[0],w=g[1]/y[1],T=0;T<l;T++)for(var A=0;A<r;A++)for(var C=S*A,R=Math.floor(C),k=C-R,N=Math.min(c-1,Math.ceil(C)),O=T*e.strides[0]+R*e.strides[1],D=T*e.strides[0]+N*e.strides[1],M=0;M<a;M++)for(var P=w*M,F=Math.floor(P),U=P-F,W=Math.min(f-1,Math.ceil(P)),Y=O+F*e.strides[2],z=D+F*e.strides[2],X=O+W*e.strides[2],K=D+W*e.strides[2],V=0;V<h;V++){var I=p[Y+V],H=p[z+V],Q=I+(p[X+V]-I)*U,J=Q+(H+(p[K+V]-H)*U-Q)*k;v[x++]=J}return vn(v,[l,r,a,h])},n.prototype.resizeBilinearBackprop=function(e,r,a){be([e,r],"resizeBilinearBackprop");for(var o=r.shape,s=o[0],l=o[1],c=o[2],f=o[3],h=e.shape,p=h[1],v=h[2],g=new Float32Array(s*l*c*f),y=[a&&p>1?l-1:l,a&&v>1?c-1:c],x=[a&&p>1?p-1:p,a&&v>1?v-1:v],S=y[0]/x[0],w=y[1]/x[1],T=this.readSync(e.dataId),A=0,C=0;C<s;C++)for(var R=C*r.strides[0],k=0;k<p;k++)for(var N=k*S,O=Math.floor(N),D=Math.min(Math.ceil(N),l-1),M=R+O*r.strides[1],P=R+D*r.strides[1],F=N-O,U=1-F,W=0;W<v;W++)for(var Y=W*w,z=Math.floor(Y),X=Math.min(Math.ceil(Y),c-1),K=Y-z,V=1-K,I=M+z*r.strides[2],H=M+X*r.strides[2],Q=P+z*r.strides[2],J=P+X*r.strides[2],re=U*V,ie=U*K,pe=F*V,Se=F*K,xe=0;xe<f;xe++){var Ee=T[A++];g[I+xe]+=Ee*re,g[H+xe]+=Ee*ie,g[Q+xe]+=Ee*pe,g[J+xe]+=Ee*Se}return Ln(g,[s,c,l,f],r.dtype)},n.prototype.resizeNearestNeighbor=function(e,r,a,o){be(e,"resizeNearestNeighbor");for(var s=e.shape,l=s[0],c=s[1],f=s[2],h=s[3],p=this.readSync(e.dataId),v=new Float32Array(l*r*a*h),g=[o&&r>1?c-1:c,o&&a>1?f-1:f],y=[o&&r>1?r-1:r,o&&a>1?a-1:a],x=g[0]/y[0],S=g[1]/y[1],w=0,T=0;T<l;T++)for(var A=T*e.strides[0],C=0;C<r;C++)for(var R=x*C,k=A+Math.min(c-1,o?Math.round(R):Math.floor(R))*e.strides[1],N=0;N<a;N++)for(var O=S*N,D=k+Math.min(f-1,o?Math.round(O):Math.floor(O))*e.strides[2],M=0;M<h;M++){var P=p[D+M];v[w++]=P}return vn(v,[l,r,a,h],e.dtype)},n.prototype.resizeNearestNeighborBackprop=function(e,r,a){be([e,r],"resizeNearestNeighborBackprop");for(var o=r.shape,s=o[0],l=o[1],c=o[2],f=o[3],h=e.shape,p=h[1],v=h[2],g=new Float32Array(s*l*c*f),y=this.readSync(e.dataId),x=[a&&p>1?l-1:l,a&&v>1?c-1:c],S=[a&&p>1?p-1:p,a&&v>1?v-1:v],w=x[0]/S[0],T=x[1]/S[1],A=1/w,C=1/T,R=2*Math.ceil(A)+2,k=2*Math.ceil(C)+2,N=0;N<s;N++)for(var O=N*r.strides[0],D=0;D<l;D++)for(var M=O+D*r.strides[1],P=Math.floor(D*A),F=Math.floor(P-R/2),U=0;U<c;U++)for(var W=M+U*r.strides[2],Y=Math.floor(U*C),z=Math.floor(Y-k/2),X=0;X<f;X++){for(var K=0,V=0;V<R;V++){var I=V+F;if(!(I<0||I>=p)){var H=O+I*e.strides[1],Q=I*w;if(D===Math.min(l-1,a?Math.round(Q):Math.floor(Q)))for(var J=0;J<k;J++){var re=J+z;if(!(re<0||re>=v)){var ie=H+re*e.strides[2],pe=re*T;U===Math.min(c-1,a?Math.round(pe):Math.floor(pe))&&(K+=y[ie+X])}}}}g[W+X]=K}return Ln(g,r.shape,r.dtype)},n.prototype.batchNormalization=function(e,r,a,o,s,l){be([e,r,a,s,l],"batchNorm");for(var c=this.readSync(e.dataId),f=this.readSync(r.dataId),h=this.readSync(a.dataId),p=s?this.readSync(s.dataId):new Float32Array([1]),v=l?this.readSync(l.dataId):new Float32Array([0]),g=new Float32Array(c.length),y=v.length,x=p.length,S=h.length,w=f.length,T=0,A=0,C=0,R=0,k=0;k<c.length;++k)g[k]=v[T++]+(c[k]-f[A++])*p[C++]/Math.sqrt(h[R++]+o),T>=y&&(T=0),A>=w&&(A=0),C>=x&&(C=0),R>=S&&(R=0);return Ln(g,e.shape)},n.prototype.localResponseNormalization4D=function(e,r,a,o,s){be(e,"localResponseNormalization4D");var l=e.shape[3],c=l-1,f=this.readSync(e.dataId),h=e.size,p=new Float32Array(h);function v(S){for(var w=S%l,T=S-w+Math.max(0,w-r),A=S-w+Math.min(w+r,c),C=0;T<=A;T++){var R=f[T];C+=R*R}return C}for(var g=0;g<h;g++){var y=v(g),x=f[g]*Math.pow(a+o*y,-s);p[g]=x}return Ln(p,e.shape)},n.prototype.LRNGrad=function(e,r,a,o,s,l,c){be(e,"LRNGrad");for(var f=e.shape[3],h=this.readSync(e.dataId),p=this.readSync(r.dataId),v=this.readSync(a.dataId),g=new Float32Array(e.size),y=e.size,x=0;x<y;x++){for(var S=x%f,w=x-S+Math.max(0,S-o),T=x-S+Math.min(f,S+o+1),A=0,C=w;C<T;C++)A+=Math.pow(p[C],2);for(A=l*A+s,C=w;C<T;C++){var R=-2*l*c*p[C]*v[x]/A;x===C&&(R+=Math.pow(A,-c)),R*=h[x],g[C]+=R}}return Ln(g,e.shape)},n.prototype.multinomial=function(e,r,a,o){be(e,"multinomial");for(var s=r?e:za(e),l=s.shape[0],c=s.shape[1],f=St([l,a],"int32"),h=this.readSync(f.dataId),p=this.readSync(s.dataId),v=0;v<l;++v){var g=v*c,y=new Float32Array(c-1);y[0]=p[g];for(var x=1;x<y.length;++x)y[x]=y[x-1]+p[g+x];for(var S=rh(o.toString()),w=v*a,T=0;T<a;++T){var A=S();h[w+T]=y.length;for(var C=0;C<y.length;C++)if(A<y[C]){h[w+T]=C;break}}}return f},n.prototype.oneHot=function(e,r,a,o){be(e,"oneHot");var s=new Float32Array(e.size*r);s.fill(o);for(var l=this.readSync(e.dataId),c=0;c<e.size;++c)l[c]>=0&&l[c]<r&&(s[c*r+l[c]]=a);return Co(s,[e.size,r],"int32")},n.prototype.nonMaxSuppression=function(e,r,a,o,s){return be(e,"nonMaxSuppression"),Fy(this.readSync(e.dataId),this.readSync(r.dataId),a,o,s)},n.prototype.fft=function(e){return this.fftBatch(e,!1)},n.prototype.ifft=function(e){return this.fftBatch(e,!0)},n.prototype.fftBatch=function(e,r){for(var a=e.shape[0],o=e.shape[1],s=Ve(e.shape,"float32"),l=Ve(e.shape,"float32"),c=Er(e).as2D(a,o),f=ta(e).as2D(a,o),h=0;h<a;h++)for(var p=c.slice([h,0],[1,o]),v=f.slice([h,0],[1,o]),g=pn(p,v),y=this.readSync(this.fftImpl(g,r).dataId),x=0;x<o;x++){var S=mS(y,x);s.values[h*o+x]=S.real,l.values[h*o+x]=S.imag}return pn(s.toTensor(),l.toTensor()).as2D(a,o)},n.prototype.fftImpl=function(e,r){var a=e.as1D(),o=a.size;if(this.isExponentOf2(o)){var s=this.fftRadix2(a,o,r).as2D(e.shape[0],e.shape[1]);return r&&(s=pn(Er(s).div(_e(o)),ta(s).div(_e(o)))),s}var l=this.readSync(e.dataId),c=function(f){for(var h=new Float32Array(f.length/2),p=new Float32Array(f.length/2),v=0;v<f.length;v+=2)h[v/2]=f[v],p[v/2]=f[v+1];return{real:h,imag:p}}(this.fourierTransformByMatmul(l,o,r));return pn(c.real,c.imag).as2D(e.shape[0],e.shape[1])},n.prototype.isExponentOf2=function(e){return(e&e-1)==0},n.prototype.fftRadix2=function(e,r,a){if(r===1)return e;var o=this.readSync(e.dataId),s=r/2,l=function(w){for(var T=Math.ceil(w.length/4),A=new Float32Array(T),C=new Float32Array(T),R=0;R<w.length;R+=4)A[Math.floor(R/4)]=w[R],C[Math.floor(R/4)]=w[R+1];return{real:A,imag:C}}(o),c=pn(l.real,l.imag).as1D(),f=function(w){for(var T=Math.floor(w.length/4),A=new Float32Array(T),C=new Float32Array(T),R=2;R<w.length;R+=4)A[Math.floor(R/4)]=w[R],C[Math.floor(R/4)]=w[R+1];return{real:A,imag:C}}(o),h=pn(f.real,f.imag).as1D();c=this.fftRadix2(c,s,a),h=this.fftRadix2(h,s,a);var p=function(w,T){for(var A=new Float32Array(w/2),C=new Float32Array(w/2),R=0;R<Math.ceil(w/2);R++){var k=(T?2:-2)*Math.PI*(R/w);A[R]=Math.cos(k),C[R]=Math.sin(k)}return{real:A,imag:C}}(r,a),v=pn(p.real,p.imag).mul(h),g=c.add(v),y=c.sub(v),x=Er(g).concat(Er(y)),S=ta(g).concat(ta(y));return pn(x,S).as1D()},n.prototype.fourierTransformByMatmul=function(e,r,a){for(var o=new Float32Array(2*r),s=0;s<r;s++){for(var l=0,c=0,f=0;f<r;f++){var h=GL(s*f,r,a),p=mS(e,f);l+=p.real*h.real-p.imag*h.imag,c+=p.real*h.imag+p.imag*h.real}a&&(l/=r,c/=r),WL(o,l,c,s)}return o},n.prototype.depthToSpace=function(e,r,a){G(a==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+a}),G(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var o=e.shape[0],s=e.shape[1],l=e.shape[2],c=e.shape[3],f=s*r,h=l*r,p=c/(r*r),v=this.readSync(e.dataId),g=new Float32Array(o*f*h*p),y=0,x=0;x<o;++x)for(var S=0;S<f;++S)for(var w=Math.floor(S/r),T=S%r,A=0;A<h;++A)for(var C=Math.floor(A/r),R=(T*r+A%r)*p,k=0;k<p;++k){var N=k+R+c*(C+l*(w+s*x));g[y++]=v[N]}return Ln(g,[o,f,h,p])},n.prototype.broadcastedBinaryOp=function(e,r,a,o){var s=tt(e.shape,r.shape),l=Ve(s,a),c=this.readSync(e.dataId),f=this.readSync(r.dataId),h=So(e.shape,s),p=So(r.shape,s),v=l.values;if(h.length+p.length===0)for(var g=0;g<v.length;++g)v[g]=o(c[g%c.length],f[g%f.length]);else{var y=this.bufferSync(e),x=this.bufferSync(r),S=function(w){var T=l.indexToLoc(w),A=T.slice(-e.rank);h.forEach(function(N){return A[N]=0});var C=y.locToIndex(A),R=T.slice(-r.rank);p.forEach(function(N){return R[N]=0});var k=x.locToIndex(R);v[w]=o(c[C],f[k])};for(g=0;g<v.length;++g)S(g)}return l.toTensor()},n.prototype.broadcastedBinaryComplexOp=function(e,r,a){var o=tt(e.shape,r.shape),s=Ve(o,"float32"),l=Ve(o,"float32"),c=this.readSync(e.dataId),f=this.readSync(r.dataId),h=So(e.shape,o),p=So(r.shape,o),v=s.values,g=l.values;if(h.length+p.length===0)for(var y=0;y<v.length;y++){var x=y%c.length,S=y%f.length,w=a(c[2*x],c[2*x+1],f[2*S],f[2*S+1]);v[y]=w.real,g[y]=w.imag}else{var T=this.bufferSync(this.data.get(e.dataId).complexTensors.real),A=this.bufferSync(this.data.get(r.dataId).complexTensors.real),C=function(R){var k=s.indexToLoc(R),N=k.slice(-e.rank);h.forEach(function(F){return N[F]=0});var O=T.locToIndex(N),D=k.slice(-r.rank);p.forEach(function(F){return D[F]=0});var M=A.locToIndex(D),P=a(c[2*O],c[2*O+1],f[2*M],f[2*M+1]);v[R]=P.real,g[R]=P.imag};for(y=0;y<v.length;y++)C(y)}return this.complex(s.toTensor(),l.toTensor())},n.prototype.split=function(e,r,a){return J_(e,r,a)},n.prototype.dispose=function(){},n.prototype.floatPrecision=function(){return 32},n.prototype.epsilon=function(){return 1e-7},n.prototype.cropAndResize=function(e,r,a,o,s,l){for(var c=e.shape,f=c[0],h=c[1],p=c[2],v=c[3],g=r.shape[0],y=o[0],x=o[1],S=Ve([g,y,x,v],"float32"),w=this.readSync(r.dataId),T=this.readSync(a.dataId),A=this.readSync(e.dataId),C=e.strides,R=S.strides,k=0;k<g;k++){var N=4*k,O=w[N],D=w[N+1],M=w[N+2],P=w[N+3],F=T[k];if(!(F>=f))for(var U=y>1?(M-O)*(h-1)/(y-1):0,W=x>1?(P-D)*(p-1)/(x-1):0,Y=0;Y<y;Y++){var z=y>1?O*(h-1)+Y*U:.5*(O+M)*(h-1);if(z<0||z>h-1)for(var X=0;X<x;X++)for(var K=0;K<v;K++){var V=K+X*R[2]+Y*R[1]+k*R[0];S.values[V]=l}else if(s==="bilinear"){var I=Math.floor(z),H=Math.ceil(z),Q=z-I;for(X=0;X<x;X++)if((we=x>1?D*(p-1)+X*W:.5*(D+P)*(p-1))<0||we>p-1)for(K=0;K<v;K++)V=K+X*R[2]+Y*R[1]+k*R[0],S.values[V]=l;else{var J=Math.floor(we),re=Math.ceil(we),ie=we-J;for(K=0;K<v;K++){var pe=A[V=K+J*C[2]+I*C[1]+F*C[0]],Se=A[V=K+re*C[2]+I*C[1]+F*C[0]],xe=A[V=K+J*C[2]+H*C[1]+F*C[0]],Ee=pe+(Se-pe)*ie,de=xe+(A[V=K+re*C[2]+H*C[1]+F*C[0]]-xe)*ie;V=K+X*R[2]+Y*R[1]+k*R[0],S.values[V]=Ee+(de-Ee)*Q}}}else for(X=0;X<x;++X){var we;if((we=x>1?D*(p-1)+X*W:.5*(D+P)*(p-1))<0||we>p-1)for(K=0;K<v;K++)V=K+X*R[2]+Y*R[1]+k*R[0],S.values[V]=l;else{var Ce=Math.round(we),Ae=Math.round(z);for(K=0;K<v;K++){var Fe=K+Ce*C[2]+Ae*C[1]+F*C[0],ot=K+X*R[2]+Y*R[1]+k*R[0];S.values[ot]=A[Fe]}}}}}return S.toTensor()},n.prototype.sparseToDense=function(e,r,a,o){var s=Ed(0,e,a),l=s.sliceRank,c=s.numUpdates,f=s.sliceSize,h=s.strides,p=s.outputSize;return this.scatter(e,r,a,p,f,c,l,h,o,!1)},n.prototype.gatherND=function(e,r){var a=r.shape,o=a[a.length-1],s=H_(e,r),l=s[0],c=s[1],f=s[2],h=s[3];if(c===0)return vn([],l,e.dtype);for(var p=new El([c,f],e.dtype),v=this.readSync(r.dataId),g=this.readSync(e.dataId),y=0;y<c;y++){for(var x=[],S=0,w=0;w<o;w++){var T=v[y*o+w];S+=T*h[w],x.push(T)}if(S<0||S>=e.size/f)throw new Error("Invalid indices: "+x+" does not index into "+e.shape);for(var A=0;A<f;A++)p.values[y*f+A]=g[S*f+A]}return p.toTensor().reshape(l)},n.prototype.scatterND=function(e,r,a){var o=Ed(0,e,a),s=o.sliceRank,l=o.numUpdates,c=o.sliceSize,f=o.strides,h=o.outputSize,p=_e(0);return this.scatter(e,r,a,h,c,l,s,f,p,!0)},n.prototype.fill=function(e,r,a){var o=hd(a=a||Gl(r),De(e));return o.fill(r),te.makeTensor(o,e,a,this)},n.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},n.prototype.zerosLike=function(e){var r=hd(e.dtype,De(e.shape));return this.makeOutput(r,e.shape,e.dtype)},n.prototype.linspace=function(e,r,a){return Q_(e,r,a)},n.prototype.scatter=function(e,r,a,o,s,l,c,f,h,p){var v=[o/s,s],g=this.readSync(e.dataId),y=this.readSync(r.dataId);if(o===0)return vn([],a,r.dtype);var x=new El(v,r.dtype);x.values.fill(this.readSync(h.dataId)[0]);for(var S=0;S<l;S++){for(var w=[],T=0,A=0;A<c;A++){var C=g[S*c+A];w.push(C),T+=C*f[A]}if(T<0||T>=o/s)throw new Error("Invalid indices: "+w+" does not index into "+a);for(var R=0;R<s;R++)p?x.values[T*s+R]+=y[S*s+R]:x.values[T*s+R]=r.rank===0?y[0]:y[S*s+R]}return x.toTensor().reshape(a)},n}(Y_);te.registerBackend("cpu",function(){return new d6},1);for(var Wv=0,PS=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=t.attrs,a=n,o=a.boxes,s=a.scores,l=r,c=l.maxOutputSize,f=l.iouThreshold,h=l.scoreThreshold,p=l.softNmsSigma,v=e;be(o,"NonMaxSuppressionWithScore");var g=Py(v.data.get(o.dataId).values,v.data.get(s.dataId).values,c,f,h,p);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n.x,a=e;be(r,"square");for(var o=a.data.get(r.dataId).values,s=new Float32Array(o.length),l=0;l<o.length;++l){var c=o[l];s[l]=c*c}return{dataId:a.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:Rl,backendName:"cpu",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n,a=r.a,o=r.b,s=e;be([a,o],Rl);var l=s.data.get(a.dataId).values,c=s.data.get(o.dataId).values,f=function(v,g,y,x,S,w){var T=tt(v,g),A=T.length,C=aa(T),R=Sl(S,De(T)),k=v.length,N=g.length,O=aa(v),D=aa(g),M=So(v,T),P=So(g,T);if(M.length+P.length===0)for(var F=0;F<R.length;++F)R[F]=w(y[F%y.length],x[F%x.length]);else{var U=function(W){var Y=SP(W,A,C),z=Y.slice(-k);M.forEach(function(I){return z[I]=0});var X=iS(z,k,O),K=Y.slice(-N);P.forEach(function(I){return K[I]=0});var V=iS(K,N,D);R[W]=w(y[X],x[V])};for(F=0;F<R.length;++F)U(F)}return[R,T]}(a.shape,o.shape,l,c,a.dtype,function(v,g){var y=v-g;return y*y}),h=f[0],p=f[1];return{dataId:s.write(h,p,a.dtype),shape:p,dtype:a.dtype}}}];Wv<PS.length;Wv++)S_(PS[Wv]);var gs,h6=function(t){this.variableNames=["A"];var n=Cn(),e=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+e+`.0);

        vec4 values = `+n.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},p6=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=Cn(),e=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+e+`.0);
            vec4 values = `+n.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+n.output+` = result;
      }
    `};for(var Gv=0,LS=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=t.attrs,a=n.pixels,o=r.numChannels,s=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,l=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,c=s?[a.videoWidth,a.videoHeight]:[a.width,a.height],f=c[0],h=c[1],p=[h,f],v=[h,f,o];(l||s)&&(gs==null&&(gs=document.createElement("canvas").getContext("2d")),gs.canvas.width=f,gs.canvas.height=h,gs.drawImage(a,0,0,f,h),a=gs.canvas);var g=e.makeTensorInfo(p,"int32");e.texData.get(g.dataId).usage=rr.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(g.dataId),a);var y=me().getBool("WEBGL_PACK")?new p6(v):new h6(v),x=e.runWebGLProgram(y,[g],"int32");return e.disposeData(g.dataId),x}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=t.attrs;gd("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=n,o=a.boxes,s=a.scores,l=r,c=l.maxOutputSize,f=l.iouThreshold,h=l.scoreThreshold,p=l.softNmsSigma,v=e,g=Py(v.readSync(o.dataId),v.readSync(s.dataId),c,f,h,p);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n.x,a=e,o=new Xe(r.shape,"return x * x;");return a.runWebGLProgram(o,[r],r.dtype)}},{kernelName:Rl,backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n,a=r.a,o=r.b,s=e,l=me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oa("return (a - b) * (a - b);",a.shape,o.shape):new Ot("return (a - b) * (a - b);",a.shape,o.shape);return s.compileAndRun(l,[a,o])}}];Gv<LS.length;Gv++)S_(LS[Gv]);for(var Xv=0,jS=[{kernelName:"Square",gradFunc:function(t,n){var e=n[0];return{x:function(){return t.mul(e.toFloat().mul(2))}}}},{kernelName:Rl,gradFunc:function(t,n){var e=n[0],r=n[1],a=_e(2);return{a:function(){return Rn(t,Rn(a,$t(e,r)))},b:function(){return Rn(t,Rn(a,$t(r,e)))}}}}];Xv<jS.length;Xv++)fP(jS[Xv]);var m6=function(){function t(){}return t.prototype.fetch=function(n,e){return fetch(n,e)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+e);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(n)},t.prototype.decode=function(n,e){return new TextDecoder(e).decode(n)},t}();me().get("IS_BROWSER")&&me().setPlatform("browser",new m6);var Yv,v6=function(){return require("node-fetch")},g6=function(){function t(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(n,e){return me().global.fetch!=null?me().global.fetch(n,e):(Yv==null&&(Yv=v6()),Yv(n,e))},t.prototype.now=function(){var n=process.hrtime();return 1e3*n[0]+n[1]/1e6},t.prototype.encode=function(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(n)},t.prototype.decode=function(n,e){return n.length===0?"":new this.util.TextDecoder(e).decode(n)},t}();me().get("IS_NODE")&&me().setPlatform("node",new g6);var Fg={float32:4,int32:4,uint16:2,uint8:1,bool:1},Nd=4;function WR(t,n){for(var e={},r=0,a=function(l){var c=l.name,f=l.dtype,h=l.shape,p=De(h),v=void 0;if("quantization"in l){var g=l.quantization;if(g.dtype!=="uint8"&&g.dtype!=="uint16")throw new Error("Weight "+l.name+" has unknown quantization dtype "+g.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var y=Fg[g.dtype],x=t.slice(r,r+p*y),S=g.dtype==="uint8"?new Uint8Array(x):new Uint16Array(x);if(f==="float32")v=Float32Array.from(S,function(k){return k*g.scale+g.min});else{if(f!=="int32")throw new Error("Unsupported dtype in weight '"+c+"': "+f);v=Int32Array.from(S,function(k){return Math.round(k*g.scale+g.min)})}r+=p*y}else if(f==="string"){var w=De(l.shape);v=[];for(var T=0;T<w;T++){var A=new Uint32Array(t.slice(r,r+Nd))[0];r+=Nd;var C=new Uint8Array(t.slice(r,r+A));v.push(C),r+=A}}else{var R=Fg[f];if(x=t.slice(r,r+p*R),f==="float32")v=new Float32Array(x);else if(f==="int32")v=new Int32Array(x);else{if(f!=="bool")throw new Error("Unsupported dtype in weight '"+c+"': "+f);v=new Uint8Array(x)}r+=p*R}e[c]=vn(v,h,f)},o=0,s=n;o<s.length;o++)a(s[o]);return e}function y6(t){if(t===null)throw new Error("Invalid input value: "+JSON.stringify(t));var n=0,e=[];t.forEach(function(o){if(n+=o.byteLength,e.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)});var r=new Uint8Array(n),a=0;return e.forEach(function(o){r.set(new Uint8Array(o.buffer),a),a+=o.byteLength}),r.buffer}var Pg=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function zS(t){return Pg?Buffer.byteLength(t):new Blob([t]).size}function n0(t){var n=0;t.forEach(function(a){n+=a.byteLength});var e=new Uint8Array(n),r=0;return t.forEach(function(a){e.set(new Uint8Array(a),r),r+=a.byteLength}),e.buffer}function US(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var n=t.split("/");return n[n.length-1]}function Jl(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:zS(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:zS(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var ar=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(n){t.getInstance().saveRouters.push(n)},t.registerLoadRouter=function(n){t.getInstance().loadRouters.push(n)},t.getSaveHandlers=function(n){return t.getHandlers(n,"save")},t.getLoadHandlers=function(n,e){return t.getHandlers(n,"load",e)},t.getHandlers=function(n,e,r){var a=[];return(e==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(o){var s=o(n,r);s!==null&&a.push(s)}),a},t}(),Ns="://",_o=function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(n,e){G(n!=null,function(){return"scheme must not be undefined or null."}),n.endsWith(Ns)&&(n=n.slice(0,n.indexOf(Ns))),G(n.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();G(r.managers[n]==null,function(){return"A model store manager is already registered for scheme '"+n+"'."}),r.managers[n]=e},t.getManager=function(n){var e=this.getInstance().managers[n];if(e==null)throw new Error("Cannot find model manager for scheme '"+n+"'");return e},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function Wf(t){if(t.indexOf(Ns)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+_o.getSchemes().join(","));return{scheme:t.split(Ns)[0],path:t.split(Ns)[1]}}function qS(t,n,e){return e===void 0&&(e=!1),ke(this,void 0,void 0,function(){var r,a,o,s,l,c,f,h,p;return Ne(this,function(v){switch(v.label){case 0:return G(t!==n,function(){return"Old path and new path are the same: '"+t+"'"}),G((r=ar.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),G(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."}),a=r[0],G((o=ar.getSaveHandlers(n)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+n+"."}),G(o.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+n+"."}),s=o[0],l=Wf(t).scheme,c=Wf(t).path,f=l===Wf(t).scheme,[4,a.load()];case 1:return h=v.sent(),e&&f?[4,_o.getManager(l).removeModel(c)]:[3,3];case 2:v.sent(),v.label=3;case 3:return[4,s.save(h)];case 4:return p=v.sent(),!e||f?[3,6]:[4,_o.getManager(l).removeModel(c)];case 5:v.sent(),v.label=6;case 6:return[2,p.modelArtifactsInfo]}})})}var ui="models_store",Eo="model_info_store";function GR(){if(!me().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,n=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(n==null)throw new Error("The current browser does not appear to support IndexedDB.");return n}function Lg(t){var n=t.result;n.createObjectStore(ui,{keyPath:"modelPath"}),n.createObjectStore(Eo,{keyPath:"modelPath"})}var Ds=function(){function t(n){if(this.indexedDB=GR(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}return t.prototype.save=function(n){return ke(this,void 0,void 0,function(){return Ne(this,function(e){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,n)]})})},t.prototype.load=function(){return ke(this,void 0,void 0,function(){return Ne(this,function(n){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(n,e){var r=this;return new Promise(function(a,o){var s=r.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return Lg(s)},s.onsuccess=function(){var l=s.result;if(e==null){var c=l.transaction(ui,"readonly"),f=c.objectStore(ui).get(r.modelPath);f.onsuccess=function(){if(f.result==null)return l.close(),o(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));a(f.result.modelArtifacts)},f.onerror=function(x){return l.close(),o(f.error)},c.oncomplete=function(){return l.close()}}else{var h,p=Jl(e),v=l.transaction(Eo,"readwrite"),g=v.objectStore(Eo),y=g.put({modelPath:r.modelPath,modelArtifactsInfo:p});y.onsuccess=function(){var x=(h=l.transaction(ui,"readwrite")).objectStore(ui).put({modelPath:r.modelPath,modelArtifacts:e,modelArtifactsInfo:p});x.onsuccess=function(){return a({modelArtifactsInfo:p})},x.onerror=function(S){var w=(g=v.objectStore(Eo)).delete(r.modelPath);w.onsuccess=function(){return l.close(),o(x.error)},w.onerror=function(T){return l.close(),o(x.error)}}},y.onerror=function(x){return l.close(),o(y.error)},v.oncomplete=function(){h==null?l.close():h.oncomplete=function(){return l.close()}}}},s.onerror=function(l){return o(s.error)}})},t.URL_SCHEME="indexeddb://",t}(),HS=function(t){return me().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ds.URL_SCHEME)?(n=t.slice(Ds.URL_SCHEME.length),new Ds(n)):null;var n};ar.registerSaveRouter(HS),ar.registerLoadRouter(HS);var b6=function(){function t(){this.indexedDB=GR()}return t.prototype.listModels=function(){return ke(this,void 0,void 0,function(){var n=this;return Ne(this,function(e){return[2,new Promise(function(r,a){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Lg(o)},o.onsuccess=function(){var s=o.result,l=s.transaction(Eo,"readonly"),c=l.objectStore(Eo).getAll();c.onsuccess=function(){for(var f={},h=0,p=c.result;h<p.length;h++){var v=p[h];f[v.modelPath]=v.modelArtifactsInfo}r(f)},c.onerror=function(f){return s.close(),a(c.error)},l.oncomplete=function(){return s.close()}},o.onerror=function(s){return a(o.error)}})]})})},t.prototype.removeModel=function(n){return ke(this,void 0,void 0,function(){var e=this;return Ne(this,function(r){var a;return n=(a=n).startsWith(Ds.URL_SCHEME)?a.slice(Ds.URL_SCHEME.length):a,[2,new Promise(function(o,s){var l=e.indexedDB.open("tensorflowjs",1);l.onupgradeneeded=function(){return Lg(l)},l.onsuccess=function(){var c,f=l.result,h=f.transaction(Eo,"readwrite"),p=h.objectStore(Eo),v=p.get(n);v.onsuccess=function(){if(v.result==null)return f.close(),s(new Error("Cannot find model with path '"+n+"' in IndexedDB."));var g=p.delete(n),y=function(){var x=(c=f.transaction(ui,"readwrite")).objectStore(ui).delete(n);x.onsuccess=function(){return o(v.result.modelArtifactsInfo)},x.onerror=function(S){return s(v.error)}};g.onsuccess=y,g.onerror=function(x){return y(),f.close(),s(v.error)}},v.onerror=function(g){return f.close(),s(v.error)},h.oncomplete=function(){c==null?f.close():c.oncomplete=function(){return f.close()}}},l.onerror=function(c){return s(l.error)}})]})})},t}();if(me().getBool("IS_BROWSER"))try{_o.registerManager(Ds.URL_SCHEME,new b6)}catch{}var Ma="/",Es="tensorflowjs_models",XR="info",w6="model_topology",x6="weight_specs",S6="weight_data",E6="model_metadata";function YR(t){return{info:[Es,t,XR].join(Ma),topology:[Es,t,w6].join(Ma),weightSpecs:[Es,t,x6].join(Ma),weightData:[Es,t,S6].join(Ma),modelMetadata:[Es,t,E6].join(Ma)}}function C6(t){var n=t.split(Ma);if(n.length<3)throw new Error("Invalid key format: "+t);return n.slice(1,n.length-1).join(Ma)}var Os=function(){function t(n){if(!me().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=YR(this.modelPath)}return t.prototype.save=function(n){return ke(this,void 0,void 0,function(){var e,r,a;return Ne(this,function(o){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(n.modelTopology),r=JSON.stringify(n.weightSpecs),a=Jl(n);try{return this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(s){if(Pg)return Buffer.from(s).toString("base64");for(var l=new Uint8Array(s),c="",f=0,h=l.length;f<h;f++)c+=String.fromCharCode(l[f]);return btoa(c)}(n.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata})),[2,{modelArtifactsInfo:a}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+a.modelTopologyBytes+", weightSpecsBytes="+a.weightSpecsBytes+", weightDataBytes="+a.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return ke(this,void 0,void 0,function(){var n,e,r,a,o,s,l;return Ne(this,function(c){if((n=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=r,(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=a,(o=this.LS.getItem(this.keys.modelMetadata))!=null&&(s=JSON.parse(o),e.format=s.format,e.generatedBy=s.generatedBy,e.convertedBy=s.convertedBy,e.userDefinedMetadata=s.userDefinedMetadata),(l=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=function(f){if(Pg){var h=Buffer.from(f,"base64");return h.buffer.slice(h.byteOffset,h.byteOffset+h.byteLength)}for(var p=atob(f),v=new Uint8Array(p.length),g=0;g<p.length;++g)v.set([p.charCodeAt(g)],g);return v.buffer}(l),[2,e]})})},t.URL_SCHEME="localstorage://",t}(),VS=function(t){return me().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Os.URL_SCHEME)?(n=t.slice(Os.URL_SCHEME.length),new Os(n)):null;var n};ar.registerSaveRouter(VS),ar.registerLoadRouter(VS);var _6=function(){function t(){G(me().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),G(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return ke(this,void 0,void 0,function(){var n,e,r,a,o,s;return Ne(this,function(l){for(n={},e=Es+Ma,r=Ma+XR,a=0;a<this.LS.length;++a)(o=this.LS.key(a)).startsWith(e)&&o.endsWith(r)&&(s=C6(o),n[s]=JSON.parse(this.LS.getItem(o)));return[2,n]})})},t.prototype.removeModel=function(n){return ke(this,void 0,void 0,function(){var e,r;return Ne(this,function(a){var o;if(n=(o=n).startsWith(Os.URL_SCHEME)?o.slice(Os.URL_SCHEME.length):o,e=YR(n),this.LS.getItem(e.info)==null)throw new Error("Cannot find model at path '"+n+"'");return r=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,r]})})},t}();if(me().getBool("IS_BROWSER"))try{_o.registerManager(Os.URL_SCHEME,new _6)}catch{}var R6="model",A6=".json",T6=".weights.bin";function WS(t){return new Promise(function(n){return setTimeout(n)}).then(t)}var Kv=function(){function t(n){if(!me().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(t.URL_SCHEME)&&(n=n.slice(t.URL_SCHEME.length)),n!=null&&n.length!==0||(n=R6),this.modelTopologyFileName=n+A6,this.weightDataFileName=n+T6}return t.prototype.save=function(n){return ke(this,void 0,void 0,function(){var e,r,a,o,s,l;return Ne(this,function(c){switch(c.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(e=window.URL.createObjectURL(new Blob([n.weightData],{type:"application/octet-stream"})),!(n.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],a={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:r},o=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(s=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,s.href=o,[4,WS(function(){return s.dispatchEvent(new MouseEvent("click"))})];case 2:return c.sent(),n.weightData==null?[3,4]:((l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,l.href=e,[4,WS(function(){return l.dispatchEvent(new MouseEvent("click"))})]);case 3:c.sent(),c.label=4;case 4:return[2,{modelArtifactsInfo:Jl(n)}]}})})},t.URL_SCHEME="downloads://",t}(),k6=function(){function t(n){if(n==null||n.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+n);this.files=n}return t.prototype.load=function(){return ke(this,void 0,void 0,function(){var n,e,r=this;return Ne(this,function(a){return n=this.files[0],e=this.files.slice(1),[2,new Promise(function(o,s){var l=new FileReader;l.onload=function(c){var f=JSON.parse(c.target.result),h=f.modelTopology;if(h!=null){e.length===0&&o({modelTopology:h});var p=f.weightsManifest;if(p!=null){var v;try{v=r.checkManifestAndWeightFiles(p,e)}catch(S){return void s(S)}var g=[],y=[],x=[];p.forEach(function(S){S.paths.forEach(function(w){y.push(w),x.push(null)}),g.push.apply(g,S.weights)}),p.forEach(function(S){S.paths.forEach(function(w){var T=new FileReader;T.onload=function(A){var C=A.target.result,R=y.indexOf(w);x[R]=C,x.indexOf(null)===-1&&o({modelTopology:h,weightSpecs:g,weightData:n0(x),format:f.format,generatedBy:f.generatedBy,convertedBy:f.convertedBy,userDefinedMetadata:f.userDefinedMetadata})},T.onerror=function(A){return s("Failed to weights data from file of path '"+w+"'.")},T.readAsArrayBuffer(v[w])})})}else s(new Error("weightManifest field is missing from file "+n.name))}else s(new Error("modelTopology field is missing from file "+n.name))},l.onerror=function(c){return s("Failed to read model topology and weights manifest JSON from file '"+n.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},l.readAsText(n)})]})})},t.prototype.checkManifestAndWeightFiles=function(n,e){for(var r=[],a=e.map(function(c){return US(c.name)}),o={},s=0,l=n;s<l.length;s++)l[s].paths.forEach(function(c){var f=US(c);if(r.indexOf(f)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+f+"'");if(r.push(f),a.indexOf(f)===-1)throw new Error("Weight file with basename '"+f+"' is not provided.");o[c]=e[a.indexOf(f)]});if(r.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+e.length+").");return o},t}();function GS(t,n,e,r){(function(o){G(o!=null&&Array.isArray(o)&&o.length>0,function(){return"promises must be a none empty array"})})(t),function(o,s){G(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o}),G(s>=0&&s<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+s}),G(s>=o,function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+s})}(e=e??0,r=r??1);var a=0;return Promise.all(t.map(function(o){return o.then(function(s){var l=e+ ++a/t.length*(r-e);return n(l),s}),o}))}function KR(t,n){return ke(this,void 0,void 0,function(){var e,r,a,o,s,l,c,f,h;return Ne(this,function(p){switch(p.label){case 0:return n==null&&(n={}),e=n.fetchFunc==null?me().platform.fetch:n.fetchFunc,r=t.map(function(v){return e(v,n.requestInit,{isBinary:!0})}),a=0,o=.5,n.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return s=p.sent(),[3,4];case 2:return[4,GS(r,n.onProgress,a,o)];case 3:s=p.sent(),p.label=4;case 4:return l=s.map(function(v){return v.arrayBuffer()}),c=.5,f=1,n.onProgress!=null?[3,6]:[4,Promise.all(l)];case 5:return h=p.sent(),[3,8];case 6:return[4,GS(l,n.onProgress,c,f)];case 7:h=p.sent(),p.label=8;case 8:return[2,h]}})})}function XS(t){var n=this;return function(e,r,a){return r===void 0&&(r=""),ke(n,void 0,void 0,function(){var o,s,l,c,f,h,p,v,g,y;return Ne(this,function(x){switch(x.label){case 0:if(o=e.map(function(){return!1}),s={},l=a!=null?a.map(function(){return!1}):[],c=[],e.forEach(function(S,w){var T=0;S.weights.forEach(function(A){var C="quantization"in A?A.quantization.dtype:A.dtype,R=Fg[C]*De(A.shape),k=function(){o[w]=!0,s[w]==null&&(s[w]=[]),s[w].push({manifestEntry:A,groupOffset:T,sizeBytes:R})};a!=null?a.forEach(function(N,O){N===A.name&&(k(),l[O]=!0)}):k(),c.push(A.name),T+=R})}),!l.every(function(S){return S}))throw f=a.filter(function(S,w){return!l[w]}),new Error("Could not find weights in manifest with names: "+f.join(", ")+`. 
Manifest JSON has weights with names: `+c.join(", ")+".");return h=o.reduce(function(S,w,T){return w&&S.push(T),S},[]),p=[],h.forEach(function(S){e[S].paths.forEach(function(w){var T=r+(r.endsWith("/")?"":"/")+w;p.push(T)})}),[4,t(p)];case 1:return v=x.sent(),g={},y=0,h.forEach(function(S){for(var w=e[S].paths.length,T=0,A=0;A<w;A++)T+=v[y+A].byteLength;for(var C=new ArrayBuffer(T),R=new Uint8Array(C),k=0,N=0;N<w;N++){var O=new Uint8Array(v[y+N]);R.set(O,k),k+=O.byteLength}s[S].forEach(function(D){var M=WR(C.slice(D.groupOffset,D.groupOffset+D.sizeBytes),[D.manifestEntry]);for(var P in M)g[P]=M[P]}),y+=w}),[2,g]}})})}}ar.registerSaveRouter(function(t){return me().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Kv.URL_SCHEME)?function(n){return n===void 0&&(n="model"),new Kv(n)}(t.slice(Kv.URL_SCHEME.length)):null});var $R=function(){function t(n,e){if(this.DEFAULT_METHOD="POST",e==null&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,e.fetchFunc!=null?(G(typeof e.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=e.fetchFunc):this.fetch=me().platform.fetch,G(n!=null&&n.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(n)&&G(n.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+n.length+")."}),this.path=n,e.requestInit!=null&&e.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}return t.prototype.save=function(n){return ke(this,void 0,void 0,function(){var e,r,a,o;return Ne(this,function(s){switch(s.label){case 0:if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],a={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata,weightsManifest:r},e.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),n.weightData!=null&&e.body.append("model.weights.bin",new Blob([n.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,e)];case 1:if((o=s.sent()).ok)return[2,{modelArtifactsInfo:Jl(n),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}})})},t.prototype.load=function(){return ke(this,void 0,void 0,function(){var n,e,r,a,o,s,l,c,f,h,p,v;return Ne(this,function(g){switch(g.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(n=g.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+n.status+". Please verify this URL points to the model JSON of the model to load.");g.label=2;case 2:return g.trys.push([2,4,,5]),[4,n.json()];case 3:return e=g.sent(),[3,5];case 4:throw g.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(a=e.modelTopology,o=e.weightsManifest,s=e.generatedBy,l=e.convertedBy,c=e.format,f=e.userDefinedMetadata,a==null&&o==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return o==null?[3,7]:[4,this.loadWeights(o)];case 6:v=g.sent(),h=v[0],p=v[1],g.label=7;case 7:return[2,{modelTopology:a,weightSpecs:h,weightData:p,userDefinedMetadata:f,generatedBy:s,convertedBy:l,format:c}]}})})},t.prototype.loadWeights=function(n){return ke(this,void 0,void 0,function(){var e,r,a,o,s,l,c,f,h,p,v;return Ne(this,function(g){switch(g.label){case 0:for(e=Array.isArray(this.path)?this.path[1]:this.path,r=function(y){var x=y.lastIndexOf("/"),S=y.lastIndexOf("?"),w=y.substring(0,x),T=S>x?y.substring(S):"";return[w+"/",T]}(e),a=r[0],o=r[1],s=this.weightPathPrefix||a,l=[],c=0,f=n;c<f.length;c++)h=f[c],l.push.apply(l,h.weights);return p=[],n.forEach(function(y){y.paths.forEach(function(x){p.push(s+x+o)})}),[4,KR(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return v=g.sent(),[2,[l,n0(v)]]}})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function jg(t){return t.match($R.URL_SCHEME_REGEX)!=null}var YS=function(t,n){return typeof fetch>"u"?null:(Array.isArray(t)?t.every(function(e){return jg(e)}):jg(t))?zg(t,{onProgress:n}):null};function zg(t,n){return new $R(t,n)}ar.registerSaveRouter(YS),ar.registerLoadRouter(YS);var $v=function(){function t(n){this.modelArtifacts=n}return t.prototype.load=function(){return ke(this,void 0,void 0,function(){return Ne(this,function(n){return[2,this.modelArtifacts]})})},t}(),N6=function(){function t(n){this.saveHandler=n}return t.prototype.save=function(n){return ke(this,void 0,void 0,function(){return Ne(this,function(e){return[2,this.saveHandler(n)]})})},t}(),QR=Object.freeze({browserFiles:function(t){return new k6(t)},browserHTTPRequest:function(t,n){return zg(t,n)},concatenateArrayBuffers:n0,decodeWeights:WR,encodeWeights:function(t,n){return ke(this,void 0,void 0,function(){var e,r,a,o,s,l=this;return Ne(this,function(c){switch(c.label){case 0:for(e=[],r=[],a=Array.isArray(t)?t.map(function(f){return f.name}):Object.keys(t),o=function(f){var h=a[f],p=Array.isArray(t)?t[f].tensor:t[h];if(p.dtype!=="float32"&&p.dtype!=="int32"&&p.dtype!=="bool"&&p.dtype!=="string")throw new Error("Unsupported dtype in weight '"+h+"': "+p.dtype);var v={name:h,shape:p.shape,dtype:p.dtype};if(p.dtype==="string"){var g=new Promise(function(y){return ke(l,void 0,void 0,function(){var x,S,w,T,A,C,R;return Ne(this,function(k){switch(k.label){case 0:return[4,p.bytes()];case 1:for(x=k.sent(),S=x.reduce(function(N,O){return N+O.length},0)+Nd*x.length,w=new Uint8Array(S),T=0,A=0;A<x.length;A++)C=x[A],R=new Uint8Array(new Uint32Array([C.length]).buffer),w.set(R,T),T+=Nd,w.set(C,T),T+=C.length;return y(w),[2]}})})});r.push(g)}else r.push(p.data());n!=null&&(v.group=n),e.push(v)},s=0;s<a.length;++s)o(s);return[4,Promise.all(r)];case 1:return[2,{data:y6(c.sent()),specs:e}]}})})},fromMemory:function(t,n,e,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new $v(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new $v({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new $v({modelTopology:t,weightSpecs:n,weightData:e,trainingConfig:r}))},getLoadHandlers:function(t,n){return ar.getLoadHandlers(t,n)},getModelArtifactsInfoForJSON:Jl,getSaveHandlers:function(t){return ar.getSaveHandlers(t)},http:zg,isHTTPScheme:jg,loadWeights:function(t,n,e,r){return n===void 0&&(n=""),ke(this,void 0,void 0,function(){return Ne(this,function(a){return[2,XS(function(o){return KR(o,{requestInit:r})})(t,n,e)]})})},registerLoadRouter:function(t){return ar.registerLoadRouter(t)},registerSaveRouter:function(t){return ar.registerSaveRouter(t)},weightsLoaderFactory:XS,withSaveHandler:function(t){return new N6(t)},copyModel:function(t,n){return ke(this,void 0,void 0,function(){return Ne(this,function(e){return[2,qS(t,n,!1)]})})},listModels:function(){return ke(this,void 0,void 0,function(){var t,n,e,r,a,o,s;return Ne(this,function(l){switch(l.label){case 0:t=_o.getSchemes(),n={},e=0,r=t,l.label=1;case 1:return e<r.length?(a=r[e],[4,_o.getManager(a).listModels()]):[3,4];case 2:for(s in o=l.sent())n[a+Ns+s]=o[s];l.label=3;case 3:return e++,[3,1];case 4:return[2,n]}})})},moveModel:function(t,n){return ke(this,void 0,void 0,function(){return Ne(this,function(e){return[2,qS(t,n,!0)]})})},removeModel:function(t){return ke(this,void 0,void 0,function(){var n;return Ne(this,function(e){return n=Wf(t),[2,_o.getManager(n.scheme).removeModel(n.path)]})})}}),ys;Z({confusionMatrix_:function(t,n,e){var r=q(t,"labels","confusionMatrix"),a=q(n,"predictions","confusionMatrix");G(e==null||e>0&&Number.isInteger(e),function(){return"If provided, numClasses must be a positive integer, but got "+e}),G(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),G(a.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+a.rank}),G(r.shape[0]===a.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."}),G(e>0&&Number.isInteger(e),function(){return"numClasses is required to be a positive integer, but got "+e});var o=Dg(r.asType("int32"),e),s=Dg(a.asType("int32"),e);return o.transpose().matMul(s).asType("int32")}});var D6=Z({fromPixels_:function(t,n){if(n===void 0&&(n=3),n>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var e=!1,r=!1,a=!1,o=!1,s=!1;if(t.data instanceof Uint8Array)e=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)o=!0;else{if(t.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);s=!0}if(a&&a&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(x_("FromPixels",te.backendName)!=null)return te.runKernel("FromPixels",{pixels:t},{numChannels:n});var l,c,f=a?[t.videoWidth,t.videoHeight]:[t.width,t.height],h=f[0],p=f[1];if(s?l=t.getContext("2d").getImageData(0,0,h,p).data:r||e?l=t.data:(o||a)&&(ys==null&&(ys=document.createElement("canvas").getContext("2d")),ys.canvas.width=h,ys.canvas.height=p,ys.drawImage(t,0,0,h,p),l=ys.getImageData(0,0,h,p).data),n===4)c=new Int32Array(l);else{var v=h*p;c=new Int32Array(v*n);for(var g=0;g<v;g++)for(var y=0;y<n;++y)c[g*n+y]=l[4*g+y]}return Dy(c,[p,h,n],"int32")}}),r0=Object.freeze({toPixels:function(t,n){return ke(this,void 0,void 0,function(){var e,r,a,o,s,l,c,f,h,p,v,g,y,x,S,w,T,A,C,R,k,N,O;return Ne(this,function(D){switch(D.label){case 0:if(e=q(t,"img","toPixels"),t instanceof Rt||(e=e.toInt()),e.rank!==2&&e.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+e.rank+".");if(r=e.shape.slice(0,2),a=r[0],o=r[1],(s=e.rank===2?1:e.shape[2])>4||s===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+s);return[4,e.data()];case 1:return l=D.sent(),c=e.min(),f=e.max(),[4,Promise.all([c.data(),f.data()])];case 2:if(h=D.sent(),p=h[0],v=h[1],g=p[0],y=v[0],c.dispose(),f.dispose(),e.dtype==="float32"){if(g<0||y>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+g+" - "+y+"].")}else{if(e.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+e.dtype+". Please use float32 or int32 tensors.");if(g<0||y>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+g+" - "+y+"].")}for(x=e.dtype==="float32"?255:1,S=new Uint8ClampedArray(o*a*4),w=0;w<a*o;++w)T=void 0,A=void 0,C=void 0,R=void 0,s===1?(T=l[w]*x,A=l[w]*x,C=l[w]*x,R=255):s===3?(T=l[3*w]*x,A=l[3*w+1]*x,C=l[3*w+2]*x,R=255):s===4&&(T=l[4*w]*x,A=l[4*w+1]*x,C=l[4*w+2]*x,R=l[4*w+3]*x),S[(k=4*w)+0]=Math.round(T),S[k+1]=Math.round(A),S[k+2]=Math.round(C),S[k+3]=Math.round(R);return n!=null&&(n.width=o,n.height=a,N=n.getContext("2d"),O=new ImageData(S,o,a),N.putImageData(O,0,0)),e!==t&&e.dispose(),[2,S]}})})},fromPixels:D6}),O6=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(n,e){return new n(e)},t}(),M6=function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(n){t.getMap().classNameMap[n.className]=[n,n.fromConfig]},t}();function Ai(t){G(t.className!=null,function(){return"Class being registered does not have the static className property defined."}),G(typeof t.className=="string",function(){return"className is required to be a string, but got type "+typeof t.className}),G(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),M6.register(t)}var Ti=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return qr(n,t),n.prototype.minimize=function(e,r,a){r===void 0&&(r=!1);var o=this.computeGradients(e,a),s=o.value,l=o.grads;if(a!=null){var c=a.map(function(f){return{name:f.name,tensor:l[f.name]}});this.applyGradients(c)}else this.applyGradients(l);return Hn(l),r?s:(s.dispose(),null)},Object.defineProperty(n.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),n.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},n.prototype.computeGradients=function(e,r){return HL(e,r)},n.prototype.dispose=function(){this.iterations_!=null&&Hn(this.iterations_)},n.prototype.saveIterations=function(){return ke(this,void 0,void 0,function(){return Ne(this,function(e){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:_e(this.iterations_,"int32")}]})})},n.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){return Ne(this,function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},n.prototype.setWeights=function(e){return ke(this,void 0,void 0,function(){return Ne(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},n.prototype.extractIterations=function(e){return ke(this,void 0,void 0,function(){var r;return Ne(this,function(a){switch(a.label){case 0:return r=this,[4,e[0].tensor.data()];case 1:return r.iterations_=a.sent()[0],[2,e.slice(1)]}})})},n}(O6);Object.defineProperty(Ti,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var I6=function(t){function n(e,r,a){a===void 0&&(a=null);var o=t.call(this)||this;return o.learningRate=e,o.rho=r,o.epsilon=a,o.accumulatedGrads=[],o.accumulatedUpdates=[],a==null&&(o.epsilon=te.backend.epsilon()),o}return qr(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(a){return a.name}):Object.keys(e)).forEach(function(a,o){var s=te.registeredVariables[a];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:a+"/accum_grad",variable:Re(function(){return at(s).variable(!1)})}),r.accumulatedUpdates[o]==null&&(r.accumulatedUpdates[o]={originalName:a+"/accum_var",variable:Re(function(){return at(s).variable(!1)})});var l=Array.isArray(e)?e[o].tensor:e[a];if(l!=null){var c=r.accumulatedGrads[o].variable,f=r.accumulatedUpdates[o].variable;Re(function(){var h=c.mul(r.rho).add(l.square().mul(1-r.rho)),p=f.add(r.epsilon).sqrt().div(c.add(r.epsilon).sqrt()).mul(l),v=f.mul(r.rho).add(p.square().mul(1-r.rho));c.assign(h),f.assign(v);var g=p.mul(-r.learningRate).add(s);s.assign(g)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Hn(this.accumulatedGrads.map(function(e){return e.variable})),Hn(this.accumulatedUpdates.map(function(e){return e.variable})))},n.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){var e;return Ne(this,function(r){switch(r.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},n.prototype.setWeights=function(e){return ke(this,void 0,void 0,function(){var r;return Ne(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(e)];case 1:return e=a.sent(),r=e.length/2,this.accumulatedGrads=e.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedUpdates=e.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},n.fromConfig=function(e,r){return new e(r.learningRate,r.rho,r.epsilon)},n.className="Adadelta",n}(Ti);Ai(I6);var B6=function(t){function n(e,r){r===void 0&&(r=.1);var a=t.call(this)||this;return a.learningRate=e,a.initialAccumulatorValue=r,a.accumulatedGrads=[],a}return qr(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(a){return a.name}):Object.keys(e)).forEach(function(a,o){var s=te.registeredVariables[a];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:a+"/accumulator",variable:Re(function(){return oa(s.shape,r.initialAccumulatorValue).variable(!1)})});var l=Array.isArray(e)?e[o].tensor:e[a];if(l!=null){var c=r.accumulatedGrads[o].variable;Re(function(){var f=c.add(l.square());c.assign(f);var h=l.div(f.add(te.backend.epsilon()).sqrt()).mul(-r.learningRate).add(s);s.assign(h)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedGrads!=null&&Hn(this.accumulatedGrads.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){return Ne(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},n.prototype.setWeights=function(e){return ke(this,void 0,void 0,function(){return Ne(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulatedGrads=e.map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},n.fromConfig=function(e,r){return new e(r.learningRate,r.initialAccumulatorValue)},n.className="Adagrad",n}(Ti);Ai(B6);var F6=function(t){function n(e,r,a,o){o===void 0&&(o=null);var s=t.call(this)||this;return s.learningRate=e,s.beta1=r,s.beta2=a,s.epsilon=o,s.accumulatedFirstMoment=[],s.accumulatedSecondMoment=[],Re(function(){s.accBeta1=_e(r).variable(),s.accBeta2=_e(a).variable()}),o==null&&(s.epsilon=te.backend.epsilon()),s}return qr(n,t),n.prototype.applyGradients=function(e){var r=this,a=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);Re(function(){var o=$t(1,r.accBeta1),s=$t(1,r.accBeta2);a.forEach(function(l,c){var f=te.registeredVariables[l];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:l+"/m",variable:Re(function(){return at(f).variable(!1)})}),r.accumulatedSecondMoment[c]==null&&(r.accumulatedSecondMoment[c]={originalName:l+"/v",variable:Re(function(){return at(f).variable(!1)})});var h=Array.isArray(e)?e[c].tensor:e[l];if(h!=null){var p=r.accumulatedFirstMoment[c].variable,v=r.accumulatedSecondMoment[c].variable,g=p.mul(r.beta1).add(h.mul(1-r.beta1)),y=v.mul(r.beta2).add(h.square().mul(1-r.beta2)),x=g.div(o),S=y.div(s);p.assign(g),v.assign(y);var w=x.div(S.sqrt().add(r.epsilon)).mul(-r.learningRate).add(f);f.assign(w)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Hn(this.accumulatedFirstMoment.map(function(e){return e.variable})),this.accumulatedSecondMoment!=null&&Hn(this.accumulatedSecondMoment.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){var e;return Ne(this,function(r){switch(r.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},n.prototype.setWeights=function(e){return ke(this,void 0,void 0,function(){var r,a=this;return Ne(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(e)];case 1:return e=o.sent(),Re(function(){a.accBeta1.assign(Td(a.beta1,a.iterations_+1)),a.accBeta2.assign(Td(a.beta2,a.iterations_+1))}),r=e.length/2,this.accumulatedFirstMoment=e.slice(0,r).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),this.accumulatedSecondMoment=e.slice(r,2*r).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},n.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon)},n.className="Adam",n}(Ti);Ai(F6);var P6=function(t){function n(e,r,a,o,s){o===void 0&&(o=null),s===void 0&&(s=0);var l=t.call(this)||this;return l.learningRate=e,l.beta1=r,l.beta2=a,l.epsilon=o,l.decay=s,l.accumulatedFirstMoment=[],l.accumulatedWeightedInfNorm=[],Re(function(){l.iteration=_e(0).variable(),l.accBeta1=_e(r).variable()}),o==null&&(l.epsilon=te.backend.epsilon()),l}return qr(n,t),n.prototype.applyGradients=function(e){var r=this,a=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);Re(function(){var o=$t(1,r.accBeta1),s=Ir(-r.learningRate,r.iteration.mul(r.decay).add(1));a.forEach(function(l,c){var f=te.registeredVariables[l];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:l+"/m",variable:at(f).variable(!1)}),r.accumulatedWeightedInfNorm[c]==null&&(r.accumulatedWeightedInfNorm[c]={originalName:l+"/v",variable:at(f).variable(!1)});var h=Array.isArray(e)?e[c].tensor:e[l];if(h!=null){var p=r.accumulatedFirstMoment[c].variable,v=r.accumulatedWeightedInfNorm[c].variable,g=p.mul(r.beta1).add(h.mul(1-r.beta1)),y=v.mul(r.beta2),x=h.abs(),S=y.maximum(x);p.assign(g),v.assign(S);var w=s.div(o).mul(g.div(S.add(r.epsilon))).add(f);f.assign(w)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Hn(this.accumulatedFirstMoment.map(function(e){return e.variable})),this.accumulatedWeightedInfNorm!=null&&Hn(this.accumulatedWeightedInfNorm.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){return Ne(this,function(e){throw new Error("getWeights() is not implemented for Adamax yet.")})})},n.prototype.setWeights=function(e){return ke(this,void 0,void 0,function(){return Ne(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},n.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},n.className="Adamax",n}(Ti);Ai(P6);var ZR=function(t){function n(e){var r=t.call(this)||this;return r.learningRate=e,r.setLearningRate(e),r}return qr(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(a){return a.name}):Object.keys(e)).forEach(function(a,o){var s=Array.isArray(e)?e[o].tensor:e[a];if(s!=null){var l=te.registeredVariables[a];Re(function(){var c=r.c.mul(s).add(l);l.assign(c)})}}),this.incrementIterations()},n.prototype.setLearningRate=function(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=rL(_e(-e))},n.prototype.dispose=function(){this.c.dispose()},n.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){return Ne(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}})})},n.prototype.setWeights=function(e){return ke(this,void 0,void 0,function(){return Ne(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:if((e=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate}},n.fromConfig=function(e,r){return new e(r.learningRate)},n.className="SGD",n}(Ti);Ai(ZR);var L6=function(t){function n(e,r,a){a===void 0&&(a=!1);var o=t.call(this,e)||this;return o.learningRate=e,o.momentum=r,o.useNesterov=a,o.accumulations=[],o.m=_e(o.momentum),o}return qr(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(a){return a.name}):Object.keys(e)).forEach(function(a,o){var s=te.registeredVariables[a];r.accumulations[o]==null&&(r.accumulations[o]={originalName:a+"/momentum",variable:Re(function(){return at(s).variable(!1)})});var l=r.accumulations[o].variable,c=Array.isArray(e)?e[o].tensor:e[a];c!=null&&Re(function(){var f,h=r.m.mul(l).add(c);f=r.useNesterov?r.c.mul(c.add(h.mul(r.m))).add(s):r.c.mul(h).add(s),l.assign(h),s.assign(f)})}),this.incrementIterations()},n.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Hn(this.accumulations.map(function(e){return e.variable}))},n.prototype.setMomentum=function(e){this.momentum=e},n.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){return Ne(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},n.prototype.setWeights=function(e){return ke(this,void 0,void 0,function(){return Ne(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulations=e.map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},n.fromConfig=function(e,r){return new e(r.learningRate,r.momentum,r.useNesterov)},n.className="Momentum",n}(ZR);Ai(L6);var j6=function(t){function n(e,r,a,o,s){r===void 0&&(r=.9),a===void 0&&(a=0),o===void 0&&(o=null),s===void 0&&(s=!1);var l=t.call(this)||this;if(l.learningRate=e,l.decay=r,l.momentum=a,l.epsilon=o,l.accumulatedMeanSquares=[],l.accumulatedMoments=[],l.accumulatedMeanGrads=[],l.centered=s,o==null&&(l.epsilon=te.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return l}return qr(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(a){return a.name}):Object.keys(e)).forEach(function(a,o){var s=te.registeredVariables[a];r.accumulatedMeanSquares[o]==null&&(r.accumulatedMeanSquares[o]={originalName:a+"/rms",variable:Re(function(){return at(s).variable(!1)})}),r.accumulatedMoments[o]==null&&(r.accumulatedMoments[o]={originalName:a+"/momentum",variable:Re(function(){return at(s).variable(!1)})}),r.accumulatedMeanGrads[o]==null&&r.centered&&(r.accumulatedMeanGrads[o]={originalName:a+"/mg",variable:Re(function(){return at(s).variable(!1)})});var l=Array.isArray(e)?e[o].tensor:e[a];if(l!=null){var c=r.accumulatedMeanSquares[o].variable,f=r.accumulatedMoments[o].variable;Re(function(){var h=c.mul(r.decay).add(l.square().mul(1-r.decay));if(r.centered){var p=r.accumulatedMeanGrads[o].variable,v=p.mul(r.decay).add(l.mul(1-r.decay)),g=f.mul(r.momentum).add(l.mul(r.learningRate).div(h.sub(v.square().add(r.epsilon)).sqrt()));c.assign(h),p.assign(v),f.assign(g);var y=s.sub(g);s.assign(y)}else{var x=c.mul(r.decay).add(l.square().mul(1-r.decay));g=f.mul(r.momentum).add(l.mul(r.learningRate).div(x.add(r.epsilon).sqrt())),c.assign(x),f.assign(g),y=s.sub(g),s.assign(y)}})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Hn(this.accumulatedMeanSquares.map(function(e){return e.variable})),this.accumulatedMeanGrads!=null&&this.centered&&Hn(this.accumulatedMeanGrads.map(function(e){return e.variable})),this.accumulatedMoments!=null&&Hn(this.accumulatedMoments.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){var e;return Ne(this,function(r){switch(r.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},n.prototype.setWeights=function(e){return ke(this,void 0,void 0,function(){var r;return Ne(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(e)];case 1:return e=a.sent(),r=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedMoments=e.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=e.slice(2*r,3*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},n.fromConfig=function(e,r){return new e(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},n.className="RMSProp",n}(Ti);Ai(j6);Rt.prototype.squaredDifference=function(t){return hR(this,t)},ce=f6;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ug=function(t,n){return Ug=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var a in r)r.hasOwnProperty(a)&&(e[a]=r[a])},Ug(t,n)};function He(t,n){Ug(t,n);function e(){this.constructor=t}t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var Sn=function(){return Sn=Object.assign||function(n){for(var e,r=1,a=arguments.length;r<a;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Sn.apply(this,arguments)};function Me(t,n,e,r){function a(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function l(h){try{f(r.next(h))}catch(p){s(p)}}function c(h){try{f(r.throw(h))}catch(p){s(p)}}function f(h){h.done?o(h.value):a(h.value).then(l,c)}f((r=r.apply(t,[])).next())})}function Ie(t,n){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,a,o,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(f){return function(h){return c([f,h])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,a&&(o=f[0]&2?a.return:f[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,f[1])).done)return o;switch(a=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,a=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){e.label=f[1];break}if(f[0]===6&&e.label<o[1]){e.label=o[1],o=f;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(f);break}o[2]&&e.ops.pop(),e.trys.pop();continue}f=n.call(t,e)}catch(h){f=[6,h],a=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function hl(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),a=0,n=0;n<e;n++)for(var o=arguments[n],s=0,l=o.length;s<l;s++,a++)r[a]=o[s];return r}var Ms=function(){function t(n,e){if(!fi(n)||!fi(e))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:n,height:e}));this._width=n,this._height=e}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t}();function fh(t,n){return t instanceof Rt&&t.shape.length===n}function z6(t){return fh(t,2)}function dh(t){return fh(t,3)}function Ro(t){return fh(t,4)}function U6(t){return t%1!==0}function KS(t){return t%2===0}function q6(t,n){n===void 0&&(n=2);var e=Math.pow(10,n);return Math.floor(t*e)/e}function $S(t){return t&&t.width&&t.height}function H6(t,n){var e=t.width,r=t.height,a=n/Math.max(r,e);return new Ms(Math.round(e*a),Math.round(r*a))}function a0(t){return t.reduce(function(n,e){return n.add(e)},new ft(0,0)).div(new ft(t.length,t.length))}function Al(t,n,e){return Array(t).fill(0).map(function(r,a){return n+a*e})}function fi(t){return!!t&&t!==1/0&&t!==-1/0&&!isNaN(t)||t===0}function QS(t){return fi(t)&&0<=t&&t<=1}var ft=function(){function t(n,e){this._x=n,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.add=function(n){return new t(this.x+n.x,this.y+n.y)},t.prototype.sub=function(n){return new t(this.x-n.x,this.y-n.y)},t.prototype.mul=function(n){return new t(this.x*n.x,this.y*n.y)},t.prototype.div=function(n){return new t(this.x/n.x,this.y/n.y)},t.prototype.abs=function(){return new t(Math.abs(this.x),Math.abs(this.y))},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t}(),Do=function(){function t(n,e){e===void 0&&(e=!0);var r=n||{},a=[r.left,r.top,r.right,r.bottom].every(fi),o=[r.x,r.y,r.width,r.height].every(fi);if(!o&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var s=o?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],l=s[0],c=s[1],f=s[2],h=s[3];t.assertIsValidBox({x:l,y:c,width:f,height:h},"Box.constructor",e),this._x=l,this._y=c,this._width=f,this._height=h}return t.isRect=function(n){return!!n&&[n.x,n.y,n.width,n.height].every(fi)},t.assertIsValidBox=function(n,e,r){if(r===void 0&&(r=!1),!t.isRect(n))throw new Error(e+" - invalid box: "+JSON.stringify(n)+", expected object with properties x, y, width, height");if(!r&&(n.width<0||n.height<0))throw new Error(e+" - width ("+n.width+") and height ("+n.height+") must be positive numbers")},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new ft(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return new ft(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return new ft(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new ft(this.right,this.bottom)},enumerable:!0,configurable:!0}),t.prototype.round=function(){var n=[this.x,this.y,this.width,this.height].map(function(s){return Math.round(s)}),e=n[0],r=n[1],a=n[2],o=n[3];return new t({x:e,y:r,width:a,height:o})},t.prototype.floor=function(){var n=[this.x,this.y,this.width,this.height].map(function(s){return Math.floor(s)}),e=n[0],r=n[1],a=n[2],o=n[3];return new t({x:e,y:r,width:a,height:o})},t.prototype.toSquare=function(){var n=this,e=n.x,r=n.y,a=n.width,o=n.height,s=Math.abs(a-o);return a<o&&(e-=s/2,a+=s),o<a&&(r-=s/2,o+=s),new t({x:e,y:r,width:a,height:o})},t.prototype.rescale=function(n){var e=$S(n)?n.width:n,r=$S(n)?n.height:n;return new t({x:this.x*e,y:this.y*r,width:this.width*e,height:this.height*r})},t.prototype.pad=function(n,e){var r=[this.x-n/2,this.y-e/2,this.width+n,this.height+e],a=r[0],o=r[1],s=r[2],l=r[3];return new t({x:a,y:o,width:s,height:l})},t.prototype.clipAtImageBorders=function(n,e){var r=this,a=r.x,o=r.y,s=r.right,l=r.bottom,c=Math.max(a,0),f=Math.max(o,0),h=s-c,p=l-f,v=Math.min(h,n-c),g=Math.min(p,e-f);return new t({x:c,y:f,width:v,height:g}).floor()},t.prototype.shift=function(n,e){var r=this,a=r.width,o=r.height,s=this.x+n,l=this.y+e;return new t({x:s,y:l,width:a,height:o})},t.prototype.padAtBorders=function(n,e){var r=this.width+1,a=this.height+1,o=1,s=1,l=r,c=a,f=this.left,h=this.top,p=this.right,v=this.bottom;return p>e&&(l=-p+e+r,p=e),v>n&&(c=-v+n+a,v=n),f<1&&(c=2-f,f=1),h<1&&(c=2-h,h=1),{dy:s,edy:c,dx:o,edx:l,y:h,ey:v,x:f,ex:p,w:r,h:a}},t.prototype.calibrate=function(n){return new t({left:this.left+n.left*this.width,top:this.top+n.top*this.height,right:this.right+n.right*this.width,bottom:this.bottom+n.bottom*this.height}).toSquare().round()},t}(),hh=function(t){He(n,t);function n(e,r,a,o,s){return s===void 0&&(s=!1),t.call(this,{left:e,top:r,right:a,bottom:o},s)||this}return n}(Do),JR=function(){function t(n,e,r,a,o){this._imageDims=new Ms(o.width,o.height),this._score=n,this._classScore=e,this._className=r,this._box=new Do(a).rescale(this._imageDims)}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeBox",{get:function(){return new Do(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),t.prototype.forSize=function(n,e){return new t(this.score,this.classScore,this.className,this.relativeBox,{width:n,height:e})},t}(),ha=function(t){He(n,t);function n(e,r,a){return t.call(this,e,e,"",r,a)||this}return n.prototype.forSize=function(e,r){var a=t.prototype.forSize.call(this,e,r),o=a.score,s=a.relativeBox,l=a.imageDims;return new n(o,s,l)},n}(JR);function V6(t,n,e){e===void 0&&(e=!0);var r=Math.max(0,Math.min(t.right,n.right)-Math.max(t.left,n.left)),a=Math.max(0,Math.min(t.bottom,n.bottom)-Math.max(t.top,n.top)),o=r*a;return e?o/(t.area+n.area-o):o/Math.min(t.area,n.area)}function W6(t){var n=t.map(function(l){return l.x}),e=t.map(function(l){return l.y}),r=n.reduce(function(l,c){return c<l?c:l},1/0),a=e.reduce(function(l,c){return c<l?c:l},1/0),o=n.reduce(function(l,c){return l<c?c:l},0),s=e.reduce(function(l,c){return l<c?c:l},0);return new hh(r,a,o,s)}function Tl(t,n,e,r){r===void 0&&(r=!0);for(var a=n.map(function(l,c){return{score:l,boxIndex:c}}).sort(function(l,c){return l.score-c.score}).map(function(l){return l.boxIndex}),o=[],s=function(){var l=a.pop();o.push(l);for(var c=a,f=[],h=0;h<c.length;h++){var p=c[h],v=t[l],g=t[p];f.push(V6(v,g,r))}a=a.filter(function(y,x){return f[x]<=e})};a.length>0;)s();return o}function ec(t,n){return Re(function(){var e=n[0],r=n[1],a=n[2],o=oa(hl(t.shape.slice(0,3),[1]),e),s=oa(hl(t.shape.slice(0,3),[1]),r),l=oa(hl(t.shape.slice(0,3),[1]),a),c=Xt([o,s,l],3);return $t(t,c)})}function G6(t,n){return n===void 0&&(n=!1),Re(function(){var e=t.shape.slice(1),r=e[0],a=e[1];if(r===a)return t;var o=Math.abs(r-a),s=Math.round(o*(n?.5:1)),l=r>a?2:1,c=function(g){var y=t.shape.slice();return y[l]=g,oa(y,0)},f=c(s),h=o-f.shape[l],p=n&&h?c(h):null,v=[p,t,f].filter(function(g){return!!g}).map(function(g){return g.toFloat()});return Xt(v,l)})}function Qv(t){return 1/(1+Math.exp(-t))}var o0=function(t){He(n,t);function n(e,r,a,o,s){return s===void 0&&(s=!1),t.call(this,{x:e,y:r,width:a,height:o},s)||this}return n}(Do),X6=.5,Y6=.43,K6=.45,Dd=function(){function t(n,e,r){r===void 0&&(r=new ft(0,0));var a=e.width,o=e.height;this._imgDims=new Ms(a,o),this._shift=r,this._positions=n.map(function(s){return s.mul(new ft(a,o)).add(r)})}return Object.defineProperty(t.prototype,"shift",{get:function(){return new ft(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePositions",{get:function(){var n=this;return this._positions.map(function(e){return e.sub(n._shift).div(new ft(n.imageWidth,n.imageHeight))})},enumerable:!0,configurable:!0}),t.prototype.forSize=function(n,e){return new this.constructor(this.relativePositions,{width:n,height:e})},t.prototype.shiftBy=function(n,e){return new this.constructor(this.relativePositions,this._imgDims,new ft(n,e))},t.prototype.shiftByPoint=function(n){return this.shiftBy(n.x,n.y)},t.prototype.align=function(n,e){if(e===void 0&&(e={}),n){var r=n instanceof ha?n.box.floor():new Do(n);return this.shiftBy(r.x,r.y).align(null,e)}var a=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},e),o=a.useDlibAlignment,s=a.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(s)},t.prototype.alignDlib=function(){var n=this.getRefPointsForAlignment(),e=n[0],r=n[1],a=n[2],o=function(p){return a.sub(p).magnitude()},s=(o(e)+o(r))/2,l=Math.floor(s/K6),c=a0(n),f=Math.floor(Math.max(0,c.x-X6*l)),h=Math.floor(Math.max(0,c.y-Y6*l));return new o0(f,h,Math.min(l,this.imageWidth+f),Math.min(l,this.imageHeight+h))},t.prototype.alignMinBbox=function(n){var e=W6(this.positions);return e.pad(e.width*n,e.height*n)},t.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},t}(),$6=function(t){He(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],a0([e[3],e[4]])]},n}(Dd),Q6=function(t){He(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getJawOutline=function(){return this.positions.slice(0,17)},n.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},n.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},n.prototype.getNose=function(){return this.positions.slice(27,36)},n.prototype.getLeftEye=function(){return this.positions.slice(36,42)},n.prototype.getRightEye=function(){return this.positions.slice(42,48)},n.prototype.getMouth=function(){return this.positions.slice(48,68)},n.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(a0)},n}(Dd),ZS=function(){function t(n,e){this._label=n,this._distance=e}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(n){return n===void 0&&(n=!0),""+this.label+(n?" ("+q6(this.distance)+")":"")},t}(),JS=function(t){He(n,t);function n(e,r){var a=t.call(this,e)||this;return a._label=r,a}return n.assertIsValidLabeledBox=function(e,r){if(Do.assertIsValidBox(e,r),!fi(e.label))throw new Error(r+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),n}(Do),Mf=function(){function t(n,e){if(typeof n!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(e)||e.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=n,this._descriptors=e}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(n){return Array.from(n)})}},t.fromJSON=function(n){var e=n.descriptors.map(function(r){return new Float32Array(r)});return new t(n.label,e)},t}();(function(t){He(n,t);function n(e,r,a,o){var s=t.call(this,e,r)||this;return s._score=a,s._classScore=o,s}return n.assertIsValidPredictedBox=function(e,r){if(JS.assertIsValidLabeledBox(e,r),!QS(e.score)||!QS(e.classScore))throw new Error(r+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(n.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),n})(JS);function Z6(t){return t.detection instanceof ha}function i0(t,n){var e={detection:n};return Object.assign({},t,e)}function eA(){var t=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},n=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:t,readFile:n}}function tA(t){var n="";if(!t)try{t=require("fs")}catch(r){n=r.toString()}var e=t?function(r){return new Promise(function(a,o){t.readFile(r,function(s,l){return s?o(s):a(l)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+n)};return{readFile:e}}function nA(){var t=global.Canvas||global.HTMLCanvasElement,n=global.Image||global.HTMLImageElement,e=function(){if(t)return new t;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(n)return new n;throw new Error("createImageElement - missing Image implementation for nodejs environment")},a=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=tA();return Sn({Canvas:t||function(){function s(){}return s}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function s(){}return s}(),Image:n||function(){function s(){}return s}(),ImageData:global.ImageData||function(){function s(){}return s}(),Video:global.HTMLVideoElement||function(){function s(){}return s}(),createCanvasElement:e,createImageElement:r,fetch:a},o)}function rA(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function aA(){return typeof global=="object"&&typeof require=="function"&&typeof FA<"u"&&typeof process<"u"&&!!process.version}var Gt;function J6(){if(!Gt)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Gt}function qg(t){Gt=t}function s0(){rA()&&qg(eA()),aA()&&qg(nA())}function eq(t){if(Gt||s0(),!Gt)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var n=t.Canvas,e=n===void 0?Gt.Canvas:n,r=t.Image,a=r===void 0?Gt.Image:r;Gt.Canvas=e,Gt.Image=a,Gt.createCanvasElement=t.createCanvasElement||function(){return new e},Gt.createImageElement=t.createImageElement||function(){return new a},Gt.ImageData=t.ImageData||Gt.ImageData,Gt.Video=t.Video||Gt.Video,Gt.fetch=t.fetch||Gt.fetch,Gt.readFile=t.readFile||Gt.readFile}var kn={getEnv:J6,setEnv:qg,initialize:s0,createBrowserEnv:eA,createFileSystem:tA,createNodejsEnv:nA,monkeyPatch:eq,isBrowser:rA,isNodejs:aA};s0();function oA(t){return!kn.isNodejs()&&typeof t=="string"?document.getElementById(t):t}function bi(t){var n=kn.getEnv(),e=n.Canvas,r=n.CanvasRenderingContext2D;if(t instanceof r)return t;var a=oA(t);if(!(a instanceof e))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=a.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}var eE;(function(t){t.TOP_LEFT="TOP_LEFT",t.TOP_RIGHT="TOP_RIGHT",t.BOTTOM_LEFT="BOTTOM_LEFT",t.BOTTOM_RIGHT="BOTTOM_RIGHT"})(eE||(eE={}));function iA(t){var n=kn.getEnv(),e=n.Image,r=n.Video;return t instanceof e&&t.complete||t instanceof r&&t.readyState>=3}function tq(t){return new Promise(function(n,e){if(t instanceof kn.getEnv().Canvas||iA(t))return n();function r(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",a),n(o))}function a(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",a),e(o))}t.addEventListener("load",r),t.addEventListener("error",a)})}function sA(t){var n=kn.getEnv(),e=n.Image,r=n.Video;return t instanceof e?new Ms(t.naturalWidth,t.naturalHeight):t instanceof r?new Ms(t.videoWidth,t.videoHeight):new Ms(t.width,t.height)}function ph(t){var n=t.width,e=t.height,r=kn.getEnv().createCanvasElement,a=r();return a.width=n,a.height=e,a}function u0(t,n){var e=kn.getEnv().ImageData;if(!(t instanceof e)&&!iA(t))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=sA(t),a=r.width,o=r.height,s=ph({width:a,height:o});return t instanceof e?bi(s).putImageData(t,0,0):bi(s).drawImage(t,0,0,a,o),s}function nq(t,n){return Me(this,void 0,void 0,function(){var e,r,a,o,s,l;return Ie(this,function(c){switch(c.label){case 0:return e=kn.getEnv().createCanvasElement(),r=t.shape.slice(Ro(t)?1:0),a=r[0],o=r[1],s=r[2],l=Re(function(){return t.as3D(a,o,s).toInt()}),[4,r0.toPixels(l,e)];case 1:return c.sent(),l.dispose(),[2,e]}})})}function tE(t){var n=kn.getEnv(),e=n.Image,r=n.Canvas,a=n.Video;return t instanceof e||t instanceof r||t instanceof a}function rq(t,n,e){e===void 0&&(e=!1);var r=kn.getEnv(),a=r.Image,o=r.Canvas;if(!(t instanceof a||t instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var s=sA(t),l=n/Math.max(s.height,s.width),c=l*s.width,f=l*s.height,h=ph({width:n,height:n}),p=t instanceof o?t:u0(t),v=Math.abs(c-f)/2,g=e&&c<f?v:0,y=e&&f<c?v:0;return bi(h).drawImage(p,g,y,c,f),h}var Od=function(){function t(n,e){var r=this;if(e===void 0&&(e=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(n))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+n);this._treatAsBatchInput=e,this._batchSize=n.length,n.forEach(function(a,o){if(dh(a)){r._imageTensors[o]=a,r._inputDimensions[o]=a.shape;return}if(Ro(a)){var s=a.shape[0];if(s!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+s+" passed, but not supported in input array");r._imageTensors[o]=a,r._inputDimensions[o]=a.shape.slice(1);return}var l=a instanceof kn.getEnv().Canvas?a:u0(a);r._canvases[o]=l,r._inputDimensions[o]=[l.height,l.width,3]})}return Object.defineProperty(t.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reshapedInputDimensions",{get:function(){var n=this;return Al(this.batchSize,0,1).map(function(e,r){return n.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),t.prototype.getInput=function(n){return this.canvases[n]||this.imageTensors[n]},t.prototype.getInputDimensions=function(n){return this._inputDimensions[n]},t.prototype.getInputHeight=function(n){return this._inputDimensions[n][0]},t.prototype.getInputWidth=function(n){return this._inputDimensions[n][1]},t.prototype.getReshapedInputDimensions=function(n){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var e=this.getInputWidth(n),r=this.getInputHeight(n);return H6({width:e,height:r},this.inputSize)},t.prototype.toBatchTensor=function(n,e){var r=this;return e===void 0&&(e=!0),this._inputSize=n,Re(function(){var a=Al(r.batchSize,0,1).map(function(s){var l=r.getInput(s);if(l instanceof Rt){var c=Ro(l)?l:l.expandDims();return c=G6(c,e),(c.shape[1]!==n||c.shape[2]!==n)&&(c=Qy.resizeBilinear(c,[n,n])),c.as3D(n,n,3)}if(l instanceof kn.getEnv().Canvas)return r0.fromPixels(rq(l,n,e));throw new Error("toBatchTensor - at batchIdx "+s+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+l)}),o=ir(a.map(function(s){return s.toFloat()})).as4D(r.batchSize,n,n,3);return o})},t}();function sn(t){return Me(this,void 0,void 0,function(){var n,e,r;return Ie(this,function(a){switch(a.label){case 0:if(t instanceof Od)return[2,t];if(n=Array.isArray(t)?t:[t],!n.length)throw new Error("toNetInput - empty array passed as input");return e=function(o){return Array.isArray(t)?" at input index "+o+":":""},r=n.map(oA),r.forEach(function(o,s){if(!tE(o)&&!dh(o)&&!Ro(o))throw typeof n[s]=="string"?new Error("toNetInput -"+e(s)+" string passed, but could not resolve HTMLElement for element id "+n[s]):new Error("toNetInput -"+e(s)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Ro(o)){var l=o.shape[0];if(l!==1)throw new Error("toNetInput -"+e(s)+" tf.Tensor4D with batchSize "+l+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(o){return tE(o)&&tq(o)}))];case 1:return a.sent(),[2,new Od(r,Array.isArray(t))]}})})}function l0(t,n){return Me(this,void 0,void 0,function(){var e,r,a,o,s,l,c;return Ie(this,function(f){switch(f.label){case 0:return e=kn.getEnv().Canvas,r=t,t instanceof e?[3,5]:[4,sn(t)];case 1:if(a=f.sent(),a.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return o=a.getInput(0),o instanceof e?(s=o,[3,4]):[3,2];case 2:return[4,nq(o)];case 3:s=f.sent(),f.label=4;case 4:r=s,f.label=5;case 5:return l=bi(r),c=n.map(function(h){return h instanceof ha?h.forSize(r.width,r.height).box.floor():h}).map(function(h){return h.clipAtImageBorders(r.width,r.height)}),[2,c.map(function(h){var p=h.x,v=h.y,g=h.width,y=h.height,x=ph({width:g,height:y});return bi(x).putImageData(l.getImageData(p,v,g,y),0,0),x})]}})})}function c0(t,n){return Me(this,void 0,void 0,function(){return Ie(this,function(e){if(!dh(t)&&!Ro(t))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Ro(t)&&t.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Re(function(){var r=t.shape.slice(Ro(t)?1:0),a=r[0],o=r[1],s=r[2],l=n.map(function(f){return f instanceof ha?f.forSize(o,a).box:f}).map(function(f){return f.clipAtImageBorders(o,a)}),c=l.map(function(f){var h=f.x,p=f.y,v=f.width,g=f.height;return IR(t.as3D(a,o,s),[p,h,0],[g,v,s])});return c})]})})}function aq(t,n){return Me(this,void 0,void 0,function(){var e,r;return Ie(this,function(a){switch(a.label){case 0:return e=kn.getEnv().fetch,[4,e(t,n)];case 1:if(r=a.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function oq(t){return Me(this,void 0,void 0,function(){return Ie(this,function(n){switch(n.label){case 0:return[4,aq(t)];case 1:return[2,n.sent().json()]}})})}function uA(t,n){var e=n+"-weights_manifest.json";if(!t)return{modelBaseUri:"",manifestUri:e};if(t==="/")return{modelBaseUri:"/",manifestUri:"/"+e};var r=t.startsWith("http://")?"http://":t.startsWith("https://")?"https://":"";t=t.replace(r,"");var a=t.split("/").filter(function(l){return l}),o=t.endsWith(".json")?a[a.length-1]:e,s=r+(t.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return s=t.startsWith("/")?"/"+s:s,{modelBaseUri:s,manifestUri:s==="/"?"/"+o:s+"/"+o}}function iq(t,n){return Me(this,void 0,void 0,function(){var e,r,a,o;return Ie(this,function(s){switch(s.label){case 0:return e=uA(t,n),r=e.manifestUri,a=e.modelBaseUri,[4,oq(r)];case 1:return o=s.sent(),[2,QR.loadWeights(o,a)]}})})}var qa=function(){function t(n){this._name=n,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),t.prototype.getParamFromPath=function(n){var e=this.traversePropertyPath(n),r=e.obj,a=e.objProp;return r[a]},t.prototype.reassignParamFromPath=function(n,e){var r=this.traversePropertyPath(n),a=r.obj,o=r.objProp;a[o].dispose(),a[o]=e},t.prototype.getParamList=function(){var n=this;return this._paramMappings.map(function(e){var r=e.paramPath;return{path:r,tensor:n.getParamFromPath(r)}})},t.prototype.getTrainableParams=function(){return this.getParamList().filter(function(n){return n.tensor instanceof zs})},t.prototype.getFrozenParams=function(){return this.getParamList().filter(function(n){return!(n.tensor instanceof zs)})},t.prototype.variable=function(){var n=this;this.getFrozenParams().forEach(function(e){var r=e.path,a=e.tensor;n.reassignParamFromPath(r,a.variable())})},t.prototype.freeze=function(){var n=this;this.getTrainableParams().forEach(function(e){var r=e.path,a=e.tensor,o=vn(a.dataSync());a.dispose(),n.reassignParamFromPath(r,o)})},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.getParamList().forEach(function(e){if(n&&e.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+e.path);e.tensor.dispose()}),this._params=void 0},t.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(n){var e=n.tensor;return Array.from(e.dataSync())}).reduce(function(n,e){return n.concat(e)}))},t.prototype.load=function(n){return Me(this,void 0,void 0,function(){return Ie(this,function(e){switch(e.label){case 0:return n instanceof Float32Array?(this.extractWeights(n),[2]):[4,this.loadFromUri(n)];case 1:return e.sent(),[2]}})})},t.prototype.loadFromUri=function(n){return Me(this,void 0,void 0,function(){var e;return Ie(this,function(r){switch(r.label){case 0:if(n&&typeof n!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,iq(n,this.getDefaultModelName())];case 1:return e=r.sent(),this.loadFromWeightMap(e),[2]}})})},t.prototype.loadFromDisk=function(n){return Me(this,void 0,void 0,function(){var e,r,a,o,s,l,c,f,h,p;return Ie(this,function(v){switch(v.label){case 0:if(n&&typeof n!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return e=kn.getEnv().readFile,r=uA(n,this.getDefaultModelName()),a=r.manifestUri,o=r.modelBaseUri,s=function(g){return Promise.all(g.map(function(y){return e(y).then(function(x){return x.buffer})}))},l=QR.weightsLoaderFactory(s),h=(f=JSON).parse,[4,e(a)];case 1:return c=h.apply(f,[v.sent().toString()]),[4,l(c,o)];case 2:return p=v.sent(),this.loadFromWeightMap(p),[2]}})})},t.prototype.loadFromWeightMap=function(n){var e=this.extractParamsFromWeigthMap(n),r=e.paramMappings,a=e.params;this._paramMappings=r,this._params=a},t.prototype.extractWeights=function(n){var e=this.extractParams(n),r=e.paramMappings,a=e.params;this._paramMappings=r,this._params=a},t.prototype.traversePropertyPath=function(n){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var e=n.split("/").reduce(function(o,s){if(!o.nextObj.hasOwnProperty(s))throw new Error("traversePropertyPath - object does not have property "+s+", for path "+n);return{obj:o.nextObj,objProp:s,nextObj:o.nextObj[s]}},{nextObj:this.params}),r=e.obj,a=e.objProp;if(!r||!a||!(r[a]instanceof Rt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+n);return{obj:r,objProp:a}},t}();function or(t,n,e){return Re(function(){var r=Gy(t,n.depthwise_filter,n.pointwise_filter,e,"same");return r=Ze(r,n.bias),r})}function Zv(t,n,e){return e===void 0&&(e=!1),Re(function(){var r=At(e?Ze(Rr(t,n.conv0.filters,[2,2],"same"),n.conv0.bias):or(t,n.conv0,[2,2])),a=or(r,n.conv1,[1,1]),o=At(Ze(r,a)),s=or(o,n.conv2,[1,1]);return At(Ze(r,Ze(a,s)))})}function If(t,n,e,r){return e===void 0&&(e=!1),r===void 0&&(r=!0),Re(function(){var a=At(e?Ze(Rr(t,n.conv0.filters,r?[2,2]:[1,1],"same"),n.conv0.bias):or(t,n.conv0,r?[2,2]:[1,1])),o=or(a,n.conv1,[1,1]),s=At(Ze(a,o)),l=or(s,n.conv2,[1,1]),c=At(Ze(a,Ze(o,l))),f=or(c,n.conv3,[1,1]);return At(Ze(a,Ze(o,Ze(l,f))))})}function Lr(t,n,e,r){return e===void 0&&(e="same"),r===void 0&&(r=!1),Re(function(){var a=Ze(Rr(t,n.filters,[1,1],e),n.bias);return r?At(a):a})}function Ha(t,n){Object.keys(t).forEach(function(e){n.some(function(r){return r.originalPath===e})||t[e].dispose()})}function mh(t,n){return function(e,r,a,o){var s=Ln(t(e*r*a*a),[a,a,e,r]),l=qt(t(r));return n.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:s,bias:l}}}function f0(t,n){return function(e,r,a){var o=Co(t(e*r),[e,r]),s=qt(t(r));return n.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:o,bias:s}}}var lA=function(){function t(n,e,r){this.depthwise_filter=n,this.pointwise_filter=e,this.bias=r}return t}();function d0(t,n){return function(e,r,a){var o=Ln(t(9*e),[3,3,e,1]),s=Ln(t(e*r),[1,1,e,r]),l=qt(t(r));return n.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new lA(o,s,l)}}function h0(t){return function(n){var e=t(n+"/depthwise_filter",4),r=t(n+"/pointwise_filter",4),a=t(n+"/bias",1);return new lA(e,r,a)}}function Io(t,n){return function(e,r,a){var o=t[e];if(!fh(o,r))throw new Error("expected weightMap["+e+"] to be a Tensor"+r+"D, instead have "+o);return n.push({originalPath:e,paramPath:a||e}),o}}function Va(t){var n=t;function e(a){var o=n.slice(0,a);return n=n.slice(a),o}function r(){return n}return{extractWeights:e,getRemainingWeights:r}}function cA(t,n){var e=mh(t,n),r=d0(t,n);function a(s,l,c,f){f===void 0&&(f=!1);var h=f?e(s,l,3,c+"/conv0"):r(s,l,c+"/conv0"),p=r(l,l,c+"/conv1"),v=r(l,l,c+"/conv2");return{conv0:h,conv1:p,conv2:v}}function o(s,l,c,f){f===void 0&&(f=!1);var h=a(s,l,c,f),p=h.conv0,v=h.conv1,g=h.conv2,y=r(l,l,c+"/conv3");return{conv0:p,conv1:v,conv2:g,conv3:y}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:o}}function sq(t){var n=[],e=Va(t),r=e.extractWeights,a=e.getRemainingWeights,o=cA(r,n).extractDenseBlock4Params,s=o(3,32,"dense0",!0),l=o(32,64,"dense1"),c=o(64,128,"dense2"),f=o(128,256,"dense3");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{dense0:s,dense1:l,dense2:c,dense3:f}}}function fA(t){return function(n){var e=t(n+"/filters",4),r=t(n+"/bias",1);return{filters:e,bias:r}}}function dA(t,n){var e=Io(t,n),r=fA(e),a=h0(e);function o(l,c){c===void 0&&(c=!1);var f=c?r(l+"/conv0"):a(l+"/conv0"),h=a(l+"/conv1"),p=a(l+"/conv2");return{conv0:f,conv1:h,conv2:p}}function s(l,c){c===void 0&&(c=!1);var f=c?r(l+"/conv0"):a(l+"/conv0"),h=a(l+"/conv1"),p=a(l+"/conv2"),v=a(l+"/conv3");return{conv0:f,conv1:h,conv2:p,conv3:v}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:s}}function uq(t){var n=[],e=dA(t,n).extractDenseBlock4Params,r={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2"),dense3:e("dense3")};return Ha(t,n),{params:r,paramMappings:n}}var hA=function(t){He(n,t);function n(){return t.call(this,"FaceFeatureExtractor")||this}return n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return Re(function(){var a=e.toBatchTensor(112,!0),o=[122.782,117.001,104.298],s=ec(a,o).div(_e(255)),l=If(s,r.dense0,!0);return l=If(l,r.dense1),l=If(l,r.dense2),l=If(l,r.dense3),l=Zl(l,[7,7],[2,2],"valid"),l})},n.prototype.forward=function(e){return Me(this,void 0,void 0,function(){var r;return Ie(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,sn(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},n.prototype.extractParamsFromWeigthMap=function(e){return uq(e)},n.prototype.extractParams=function(e){return sq(e)},n}(qa);function na(t,n){return Re(function(){return Ze(uh(t,n.weights),n.bias)})}function lq(t,n,e){var r=[],a=Va(t),o=a.extractWeights,s=a.getRemainingWeights,l=f0(o,r),c=l(n,e,"fc");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:r,params:{fc:c}}}function cq(t){var n=[],e=Io(t,n);function r(o){var s=e(o+"/weights",2),l=e(o+"/bias",1);return{weights:s,bias:l}}var a={fc:r("fc")};return Ha(t,n),{params:a,paramMappings:n}}function pA(t){var n={},e={};return Object.keys(t).forEach(function(r){var a=r.startsWith("fc")?e:n;a[r]=t[r]}),{featureExtractorMap:n,classifierMap:e}}var mA=function(t){He(n,t);function n(e,r){var a=t.call(this,e)||this;return a._faceFeatureExtractor=r,a}return Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(e){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return Re(function(){var o=e instanceof Od?r.faceFeatureExtractor.forwardInput(e):e;return na(o.as2D(o.shape[0],-1),a.fc)})},n.prototype.dispose=function(e){e===void 0&&(e=!0),this.faceFeatureExtractor.dispose(e),t.prototype.dispose.call(this,e)},n.prototype.loadClassifierParams=function(e){var r=this.extractClassifierParams(e),a=r.params,o=r.paramMappings;this._params=a,this._paramMappings=o},n.prototype.extractClassifierParams=function(e){return lq(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},n.prototype.extractParamsFromWeigthMap=function(e){var r=pA(e),a=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),cq(o)},n.prototype.extractParams=function(e){var r=this.getClassifierChannelsIn(),a=this.getClassifierChannelsOut(),o=a*r+a,s=e.slice(0,e.length-o),l=e.slice(e.length-o);return this.faceFeatureExtractor.extractWeights(s),this.extractClassifierParams(l)},n}(qa),nE=["neutral","happy","sad","angry","fearful","disgusted","surprised"],fq=function(){function t(n){var e=this;if(n.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+n.length);nE.forEach(function(r,a){e[r]=n[a]})}return t.prototype.asSortedArray=function(){var n=this;return nE.map(function(e){return{expression:e,probability:n[e]}}).sort(function(e,r){return r.probability-e.probability})},t}(),dq=function(t){He(n,t);function n(e){return e===void 0&&(e=new hA),t.call(this,"FaceExpressionNet",e)||this}return n.prototype.forwardInput=function(e){var r=this;return Re(function(){return za(r.runNet(e))})},n.prototype.forward=function(e){return Me(this,void 0,void 0,function(){var r;return Ie(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,sn(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.predictExpressions=function(e){return Me(this,void 0,void 0,function(){var r,a,o,s,l=this;return Ie(this,function(c){switch(c.label){case 0:return[4,sn(e)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return a=c.sent(),[4,Promise.all(Yt(a).map(function(f){return Me(l,void 0,void 0,function(){var h;return Ie(this,function(p){switch(p.label){case 0:return[4,f.data()];case 1:return h=p.sent(),f.dispose(),[2,h]}})})}))];case 3:return o=c.sent(),a.dispose(),s=o.map(function(f){return new fq(f)}),[2,r.isBatchInput?s:s[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_expression_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n.prototype.getClassifierChannelsOut=function(){return 7},n}(mA);function vA(t,n){var e={expressions:n};return Object.assign({},t,e)}function hq(t){return Z6(t)&&t.landmarks instanceof Dd&&t.unshiftedLandmarks instanceof Dd&&t.alignedRect instanceof ha}function p0(t,n){var e=t.detection.box,r=n.shiftBy(e.x,e.y),a=r.align(),o=t.detection.imageDims,s=new ha(t.detection.score,a.rescale(o.reverse()),o),l={landmarks:r,unshiftedLandmarks:n,alignedRect:s};return Object.assign({},t,l)}function pq(t,n){var e=mh(t,n),r=d0(t,n);function a(s,l,c){var f=r(s,l,c+"/separable_conv0"),h=r(l,l,c+"/separable_conv1"),p=e(s,l,1,c+"/expansion_conv");return{separable_conv0:f,separable_conv1:h,expansion_conv:p}}function o(s,l){var c=r(s,s,l+"/separable_conv0"),f=r(s,s,l+"/separable_conv1"),h=r(s,s,l+"/separable_conv2");return{separable_conv0:c,separable_conv1:f,separable_conv2:h}}return{extractConvParams:e,extractSeparableConvParams:r,extractReductionBlockParams:a,extractMainBlockParams:o}}function mq(t,n){var e=[],r=Va(t),a=r.extractWeights,o=r.getRemainingWeights,s=pq(a,e),l=s.extractConvParams,c=s.extractSeparableConvParams,f=s.extractReductionBlockParams,h=s.extractMainBlockParams,p=l(3,32,3,"entry_flow/conv_in"),v=f(32,64,"entry_flow/reduction_block_0"),g=f(64,128,"entry_flow/reduction_block_1"),y={conv_in:p,reduction_block_0:v,reduction_block_1:g},x={};Al(n,0,1).forEach(function(A){x["main_block_"+A]=h(128,"middle_flow/main_block_"+A)});var S=f(128,256,"exit_flow/reduction_block"),w=c(256,512,"exit_flow/separable_conv"),T={reduction_block:S,separable_conv:w};if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{entry_flow:y,middle_flow:x,exit_flow:T}}}function vq(t,n){var e=Io(t,n),r=fA(e),a=h0(e);function o(l){var c=a(l+"/separable_conv0"),f=a(l+"/separable_conv1"),h=r(l+"/expansion_conv");return{separable_conv0:c,separable_conv1:f,expansion_conv:h}}function s(l){var c=a(l+"/separable_conv0"),f=a(l+"/separable_conv1"),h=a(l+"/separable_conv2");return{separable_conv0:c,separable_conv1:f,separable_conv2:h}}return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:o,extractMainBlockParams:s}}function gq(t,n){var e=[],r=vq(t,e),a=r.extractConvParams,o=r.extractSeparableConvParams,s=r.extractReductionBlockParams,l=r.extractMainBlockParams,c=a("entry_flow/conv_in"),f=s("entry_flow/reduction_block_0"),h=s("entry_flow/reduction_block_1"),p={conv_in:c,reduction_block_0:f,reduction_block_1:h},v={};Al(n,0,1).forEach(function(S){v["main_block_"+S]=l("middle_flow/main_block_"+S)});var g=s("exit_flow/reduction_block"),y=o("exit_flow/separable_conv"),x={reduction_block:g,separable_conv:y};return Ha(t,e),{params:{entry_flow:p,middle_flow:v,exit_flow:x},paramMappings:e}}function gA(t,n,e){return Ze(Rr(t,n.filters,e,"same"),n.bias)}function Jv(t,n,e){e===void 0&&(e=!0);var r=e?At(t):t;return r=or(r,n.separable_conv0,[1,1]),r=or(At(r),n.separable_conv1,[1,1]),r=rn(r,[3,3],[2,2],"same"),r=Ze(r,gA(t,n.expansion_conv,[2,2])),r}function yq(t,n){var e=or(At(t),n.separable_conv0,[1,1]);return e=or(At(e),n.separable_conv1,[1,1]),e=or(At(e),n.separable_conv2,[1,1]),e=Ze(e,t),e}var bq=function(t){He(n,t);function n(e){var r=t.call(this,"TinyXception")||this;return r._numMainBlocks=e,r}return n.prototype.forwardInput=function(e){var r=this,a=this.params;if(!a)throw new Error("TinyXception - load model before inference");return Re(function(){var o=e.toBatchTensor(112,!0),s=[122.782,117.001,104.298],l=ec(o,s).div(_e(256)),c=At(gA(l,a.entry_flow.conv_in,[2,2]));return c=Jv(c,a.entry_flow.reduction_block_0,!1),c=Jv(c,a.entry_flow.reduction_block_1),Al(r._numMainBlocks,0,1).forEach(function(f){c=yq(c,a.middle_flow["main_block_"+f])}),c=Jv(c,a.exit_flow.reduction_block),c=At(or(c,a.exit_flow.separable_conv,[1,1])),c})},n.prototype.forward=function(e){return Me(this,void 0,void 0,function(){var r;return Ie(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,sn(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"tiny_xception_model"},n.prototype.extractParamsFromWeigthMap=function(e){return gq(e,this._numMainBlocks)},n.prototype.extractParams=function(e){return mq(e,this._numMainBlocks)},n}(qa);function wq(t){var n=[],e=Va(t),r=e.extractWeights,a=e.getRemainingWeights,o=f0(r,n),s=o(512,1,"fc/age"),l=o(512,2,"fc/gender");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{fc:{age:s,gender:l}}}}function xq(t){var n=[],e=Io(t,n);function r(o){var s=e(o+"/weights",2),l=e(o+"/bias",1);return{weights:s,bias:l}}var a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Ha(t,n),{params:a,paramMappings:n}}var Md;(function(t){t.FEMALE="female",t.MALE="male"})(Md||(Md={}));var Sq=function(t){He(n,t);function n(e){e===void 0&&(e=new bq(2));var r=t.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=e,r}return Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(e){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return Re(function(){var o=e instanceof Od?r.faceFeatureExtractor.forwardInput(e):e,s=Zl(o,[7,7],[2,2],"valid").as2D(o.shape[0],-1),l=na(s,a.fc.age).as1D(),c=na(s,a.fc.gender);return{age:l,gender:c}})},n.prototype.forwardInput=function(e){var r=this;return Re(function(){var a=r.runNet(e),o=a.age,s=a.gender;return{age:o,gender:za(s)}})},n.prototype.forward=function(e){return Me(this,void 0,void 0,function(){var r;return Ie(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,sn(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.predictAgeAndGender=function(e){return Me(this,void 0,void 0,function(){var r,a,o,s,l,c,f=this;return Ie(this,function(h){switch(h.label){case 0:return[4,sn(e)];case 1:return r=h.sent(),[4,this.forwardInput(r)];case 2:return a=h.sent(),o=Yt(a.age),s=Yt(a.gender),l=o.map(function(p,v){return{ageTensor:p,genderTensor:s[v]}}),[4,Promise.all(l.map(function(p){var v=p.ageTensor,g=p.genderTensor;return Me(f,void 0,void 0,function(){var y,x,S,w,T;return Ie(this,function(A){switch(A.label){case 0:return[4,v.data()];case 1:return y=A.sent()[0],[4,g.data()];case 2:return x=A.sent()[0],S=x>.5,w=S?Md.MALE:Md.FEMALE,T=S?x:1-x,v.dispose(),g.dispose(),[2,{age:y,gender:w,genderProbability:T}]}})})}))];case 3:return c=h.sent(),a.age.dispose(),a.gender.dispose(),[2,r.isBatchInput?c:c[0]]}})})},n.prototype.getDefaultModelName=function(){return"age_gender_model"},n.prototype.dispose=function(e){e===void 0&&(e=!0),this.faceFeatureExtractor.dispose(e),t.prototype.dispose.call(this,e)},n.prototype.loadClassifierParams=function(e){var r=this.extractClassifierParams(e),a=r.params,o=r.paramMappings;this._params=a,this._paramMappings=o},n.prototype.extractClassifierParams=function(e){return wq(e)},n.prototype.extractParamsFromWeigthMap=function(e){var r=pA(e),a=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),xq(o)},n.prototype.extractParams=function(e){var r=1539,a=e.slice(0,e.length-r),o=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(o)},n}(qa),yA=function(t){He(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.postProcess=function(e,r,a){var o=a.map(function(l){var c=l.width,f=l.height,h=r/Math.max(f,c);return{width:c*h,height:f*h}}),s=o.length;return Re(function(){var l=function(v,g){return ir([oa([68],v),oa([68],g)],1).as2D(1,136).as1D()},c=function(v,g){var y=o[v],x=y.width,S=y.height;return g(x,S)?Math.abs(x-S)/2:0},f=function(v){return c(v,function(g,y){return g<y})},h=function(v){return c(v,function(g,y){return y<g})},p=e.mul(oa([s,136],r)).sub(ir(Array.from(Array(s),function(v,g){return l(f(g),h(g))}))).div(ir(Array.from(Array(s),function(v,g){return l(o[g].width,o[g].height)})));return p})},n.prototype.forwardInput=function(e){var r=this;return Re(function(){var a=r.runNet(e);return r.postProcess(a,e.inputSize,e.inputDimensions.map(function(o){var s=o[0],l=o[1];return{height:s,width:l}}))})},n.prototype.forward=function(e){return Me(this,void 0,void 0,function(){var r;return Ie(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,sn(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.detectLandmarks=function(e){return Me(this,void 0,void 0,function(){var r,a,o,s=this;return Ie(this,function(l){switch(l.label){case 0:return[4,sn(e)];case 1:return r=l.sent(),a=Re(function(){return Yt(s.forwardInput(r))}),[4,Promise.all(a.map(function(c,f){return Me(s,void 0,void 0,function(){var h,p,v,g,y;return Ie(this,function(x){switch(x.label){case 0:return v=(p=Array).from,[4,c.data()];case 1:return h=v.apply(p,[x.sent()]),g=h.filter(function(S,w){return KS(w)}),y=h.filter(function(S,w){return!KS(w)}),[2,new Q6(Array(68).fill(0).map(function(S,w){return new ft(g[w],y[w])}),{height:r.getInputHeight(f),width:r.getInputWidth(f)})]}})})}))];case 2:return o=l.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},n.prototype.getClassifierChannelsOut=function(){return 136},n}(mA),bA=function(t){He(n,t);function n(e){return e===void 0&&(e=new hA),t.call(this,"FaceLandmark68Net",e)||this}return n.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n}(yA);function Eq(t){var n=[],e=dA(t,n).extractDenseBlock3Params,r={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2")};return Ha(t,n),{params:r,paramMappings:n}}function Cq(t){var n=[],e=Va(t),r=e.extractWeights,a=e.getRemainingWeights,o=cA(r,n).extractDenseBlock3Params,s=o(3,32,"dense0",!0),l=o(32,64,"dense1"),c=o(64,128,"dense2");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{dense0:s,dense1:l,dense2:c}}}var _q=function(t){He(n,t);function n(){return t.call(this,"TinyFaceFeatureExtractor")||this}return n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Re(function(){var a=e.toBatchTensor(112,!0),o=[122.782,117.001,104.298],s=ec(a,o).div(_e(255)),l=Zv(s,r.dense0,!0);return l=Zv(l,r.dense1),l=Zv(l,r.dense2),l=Zl(l,[14,14],[2,2],"valid"),l})},n.prototype.forward=function(e){return Me(this,void 0,void 0,function(){var r;return Ie(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,sn(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},n.prototype.extractParamsFromWeigthMap=function(e){return Eq(e)},n.prototype.extractParams=function(e){return Cq(e)},n}(qa),Rq=function(t){He(n,t);function n(e){return e===void 0&&(e=new _q),t.call(this,"FaceLandmark68TinyNet",e)||this}return n.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},n.prototype.getClassifierChannelsIn=function(){return 128},n}(yA);(function(t){He(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(bA);function Aq(t,n){return Ze(Rn(t,n.weights),n.biases)}function m0(t,n,e,r,a){a===void 0&&(a="same");var o=n.conv,s=o.filters,l=o.bias,c=Rr(t,s,e,a);return c=Ze(c,l),c=Aq(c,n.scale),r?At(c):c}function Tq(t,n){return m0(t,n,[1,1],!0)}function wA(t,n){return m0(t,n,[1,1],!1)}function xA(t,n){return m0(t,n,[2,2],!0,"valid")}function kq(t,n){function e(l,c,f){var h=t(l),p=h.length/(c*f*f);if(U6(p))throw new Error("depth has to be an integer: "+p+", weights.length: "+h.length+", numFilters: "+c+", filterSize: "+f);return Re(function(){return No(Ln(h,[c,p,f,f]),[2,3,1,0])})}function r(l,c,f,h){var p=e(l,c,f),v=qt(t(c));return n.push({paramPath:h+"/filters"},{paramPath:h+"/bias"}),{filters:p,bias:v}}function a(l,c){var f=qt(t(l)),h=qt(t(l));return n.push({paramPath:c+"/weights"},{paramPath:c+"/biases"}),{weights:f,biases:h}}function o(l,c,f,h){var p=r(l,c,f,h+"/conv"),v=a(c,h+"/scale");return{conv:p,scale:v}}function s(l,c,f,h,p){p===void 0&&(p=!1);var v=o((p?.5:1)*l,c,f,h+"/conv1"),g=o(l,c,f,h+"/conv2");return{conv1:v,conv2:g}}return{extractConvLayerParams:o,extractResidualLayerParams:s}}function Nq(t){var n=Va(t),e=n.extractWeights,r=n.getRemainingWeights,a=[],o=kq(e,a),s=o.extractConvLayerParams,l=o.extractResidualLayerParams,c=s(4704,32,7,"conv32_down"),f=l(9216,32,3,"conv32_1"),h=l(9216,32,3,"conv32_2"),p=l(9216,32,3,"conv32_3"),v=l(36864,64,3,"conv64_down",!0),g=l(36864,64,3,"conv64_1"),y=l(36864,64,3,"conv64_2"),x=l(36864,64,3,"conv64_3"),S=l(147456,128,3,"conv128_down",!0),w=l(147456,128,3,"conv128_1"),T=l(147456,128,3,"conv128_2"),A=l(589824,256,3,"conv256_down",!0),C=l(589824,256,3,"conv256_1"),R=l(589824,256,3,"conv256_2"),k=l(589824,256,3,"conv256_down_out"),N=Re(function(){return No(Co(e(256*128),[128,256]),[1,0])});if(a.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var O={conv32_down:c,conv32_1:f,conv32_2:h,conv32_3:p,conv64_down:v,conv64_1:g,conv64_2:y,conv64_3:x,conv128_down:S,conv128_1:w,conv128_2:T,conv256_down:A,conv256_1:C,conv256_2:R,conv256_down_out:k,fc:N};return{params:O,paramMappings:a}}function Dq(t,n){var e=Io(t,n);function r(s){var l=e(s+"/scale/weights",1),c=e(s+"/scale/biases",1);return{weights:l,biases:c}}function a(s){var l=e(s+"/conv/filters",4),c=e(s+"/conv/bias",1),f=r(s);return{conv:{filters:l,bias:c},scale:f}}function o(s){return{conv1:a(s+"/conv1"),conv2:a(s+"/conv2")}}return{extractConvLayerParams:a,extractResidualLayerParams:o}}function Oq(t){var n=[],e=Dq(t,n),r=e.extractConvLayerParams,a=e.extractResidualLayerParams,o=r("conv32_down"),s=a("conv32_1"),l=a("conv32_2"),c=a("conv32_3"),f=a("conv64_down"),h=a("conv64_1"),p=a("conv64_2"),v=a("conv64_3"),g=a("conv128_down"),y=a("conv128_1"),x=a("conv128_2"),S=a("conv256_down"),w=a("conv256_1"),T=a("conv256_2"),A=a("conv256_down_out"),C=t.fc;if(n.push({originalPath:"fc",paramPath:"fc"}),!z6(C))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+C);var R={conv32_down:o,conv32_1:s,conv32_2:l,conv32_3:c,conv64_down:f,conv64_1:h,conv64_2:p,conv64_3:v,conv128_down:g,conv128_1:y,conv128_2:x,conv256_down:S,conv256_1:w,conv256_2:T,conv256_down_out:A,fc:C};return Ha(t,n),{params:R,paramMappings:n}}function $r(t,n){var e=Tq(t,n.conv1);return e=wA(e,n.conv2),e=Ze(e,t),e=At(e),e}function Bf(t,n){var e=xA(t,n.conv1);e=wA(e,n.conv2);var r=Zl(t,2,2,"valid"),a=St(r.shape),o=r.shape[3]!==e.shape[3],s=r.shape[1]!==e.shape[1]||r.shape[2]!==e.shape[2];if(s){var l=hl(e.shape);l[1]=1;var c=St(l);e=Xt([e,c],1);var f=hl(e.shape);f[2]=1;var h=St(f);e=Xt([e,h],2)}return r=o?Xt([r,a],3):r,e=Ze(r,e),e=At(e),e}var Mq=function(t){He(n,t);function n(){return t.call(this,"FaceRecognitionNet")||this}return n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return Re(function(){var a=e.toBatchTensor(150,!0).toFloat(),o=[122.782,117.001,104.298],s=ec(a,o).div(_e(256)),l=xA(s,r.conv32_down);l=rn(l,3,2,"valid"),l=$r(l,r.conv32_1),l=$r(l,r.conv32_2),l=$r(l,r.conv32_3),l=Bf(l,r.conv64_down),l=$r(l,r.conv64_1),l=$r(l,r.conv64_2),l=$r(l,r.conv64_3),l=Bf(l,r.conv128_down),l=$r(l,r.conv128_1),l=$r(l,r.conv128_2),l=Bf(l,r.conv256_down),l=$r(l,r.conv256_1),l=$r(l,r.conv256_2),l=Bf(l,r.conv256_down_out);var c=l.mean([1,2]),f=uh(c,r.fc);return f})},n.prototype.forward=function(e){return Me(this,void 0,void 0,function(){var r;return Ie(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,sn(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.computeFaceDescriptor=function(e){return Me(this,void 0,void 0,function(){var r,a,o,s=this;return Ie(this,function(l){switch(l.label){case 0:return[4,sn(e)];case 1:return r=l.sent(),a=Re(function(){return Yt(s.forwardInput(r))}),[4,Promise.all(a.map(function(c){return c.data()}))];case 2:return o=l.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_recognition_model"},n.prototype.extractParamsFromWeigthMap=function(e){return Oq(e)},n.prototype.extractParams=function(e){return Nq(e)},n}(qa);function SA(t,n){var e={descriptor:n};return Object.assign({},t,e)}function EA(t,n){var e={age:n};return Object.assign({},t,e)}function CA(t,n,e){var r={gender:n,genderProbability:e};return Object.assign({},t,r)}var _A=function(){function t(n){var e=n===void 0?{}:n,r=e.minFaceSize,a=e.scaleFactor,o=e.maxNumScales,s=e.scoreThresholds,l=e.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=a||.709,this._maxNumScales=o||10,this._scoreThresholds=s||[.6,.7,.7],this._scaleSteps=l,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(c){return typeof c!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(c){return typeof c!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(t.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),t}();function Iq(t,n){function e(c,f){var h=Ln(t(9*c),[3,3,c,1]),p=qt(t(c)),v=qt(t(c)),g=qt(t(c)),y=qt(t(c));return n.push({paramPath:f+"/filters"},{paramPath:f+"/batch_norm_scale"},{paramPath:f+"/batch_norm_offset"},{paramPath:f+"/batch_norm_mean"},{paramPath:f+"/batch_norm_variance"}),{filters:h,batch_norm_scale:p,batch_norm_offset:v,batch_norm_mean:g,batch_norm_variance:y}}function r(c,f,h,p,v){var g=Ln(t(c*f*h*h),[h,h,c,f]),y=qt(t(f));return n.push({paramPath:p+"/filters"},{paramPath:p+"/"+(v?"batch_norm_offset":"bias")}),{filters:g,bias:y}}function a(c,f,h,p){var v=r(c,f,h,p,!0),g=v.filters,y=v.bias;return{filters:g,batch_norm_offset:y}}function o(c,f,h){var p=e(c,h+"/depthwise_conv"),v=a(c,f,1,h+"/pointwise_conv");return{depthwise_conv:p,pointwise_conv:v}}function s(){var c=a(3,32,3,"mobilenetv1/conv_0"),f=o(32,64,"mobilenetv1/conv_1"),h=o(64,128,"mobilenetv1/conv_2"),p=o(128,128,"mobilenetv1/conv_3"),v=o(128,256,"mobilenetv1/conv_4"),g=o(256,256,"mobilenetv1/conv_5"),y=o(256,512,"mobilenetv1/conv_6"),x=o(512,512,"mobilenetv1/conv_7"),S=o(512,512,"mobilenetv1/conv_8"),w=o(512,512,"mobilenetv1/conv_9"),T=o(512,512,"mobilenetv1/conv_10"),A=o(512,512,"mobilenetv1/conv_11"),C=o(512,1024,"mobilenetv1/conv_12"),R=o(1024,1024,"mobilenetv1/conv_13");return{conv_0:c,conv_1:f,conv_2:h,conv_3:p,conv_4:v,conv_5:g,conv_6:y,conv_7:x,conv_8:S,conv_9:w,conv_10:T,conv_11:A,conv_12:C,conv_13:R}}function l(){var c=a(1024,256,1,"prediction_layer/conv_0"),f=a(256,512,3,"prediction_layer/conv_1"),h=a(512,128,1,"prediction_layer/conv_2"),p=a(128,256,3,"prediction_layer/conv_3"),v=a(256,128,1,"prediction_layer/conv_4"),g=a(128,256,3,"prediction_layer/conv_5"),y=a(256,64,1,"prediction_layer/conv_6"),x=a(64,128,3,"prediction_layer/conv_7"),S=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),w=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),T=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),A=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),C=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),R=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),k=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),N=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),O=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),D=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),M=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),P=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),F={box_encoding_predictor:S,class_predictor:w},U={box_encoding_predictor:T,class_predictor:A},W={box_encoding_predictor:C,class_predictor:R},Y={box_encoding_predictor:k,class_predictor:N},z={box_encoding_predictor:O,class_predictor:D},X={box_encoding_predictor:M,class_predictor:P};return{conv_0:c,conv_1:f,conv_2:h,conv_3:p,conv_4:v,conv_5:g,conv_6:y,conv_7:x,box_predictor_0:F,box_predictor_1:U,box_predictor_2:W,box_predictor_3:Y,box_predictor_4:z,box_predictor_5:X}}return{extractMobilenetV1Params:s,extractPredictionLayerParams:l}}function Bq(t){var n=[],e=Va(t),r=e.extractWeights,a=e.getRemainingWeights,o=Iq(r,n),s=o.extractMobilenetV1Params,l=o.extractPredictionLayerParams,c=s(),f=l(),h=Dy(r(5118*4),[1,5118,4]),p={extra_dim:h};if(n.push({paramPath:"output_layer/extra_dim"}),a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:{mobilenetv1:c,prediction_layer:f,output_layer:p},paramMappings:n}}function Fq(t,n){var e=Io(t,n);function r(f,h,p){var v=e(f+"/Conv2d_"+h+"_pointwise/weights",4,p+"/filters"),g=e(f+"/Conv2d_"+h+"_pointwise/convolution_bn_offset",1,p+"/batch_norm_offset");return{filters:v,batch_norm_offset:g}}function a(f){var h="mobilenetv1/conv_"+f,p="MobilenetV1/Conv2d_"+f+"_depthwise",v=h+"/depthwise_conv",g=h+"/pointwise_conv",y=e(p+"/depthwise_weights",4,v+"/filters"),x=e(p+"/BatchNorm/gamma",1,v+"/batch_norm_scale"),S=e(p+"/BatchNorm/beta",1,v+"/batch_norm_offset"),w=e(p+"/BatchNorm/moving_mean",1,v+"/batch_norm_mean"),T=e(p+"/BatchNorm/moving_variance",1,v+"/batch_norm_variance");return{depthwise_conv:{filters:y,batch_norm_scale:x,batch_norm_offset:S,batch_norm_mean:w,batch_norm_variance:T},pointwise_conv:r("MobilenetV1",f,g)}}function o(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}}function s(f,h){var p=e(f+"/weights",4,h+"/filters"),v=e(f+"/biases",1,h+"/bias");return{filters:p,bias:v}}function l(f){var h=s("Prediction/BoxPredictor_"+f+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+f+"/box_encoding_predictor"),p=s("Prediction/BoxPredictor_"+f+"/ClassPredictor","prediction_layer/box_predictor_"+f+"/class_predictor");return{box_encoding_predictor:h,class_predictor:p}}function c(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:l(0),box_predictor_1:l(1),box_predictor_2:l(2),box_predictor_3:l(3),box_predictor_4:l(4),box_predictor_5:l(5)}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:c}}function Pq(t){var n=[],e=Fq(t,n),r=e.extractMobilenetV1Params,a=e.extractPredictionLayerParams,o=t["Output/extra_dim"];if(n.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!dh(o))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+o);var s={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:o}};return Ha(t,n),{params:s,paramMappings:n}}function Qr(t,n,e){return Re(function(){var r=Rr(t,n.filters,e,"same");return r=Ze(r,n.batch_norm_offset),qy(r,0,6)})}var Lq=.0010000000474974513;function jq(t,n,e){return Re(function(){var r=sh(t,n.filters,e,"same");return r=bR(r,n.batch_norm_mean,n.batch_norm_variance,n.batch_norm_offset,n.batch_norm_scale,Lq),qy(r,0,6)})}function zq(t){return[2,4,6,12].some(function(n){return n===t})?[2,2]:[1,1]}function Uq(t,n){return Re(function(){var e=null,r=Qr(t,n.conv_0,[2,2]),a=[n.conv_1,n.conv_2,n.conv_3,n.conv_4,n.conv_5,n.conv_6,n.conv_7,n.conv_8,n.conv_9,n.conv_10,n.conv_11,n.conv_12,n.conv_13];if(a.forEach(function(o,s){var l=s+1,c=zq(l);r=jq(r,o.depthwise_conv,c),r=Qr(r,o.pointwise_conv,[1,1]),l===11&&(e=r)}),e===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:e}})}function qq(t,n,e,r,a){var o=t.shape[0],s=Math.min(e,o),l=n.map(function(h,p){return{score:h,boxIndex:p}}).filter(function(h){return h.score>a}).sort(function(h,p){return p.score-h.score}),c=function(h){return h<=r?1:0},f=[];return l.forEach(function(h){if(!(f.length>=s)){for(var p=h.score,v=f.length-1;v>=0;--v){var g=Hq(t,h.boxIndex,f[v]);if(g!==0&&(h.score*=c(g),h.score<=a))break}p===h.score&&f.push(h.boxIndex)}}),f}function Hq(t,n,e){var r=t.arraySync(),a=Math.min(r[n][0],r[n][2]),o=Math.min(r[n][1],r[n][3]),s=Math.max(r[n][0],r[n][2]),l=Math.max(r[n][1],r[n][3]),c=Math.min(r[e][0],r[e][2]),f=Math.min(r[e][1],r[e][3]),h=Math.max(r[e][0],r[e][2]),p=Math.max(r[e][1],r[e][3]),v=(s-a)*(l-o),g=(h-c)*(p-f);if(v<=0||g<=0)return 0;var y=Math.max(a,c),x=Math.max(o,f),S=Math.min(s,h),w=Math.min(l,p),T=Math.max(S-y,0)*Math.max(w-x,0);return T/(v+g-T)}function Vq(t){var n=Yt(No(t,[1,0])),e=[$t(n[2],n[0]),$t(n[3],n[1])],r=[Ze(n[0],Ir(e[0],_e(2))),Ze(n[1],Ir(e[1],_e(2)))];return{sizes:e,centers:r}}function Wq(t,n){var e=Vq(t),r=e.sizes,a=e.centers,o=Yt(No(n,[1,0])),s=Ir(Rn(Bg(Ir(o[2],_e(5))),r[0]),_e(2)),l=Ze(Rn(Ir(o[0],_e(10)),r[0]),a[0]),c=Ir(Rn(Bg(Ir(o[3],_e(5))),r[1]),_e(2)),f=Ze(Rn(Ir(o[1],_e(10)),r[1]),a[1]);return No(ir([$t(l,s),$t(f,c),Ze(l,s),Ze(f,c)]),[1,0])}function Gq(t,n,e){return Re(function(){var r=t.shape[0],a=Wq(Br(Ts(e.extra_dim,[r,1,1]),[-1,4]),Br(t,[-1,4]));a=Br(a,[r,a.shape[0]/r,4]);var o=mR(ua(n,[0,0,1],[-1,-1,-1])),s=ua(o,[0,0,0],[-1,-1,1]);s=Br(s,[r,s.shape[1]]);var l=Yt(a),c=Yt(s);return{boxes:l,scores:c}})}function bs(t,n){return Re(function(){var e=t.shape[0],r=Br(Lr(t,n.box_encoding_predictor),[e,-1,1,4]),a=Br(Lr(t,n.class_predictor),[e,-1,3]);return{boxPredictionEncoding:r,classPrediction:a}})}function Xq(t,n,e){return Re(function(){var r=Qr(t,e.conv_0,[1,1]),a=Qr(r,e.conv_1,[2,2]),o=Qr(a,e.conv_2,[1,1]),s=Qr(o,e.conv_3,[2,2]),l=Qr(s,e.conv_4,[1,1]),c=Qr(l,e.conv_5,[2,2]),f=Qr(c,e.conv_6,[1,1]),h=Qr(f,e.conv_7,[2,2]),p=bs(n,e.box_predictor_0),v=bs(t,e.box_predictor_1),g=bs(a,e.box_predictor_2),y=bs(s,e.box_predictor_3),x=bs(c,e.box_predictor_4),S=bs(h,e.box_predictor_5),w=Xt([p.boxPredictionEncoding,v.boxPredictionEncoding,g.boxPredictionEncoding,y.boxPredictionEncoding,x.boxPredictionEncoding,S.boxPredictionEncoding],1),T=Xt([p.classPrediction,v.classPrediction,g.classPrediction,y.classPrediction,x.classPrediction,S.classPrediction],1);return{boxPredictions:w,classPredictions:T}})}var vh=function(){function t(n){var e=n===void 0?{}:n,r=e.minConfidence,a=e.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=a||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(t.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),t}(),RA=function(t){He(n,t);function n(){return t.call(this,"SsdMobilenetv1")||this}return n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return Re(function(){var a=e.toBatchTensor(512,!1).toFloat(),o=$t(Rn(a,_e(.007843137718737125)),_e(1)),s=Uq(o,r.mobilenetv1),l=Xq(s.out,s.conv11,r.prediction_layer),c=l.boxPredictions,f=l.classPredictions;return Gq(c,f,r.output_layer)})},n.prototype.forward=function(e){return Me(this,void 0,void 0,function(){var r;return Ie(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,sn(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.locateFaces=function(e,r){return r===void 0&&(r={}),Me(this,void 0,void 0,function(){var a,o,s,l,c,f,h,p,v,g,y,x,S,w,T,A,C,R,k,N,O;return Ie(this,function(D){switch(D.label){case 0:return a=new vh(r),o=a.maxResults,s=a.minConfidence,[4,sn(e)];case 1:for(l=D.sent(),c=this.forwardInput(l),f=c.boxes,h=c.scores,p=f[0],v=h[0],g=1;g<f.length;g++)f[g].dispose(),h[g].dispose();return S=(x=Array).from,[4,v.data()];case 2:return y=S.apply(x,[D.sent()]),w=.5,T=qq(p,y,o,w,s),A=l.getReshapedInputDimensions(0),C=l.inputSize,R=C/A.width,k=C/A.height,N=p.arraySync(),O=T.map(function(M){var P=[Math.max(0,N[M][0]),Math.min(1,N[M][2])].map(function(X){return X*k}),F=P[0],U=P[1],W=[Math.max(0,N[M][1]),Math.min(1,N[M][3])].map(function(X){return X*R}),Y=W[0],z=W[1];return new ha(y[M],new o0(Y,F,z-Y,U-F),{height:l.getInputHeight(0),width:l.getInputWidth(0)})}),p.dispose(),v.dispose(),[2,O]}})})},n.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},n.prototype.extractParamsFromWeigthMap=function(e){return Pq(e)},n.prototype.extractParams=function(e){return Bq(e)},n}(qa);(function(t){He(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(RA);var Yq=.4,Kq=[new ft(.738768,.874946),new ft(2.42204,2.65704),new ft(4.30971,7.04493),new ft(10.246,4.59428),new ft(12.6868,11.8741)],$q=[new ft(1.603231,2.094468),new ft(6.041143,7.080126),new ft(2.882459,3.518061),new ft(4.266906,5.178857),new ft(9.041765,10.66308)],Qq=[117.001,114.697,97.404],Zq="tiny_yolov2_model",Jq="tiny_yolov2_separable_conv_model",Ff=function(t){return typeof t=="number"};function eH(t){if(!t)throw new Error("invalid config: "+t);if(typeof t.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+t.withSeparableConvs);if(!Ff(t.iouThreshold)||t.iouThreshold<0||t.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+t.iouThreshold);if(!Array.isArray(t.classes)||!t.classes.length||!t.classes.every(function(n){return typeof n=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(t.classes));if(!Array.isArray(t.anchors)||!t.anchors.length||!t.anchors.map(function(n){return n||{}}).every(function(n){return Ff(n.x)&&Ff(n.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(t.anchors));if(t.meanRgb&&(!Array.isArray(t.meanRgb)||t.meanRgb.length!==3||!t.meanRgb.every(Ff)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(t.meanRgb))}function v0(t){return Re(function(){var n=Rn(t,_e(.10000000149011612));return Ze(At($t(t,n)),n)})}function yo(t,n){return Re(function(){var e=_i(t,[[0,0],[1,1],[1,1],[0,0]]);return e=Rr(e,n.conv.filters,[1,1],"valid"),e=$t(e,n.bn.sub),e=Rn(e,n.bn.truediv),e=Ze(e,n.conv.bias),v0(e)})}function bo(t,n){return Re(function(){var e=_i(t,[[0,0],[1,1],[1,1],[0,0]]);return e=Gy(e,n.depthwise_filter,n.pointwise_filter,[1,1],"valid"),e=Ze(e,n.bias),v0(e)})}function tH(t,n){var e=mh(t,n);function r(s,l){var c=qt(t(s)),f=qt(t(s));return n.push({paramPath:l+"/sub"},{paramPath:l+"/truediv"}),{sub:c,truediv:f}}function a(s,l,c){var f=e(s,l,3,c+"/conv"),h=r(l,c+"/bn");return{conv:f,bn:h}}var o=d0(t,n);return{extractConvParams:e,extractConvWithBatchNormParams:a,extractSeparableConvParams:o}}function nH(t,n,e,r){var a=Va(t),o=a.extractWeights,s=a.getRemainingWeights,l=[],c=tH(o,l),f=c.extractConvParams,h=c.extractConvWithBatchNormParams,p=c.extractSeparableConvParams,v;if(n.withSeparableConvs){var g=r[0],y=r[1],x=r[2],S=r[3],w=r[4],T=r[5],A=r[6],C=r[7],R=r[8],k=n.isFirstLayerConv2d?f(g,y,3,"conv0"):p(g,y,"conv0"),N=p(y,x,"conv1"),O=p(x,S,"conv2"),D=p(S,w,"conv3"),M=p(w,T,"conv4"),P=p(T,A,"conv5"),F=C?p(A,C,"conv6"):void 0,U=R?p(C,R,"conv7"):void 0,W=f(R||C||A,5*e,1,"conv8");v={conv0:k,conv1:N,conv2:O,conv3:D,conv4:M,conv5:P,conv6:F,conv7:U,conv8:W}}else{var g=r[0],y=r[1],x=r[2],S=r[3],w=r[4],T=r[5],A=r[6],C=r[7],R=r[8],k=h(g,y,"conv0"),N=h(y,x,"conv1"),O=h(x,S,"conv2"),D=h(S,w,"conv3"),M=h(w,T,"conv4"),P=h(T,A,"conv5"),F=h(A,C,"conv6"),U=h(C,R,"conv7"),W=f(R,5*e,1,"conv8");v={conv0:k,conv1:N,conv2:O,conv3:D,conv4:M,conv5:P,conv6:F,conv7:U,conv8:W}}if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{params:v,paramMappings:l}}function rH(t,n){var e=Io(t,n);function r(l){var c=e(l+"/sub",1),f=e(l+"/truediv",1);return{sub:c,truediv:f}}function a(l){var c=e(l+"/filters",4),f=e(l+"/bias",1);return{filters:c,bias:f}}function o(l){var c=a(l+"/conv"),f=r(l+"/bn");return{conv:c,bn:f}}var s=h0(e);return{extractConvParams:a,extractConvWithBatchNormParams:o,extractSeparableConvParams:s}}function aH(t,n){var e=[],r=rH(t,e),a=r.extractConvParams,o=r.extractConvWithBatchNormParams,s=r.extractSeparableConvParams,l;if(n.withSeparableConvs){var c=n.filterSizes&&n.filterSizes.length||9;l={conv0:n.isFirstLayerConv2d?a("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:c>7?s("conv6"):void 0,conv7:c>8?s("conv7"):void 0,conv8:a("conv8")}}else l={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:a("conv8")};return Ha(t,e),{params:l,paramMappings:e}}var rE;(function(t){t[t.XS=224]="XS",t[t.SM=320]="SM",t[t.MD=416]="MD",t[t.LG=608]="LG"})(rE||(rE={}));var g0=function(){function t(n){var e=n===void 0?{}:n,r=e.inputSize,a=e.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=a||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),t}(),AA=function(t){He(n,t);function n(e){var r=t.call(this,"TinyYolov2")||this;return eH(e),r._config=e,r}return Object.defineProperty(n.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),n.prototype.runTinyYolov2=function(e,r){var a=yo(e,r.conv0);return a=rn(a,[2,2],[2,2],"same"),a=yo(a,r.conv1),a=rn(a,[2,2],[2,2],"same"),a=yo(a,r.conv2),a=rn(a,[2,2],[2,2],"same"),a=yo(a,r.conv3),a=rn(a,[2,2],[2,2],"same"),a=yo(a,r.conv4),a=rn(a,[2,2],[2,2],"same"),a=yo(a,r.conv5),a=rn(a,[2,2],[1,1],"same"),a=yo(a,r.conv6),a=yo(a,r.conv7),Lr(a,r.conv8,"valid",!1)},n.prototype.runMobilenet=function(e,r){var a=this.config.isFirstLayerConv2d?v0(Lr(e,r.conv0,"valid",!1)):bo(e,r.conv0);return a=rn(a,[2,2],[2,2],"same"),a=bo(a,r.conv1),a=rn(a,[2,2],[2,2],"same"),a=bo(a,r.conv2),a=rn(a,[2,2],[2,2],"same"),a=bo(a,r.conv3),a=rn(a,[2,2],[2,2],"same"),a=bo(a,r.conv4),a=rn(a,[2,2],[2,2],"same"),a=bo(a,r.conv5),a=rn(a,[2,2],[1,1],"same"),a=r.conv6?bo(a,r.conv6):a,a=r.conv7?bo(a,r.conv7):a,Lr(a,r.conv8,"valid",!1)},n.prototype.forwardInput=function(e,r){var a=this,o=this.params;if(!o)throw new Error("TinyYolov2 - load model before inference");return Re(function(){var s=e.toBatchTensor(r,!1).toFloat();return s=a.config.meanRgb?ec(s,a.config.meanRgb):s,s=s.div(_e(256)),a.config.withSeparableConvs?a.runMobilenet(s,o):a.runTinyYolov2(s,o)})},n.prototype.forward=function(e,r){return Me(this,void 0,void 0,function(){var a;return Ie(this,function(o){switch(o.label){case 0:return a=this.forwardInput,[4,sn(e)];case 1:return[4,a.apply(this,[o.sent(),r])];case 2:return[2,o.sent()]}})})},n.prototype.detect=function(e,r){return r===void 0&&(r={}),Me(this,void 0,void 0,function(){var a,o,s,l,c,f,h,p,v,g,y,x,S,w,T=this;return Ie(this,function(A){switch(A.label){case 0:return a=new g0(r),o=a.inputSize,s=a.scoreThreshold,[4,sn(e)];case 1:return l=A.sent(),[4,this.forwardInput(l,o)];case 2:return c=A.sent(),f=Re(function(){return Yt(c)[0].expandDims()}),h={width:l.getInputWidth(0),height:l.getInputHeight(0)},[4,this.extractBoxes(f,l.getReshapedInputDimensions(0),s)];case 3:return p=A.sent(),c.dispose(),f.dispose(),v=p.map(function(C){return C.box}),g=p.map(function(C){return C.score}),y=p.map(function(C){return C.classScore}),x=p.map(function(C){return T.config.classes[C.label]}),S=Tl(v.map(function(C){return C.rescale(o)}),g,this.config.iouThreshold,!0),w=S.map(function(C){return new JR(g[C],y[C],x[C],v[C],h)}),[2,w]}})})},n.prototype.getDefaultModelName=function(){return""},n.prototype.extractParamsFromWeigthMap=function(e){return aH(e,this.config)},n.prototype.extractParams=function(e){var r=this.config.filterSizes||n.DEFAULT_FILTER_SIZES,a=r?r.length:void 0;if(a!==7&&a!==8&&a!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+a+" filterSizes in config");return nH(e,this.config,this.boxEncodingSize,r)},n.prototype.extractBoxes=function(e,r,a){return Me(this,void 0,void 0,function(){var o,s,l,c,f,h,p,v,g,y,x,S,w,T,A,C,R,k,N,O,D,M,P,F,U,W,Y,z,X,K=this;return Ie(this,function(V){switch(V.label){case 0:return o=r.width,s=r.height,l=Math.max(o,s),c=l/o,f=l/s,h=e.shape[1],p=this.config.anchors.length,v=Re(function(){var I=e.reshape([h,h,p,K.boxEncodingSize]),H=I.slice([0,0,0,0],[h,h,p,4]),Q=I.slice([0,0,0,4],[h,h,p,1]),J=K.withClassScores?za(I.slice([0,0,0,5],[h,h,p,K.config.classes.length]),3):_e(0);return[H,Q,J]}),g=v[0],y=v[1],x=v[2],S=[],[4,y.array()];case 1:return w=V.sent(),[4,g.array()];case 2:T=V.sent(),A=0,V.label=3;case 3:if(!(A<h))return[3,12];C=0,V.label=4;case 4:if(!(C<h))return[3,11];R=0,V.label=5;case 5:return R<p?(k=Qv(w[A][C][R][0]),!a||k>a?(N=(C+Qv(T[A][C][R][0]))/h*c,O=(A+Qv(T[A][C][R][1]))/h*f,D=Math.exp(T[A][C][R][2])*this.config.anchors[R].x/h*c,M=Math.exp(T[A][C][R][3])*this.config.anchors[R].y/h*f,P=N-D/2,F=O-M/2,U={row:A,col:C,anchor:R},this.withClassScores?[4,this.extractPredictedClass(x,U)]:[3,7]):[3,9]):[3,10];case 6:return X=V.sent(),[3,8];case 7:X={classScore:1,label:0},V.label=8;case 8:W=X,Y=W.classScore,z=W.label,S.push(Sn({box:new hh(P,F,P+D,F+M),score:k,classScore:k*Y,label:z},U)),V.label=9;case 9:return R++,[3,5];case 10:return C++,[3,4];case 11:return A++,[3,3];case 12:return g.dispose(),y.dispose(),x.dispose(),[2,S]}})})},n.prototype.extractPredictedClass=function(e,r){return Me(this,void 0,void 0,function(){var a,o,s,l;return Ie(this,function(c){switch(c.label){case 0:return a=r.row,o=r.col,s=r.anchor,[4,e.array()];case 1:return l=c.sent(),[2,Array(this.config.classes.length).fill(0).map(function(f,h){return l[a][o][s][h]}).map(function(f,h){return{classScore:f,label:h}}).reduce(function(f,h){return f.classScore>h.classScore?f:h})]}})})},n.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],n}(qa),oH=function(t){He(n,t);function n(e){e===void 0&&(e=!0);var r=this,a=Object.assign({},{withSeparableConvs:e,iouThreshold:Yq,classes:["face"]},e?{anchors:$q,meanRgb:Qq}:{anchors:Kq,withClassScores:!0});return r=t.call(this,a)||this,r}return Object.defineProperty(n.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(e,r){return Me(this,void 0,void 0,function(){var a;return Ie(this,function(o){switch(o.label){case 0:return[4,this.detect(e,r)];case 1:return a=o.sent(),[2,a.map(function(s){return new ha(s.score,s.relativeBox,{width:s.imageWidth,height:s.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return this.withSeparableConvs?Jq:Zq},n.prototype.extractParamsFromWeigthMap=function(e){return t.prototype.extractParamsFromWeigthMap.call(this,e)},n}(AA),di=function(t){He(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e._name="TinyFaceDetectorOptions",e}return n}(g0),tc=function(){function t(){}return t.prototype.then=function(n){return Me(this,void 0,void 0,function(){var e;return Ie(this,function(r){switch(r.label){case 0:return e=n,[4,this.run()];case 1:return[2,e.apply(void 0,[r.sent()])]}})})},t.prototype.run=function(){return Me(this,void 0,void 0,function(){return Ie(this,function(n){throw new Error("ComposableTask - run is not implemented")})})},t}();function gh(t,n,e,r,a){return a===void 0&&(a=function(o){var s=o.alignedRect;return s}),Me(this,void 0,void 0,function(){var o,s,l,c,f;return Ie(this,function(h){switch(h.label){case 0:return o=t.map(function(p){return hq(p)?a(p):p.detection}),l=r,l?[3,5]:n instanceof Rt?[4,c0(n,o)]:[3,2];case 1:return c=h.sent(),[3,4];case 2:return[4,l0(n,o)];case 3:c=h.sent(),h.label=4;case 4:l=c,h.label=5;case 5:return s=l,[4,e(s)];case 6:return f=h.sent(),s.forEach(function(p){return p instanceof Rt&&p.dispose()}),[2,f]}})})}function y0(t,n,e,r,a){return Me(this,void 0,void 0,function(){var o=this;return Ie(this,function(s){return[2,gh([t],n,function(l){return Me(o,void 0,void 0,function(){return Ie(this,function(c){return[2,e(l[0])]})})},r,a)]})})}function iH(t){return Re(function(){return ir(Yt(t,3).reverse(),3)})}var Pf=2,Id=12;function sH(t,n){var e=mh(t,n),r=f0(t,n);function a(f,h){var p=qt(t(f));return n.push({paramPath:h}),p}function o(f,h,p){p===void 0&&(p=!1);var v=e(f[0],f[1],3,h+"/conv1"),g=a(f[1],h+"/prelu1_alpha"),y=e(f[1],f[2],3,h+"/conv2"),x=a(f[2],h+"/prelu2_alpha"),S=e(f[2],f[3],p?2:3,h+"/conv3"),w=a(f[3],h+"/prelu3_alpha");return{conv1:v,prelu1_alpha:g,conv2:y,prelu2_alpha:x,conv3:S,prelu3_alpha:w}}function s(){var f=o([3,10,16,32],"pnet"),h=e(32,2,1,"pnet/conv4_1"),p=e(32,4,1,"pnet/conv4_2");return Sn(Sn({},f),{conv4_1:h,conv4_2:p})}function l(){var f=o([3,28,48,64],"rnet",!0),h=r(576,128,"rnet/fc1"),p=a(128,"rnet/prelu4_alpha"),v=r(128,2,"rnet/fc2_1"),g=r(128,4,"rnet/fc2_2");return Sn(Sn({},f),{fc1:h,prelu4_alpha:p,fc2_1:v,fc2_2:g})}function c(){var f=o([3,32,64,64],"onet"),h=e(64,128,2,"onet/conv4"),p=a(128,"onet/prelu4_alpha"),v=r(1152,256,"onet/fc1"),g=a(256,"onet/prelu5_alpha"),y=r(256,2,"onet/fc2_1"),x=r(256,4,"onet/fc2_2"),S=r(256,10,"onet/fc2_3");return Sn(Sn({},f),{conv4:h,prelu4_alpha:p,fc1:v,prelu5_alpha:g,fc2_1:y,fc2_2:x,fc2_3:S})}return{extractPNetParams:s,extractRNetParams:l,extractONetParams:c}}function uH(t){var n=Va(t),e=n.extractWeights,r=n.getRemainingWeights,a=[],o=sH(e,a),s=o.extractPNetParams,l=o.extractRNetParams,c=o.extractONetParams,f=s(),h=l(),p=c();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:f,rnet:h,onet:p},paramMappings:a}}function lH(t,n){var e=Io(t,n);function r(h){var p=e(h+"/weights",4,h+"/filters"),v=e(h+"/bias",1);return{filters:p,bias:v}}function a(h){var p=e(h+"/weights",2),v=e(h+"/bias",1);return{weights:p,bias:v}}function o(h){return e(h,1)}function s(h){var p=r(h+"/conv1"),v=o(h+"/prelu1_alpha"),g=r(h+"/conv2"),y=o(h+"/prelu2_alpha"),x=r(h+"/conv3"),S=o(h+"/prelu3_alpha");return{conv1:p,prelu1_alpha:v,conv2:g,prelu2_alpha:y,conv3:x,prelu3_alpha:S}}function l(){var h=s("pnet"),p=r("pnet/conv4_1"),v=r("pnet/conv4_2");return Sn(Sn({},h),{conv4_1:p,conv4_2:v})}function c(){var h=s("rnet"),p=a("rnet/fc1"),v=o("rnet/prelu4_alpha"),g=a("rnet/fc2_1"),y=a("rnet/fc2_2");return Sn(Sn({},h),{fc1:p,prelu4_alpha:v,fc2_1:g,fc2_2:y})}function f(){var h=s("onet"),p=r("onet/conv4"),v=o("onet/prelu4_alpha"),g=a("onet/fc1"),y=o("onet/prelu5_alpha"),x=a("onet/fc2_1"),S=a("onet/fc2_2"),w=a("onet/fc2_3");return Sn(Sn({},h),{conv4:p,prelu4_alpha:v,fc1:g,prelu5_alpha:y,fc2_1:x,fc2_2:S,fc2_3:w})}return{extractPNetParams:l,extractRNetParams:c,extractONetParams:f}}function cH(t){var n=[],e=lH(t,n),r=e.extractPNetParams,a=e.extractRNetParams,o=e.extractONetParams,s=r(),l=a(),c=o();return Ha(t,n),{params:{pnet:s,rnet:l,onet:c},paramMappings:n}}function Hg(t,n){var e=n[0],r=n[1];return{height:Math.floor(e*t),width:Math.floor(r*t)}}function fH(t,n,e){for(var r=e[0],a=e[1],o=Id/t,s=[],l=Math.min(r,a)*o,c=0;l>=12;)s.push(o*Math.pow(n,c)),l=l*n,c+=1;return s}var b0=function(t){He(n,t);function n(e,r,a,o){return t.call(this,{left:e,top:r,right:a,bottom:o},!0)||this}return n}(Do);function TA(t){return Re(function(){return Rn($t(t,_e(127.5)),_e(.0078125))})}function Is(t,n){return Re(function(){return Ze(At(t),Rn(n,Ad(At(Ad(t)))))})}function w0(t,n,e){return e===void 0&&(e=!1),Re(function(){var r=Lr(t,n.conv1,"valid");return r=Is(r,n.prelu1_alpha),r=rn(r,e?[2,2]:[3,3],[2,2],"same"),r=Lr(r,n.conv2,"valid"),r=Is(r,n.prelu2_alpha),r=e?r:rn(r,[3,3],[2,2],"valid"),r=Lr(r,n.conv3,"valid"),r=Is(r,n.prelu3_alpha),r})}function dH(t,n){return Re(function(){var e=w0(t,n,!0),r=Lr(e,n.conv4_1,"valid"),a=Sr(lh(r,3),3),o=za($t(r,a),3),s=Lr(e,n.conv4_2,"valid");return{prob:o,regions:s}})}function hH(t,n){return Re(function(){var e=Hg(n,t.shape.slice(1)),r=e.height,a=e.width,o=Qy.resizeBilinear(t,[r,a]),s=TA(o);return No(s,[0,2,1,3])})}function pH(t,n,e,r){for(var a=[],o=t.arraySync(),s=0;s<t.shape[0];s++)for(var l=0;l<t.shape[1];l++)o[s][l]>=r&&a.push(new ft(l,s));var c=a.map(function(f){var h=new hh(Math.round((f.y*Pf+1)/e),Math.round((f.x*Pf+1)/e),Math.round((f.y*Pf+Id)/e),Math.round((f.x*Pf+Id)/e)),p=o[f.y][f.x],v=n.arraySync(),g=new b0(v[f.y][f.x][0],v[f.y][f.x][1],v[f.y][f.x][2],v[f.y][f.x][3]);return{cell:h,score:p,region:g}});return c}function mH(t,n,e,r,a){a.stage1=[];var o=n.map(function(v){return Re(function(){var g={scale:v},y=hH(t,v),x=Date.now(),S=dH(y,r),w=S.prob,T=S.regions;g.pnet=Date.now()-x;var A=Yt(Yt(w,3)[1])[0],C=Yt(T)[0];return{scoresTensor:A,regionsTensor:C,scale:v,statsForScale:g}})}),s=o.map(function(v){var g=v.scoresTensor,y=v.regionsTensor,x=v.scale,S=v.statsForScale,w=pH(g,y,x,e);if(g.dispose(),y.dispose(),!w.length)return a.stage1.push(S),[];var T=Date.now(),A=Tl(w.map(function(C){return C.cell}),w.map(function(C){return C.score}),.5);return S.nms=Date.now()-T,S.numBoxes=A.length,a.stage1.push(S),A.map(function(C){return w[C]})}),l=s.reduce(function(v,g){return v.concat(g)},[]),c=[],f=[];if(l.length>0){var h=Date.now(),p=Tl(l.map(function(v){return v.cell}),l.map(function(v){return v.score}),.7);a.stage1_nms=Date.now()-h,f=p.map(function(v){return l[v].score}),c=p.map(function(v){return l[v]}).map(function(v){var g=v.cell,y=v.region;return new hh(g.left+y.left*g.width,g.top+y.top*g.height,g.right+y.right*g.width,g.bottom+y.bottom*g.height).toSquare().round()})}return{boxes:c,scores:f}}function kA(t,n,e){var r=e.width,a=e.height;return Me(this,void 0,void 0,function(){var o,s,l,c=this;return Ie(this,function(f){switch(f.label){case 0:return o=bi(t),[4,Promise.all(n.map(function(h){return Me(c,void 0,void 0,function(){var p,v,g,y,x,S,w,T;return Ie(this,function(A){return p=h.padAtBorders(t.height,t.width),v=p.y,g=p.ey,y=p.x,x=p.ex,S=y-1,w=v-1,T=o.getImageData(S,w,x-S,g-w),[2,kn.isNodejs()?u0(T):createImageBitmap(T)]})})}))];case 1:return s=f.sent(),l=[],s.forEach(function(h){var p=ph({width:r,height:a}),v=bi(p);v.drawImage(h,0,0,r,a);for(var g=v.getImageData(0,0,r,a).data,y=[],x=0;x<g.length;x+=4)y.push(g[x+2]),y.push(g[x+1]),y.push(g[x]);l.push(y)}),[2,l.map(function(h){var p=Re(function(){var v=No(Ln(h,[1,r,a,3]),[0,2,1,3]).toFloat();return TA(v)});return p})]}})})}function vH(t,n){return Re(function(){var e=w0(t,n),r=Br(e,[e.shape[0],n.fc1.weights.shape[0]]),a=na(r,n.fc1),o=Is(a,n.prelu4_alpha),s=na(o,n.fc2_1),l=Sr(lh(s,1),1),c=za($t(s,l),1),f=na(o,n.fc2_2),h=Yt(c,1)[1];return{scores:h,regions:f}})}function gH(t,n,e,r,a){return Me(this,void 0,void 0,function(){var o,s,l,c,f,h,p,v,g,y,x,S,w,T;return Ie(this,function(A){switch(A.label){case 0:return o=Date.now(),[4,kA(t,n,{width:24,height:24})];case 1:return s=A.sent(),a.stage2_extractImagePatches=Date.now()-o,o=Date.now(),l=s.map(function(C){var R=vH(C,r);return C.dispose(),R}),a.stage2_rnet=Date.now()-o,c=l.length>1?Xt(l.map(function(C){return C.scores})):l[0].scores,p=(h=Array).from,[4,c.data()];case 2:return f=p.apply(h,[A.sent()]),c.dispose(),v=f.map(function(C,R){return{score:C,idx:R}}).filter(function(C){return C.score>e}).map(function(C){var R=C.idx;return R}),g=v.map(function(C){return n[C]}),y=v.map(function(C){return f[C]}),x=[],S=[],g.length>0&&(o=Date.now(),w=Tl(g,y,.7),a.stage2_nms=Date.now()-o,T=w.map(function(C){var R=l[v[C]].regions.arraySync();return new b0(R[0][0],R[0][1],R[0][2],R[0][3])}),S=w.map(function(C){return y[C]}),x=w.map(function(C,R){return g[C].calibrate(T[R])})),l.forEach(function(C){C.regions.dispose(),C.scores.dispose()}),[2,{boxes:x,scores:S}]}})})}function yH(t,n){return Re(function(){var e=w0(t,n);e=rn(e,[2,2],[2,2],"same"),e=Lr(e,n.conv4,"valid"),e=Is(e,n.prelu4_alpha);var r=Br(e,[e.shape[0],n.fc1.weights.shape[0]]),a=na(r,n.fc1),o=Is(a,n.prelu5_alpha),s=na(o,n.fc2_1),l=Sr(lh(s,1),1),c=za($t(s,l),1),f=na(o,n.fc2_2),h=na(o,n.fc2_3),p=Yt(c,1)[1];return{scores:p,regions:f,points:h}})}function bH(t,n,e,r,a){return Me(this,void 0,void 0,function(){var o,s,l,c,f,h,p,v,g,y,x,S,w,T,A;return Ie(this,function(C){switch(C.label){case 0:return o=Date.now(),[4,kA(t,n,{width:48,height:48})];case 1:return s=C.sent(),a.stage3_extractImagePatches=Date.now()-o,o=Date.now(),l=s.map(function(R){var k=yH(R,r);return R.dispose(),k}),a.stage3_onet=Date.now()-o,c=l.length>1?Xt(l.map(function(R){return R.scores})):l[0].scores,p=(h=Array).from,[4,c.data()];case 2:return f=p.apply(h,[C.sent()]),c.dispose(),v=f.map(function(R,k){return{score:R,idx:k}}).filter(function(R){return R.score>e}).map(function(R){var k=R.idx;return k}),g=v.map(function(R){var k=l[R].regions.arraySync();return new b0(k[0][0],k[0][1],k[0][2],k[0][3])}),y=v.map(function(R,k){return n[R].calibrate(g[k])}),x=v.map(function(R){return f[R]}),S=[],w=[],T=[],y.length>0&&(o=Date.now(),A=Tl(y,x,.7,!1),a.stage3_nms=Date.now()-o,S=A.map(function(R){return y[R]}),w=A.map(function(R){return x[R]}),T=A.map(function(R,k){return Array(5).fill(0).map(function(N,O){var D=l[R].points.arraySync();return new ft(D[0][O]*(S[k].width+1)+S[k].left,D[0][O+5]*(S[k].height+1)+S[k].top)})})),l.forEach(function(R){R.regions.dispose(),R.scores.dispose(),R.points.dispose()}),[2,{boxes:S,scores:w,points:T}]}})})}var wH=function(t){He(n,t);function n(){return t.call(this,"Mtcnn")||this}return n.prototype.load=function(e){return Me(this,void 0,void 0,function(){return Ie(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.load.call(this,e)]})})},n.prototype.loadFromDisk=function(e){return Me(this,void 0,void 0,function(){return Ie(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.loadFromDisk.call(this,e)]})})},n.prototype.forwardInput=function(e,r){return r===void 0&&(r={}),Me(this,void 0,void 0,function(){var a,o,s,l,c,f,h,p,v,g,y,x,S,w,T,A,C,R,k,N,O;return Ie(this,function(D){switch(D.label){case 0:if(a=this.params,!a)throw new Error("Mtcnn - load model before inference");if(o=e.canvases[0],!o)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return s={},l=Date.now(),c=Re(function(){return iH(Sr(r0.fromPixels(o)).toFloat())}),f=function(M){return c.dispose(),s.total=Date.now()-l,M},h=c.shape.slice(1),p=h[0],v=h[1],g=new _A(r),y=g.minFaceSize,x=g.scaleFactor,S=g.maxNumScales,w=g.scoreThresholds,T=g.scaleSteps,A=(T||fH(y,x,[p,v])).filter(function(M){var P=Hg(M,[p,v]);return Math.min(P.width,P.height)>Id}).slice(0,S),s.scales=A,s.pyramid=A.map(function(M){return Hg(M,[p,v])}),C=Date.now(),[4,mH(c,A,w[0],a.pnet,s)];case 1:return R=D.sent(),s.total_stage1=Date.now()-C,R.boxes.length?(s.stage2_numInputBoxes=R.boxes.length,C=Date.now(),[4,gH(o,R.boxes,w[1],a.rnet,s)]):[2,f({results:[],stats:s})];case 2:return k=D.sent(),s.total_stage2=Date.now()-C,k.boxes.length?(s.stage3_numInputBoxes=k.boxes.length,C=Date.now(),[4,bH(o,k.boxes,w[2],a.onet,s)]):[2,f({results:[],stats:s})];case 3:return N=D.sent(),s.total_stage3=Date.now()-C,O=N.boxes.map(function(M,P){return p0(i0({},new ha(N.scores[P],new o0(M.left/v,M.top/p,M.width/v,M.height/p),{height:p,width:v})),new $6(N.points[P].map(function(F){return F.sub(new ft(M.left,M.top)).div(new ft(M.width,M.height))}),{width:M.width,height:M.height}))}),[2,f({results:O,stats:s})]}})})},n.prototype.forward=function(e,r){return r===void 0&&(r={}),Me(this,void 0,void 0,function(){var a;return Ie(this,function(o){switch(o.label){case 0:return a=this.forwardInput,[4,sn(e)];case 1:return[4,a.apply(this,[o.sent(),r])];case 2:return[2,o.sent().results]}})})},n.prototype.forwardWithStats=function(e,r){return r===void 0&&(r={}),Me(this,void 0,void 0,function(){var a;return Ie(this,function(o){switch(o.label){case 0:return a=this.forwardInput,[4,sn(e)];case 1:return[2,a.apply(this,[o.sent(),r])]}})})},n.prototype.getDefaultModelName=function(){return"mtcnn_model"},n.prototype.extractParamsFromWeigthMap=function(e){return cH(e)},n.prototype.extractParams=function(e){return uH(e)},n}(qa),xH=.4,SH=[new ft(1.603231,2.094468),new ft(6.041143,7.080126),new ft(2.882459,3.518061),new ft(4.266906,5.178857),new ft(9.041765,10.66308)],EH=[117.001,114.697,97.404],CH=function(t){He(n,t);function n(){var e=this,r={withSeparableConvs:!0,iouThreshold:xH,classes:["face"],anchors:SH,meanRgb:EH,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e=t.call(this,r)||this,e}return Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(e,r){return Me(this,void 0,void 0,function(){var a;return Ie(this,function(o){switch(o.label){case 0:return[4,this.detect(e,r)];case 1:return a=o.sent(),[2,a.map(function(s){return new ha(s.score,s.relativeBox,{width:s.imageWidth,height:s.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},n.prototype.extractParamsFromWeigthMap=function(e){return t.prototype.extractParamsFromWeigthMap.call(this,e)},n}(AA),An={ssdMobilenetv1:new RA,tinyFaceDetector:new CH,tinyYolov2:new oH,mtcnn:new wH,faceLandmark68Net:new bA,faceLandmark68TinyNet:new Rq,faceRecognitionNet:new Mq,faceExpressionNet:new dq,ageGenderNet:new Sq},NA=function(t){He(n,t);function n(e,r,a){var o=t.call(this)||this;return o.parentTask=e,o.input=r,o.extractedFaces=a,o}return n}(tc),x0=function(t){He(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Me(this,void 0,void 0,function(){var e,r,a=this;return Ie(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),[4,gh(e,this.input,function(s){return Me(a,void 0,void 0,function(){return Ie(this,function(l){switch(l.label){case 0:return[4,Promise.all(s.map(function(c){return An.faceExpressionNet.predictExpressions(c)}))];case 1:return[2,l.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,e.map(function(s,l){return vA(s,r[l])})]}})})},n.prototype.withAgeAndGender=function(){return new _0(this,this.input)},n}(NA),S0=function(t){He(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Me(this,void 0,void 0,function(){var e,r;return Ie(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return e=a.sent(),e?[4,y0(e,this.input,function(o){return An.faceExpressionNet.predictExpressions(o)},this.extractedFaces)]:[2];case 2:return r=a.sent(),[2,vA(e,r)]}})})},n.prototype.withAgeAndGender=function(){return new R0(this,this.input)},n}(NA),E0=function(t){He(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.withAgeAndGender=function(){return new A0(this,this.input)},n.prototype.withFaceDescriptors=function(){return new k0(this,this.input)},n}(x0),C0=function(t){He(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.withAgeAndGender=function(){return new T0(this,this.input)},n.prototype.withFaceDescriptor=function(){return new N0(this,this.input)},n}(S0),DA=function(t){He(n,t);function n(e,r,a){var o=t.call(this)||this;return o.parentTask=e,o.input=r,o.extractedFaces=a,o}return n}(tc),_0=function(t){He(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Me(this,void 0,void 0,function(){var e,r,a=this;return Ie(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),[4,gh(e,this.input,function(s){return Me(a,void 0,void 0,function(){return Ie(this,function(l){switch(l.label){case 0:return[4,Promise.all(s.map(function(c){return An.ageGenderNet.predictAgeAndGender(c)}))];case 1:return[2,l.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,e.map(function(s,l){var c=r[l],f=c.age,h=c.gender,p=c.genderProbability;return EA(CA(s,h,p),f)})]}})})},n.prototype.withFaceExpressions=function(){return new x0(this,this.input)},n}(DA),R0=function(t){He(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Me(this,void 0,void 0,function(){var e,r,a,o,s;return Ie(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return e=l.sent(),e?[4,y0(e,this.input,function(c){return An.ageGenderNet.predictAgeAndGender(c)},this.extractedFaces)]:[2];case 2:return r=l.sent(),a=r.age,o=r.gender,s=r.genderProbability,[2,EA(CA(e,o,s),a)]}})})},n.prototype.withFaceExpressions=function(){return new S0(this,this.input)},n}(DA),A0=function(t){He(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.withFaceExpressions=function(){return new E0(this,this.input)},n.prototype.withFaceDescriptors=function(){return new k0(this,this.input)},n}(_0),T0=function(t){He(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.withFaceExpressions=function(){return new C0(this,this.input)},n.prototype.withFaceDescriptor=function(){return new N0(this,this.input)},n}(R0),OA=function(t){He(n,t);function n(e,r){var a=t.call(this)||this;return a.parentTask=e,a.input=r,a}return n}(tc),k0=function(t){He(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Me(this,void 0,void 0,function(){var e,r;return Ie(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return e=a.sent(),[4,gh(e,this.input,function(o){return Promise.all(o.map(function(s){return An.faceRecognitionNet.computeFaceDescriptor(s)}))},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=a.sent(),[2,r.map(function(o,s){return SA(e[s],o)})]}})})},n.prototype.withFaceExpressions=function(){return new E0(this,this.input)},n.prototype.withAgeAndGender=function(){return new A0(this,this.input)},n}(OA),N0=function(t){He(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Me(this,void 0,void 0,function(){var e,r;return Ie(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return e=a.sent(),e?[4,y0(e,this.input,function(o){return An.faceRecognitionNet.computeFaceDescriptor(o)},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=a.sent(),[2,SA(e,r)]}})})},n.prototype.withFaceExpressions=function(){return new C0(this,this.input)},n.prototype.withAgeAndGender=function(){return new T0(this,this.input)},n}(OA),MA=function(t){He(n,t);function n(e,r,a){var o=t.call(this)||this;return o.parentTask=e,o.input=r,o.useTinyLandmarkNet=a,o}return Object.defineProperty(n.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?An.faceLandmark68TinyNet:An.faceLandmark68Net},enumerable:!0,configurable:!0}),n}(tc),_H=function(t){He(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Me(this,void 0,void 0,function(){var e,r,a,o,s,l=this;return Ie(this,function(c){switch(c.label){case 0:return[4,this.parentTask];case 1:return e=c.sent(),r=e.map(function(f){return f.detection}),this.input instanceof Rt?[4,c0(this.input,r)]:[3,3];case 2:return o=c.sent(),[3,5];case 3:return[4,l0(this.input,r)];case 4:o=c.sent(),c.label=5;case 5:return a=o,[4,Promise.all(a.map(function(f){return l.landmarkNet.detectLandmarks(f)}))];case 6:return s=c.sent(),a.forEach(function(f){return f instanceof Rt&&f.dispose()}),[2,e.map(function(f,h){return p0(f,s[h])})]}})})},n.prototype.withFaceExpressions=function(){return new E0(this,this.input)},n.prototype.withAgeAndGender=function(){return new A0(this,this.input)},n.prototype.withFaceDescriptors=function(){return new k0(this,this.input)},n}(MA),RH=function(t){He(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Me(this,void 0,void 0,function(){var e,r,a,o,s;return Ie(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return e=l.sent(),e?(r=e.detection,this.input instanceof Rt?[4,c0(this.input,[r])]:[3,3]):[2];case 2:return o=l.sent(),[3,5];case 3:return[4,l0(this.input,[r])];case 4:o=l.sent(),l.label=5;case 5:return a=o,[4,this.landmarkNet.detectLandmarks(a[0])];case 6:return s=l.sent(),a.forEach(function(c){return c instanceof Rt&&c.dispose()}),[2,p0(e,s)]}})})},n.prototype.withFaceExpressions=function(){return new C0(this,this.input)},n.prototype.withAgeAndGender=function(){return new T0(this,this.input)},n.prototype.withFaceDescriptor=function(){return new N0(this,this.input)},n}(MA),IA=function(t){He(n,t);function n(e,r){r===void 0&&(r=new vh);var a=t.call(this)||this;return a.input=e,a.options=r,a}return n}(tc),BA=function(t){He(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Me(this,void 0,void 0,function(){var e,r,a,o;return Ie(this,function(s){switch(s.label){case 0:return e=this,r=e.input,a=e.options,a instanceof _A?[4,An.mtcnn.forward(r,a)]:[3,2];case 1:return[2,s.sent().map(function(l){return l.detection})];case 2:if(o=a instanceof di?function(l){return An.tinyFaceDetector.locateFaces(l,a)}:a instanceof vh?function(l){return An.ssdMobilenetv1.locateFaces(l,a)}:a instanceof g0?function(l){return An.tinyYolov2.locateFaces(l,a)}:null,!o)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,o(r)]}})})},n.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise(function(r){return Me(e,void 0,void 0,function(){var a;return Ie(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return a=o.sent(),[2,r(a.map(function(s){return i0({},s)}))]}})})})},n.prototype.withFaceLandmarks=function(e){return e===void 0&&(e=!1),new _H(this.runAndExtendWithFaceDetections(),this.input,e)},n.prototype.withFaceExpressions=function(){return new x0(this.runAndExtendWithFaceDetections(),this.input)},n.prototype.withAgeAndGender=function(){return new _0(this.runAndExtendWithFaceDetections(),this.input)},n}(IA);(function(t){He(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Me(this,void 0,void 0,function(){var e,r;return Ie(this,function(a){switch(a.label){case 0:return[4,new BA(this.input,this.options)];case 1:return e=a.sent(),r=e[0],e.forEach(function(o){o.score>r.score&&(r=o)}),[2,r]}})})},n.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise(function(r){return Me(e,void 0,void 0,function(){var a;return Ie(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return a=o.sent(),[2,r(a?i0({},a):void 0)]}})})})},n.prototype.withFaceLandmarks=function(e){return e===void 0&&(e=!1),new RH(this.runAndExtendWithFaceDetection(),this.input,e)},n.prototype.withFaceExpressions=function(){return new S0(this.runAndExtendWithFaceDetection(),this.input)},n.prototype.withAgeAndGender=function(){return new R0(this.runAndExtendWithFaceDetection(),this.input)},n})(IA);function Bs(t,n){return n===void 0&&(n=new vh),new BA(t,n)}function AH(t,n){if(t.length!==n.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var e=Array.from(t),r=Array.from(n);return Math.sqrt(e.map(function(a,o){return a-r[o]}).reduce(function(a,o){return a+Math.pow(o,2)},0))}(function(){function t(n,e){e===void 0&&(e=.6),this._distanceThreshold=e;var r=Array.isArray(n)?n:[n];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var a=1,o=function(){return"person "+a++};this._labeledDescriptors=r.map(function(s){if(s instanceof Mf)return s;if(s instanceof Float32Array)return new Mf(o(),[s]);if(s.descriptor&&s.descriptor instanceof Float32Array)return new Mf(o(),[s.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(t.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),t.prototype.computeMeanDistance=function(n,e){return e.map(function(r){return AH(r,n)}).reduce(function(r,a){return r+a},0)/(e.length||1)},t.prototype.matchDescriptor=function(n){var e=this;return this.labeledDescriptors.map(function(r){var a=r.descriptors,o=r.label;return new ZS(o,e.computeMeanDistance(n,a))}).reduce(function(r,a){return r.distance<a.distance?r:a})},t.prototype.findBestMatch=function(n){var e=this.matchDescriptor(n);return e.distance<this.distanceThreshold?e:new ZS("unknown",e.distance)},t.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(n){return n.toJSON()})}},t.fromJSON=function(n){var e=n.labeledDescriptors.map(function(r){return Mf.fromJSON(r)});return new t(e,n.distanceThreshold)},t})();function TH(){const[t,n]=L.useState(null),[e,r]=L.useState(null),[a,o]=L.useState(!1),[s,l]=L.useState(null),[c,f]=L.useState([]),[h,p]=L.useState(!1),v=N=>{const O=N.target.files[0];if(!O)return;N.target.value=null;const D=URL.createObjectURL(O);O.type.startsWith("image/")?(r(null),n(D),w(D),p(!0)):O.type.startsWith("video/")?(n(null),r(D),p(!0)):alert("Unsupported file type. Please upload an image or video")},g=(...N)=>{let O=0;for(let D=0;D<N.length-1;D++){const M=N[D],P=N[D+1];O+=Math.sqrt(Math.pow(M.x-P.x,2)+Math.pow(M.y-P.y,2))}return O},y=(N,O)=>{const X=O.x+O.width/2,K=O.y+O.height/2,V=0;if(!N[30]||!N[28]||!N[58]||!N[9]||!N[37]||!N[40]||!N[43]||!N[46])return null;const I=g(N[30],N[28]),H=g(N[58],N[9]),Q=I+H>0?Math.asin((.5-H/(I+H))*2):0,J=g(N[37],N[40]),re=g(N[43],N[46]),ie=J+re>0?Math.asin((.5-re/(J+re))*2)*2.5:0,pe=N[37].y-N[46].y,Se=g(N[37],N[46]),xe=Se>0?N[37].x<N[46].x?Math.asin(pe/Se):1-Math.asin(pe/Se)+Math.PI*.68:0,Ee=g(N[37],N[46])*.7;return Math.abs(ie)>.7?null:{position:{x:X,y:K,z:V},rotation:{x:Q,y:ie,z:xe},scale:{x:Ee,y:Ee,z:Ee}}},x=(N,O,D,M)=>{if(!O)return;const P=O.position.x*D,F=O.position.y*M,U=O.scale.x*Math.min(D,M);N.lineWidth=3,N.strokeStyle="#ff0000",N.beginPath(),N.moveTo(P,F),N.lineTo(P+Math.cos(O.rotation.y)*U*.3,F+Math.sin(O.rotation.x)*U*.3),N.stroke(),N.strokeStyle="#00ff00",N.beginPath(),N.moveTo(P,F),N.lineTo(P+Math.sin(O.rotation.y)*U*.3,F-Math.cos(O.rotation.x)*U*.3),N.stroke(),N.strokeStyle="#0000ff",N.beginPath(),N.moveTo(P,F),N.lineTo(P+Math.cos(O.rotation.z)*U*.2,F+Math.sin(O.rotation.z)*U*.2),N.stroke(),N.fillStyle="#ffffff",N.beginPath(),N.arc(P,F,4,0,2*Math.PI),N.fill()},S=(N,O,D,M,P)=>{const F=N.getContext("2d",{willReadFrequently:!0});F.strokeStyle="#ff0000",F.fillStyle="#ff0000",F.lineWidth=1,O.positions.forEach(Q=>{F.beginPath(),F.arc(Q.x*D,Q.y*M,1,0,2*Math.PI),F.fill()});const U=O.getJawOutline(),W=O.getNose(),Y=O.getMouth(),z=O.getLeftEye(),X=O.getRightEye(),K=O.getLeftEyeBrow(),V=O.getRightEyeBrow(),I=(Q,J=!1)=>{Q.length>0&&(F.beginPath(),F.moveTo(Q[0].x*D,Q[0].y*M),Q.forEach(re=>{F.lineTo(re.x*D,re.y*M)}),J&&F.closePath(),F.stroke())};I(U),I(W),I(Y,!0),I(z,!0),I(X,!0),I(K),I(V);const H=y(O.positions,P);H&&x(F,H,D,M)},w=async N=>{const O=new Image;O.src=N,O.onload=async()=>{const D=document.getElementById("face-canvas"),M=document.getElementById("landmark-canvas");D.width=O.width,D.height=O.height,D.getContext("2d",{willReadFrequently:!0}).drawImage(O,0,0);const F=await Bs(D,new di).withFaceLandmarks();setTimeout(()=>{const U=D.offsetWidth,W=D.offsetHeight;M.width=U,M.height=W,M.style.width=U+"px",M.style.height=W+"px";const Y=U/O.width,z=W/O.height;M.getContext("2d").clearRect(0,0,M.width,M.height);const K=F.map(V=>{const I=V.detection.box;return S(M,V.landmarks,Y,z,I),{x:I.x*Y,y:I.y*z,width:I.width*Y,height:I.height*z}});f(K),p(!1)},100)}},T=async()=>{try{p(!0);const N=await navigator.mediaDevices.getUserMedia({video:!0});l(N),o(!0),p(!1)}catch(N){console.error("Error accessing webcam:",N),p(!1)}},A=async()=>{const N=document.getElementById("video"),O=document.getElementById("video-landmark-canvas");if(N&&N.readyState===4&&O)try{const D=await Bs(N,new di).withFaceLandmarks(),M=N.getBoundingClientRect(),P=M.width/N.videoWidth,F=M.height/N.videoHeight;O.width=M.width,O.height=M.height,O.style.width=M.width+"px",O.style.height=M.height+"px",O.getContext("2d",{willReadFrequently:!0}).clearRect(0,0,O.width,O.height);const W=D.map(Y=>{const z=Y.detection.box;return S(O,Y.landmarks,P,F,z),{x:z.x*P,y:z.y*F,width:z.width*P,height:z.height*F}});f(W)}catch(D){console.error("Error in video face detection:",D)}a&&requestAnimationFrame(A)},C=async()=>{const N=document.getElementById("uploaded-video"),O=document.getElementById("video-file-landmark-canvas");if(N&&N.readyState>=2&&O)try{const D=await Bs(N,new di).withFaceLandmarks(),M=N.getBoundingClientRect(),P=M.width/N.videoWidth,F=M.height/N.videoHeight;O.width=M.width,O.height=M.height,O.style.width=M.width+"px",O.style.height=M.height+"px",O.getContext("2d",{willReadFrequently:!0}).clearRect(0,0,O.width,O.height);const W=D.map(Y=>{const z=Y.detection.box;return S(O,Y.landmarks,P,F,z),{x:z.x*P,y:z.y*F,width:z.width*P,height:z.height*F}});f(W)}catch(D){console.error("Error in video file face detection:",D)}e&&!(N!=null&&N.paused)&&requestAnimationFrame(C)},R=()=>{p(!1),C()},k=()=>{f([]),n(null),r(null),o(!1),s&&s.getTracks().forEach(N=>N.stop()),l(null),p(!1)};return L.useEffect(()=>{(async()=>{try{await An.tinyFaceDetector.loadFromUri("/models"),await An.faceLandmark68Net.loadFromUri("/models"),console.log("TinyFaceDetector and FaceLandmark models loaded successfully")}catch(O){console.error("Error loading models:",O)}})()},[]),L.useEffect(()=>{if(a&&s){const N=document.getElementById("video");N.srcObject=s,N.onloadedmetadata=()=>{A()}}},[a,s]),E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-29"}),E.jsx("hr",{}),E.jsxs("div",{className:"asg29-container",children:[E.jsx("input",{type:"file",accept:"image/*, video/*",disabled:h||a||t||e,onChange:v}),E.jsx("button",{onClick:T,disabled:h||a||t||e,children:h?"Loading...":"Start Webcam"}),(t||e||a)&&E.jsx("button",{onClick:k,children:"Reset"}),(t||e||a)&&E.jsxs(E.Fragment,{children:[t&&!a&&!e&&E.jsxs("div",{className:"face-container",children:[E.jsx("canvas",{id:"face-canvas",className:"canvas-image"}),E.jsx("canvas",{id:"landmark-canvas",className:"landmark-overlay"}),c.map((N,O)=>E.jsx("div",{className:"face-box",style:{top:`${N.y}px`,left:`${N.x}px`,width:`${N.width}px`,height:`${N.height}px`}},O))]}),e&&!a&&E.jsxs("div",{className:"face-container",children:[E.jsx("video",{id:"uploaded-video",src:e,autoPlay:!0,muted:!0,loop:!0,controls:!0,className:"canvas-image",style:{width:"100%"},onLoadedData:R,onPlay:C}),E.jsx("canvas",{id:"video-file-landmark-canvas",className:"landmark-overlay"}),c.map((N,O)=>E.jsx("div",{className:"face-box",style:{top:`${N.y}px`,left:`${N.x}px`,width:`${N.width}px`,height:`${N.height}px`}},O))]}),a&&E.jsxs("div",{className:"face-container",children:[E.jsx("video",{id:"video",autoPlay:!0,muted:!0,className:"canvas-image",style:{width:"100%"}}),E.jsx("canvas",{id:"video-landmark-canvas",className:"landmark-overlay"}),c.map((N,O)=>E.jsx("div",{className:"face-box",style:{top:`${N.y}px`,left:`${N.x}px`,width:`${N.width}px`,height:`${N.height}px`}},O))]})]})]})]})}function kH(){const[t,n]=L.useState(null),[e,r]=L.useState(null),[a,o]=L.useState(!1),[s,l]=L.useState(null),[c,f]=L.useState(!1),h=R=>{const k=R.target.files[0];if(!k)return;R.target.value=null;const N=URL.createObjectURL(k);k.type.startsWith("image/")?(r(null),n(N),p(N),f(!0)):k.type.startsWith("video/")?(n(null),r(N),f(!0)):alert("Unsupported file type. Please upload an image or video")},p=async R=>{const k=new Image;k.src=R,k.onload=async()=>{const N=document.getElementById("face-canvas"),O=document.getElementById("landmark-canvas");N.width=k.width,N.height=k.height,N.getContext("2d",{willReadFrequently:!0}).drawImage(k,0,0);const M=await Bs(N,new di).withFaceLandmarks();setTimeout(()=>{const P=N.offsetWidth,F=N.offsetHeight;O.width=P,O.height=F;const U=P/k.width,W=F/k.height,Y=O.getContext("2d");Y.clearRect(0,0,O.width,O.height),M.forEach(z=>{x(z.landmarks,Y,U,W)}),f(!1)},100)}},v=async()=>{try{f(!0);const R=await navigator.mediaDevices.getUserMedia({video:!0});l(R),o(!0),f(!1)}catch(R){console.error("Error accessing webcam:",R),f(!1)}},g=async()=>{const R=document.getElementById("video"),k=document.getElementById("video-landmark-canvas");if(R&&R.readyState===4&&k)try{const N=await Bs(R,new di).withFaceLandmarks(),O=R.getBoundingClientRect(),D=O.width/R.videoWidth,M=O.height/R.videoHeight;k.width=O.width,k.height=O.height,k.style.width=O.width+"px",k.style.height=O.height+"px";const P=k.getContext("2d",{willReadFrequently:!0});P.clearRect(0,0,k.width,k.height),N.forEach(F=>{x(F.landmarks,P,D,M)})}catch(N){console.error("Error in video face detection:",N)}a&&requestAnimationFrame(g)},y=async()=>{const R=document.getElementById("uploaded-video"),k=document.getElementById("video-file-landmark-canvas");if(R&&R.readyState>=2&&k)try{const N=await Bs(R,new di).withFaceLandmarks(),O=R.getBoundingClientRect(),D=O.width/R.videoWidth,M=O.height/R.videoHeight;k.width=O.width,k.height=O.height,k.style.width=O.width+"px",k.style.height=O.height+"px";const P=k.getContext("2d",{willReadFrequently:!0});P.clearRect(0,0,k.width,k.height),N.forEach(F=>{x(F.landmarks,P,D,M)})}catch(N){console.error("Error in video file face detection:",N)}e&&!(R!=null&&R.paused)&&requestAnimationFrame(y)};function x(R,k,N=1,O=1){if(!R)return;const D=R.getLeftEye(),M=R.getRightEye(),P=R.getJawOutline();if(D.length===0||M.length===0)return;const F=T(D,N,O),U=T(M,N,O),W=(F.x+U.x)/2,Y=(F.y+U.y)/2,z=U.x-F.x,X=U.y-F.y,K=Math.sqrt(z*z+X*X),V=Math.atan2(X,z),I=K*.45,H=K*.35,Q=K*.12;k.save(),k.translate(W,Y),k.rotate(V),w(k,-K/2,0,I,H),w(k,K/2,0,I,H),k.fillStyle="#2a2a2a",k.fillRect(-Q/2,-H*.15,Q,H*.3),k.restore(),S(k,F,U,P,N,O,K,V)}function S(R,k,N,O,D,M,P,F){const U=O.length,W=O[Math.floor(U*.05)],Y=O[Math.floor(U*.95)],z=W.x*D,X=W.y*M,K=Y.x*D,V=Y.y*M,I=P*.25,H=k.x-Math.cos(F)*I,Q=k.y-Math.sin(F)*I,J=N.x+Math.cos(F)*I,re=N.y+Math.sin(F)*I;R.strokeStyle="#1a1a1a",R.lineWidth=3,R.lineCap="round",R.beginPath(),R.moveTo(H,Q),R.lineTo(z,X),R.stroke(),R.beginPath(),R.moveTo(J,re),R.lineTo(K,V),R.stroke()}function w(R,k,N,O,D){R.beginPath(),R.fillStyle="rgba(15, 15, 15, 0.95)";const M=Math.min(O,D)/6;R.roundRect(k-O/2,N-D/2,O,D,M),R.fill(),R.strokeStyle="#2a2a2a",R.lineWidth=2.5,R.stroke(),R.fillStyle="rgba(255, 255, 255, 0.15)",R.fillRect(k-O/2+O*.1,N-D/2+D*.1,O*.3,D*.2)}function T(R,k,N){const O=R.map(F=>F.x*k),D=R.map(F=>F.y*N),M=O.reduce((F,U)=>F+U,0)/O.length,P=D.reduce((F,U)=>F+U,0)/D.length;return{x:M,y:P}}const A=()=>{f(!1),y()},C=()=>{n(null),r(null),o(!1),s&&s.getTracks().forEach(R=>R.stop()),l(null),f(!1)};return L.useEffect(()=>{(async()=>{try{await An.tinyFaceDetector.loadFromUri("/models"),await An.faceLandmark68Net.loadFromUri("/models"),console.log("TinyFaceDetector and FaceLandmark models loaded successfully")}catch(k){console.error("Error loading models:",k)}})()},[]),L.useEffect(()=>{if(a&&s){const R=document.getElementById("video");R.srcObject=s,R.onloadedmetadata=()=>{g()}}},[a,s]),E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-30"}),E.jsx("hr",{}),E.jsxs("div",{className:"asg30-container",children:[E.jsx("input",{type:"file",accept:"image/*, video/*",disabled:c||a||t||e,onChange:h}),E.jsx("button",{onClick:v,disabled:c||a||t||e,children:c?"Loading...":"Start Webcam"}),(t||e||a)&&E.jsx("button",{onClick:C,children:"Reset"}),(t||e||a)&&E.jsxs(E.Fragment,{children:[t&&!a&&!e&&E.jsxs("div",{className:"face-container",children:[E.jsx("canvas",{id:"face-canvas",className:"canvas-image"}),E.jsx("canvas",{id:"landmark-canvas",className:"landmark-overlay"})]}),e&&!a&&E.jsxs("div",{className:"face-container",children:[E.jsx("video",{id:"uploaded-video",src:e,autoPlay:!0,muted:!0,loop:!0,controls:!0,className:"canvas-image",style:{width:"100%"},onLoadedData:A,onPlay:y}),E.jsx("canvas",{id:"video-file-landmark-canvas",className:"landmark-overlay"})]}),a&&E.jsxs("div",{className:"face-container",children:[E.jsx("video",{id:"video",autoPlay:!0,muted:!0,className:"canvas-image",style:{width:"100%"}}),E.jsx("canvas",{id:"video-landmark-canvas",className:"landmark-overlay"})]})]})]})]})}function NH(){const[t,n]=L.useState(!1),[e,r]=L.useState(0),[a,o]=L.useState(0),s=L.useRef(null),l=()=>{const h=s.current;h&&(h.paused?(h.play(),n(!0)):(h.pause(),n(!1)))},c=()=>{const h=s.current;h&&(r(h.currentTime),o(h.duration||0))},f=h=>{const v=h.currentTarget.getBoundingClientRect(),g=h.clientX-v.left,y=v.width,x=s.current;if(x&&a){const S=g/y*a;x.currentTime=S,r(S)}};return L.useEffect(()=>{const h=s.current;if(h){h.addEventListener("timeupdate",c),h.addEventListener("loadedmetadata",c);const p=()=>{n(!1),r(a)};h.addEventListener("ended",p);const v=setInterval(()=>{h&&!h.paused&&c()},50);return()=>{h.removeEventListener("timeupdate",c),h.removeEventListener("loadedmetadata",c),h.removeEventListener("ended",p),clearInterval(v)}}},[a]),E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-31"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsxs("div",{className:"asg31-container",children:[E.jsxs("video",{className:"asg31-video",ref:s,loop:!0,autoPlay:!0,onTimeUpdate:c,muted:!0,id:"asg31-video",onPlay:()=>n(!0),onPause:()=>n(!1),children:[E.jsx("source",{src:"./custom-video-player.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),E.jsxs("div",{className:"asg31-controls",children:[E.jsx("button",{className:`asg31-play-btn ${t?"pause":"play"}`,onClick:l}),E.jsx("div",{className:"asg31-progress-container",onClick:f,children:E.jsx("div",{className:"asg31-progress-bar",children:E.jsx("div",{className:"asg31-progress-fill",style:{width:`${a?e/a*100:0}%`}})})}),E.jsxs("div",{className:"asg31-time-display",children:[E.jsx("span",{className:"asg31-current-time",children:e.toFixed(2)}),E.jsx("span",{children:"/"}),E.jsx("span",{className:"asg31-total-time",children:a.toFixed(2)})]})]})]})]})}function DH(){const[t,n]=L.useState([{text:"Item #1",color:"#FF6F61"},{text:"Item #2",color:"#6B5B95"},{text:"Item #3",color:"#88B04B"},{text:"Item #4",color:"#F7CAC9"},{text:"Item #5",color:"#92A8D1"}]),[e,r]=L.useState({index:null,position:null}),a=(c,f)=>{console.log("Dragging : ",f),c.dataTransfer.setData("text/plain",f)},o=(c,f)=>{c.preventDefault();const h=c.currentTarget.getBoundingClientRect(),p=c.clientY,v=h.height,y=h.top+v/2;p<y?r({index:f,position:"top"}):r({index:f,position:"bottom"})},s=()=>{r({index:null,position:null})},l=(c,f)=>{c.preventDefault();const h=parseInt(c.dataTransfer.getData("text/plain"));if(h===f){r({index:null,position:null});return}let p=f;e.position==="bottom"&&(p=f+1),h<p&&(p-=1);const v=[...t],g=v.splice(h,1)[0];v.splice(p,0,g),n(v),r({index:null,position:null})};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-32"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsxs("div",{className:"asg32-container",children:[E.jsx("h3",{className:"asg32-title",children:"Drag and Drop Element to Reorder Them"}),E.jsx("div",{className:"asg32-items-list",children:t.map((c,f)=>E.jsxs("div",{className:"asg32-item-wrapper",children:[E.jsx("div",{className:`drop-indicator ${e.index===f&&e.position==="top"?"active":""}`}),E.jsx("div",{className:"asg32-items",draggable:"true",style:{backgroundColor:c.color},onDragStart:h=>a(h,f),onDragOver:h=>o(h,f),onDragLeave:s,onDrop:h=>l(h,f),children:c.text}),E.jsx("div",{className:`drop-indicator ${e.index===f&&e.position==="bottom"?"active":""}`})]},f))})]})]})}function OH(){const t=Qg(),{isAuthenticated:n,success:e}=Zg(v=>v.auth),a=localStorage.getItem("authToken")||sessionStorage.getItem("authToken"),{data:o,error:s,isLoading:l,refetch:c}=FO(a,{skip:!a});L.useEffect(()=>{a&&o?(t(Jm("You are already logged in.")),t(f2({user:o,token:a,isAuthenticated:!0}))):s?(localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),t(ev())):a||t(ev())},[a,o,s,t]),L.useEffect(()=>{if(e){const v=setTimeout(()=>t(GO()),5e3);return()=>clearTimeout(v)}},[e,t]);const f=(v,g,y)=>{y?localStorage.setItem("authToken",g):sessionStorage.setItem("authToken",g),t(Jm("You have logged in!")),t(f2({user:v,token:g,isAuthenticated:!0}))},h=v=>{t(Uf(v)),c()},p=()=>{localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),t(Jm("You are logged out.")),t(ev())};return E.jsxs(E.Fragment,{children:[E.jsx(nt,{disabled:l}),E.jsx("h1",{className:"asg33-assignment-title",children:"Assignment - 33"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsx("div",{className:"asg33-login-container",children:n?o?E.jsx(Wl,{user:o,onUserUpdate:h,loading:l,disabled:l,onLoggedOut:p}):null:E.jsx(Ll,{onLoginSuccess:f,success:e,loading:l,disabled:l})})]})}function MH(){const t=L.useRef(null),n=L.useRef(null),e=L.useRef(null),r=L.useRef(null),a=L.useRef(null),[o,s]=L.useState(new Array(64).fill(0)),l=()=>{(!t.current||t.current.state==="closed")&&(t.current=new(window.AudioContext||window.webkitAudioContext),n.current=t.current.createAnalyser(),n.current.fftSize=128,n.current.smoothingTimeConstant=.3,n.current.minDecibels=-90,n.current.maxDecibels=-10,n.current.connect(t.current.destination))},c=()=>{l(),t.current.state==="suspended"&&t.current.resume(),!r.current&&e.current&&(r.current=t.current.createMediaElementSource(e.current),r.current.connect(n.current)),f()},f=()=>{const h=new Uint8Array(64),p=()=>{n.current&&(n.current.getByteFrequencyData(h),s([...h])),a.current=requestAnimationFrame(p)};p()};return L.useEffect(()=>{const h=setTimeout(()=>{e.current&&e.current.play().catch(p=>{console.log("Autoplay prevented:",p)})},100);return()=>{clearTimeout(h),a.current&&cancelAnimationFrame(a.current),t.current&&t.current.state!=="closed"&&t.current.close()}},[]),E.jsxs(E.Fragment,{children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-34"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsxs("div",{children:[E.jsx("h2",{children:"AudioContext - Music Visualizer"}),E.jsxs("div",{className:"asg34-container",children:[E.jsx("div",{className:"wave-container",children:o.map((h,p)=>{const g=Math.pow(h/255,.7),y=Math.max(g*150*1.5,3);return E.jsx("div",{className:"wave-bar",style:{height:`${y}px`,backgroundColor:`hsl(${h/255*360}, 70%, 50%)`}},p)})}),E.jsx("audio",{ref:e,className:"asg34-audio",src:"./audio.mp3",controls:!0,autoPlay:!0,loop:!0,onPlay:c,onError:h=>console.log("Audio load error:",h),crossOrigin:"anonymous"})]})]})]})}function IH(){const[t,n]=L.useState(null),e=()=>{const s=document.createElement("input");s.type="file",s.accept="image/*",s.onchange=l=>{const c=l.target.files[0];if(c){const f=new FileReader;f.onload=h=>{n(h.target.result)},f.readAsDataURL(c)}},s.click()},r=s=>{s.preventDefault();const l=s.dataTransfer.files[0];if(l&&l.type.startsWith("image/")){const c=new FileReader;c.onload=f=>{n(f.target.result)},c.readAsDataURL(l)}},a=s=>{s.preventDefault()},o=s=>{const l=s.clipboardData.items;for(let c=0;c<l.length;c++)if(l[c].type.indexOf("image")!==-1){const f=l[c].getAsFile(),h=new FileReader;h.onload=p=>{n(p.target.result)},h.readAsDataURL(f);break}};return L.useEffect(()=>()=>{},[]),E.jsxs("div",{className:"asg35-body",children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-35"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsx("div",{className:"asg35-container",children:t?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"asg35-image-preview",children:E.jsx("img",{src:t,alt:"Uploaded",className:"asg35-uploaded-image"})}),E.jsxs("div",{children:[E.jsx("button",{className:"asg35-button",onClick:e,children:"Upload Another Image"}),E.jsx("button",{className:"asg35-button asg35-button-spacing",onClick:()=>n(null),children:"Clear Image"})]})]}):E.jsxs("div",{className:"asg35-drop-area",onDragOver:a,onDrop:r,onPaste:o,tabIndex:0,children:[E.jsx("h2",{className:"asg35-heading",children:"Drag and Drop or Paste Image here..."}),E.jsx("div",{children:E.jsx("button",{className:"asg35-button",onClick:e,children:"Upload an Image"})})]})})]})}function BH(){const[t,n]=L.useState({}),[e,r]=L.useState(80),[a,o]=L.useState(null),[s,l]=L.useState(null),[c,f]=L.useState([]),[h,p]=L.useState(!1),v=L.useRef(null),g=L.useRef(null),y=T=>{const A=g.current.getBoundingClientRect(),C={x:T.clientX-A.left,y:T.clientY-A.top,id:crypto.randomUUID()};n(C)},x=(T,A,C)=>{const R=document.createElement("canvas"),k=R.getContext("2d"),N=v.current,O=g.current;if(!N||!O)return null;R.width=C,R.height=C;const D=N.getBoundingClientRect(),M=O.getBoundingClientRect(),P=T-(D.left-M.left),F=A-(D.top-M.top),U=N.naturalWidth/D.width,W=N.naturalHeight/D.height,Y=(P-C/2)*U,z=(F-C/2)*W,X=C*U,K=C*W;return k.drawImage(N,Y,z,X,K,0,0,C,C),R.toDataURL()},S=T=>{if(t.x&&t.y)if(a&&s){const A={x:t.x,y:t.y,size:e,image:s,id:crypto.randomUUID()};f(C=>[...C,A])}else{const A=x(t.x,t.y,e);o({x:t.x,y:t.y,size:e,originalImage:A}),l(A),p(!0)}},w=()=>{o(null),l(null),f([]),p(!1),n({})};return E.jsxs("div",{className:"asg36",children:[E.jsx(nt,{}),E.jsx("h1",{className:"assignment-title",children:"Assignment-36"}),E.jsx("hr",{}),E.jsx("br",{}),E.jsxs("div",{children:[E.jsx("input",{className:"range-selection",type:"range",max:"120",min:"40",value:e,onChange:T=>r(T.target.value)}),E.jsx("button",{className:"range-button",onClick:w,children:"Reset Origin"})]}),E.jsxs("div",{ref:g,className:"picture-box",onMouseMove:y,onMouseDown:S,children:[E.jsx("img",{ref:v,src:"./asg36.png",alt:"asg36"}),t.x&&!h&&E.jsx("div",{className:"picture-frame hover-frame",style:{left:t.x+"px",top:t.y+"px",width:e+"px",height:e+"px"}}),a&&E.jsx("div",{className:"picture-frame selected-area",style:{left:a.x+"px",top:a.y+"px",width:a.size+"px",height:a.size+"px",backgroundImage:`url(${a.originalImage})`,backgroundSize:"cover",backgroundPosition:"center"}}),c.map(T=>E.jsx("div",{className:"picture-frame placed-frame",style:{left:T.x+"px",top:T.y+"px",width:T.size+"px",height:T.size+"px",backgroundImage:`url(${T.image})`,backgroundSize:"cover",backgroundPosition:"center"}},T.id)),s&&t.x&&E.jsx("div",{className:"picture-frame captured-frame",style:{left:t.x+"px",top:t.y+"px",width:e+"px",height:e+"px",backgroundImage:`url(${s})`,backgroundSize:"cover",backgroundPosition:"center"}})]})]})}uN.createRoot(document.getElementById("root")).render(E.jsx(L.StrictMode,{children:E.jsx(G3,{store:YO,children:E.jsx(E3,{children:E.jsxs(JN,{children:[E.jsx(Qe,{path:"/",element:E.jsx(KO,{})}),E.jsx(Qe,{path:"/asg-1",element:E.jsx($O,{})}),E.jsx(Qe,{path:"/asg-2",element:E.jsx(QO,{})}),E.jsx(Qe,{path:"/asg-3",element:E.jsx(ZO,{})}),E.jsx(Qe,{path:"/asg-4",element:E.jsx(JO,{})}),E.jsx(Qe,{path:"/asg-5",element:E.jsx(eM,{})}),E.jsx(Qe,{path:"/asg-6",element:E.jsx(tM,{})}),E.jsx(Qe,{path:"/asg-7",element:E.jsx(OI,{})}),E.jsx(Qe,{path:"/asg-8",element:E.jsx(MI,{})}),E.jsx(Qe,{path:"/asg-9",element:E.jsx(II,{})}),E.jsx(Qe,{path:"/asg-10",element:E.jsx(BI,{})}),E.jsx(Qe,{path:"/asg-11",element:E.jsx(FI,{})}),E.jsx(Qe,{path:"/asg-12",element:E.jsx(PI,{})}),E.jsx(Qe,{path:"/asg-13",element:E.jsx(AF,{})}),E.jsx(Qe,{path:"/asg-14",element:E.jsx(TF,{})}),E.jsx(Qe,{path:"/asg-15",element:E.jsx(kF,{})}),E.jsx(Qe,{path:"/asg-16",element:E.jsx(NF,{})}),E.jsx(Qe,{path:"/asg-17",element:E.jsx(DF,{})}),E.jsx(Qe,{path:"/asg-18",element:E.jsx(OF,{})}),E.jsx(Qe,{path:"/asg-19",element:E.jsx(MF,{})}),E.jsx(Qe,{path:"/asg-20",element:E.jsx(IF,{})}),E.jsx(Qe,{path:"/asg-21",element:E.jsx(BF,{})}),E.jsx(Qe,{path:"/asg-22",element:E.jsx(FF,{})}),E.jsx(Qe,{path:"/asg-23",element:E.jsx(nP,{})}),E.jsx(Qe,{path:"/asg-24",element:E.jsx(rP,{})}),E.jsx(Qe,{path:"/asg-25",element:E.jsx(aP,{})}),E.jsx(Qe,{path:"/asg-26",element:E.jsx(oP,{})}),E.jsx(Qe,{path:"/asg-27",element:E.jsx(iP,{})}),E.jsx(Qe,{path:"/asg-28",element:E.jsx(sP,{})}),E.jsx(Qe,{path:"/asg-29",element:E.jsx(TH,{})}),E.jsx(Qe,{path:"/asg-30",element:E.jsx(kH,{})}),E.jsx(Qe,{path:"/asg-31",element:E.jsx(NH,{})}),E.jsx(Qe,{path:"/asg-32",element:E.jsx(DH,{})}),E.jsx(Qe,{path:"/asg-33",element:E.jsx(OH,{})}),E.jsx(Qe,{path:"/asg-34",element:E.jsx(MH,{})}),E.jsx(Qe,{path:"/asg-35",element:E.jsx(IH,{})}),E.jsx(Qe,{path:"/asg-36",element:E.jsx(BH,{})})]})})})}))});export default FH();
